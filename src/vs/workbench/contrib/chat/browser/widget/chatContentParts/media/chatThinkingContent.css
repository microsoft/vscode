/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.interactive-session .interactive-response .chat-used-context-list.chat-thinking-items {
	color: var(--vscode-descriptionForeground);
	padding-top: 0;
}

.interactive-session .interactive-response .value .chat-thinking-box {
	outline: none;
	position: relative;
	color: var(--vscode-descriptionForeground);

	.chat-used-context {
		margin: 0px;
	}

	.monaco-button.hidden,
	.chat-pinned-preview.hidden {
		display: none;
	}

	.chat-used-context-list.chat-thinking-collapsible {
		border: 1px solid var(--vscode-chat-requestBorder);
		border-radius: 4px;
		margin-bottom: 0;
		position: relative;
		overflow: hidden;

		.chat-tool-invocation-part {
			padding: 4px 12px 4px 18px;
			position: relative;

			.chat-used-context {
				margin-bottom: 0px;
				margin-left: 2px;
				padding-left: 2px;
			}

			.progress-container, .chat-confirmation-widget-container {
				margin: 0 0 2px 6px;
			}

			.codicon:not(.chat-thinking-icon) {
				display: none;
			}

			.chat-terminal-thinking-content {
				overflow: hidden;
				padding: 10px 10px 10px 2px;

				.codicon:not(.codicon-check) {
						display: inline-flex;
				}
			}

			.chat-terminal-thinking-collapsible {
				display: flex;
				flex-direction: column;
				width: 100%;
				margin: 1px 0 0 4px;

				.chat-used-context-list.chat-terminal-thinking-content {
					border: none;
					padding: 0;
					margin-bottom: 2px;

					.progress-container {
						margin: 0;
					}
				}

				.chat-terminal-thinking-content .rendered-markdown [data-code] {
					margin-bottom: 0px;
				}
			}
		}

		.chat-thinking-item.markdown-content {
			padding: 6px 12px 6px 24px;
			position: relative;
			font-size: var(--vscode-chat-font-size-body-s);

			.progress-container {
				margin-bottom: 0px;
				padding-top: 0px;
			}

			[data-code] {
				background-color: var(--vscode-textPreformat-background);
				padding: 1px 3px;
				border-radius: 4px;
				border: 1px solid var(--vscode-textPreformat-border);
				white-space: pre-wrap;
			}
		}

		.chat-thinking-tool-wrapper .chat-markdown-part.rendered-markdown {
			padding: 5px 12px 4px 20px;

			.status-icon.codicon-check {
				display: none;
			}

			.code:has(.chat-codeblock-pill-container) {
				margin-bottom: 0px;

				.chat-codeblock-pill-container {
					margin-bottom: 0px;
				}
			}
		}

		.chat-thinking-tool-wrapper .chat-terminal-thinking-content .chat-markdown-part.rendered-markdown {
			padding: 0;
		}

		/* chain of thought lines */
		.chat-thinking-tool-wrapper,
		.chat-thinking-item.markdown-content {
			position: relative;

			&::before {
				content: '';
				position: absolute;
				left: 10.5px;
				top: 0px;
				bottom: 0px;
				width: 1px;
				border-radius: 0;
				background-color: var(--vscode-chat-requestBorder);
				mask-image: linear-gradient(to bottom, #000 0 5px, transparent 5px 25px, #000 24px 100%);
			}

			&:first-child::before {
				mask-image: linear-gradient(to bottom, transparent 0 25px, #000 25px 100%);
			}

			&:last-child::before {
				mask-image: linear-gradient(to bottom, #000 0 5px, transparent 5px 100%);
			}

			&:only-child::before {
				background: none;
				mask-image: none;
			}

			> .chat-thinking-icon {
				position: absolute;
				left: 5px;
				top: 9px;
				width: 12px;
				height: 12px;
				font-size: 12px;
				line-height: 12px;
				text-align: center;
				color: var(--vscode-descriptionForeground);
			}

			/* the default book icon has a pixel of space at the bottom */
			> .chat-thinking-icon .codicon.codicon-book {
				top: 10px;
			}

		}
	}

	.chat-thinking-item {
		padding: 6px 12px;
		position: relative;

		.progress-container {
			margin-bottom: 0px;
			padding-top: 0px;
		}
	}

	.chat-thinking-text {
		font-size: var(--vscode-chat-font-size-body-s);
		padding: 0 10px;
		display: block;
	}

	.rendered-markdown > p {
		margin: 0;
	}
}

.interactive-session .interactive-response .value .chat-thinking-fixed-mode {
	outline: none;

	&.chat-used-context-collapsed .chat-used-context-list.chat-thinking-collapsible.chat-thinking-streaming {
		max-height: 200px;
		overflow: hidden;
		display: block;
	}

	&:not(.chat-used-context-collapsed) .chat-used-context-list.chat-thinking-collapsible.chat-thinking-streaming {
		max-height: none;
		overflow: visible;
		display: block;
	}

	.chat-used-context-list.chat-thinking-collapsible:not(.chat-thinking-streaming) {
		max-height: none;
		overflow: visible;
	}
}

.editor-instance .interactive-session .interactive-response .value .chat-thinking-box .chat-thinking-item ::before {
	background: var(--vscode-editor-background);
}

.interactive-session .interactive-response .value .chat-thinking-box .chat-used-context-label code {
	display: inline;
	line-height: inherit;
	padding: 0 4px;
}
