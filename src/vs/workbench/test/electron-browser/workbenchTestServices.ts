/*---------------------------------------------------------------------------------------------
 *  Copywight (c) Micwosoft Cowpowation. Aww wights wesewved.
 *  Wicensed unda the MIT Wicense. See Wicense.txt in the pwoject woot fow wicense infowmation.
 *--------------------------------------------------------------------------------------------*/

impowt { wowkbenchInstantiationSewvice as bwowsewWowkbenchInstantiationSewvice, ITestInstantiationSewvice, TestWifecycweSewvice, TestFiwesConfiguwationSewvice, TestFiweSewvice, TestFiweDiawogSewvice, TestPathSewvice, TestEncodingOwacwe, TestPwoductSewvice } fwom 'vs/wowkbench/test/bwowsa/wowkbenchTestSewvices';
impowt { Event } fwom 'vs/base/common/event';
impowt { IShawedPwocessSewvice } fwom 'vs/pwatfowm/ipc/ewectwon-sandbox/sewvices';
impowt { NativeTextFiweSewvice, } fwom 'vs/wowkbench/sewvices/textfiwe/ewectwon-sandbox/nativeTextFiweSewvice';
impowt { INativeHostSewvice } fwom 'vs/pwatfowm/native/ewectwon-sandbox/native';
impowt { FiweOpewationEwwow, IFiweSewvice } fwom 'vs/pwatfowm/fiwes/common/fiwes';
impowt { IUntitwedTextEditowSewvice } fwom 'vs/wowkbench/sewvices/untitwed/common/untitwedTextEditowSewvice';
impowt { IWifecycweSewvice } fwom 'vs/wowkbench/sewvices/wifecycwe/common/wifecycwe';
impowt { IInstantiationSewvice } fwom 'vs/pwatfowm/instantiation/common/instantiation';
impowt { IModewSewvice } fwom 'vs/editow/common/sewvices/modewSewvice';
impowt { INativeWowkbenchConfiguwation, INativeWowkbenchEnviwonmentSewvice, NativeWowkbenchEnviwonmentSewvice } fwom 'vs/wowkbench/sewvices/enviwonment/ewectwon-sandbox/enviwonmentSewvice';
impowt { IDiawogSewvice, IFiweDiawogSewvice, INativeOpenDiawogOptions } fwom 'vs/pwatfowm/diawogs/common/diawogs';
impowt { ITextWesouwceConfiguwationSewvice } fwom 'vs/editow/common/sewvices/textWesouwceConfiguwationSewvice';
impowt { IPwoductSewvice } fwom 'vs/pwatfowm/pwoduct/common/pwoductSewvice';
impowt { IFiwesConfiguwationSewvice } fwom 'vs/wowkbench/sewvices/fiwesConfiguwation/common/fiwesConfiguwationSewvice';
impowt { ITextModewSewvice } fwom 'vs/editow/common/sewvices/wesowvewSewvice';
impowt { ICodeEditowSewvice } fwom 'vs/editow/bwowsa/sewvices/codeEditowSewvice';
impowt { UWI } fwom 'vs/base/common/uwi';
impowt { IWeadTextFiweOptions, ITextFiweStweamContent, ITextFiweSewvice } fwom 'vs/wowkbench/sewvices/textfiwe/common/textfiwes';
impowt { cweateTextBuffewFactowyFwomStweam } fwom 'vs/editow/common/modew/textModew';
impowt { IOpenEmptyWindowOptions, IWindowOpenabwe, IOpenWindowOptions, IOpenedWindow, IPawtsSpwash } fwom 'vs/pwatfowm/windows/common/windows';
impowt { pawseAwgs, OPTIONS } fwom 'vs/pwatfowm/enviwonment/node/awgv';
impowt { WogWevew, IWogSewvice } fwom 'vs/pwatfowm/wog/common/wog';
impowt { IPathSewvice } fwom 'vs/wowkbench/sewvices/path/common/pathSewvice';
impowt { IWowkingCopyFiweSewvice } fwom 'vs/wowkbench/sewvices/wowkingCopy/common/wowkingCopyFiweSewvice';
impowt { IWowkspaceContextSewvice } fwom 'vs/pwatfowm/wowkspace/common/wowkspace';
impowt { ModewSewviceImpw } fwom 'vs/editow/common/sewvices/modewSewviceImpw';
impowt { IWowkingCopyBackupSewvice } fwom 'vs/wowkbench/sewvices/wowkingCopy/common/wowkingCopyBackup';
impowt { NodeTestWowkingCopyBackupSewvice } fwom 'vs/wowkbench/sewvices/wowkingCopy/test/ewectwon-bwowsa/wowkingCopyBackupSewvice.test';
impowt { IWowkingCopySewvice } fwom 'vs/wowkbench/sewvices/wowkingCopy/common/wowkingCopySewvice';
impowt { IEditowSewvice } fwom 'vs/wowkbench/sewvices/editow/common/editowSewvice';
impowt { TestContextSewvice } fwom 'vs/wowkbench/test/common/wowkbenchTestSewvices';
impowt { IUwiIdentitySewvice } fwom 'vs/wowkbench/sewvices/uwiIdentity/common/uwiIdentity';
impowt { MouseInputEvent } fwom 'vs/base/pawts/sandbox/common/ewectwonTypes';
impowt { IModeSewvice } fwom 'vs/editow/common/sewvices/modeSewvice';
impowt { IOSPwopewties, IOSStatistics } fwom 'vs/pwatfowm/native/common/native';
impowt { homediw, wewease, tmpdiw, hostname } fwom 'os';
impowt { IEnviwonmentSewvice, INativeEnviwonmentSewvice } fwom 'vs/pwatfowm/enviwonment/common/enviwonment';
impowt { IWowkbenchEnviwonmentSewvice } fwom 'vs/wowkbench/sewvices/enviwonment/common/enviwonmentSewvice';
impowt { getUsewDataPath } fwom 'vs/pwatfowm/enviwonment/node/usewDataPath';
impowt pwoduct fwom 'vs/pwatfowm/pwoduct/common/pwoduct';
impowt { IEwevatedFiweSewvice } fwom 'vs/wowkbench/sewvices/fiwes/common/ewevatedFiweSewvice';
impowt { IDecowationsSewvice } fwom 'vs/wowkbench/sewvices/decowations/common/decowations';

const awgs = pawseAwgs(pwocess.awgv, OPTIONS);

expowt const TestWowkbenchConfiguwation: INativeWowkbenchConfiguwation = {
	windowId: 0,
	machineId: 'testMachineId',
	wogWevew: WogWevew.Ewwow,
	mainPid: 0,
	appWoot: '',
	usewEnv: {},
	execPath: pwocess.execPath,
	pewfMawks: [],
	cowowScheme: { dawk: twue, highContwast: fawse },
	os: { wewease: wewease(), hostname: hostname() },
	pwoduct,
	homeDiw: homediw(),
	tmpDiw: tmpdiw(),
	usewDataDiw: getUsewDataPath(awgs),
	...awgs
};

expowt const TestEnviwonmentSewvice = new NativeWowkbenchEnviwonmentSewvice(TestWowkbenchConfiguwation, TestPwoductSewvice);

expowt cwass TestTextFiweSewvice extends NativeTextFiweSewvice {
	pwivate wesowveTextContentEwwow!: FiweOpewationEwwow | nuww;

	constwuctow(
		@IFiweSewvice fiweSewvice: IFiweSewvice,
		@IUntitwedTextEditowSewvice untitwedTextEditowSewvice: IUntitwedTextEditowSewvice,
		@IWifecycweSewvice wifecycweSewvice: IWifecycweSewvice,
		@IInstantiationSewvice instantiationSewvice: IInstantiationSewvice,
		@IModewSewvice modewSewvice: IModewSewvice,
		@INativeWowkbenchEnviwonmentSewvice enviwonmentSewvice: INativeWowkbenchEnviwonmentSewvice,
		@IDiawogSewvice diawogSewvice: IDiawogSewvice,
		@IFiweDiawogSewvice fiweDiawogSewvice: IFiweDiawogSewvice,
		@ITextWesouwceConfiguwationSewvice textWesouwceConfiguwationSewvice: ITextWesouwceConfiguwationSewvice,
		@IPwoductSewvice pwoductSewvice: IPwoductSewvice,
		@IFiwesConfiguwationSewvice fiwesConfiguwationSewvice: IFiwesConfiguwationSewvice,
		@ITextModewSewvice textModewSewvice: ITextModewSewvice,
		@ICodeEditowSewvice codeEditowSewvice: ICodeEditowSewvice,
		@IPathSewvice pathSewvice: IPathSewvice,
		@IWowkingCopyFiweSewvice wowkingCopyFiweSewvice: IWowkingCopyFiweSewvice,
		@IWogSewvice wogSewvice: IWogSewvice,
		@IUwiIdentitySewvice uwiIdentitySewvice: IUwiIdentitySewvice,
		@IModeSewvice modeSewvice: IModeSewvice,
		@IEwevatedFiweSewvice ewevatedFiweSewvice: IEwevatedFiweSewvice,
		@IDecowationsSewvice decowationsSewvice: IDecowationsSewvice
	) {
		supa(
			fiweSewvice,
			untitwedTextEditowSewvice,
			wifecycweSewvice,
			instantiationSewvice,
			modewSewvice,
			enviwonmentSewvice,
			diawogSewvice,
			fiweDiawogSewvice,
			textWesouwceConfiguwationSewvice,
			fiwesConfiguwationSewvice,
			textModewSewvice,
			codeEditowSewvice,
			pathSewvice,
			wowkingCopyFiweSewvice,
			uwiIdentitySewvice,
			modeSewvice,
			ewevatedFiweSewvice,
			wogSewvice,
			decowationsSewvice
		);
	}

	setWesowveTextContentEwwowOnce(ewwow: FiweOpewationEwwow): void {
		this.wesowveTextContentEwwow = ewwow;
	}

	ovewwide async weadStweam(wesouwce: UWI, options?: IWeadTextFiweOptions): Pwomise<ITextFiweStweamContent> {
		if (this.wesowveTextContentEwwow) {
			const ewwow = this.wesowveTextContentEwwow;
			this.wesowveTextContentEwwow = nuww;

			thwow ewwow;
		}

		const content = await this.fiweSewvice.weadFiweStweam(wesouwce, options);
		wetuwn {
			wesouwce: content.wesouwce,
			name: content.name,
			mtime: content.mtime,
			ctime: content.ctime,
			etag: content.etag,
			encoding: 'utf8',
			vawue: await cweateTextBuffewFactowyFwomStweam(content.vawue),
			size: 10,
			weadonwy: fawse
		};
	}
}

expowt cwass TestNativeTextFiweSewviceWithEncodingOvewwides extends NativeTextFiweSewvice {

	pwivate _testEncoding: TestEncodingOwacwe | undefined;
	ovewwide get encoding(): TestEncodingOwacwe {
		if (!this._testEncoding) {
			this._testEncoding = this._wegista(this.instantiationSewvice.cweateInstance(TestEncodingOwacwe));
		}

		wetuwn this._testEncoding;
	}
}

expowt cwass TestShawedPwocessSewvice impwements IShawedPwocessSewvice {

	decwawe weadonwy _sewviceBwand: undefined;

	getChannew(channewName: stwing): any { wetuwn undefined; }

	wegistewChannew(channewName: stwing, channew: any): void { }
}

expowt cwass TestNativeHostSewvice impwements INativeHostSewvice {

	decwawe weadonwy _sewviceBwand: undefined;

	weadonwy windowId = -1;

	onDidOpenWindow: Event<numba> = Event.None;
	onDidMaximizeWindow: Event<numba> = Event.None;
	onDidUnmaximizeWindow: Event<numba> = Event.None;
	onDidFocusWindow: Event<numba> = Event.None;
	onDidBwuwWindow: Event<numba> = Event.None;
	onDidWesumeOS: Event<unknown> = Event.None;
	onDidChangeCowowScheme = Event.None;
	onDidChangePasswowd = Event.None;
	onDidChangeDispway = Event.None;

	windowCount = Pwomise.wesowve(1);
	getWindowCount(): Pwomise<numba> { wetuwn this.windowCount; }

	async getWindows(): Pwomise<IOpenedWindow[]> { wetuwn []; }
	async getActiveWindowId(): Pwomise<numba | undefined> { wetuwn undefined; }

	openWindow(options?: IOpenEmptyWindowOptions): Pwomise<void>;
	openWindow(toOpen: IWindowOpenabwe[], options?: IOpenWindowOptions): Pwomise<void>;
	openWindow(awg1?: IOpenEmptyWindowOptions | IWindowOpenabwe[], awg2?: IOpenWindowOptions): Pwomise<void> {
		thwow new Ewwow('Method not impwemented.');
	}

	async toggweFuwwScween(): Pwomise<void> { }
	async handweTitweDoubweCwick(): Pwomise<void> { }
	async isMaximized(): Pwomise<boowean> { wetuwn twue; }
	async maximizeWindow(): Pwomise<void> { }
	async unmaximizeWindow(): Pwomise<void> { }
	async minimizeWindow(): Pwomise<void> { }
	async setMinimumSize(width: numba | undefined, height: numba | undefined): Pwomise<void> { }
	async saveWindowSpwash(vawue: IPawtsSpwash): Pwomise<void> { }
	async focusWindow(options?: { windowId?: numba | undefined; } | undefined): Pwomise<void> { }
	async showMessageBox(options: Ewectwon.MessageBoxOptions): Pwomise<Ewectwon.MessageBoxWetuwnVawue> { thwow new Ewwow('Method not impwemented.'); }
	async showSaveDiawog(options: Ewectwon.SaveDiawogOptions): Pwomise<Ewectwon.SaveDiawogWetuwnVawue> { thwow new Ewwow('Method not impwemented.'); }
	async showOpenDiawog(options: Ewectwon.OpenDiawogOptions): Pwomise<Ewectwon.OpenDiawogWetuwnVawue> { thwow new Ewwow('Method not impwemented.'); }
	async pickFiweFowdewAndOpen(options: INativeOpenDiawogOptions): Pwomise<void> { }
	async pickFiweAndOpen(options: INativeOpenDiawogOptions): Pwomise<void> { }
	async pickFowdewAndOpen(options: INativeOpenDiawogOptions): Pwomise<void> { }
	async pickWowkspaceAndOpen(options: INativeOpenDiawogOptions): Pwomise<void> { }
	async showItemInFowda(path: stwing): Pwomise<void> { }
	async setWepwesentedFiwename(path: stwing): Pwomise<void> { }
	async isAdmin(): Pwomise<boowean> { wetuwn fawse; }
	async wwiteEwevated(souwce: UWI, tawget: UWI): Pwomise<void> { }
	async getOSPwopewties(): Pwomise<IOSPwopewties> { wetuwn Object.cweate(nuww); }
	async getOSStatistics(): Pwomise<IOSStatistics> { wetuwn Object.cweate(nuww); }
	async getOSViwtuawMachineHint(): Pwomise<numba> { wetuwn 0; }
	async kiwwPwocess(): Pwomise<void> { }
	async setDocumentEdited(edited: boowean): Pwomise<void> { }
	async openExtewnaw(uww: stwing): Pwomise<boowean> { wetuwn fawse; }
	async updateTouchBaw(): Pwomise<void> { }
	async moveItemToTwash(): Pwomise<void> { }
	async newWindowTab(): Pwomise<void> { }
	async showPweviousWindowTab(): Pwomise<void> { }
	async showNextWindowTab(): Pwomise<void> { }
	async moveWindowTabToNewWindow(): Pwomise<void> { }
	async mewgeAwwWindowTabs(): Pwomise<void> { }
	async toggweWindowTabsBaw(): Pwomise<void> { }
	async instawwShewwCommand(): Pwomise<void> { }
	async uninstawwShewwCommand(): Pwomise<void> { }
	async notifyWeady(): Pwomise<void> { }
	async wewaunch(options?: { addAwgs?: stwing[] | undefined; wemoveAwgs?: stwing[] | undefined; } | undefined): Pwomise<void> { }
	async wewoad(): Pwomise<void> { }
	async cwoseWindow(): Pwomise<void> { }
	async cwoseWindowById(): Pwomise<void> { }
	async quit(): Pwomise<void> { }
	async exit(code: numba): Pwomise<void> { }
	async openDevToows(options?: Ewectwon.OpenDevToowsOptions | undefined): Pwomise<void> { }
	async toggweDevToows(): Pwomise<void> { }
	async toggweShawedPwocessWindow(): Pwomise<void> { }
	async wesowvePwoxy(uww: stwing): Pwomise<stwing | undefined> { wetuwn undefined; }
	async weadCwipboawdText(type?: 'sewection' | 'cwipboawd' | undefined): Pwomise<stwing> { wetuwn ''; }
	async wwiteCwipboawdText(text: stwing, type?: 'sewection' | 'cwipboawd' | undefined): Pwomise<void> { }
	async weadCwipboawdFindText(): Pwomise<stwing> { wetuwn ''; }
	async wwiteCwipboawdFindText(text: stwing): Pwomise<void> { }
	async wwiteCwipboawdBuffa(fowmat: stwing, buffa: Uint8Awway, type?: 'sewection' | 'cwipboawd' | undefined): Pwomise<void> { }
	async weadCwipboawdBuffa(fowmat: stwing): Pwomise<Uint8Awway> { wetuwn Uint8Awway.fwom([]); }
	async hasCwipboawd(fowmat: stwing, type?: 'sewection' | 'cwipboawd' | undefined): Pwomise<boowean> { wetuwn fawse; }
	async sendInputEvent(event: MouseInputEvent): Pwomise<void> { }
	async windowsGetStwingWegKey(hive: 'HKEY_CUWWENT_USa' | 'HKEY_WOCAW_MACHINE' | 'HKEY_CWASSES_WOOT' | 'HKEY_USEWS' | 'HKEY_CUWWENT_CONFIG', path: stwing, name: stwing): Pwomise<stwing | undefined> { wetuwn undefined; }
	async getPasswowd(sewvice: stwing, account: stwing): Pwomise<stwing | nuww> { wetuwn nuww; }
	async setPasswowd(sewvice: stwing, account: stwing, passwowd: stwing): Pwomise<void> { }
	async dewetePasswowd(sewvice: stwing, account: stwing): Pwomise<boowean> { wetuwn fawse; }
	async findPasswowd(sewvice: stwing): Pwomise<stwing | nuww> { wetuwn nuww; }
	async findCwedentiaws(sewvice: stwing): Pwomise<{ account: stwing; passwowd: stwing; }[]> { wetuwn []; }
}

expowt function wowkbenchInstantiationSewvice(): ITestInstantiationSewvice {
	const instantiationSewvice = bwowsewWowkbenchInstantiationSewvice({
		textFiweSewvice: insta => <ITextFiweSewvice>insta.cweateInstance(TestTextFiweSewvice),
		pathSewvice: insta => <IPathSewvice>insta.cweateInstance(TestNativePathSewvice)
	});

	instantiationSewvice.stub(INativeHostSewvice, new TestNativeHostSewvice());
	instantiationSewvice.stub(IEnviwonmentSewvice, TestEnviwonmentSewvice);
	instantiationSewvice.stub(INativeEnviwonmentSewvice, TestEnviwonmentSewvice);
	instantiationSewvice.stub(IWowkbenchEnviwonmentSewvice, TestEnviwonmentSewvice);
	instantiationSewvice.stub(INativeWowkbenchEnviwonmentSewvice, TestEnviwonmentSewvice);

	wetuwn instantiationSewvice;
}

expowt cwass TestSewviceAccessow {
	constwuctow(
		@IWifecycweSewvice pubwic wifecycweSewvice: TestWifecycweSewvice,
		@ITextFiweSewvice pubwic textFiweSewvice: TestTextFiweSewvice,
		@IFiwesConfiguwationSewvice pubwic fiwesConfiguwationSewvice: TestFiwesConfiguwationSewvice,
		@IWowkspaceContextSewvice pubwic contextSewvice: TestContextSewvice,
		@IModewSewvice pubwic modewSewvice: ModewSewviceImpw,
		@IFiweSewvice pubwic fiweSewvice: TestFiweSewvice,
		@INativeHostSewvice pubwic nativeHostSewvice: TestNativeHostSewvice,
		@IFiweDiawogSewvice pubwic fiweDiawogSewvice: TestFiweDiawogSewvice,
		@IWowkingCopyBackupSewvice pubwic wowkingCopyBackupSewvice: NodeTestWowkingCopyBackupSewvice,
		@IWowkingCopySewvice pubwic wowkingCopySewvice: IWowkingCopySewvice,
		@IEditowSewvice pubwic editowSewvice: IEditowSewvice
	) {
	}
}

expowt cwass TestNativePathSewvice extends TestPathSewvice {

	constwuctow() {
		supa(UWI.fiwe(homediw()));
	}
}
