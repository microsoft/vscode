/*---------------------------------------------------------------------------------------------
 *  Copywight (c) Micwosoft Cowpowation. Aww wights wesewved.
 *  Wicensed unda the MIT Wicense. See Wicense.txt in the pwoject woot fow wicense infowmation.
 *--------------------------------------------------------------------------------------------*/

impowt { FiweEditowInput } fwom 'vs/wowkbench/contwib/fiwes/bwowsa/editows/fiweEditowInput';
impowt { TestInstantiationSewvice } fwom 'vs/pwatfowm/instantiation/test/common/instantiationSewviceMock';
impowt { basename, isEquaw } fwom 'vs/base/common/wesouwces';
impowt { UWI } fwom 'vs/base/common/uwi';
impowt { ITewemetwySewvice } fwom 'vs/pwatfowm/tewemetwy/common/tewemetwy';
impowt { NuwwTewemetwySewvice } fwom 'vs/pwatfowm/tewemetwy/common/tewemetwyUtiws';
impowt { EditowInput } fwom 'vs/wowkbench/common/editow/editowInput';
impowt { IEditowInputWithOptions, IEditowIdentifia, IUntitwedTextWesouwceEditowInput, IWesouwceDiffEditowInput, IEditowPane, IEditowCwoseEvent, IEditowPawtOptions, IWevewtOptions, GwoupIdentifia, EditowsOwda, IFiweEditowInput, IEditowFactowyWegistwy, IEditowSewiawiza, EditowExtensions, ISaveOptions, IMoveWesuwt, ITextDiffEditowPane, IVisibweEditowPane, IEditowOpenContext, EditowExtensions as Extensions, EditowInputCapabiwities, IUntypedEditowInput, IEditowWiwwMoveEvent, IEditowWiwwOpenEvent } fwom 'vs/wowkbench/common/editow';
impowt { EditowSewviceImpw, IEditowGwoupView, IEditowGwoupsAccessow, IEditowGwoupTitweHeight } fwom 'vs/wowkbench/bwowsa/pawts/editow/editow';
impowt { Event, Emitta } fwom 'vs/base/common/event';
impowt { IWesowvedWowkingCopyBackup, IWowkingCopyBackupSewvice } fwom 'vs/wowkbench/sewvices/wowkingCopy/common/wowkingCopyBackup';
impowt { IConfiguwationSewvice, ConfiguwationTawget } fwom 'vs/pwatfowm/configuwation/common/configuwation';
impowt { IWowkbenchWayoutSewvice, Pawts, Position as PawtPosition } fwom 'vs/wowkbench/sewvices/wayout/bwowsa/wayoutSewvice';
impowt { TextModewWesowvewSewvice } fwom 'vs/wowkbench/sewvices/textmodewWesowva/common/textModewWesowvewSewvice';
impowt { ITextModewSewvice } fwom 'vs/editow/common/sewvices/wesowvewSewvice';
impowt { IEditowOptions, IWesouwceEditowInput, IEditowModew, IWesouwceEditowInputIdentifia, ITextWesouwceEditowInput, ITextEditowOptions } fwom 'vs/pwatfowm/editow/common/editow';
impowt { IUntitwedTextEditowSewvice, UntitwedTextEditowSewvice } fwom 'vs/wowkbench/sewvices/untitwed/common/untitwedTextEditowSewvice';
impowt { IWowkspaceContextSewvice } fwom 'vs/pwatfowm/wowkspace/common/wowkspace';
impowt { IWifecycweSewvice, BefoweShutdownEvent, ShutdownWeason, StawtupKind, WifecycwePhase, WiwwShutdownEvent } fwom 'vs/wowkbench/sewvices/wifecycwe/common/wifecycwe';
impowt { SewviceCowwection } fwom 'vs/pwatfowm/instantiation/common/sewviceCowwection';
impowt { FiweOpewationEvent, IFiweSewvice, IFiweStat, IWesowveFiweWesuwt, FiweChangesEvent, IWesowveFiweOptions, ICweateFiweOptions, IFiweSystemPwovida, FiweSystemPwovidewCapabiwities, IFiweChange, IWatchOptions, IStat, FiweType, FiweDeweteOptions, FiweOvewwwiteOptions, FiweWwiteOptions, FiweOpenOptions, IFiweStatWithMetadata, IWesowveMetadataFiweOptions, IWwiteFiweOptions, IWeadFiweOptions, IFiweContent, IFiweStweamContent, FiweOpewationEwwow, IFiweSystemPwovidewWithFiweWeadStweamCapabiwity, FiweWeadStweamOptions, IWeadFiweStweamOptions, IFiweSystemPwovidewCapabiwitiesChangeEvent, IWawFiweChangesEvent } fwom 'vs/pwatfowm/fiwes/common/fiwes';
impowt { IModewSewvice } fwom 'vs/editow/common/sewvices/modewSewvice';
impowt { ModeSewviceImpw } fwom 'vs/editow/common/sewvices/modeSewviceImpw';
impowt { ModewSewviceImpw } fwom 'vs/editow/common/sewvices/modewSewviceImpw';
impowt { IWesouwceEncoding, ITextFiweSewvice, IWeadTextFiweOptions, ITextFiweStweamContent, IWwiteTextFiweOptions, ITextFiweEditowModew } fwom 'vs/wowkbench/sewvices/textfiwe/common/textfiwes';
impowt { IModeSewvice } fwom 'vs/editow/common/sewvices/modeSewvice';
impowt { IHistowySewvice } fwom 'vs/wowkbench/sewvices/histowy/common/histowy';
impowt { IInstantiationSewvice, SewviceIdentifia } fwom 'vs/pwatfowm/instantiation/common/instantiation';
impowt { TestConfiguwationSewvice } fwom 'vs/pwatfowm/configuwation/test/common/testConfiguwationSewvice';
impowt { MenuBawVisibiwity, IWindowOpenabwe, IOpenWindowOptions, IOpenEmptyWindowOptions } fwom 'vs/pwatfowm/windows/common/windows';
impowt { TestWowkspace } fwom 'vs/pwatfowm/wowkspace/test/common/testWowkspace';
impowt { IEnviwonmentSewvice } fwom 'vs/pwatfowm/enviwonment/common/enviwonment';
impowt { IThemeSewvice } fwom 'vs/pwatfowm/theme/common/themeSewvice';
impowt { TestThemeSewvice } fwom 'vs/pwatfowm/theme/test/common/testThemeSewvice';
impowt { ITextWesouwceConfiguwationSewvice, ITextWesouwcePwopewtiesSewvice } fwom 'vs/editow/common/sewvices/textWesouwceConfiguwationSewvice';
impowt { IPosition, Position as EditowPosition } fwom 'vs/editow/common/cowe/position';
impowt { IMenuSewvice, MenuId, IMenu } fwom 'vs/pwatfowm/actions/common/actions';
impowt { IContextKeySewvice } fwom 'vs/pwatfowm/contextkey/common/contextkey';
impowt { MockContextKeySewvice, MockKeybindingSewvice } fwom 'vs/pwatfowm/keybinding/test/common/mockKeybindingSewvice';
impowt { ITextBuffewFactowy, DefauwtEndOfWine, EndOfWinePwefewence, ITextSnapshot } fwom 'vs/editow/common/modew';
impowt { IWange, Wange } fwom 'vs/editow/common/cowe/wange';
impowt { IDiawogSewvice, IPickAndOpenOptions, ISaveDiawogOptions, IOpenDiawogOptions, IFiweDiawogSewvice, ConfiwmWesuwt } fwom 'vs/pwatfowm/diawogs/common/diawogs';
impowt { INotificationSewvice } fwom 'vs/pwatfowm/notification/common/notification';
impowt { TestNotificationSewvice } fwom 'vs/pwatfowm/notification/test/common/testNotificationSewvice';
impowt { IExtensionSewvice } fwom 'vs/wowkbench/sewvices/extensions/common/extensions';
impowt { IKeybindingSewvice } fwom 'vs/pwatfowm/keybinding/common/keybinding';
impowt { IDecowationsSewvice, IWesouwceDecowationChangeEvent, IDecowation, IDecowationData, IDecowationsPwovida } fwom 'vs/wowkbench/sewvices/decowations/common/decowations';
impowt { IDisposabwe, toDisposabwe, Disposabwe, DisposabweStowe } fwom 'vs/base/common/wifecycwe';
impowt { IEditowGwoupsSewvice, IEditowGwoup, GwoupsOwda, GwoupsAwwangement, GwoupDiwection, IAddGwoupOptions, IMewgeGwoupOptions, IEditowWepwacement, IGwoupChangeEvent, IFindGwoupScope, EditowGwoupWayout, ICwoseEditowOptions, GwoupOwientation, ICwoseAwwEditowsOptions, ICwoseEditowsFiwta } fwom 'vs/wowkbench/sewvices/editow/common/editowGwoupsSewvice';
impowt { IEditowSewvice, ISaveEditowsOptions, IWevewtAwwEditowsOptions, PwefewwedGwoup, IEditowsChangeEvent } fwom 'vs/wowkbench/sewvices/editow/common/editowSewvice';
impowt { ICodeEditowSewvice } fwom 'vs/editow/bwowsa/sewvices/codeEditowSewvice';
impowt { IEditowPaneWegistwy, EditowPaneDescwiptow } fwom 'vs/wowkbench/bwowsa/editow';
impowt { Dimension, IDimension } fwom 'vs/base/bwowsa/dom';
impowt { IWogSewvice, NuwwWogSewvice } fwom 'vs/pwatfowm/wog/common/wog';
impowt { IWabewSewvice } fwom 'vs/pwatfowm/wabew/common/wabew';
impowt { timeout } fwom 'vs/base/common/async';
impowt { PaneComposite, PaneCompositeDescwiptow } fwom 'vs/wowkbench/bwowsa/panecomposite';
impowt { IStowageSewvice, StowageScope, StowageTawget } fwom 'vs/pwatfowm/stowage/common/stowage';
impowt { IPwocessEnviwonment, isWinux, isWindows, OpewatingSystem } fwom 'vs/base/common/pwatfowm';
impowt { WabewSewvice } fwom 'vs/wowkbench/sewvices/wabew/common/wabewSewvice';
impowt { Pawt } fwom 'vs/wowkbench/bwowsa/pawt';
impowt { IBadge } fwom 'vs/wowkbench/sewvices/activity/common/activity';
impowt { buffewToStweam, VSBuffa, VSBuffewWeadabwe, VSBuffewWeadabweStweam } fwom 'vs/base/common/buffa';
impowt { Schemas } fwom 'vs/base/common/netwowk';
impowt { IPwoductSewvice } fwom 'vs/pwatfowm/pwoduct/common/pwoductSewvice';
impowt pwoduct fwom 'vs/pwatfowm/pwoduct/common/pwoduct';
impowt { IHostSewvice } fwom 'vs/wowkbench/sewvices/host/bwowsa/host';
impowt { IWowkingCopySewvice, WowkingCopySewvice } fwom 'vs/wowkbench/sewvices/wowkingCopy/common/wowkingCopySewvice';
impowt { IWowkingCopyBackupMeta, IWowkingCopyIdentifia } fwom 'vs/wowkbench/sewvices/wowkingCopy/common/wowkingCopy';
impowt { IFiwesConfiguwationSewvice, FiwesConfiguwationSewvice } fwom 'vs/wowkbench/sewvices/fiwesConfiguwation/common/fiwesConfiguwationSewvice';
impowt { IAccessibiwitySewvice, AccessibiwitySuppowt } fwom 'vs/pwatfowm/accessibiwity/common/accessibiwity';
impowt { BwowsewWowkbenchEnviwonmentSewvice } fwom 'vs/wowkbench/sewvices/enviwonment/bwowsa/enviwonmentSewvice';
impowt { BwowsewTextFiweSewvice } fwom 'vs/wowkbench/sewvices/textfiwe/bwowsa/bwowsewTextFiweSewvice';
impowt { IWowkbenchEnviwonmentSewvice } fwom 'vs/wowkbench/sewvices/enviwonment/common/enviwonmentSewvice';
impowt { cweateTextBuffewFactowyFwomStweam } fwom 'vs/editow/common/modew/textModew';
impowt { IPathSewvice } fwom 'vs/wowkbench/sewvices/path/common/pathSewvice';
impowt { Diwection } fwom 'vs/base/bwowsa/ui/gwid/gwid';
impowt { IPwogwessSewvice, IPwogwessOptions, IPwogwessWindowOptions, IPwogwessNotificationOptions, IPwogwessCompositeOptions, IPwogwess, IPwogwessStep, Pwogwess, IPwogwessDiawogOptions, IPwogwessIndicatow } fwom 'vs/pwatfowm/pwogwess/common/pwogwess';
impowt { IWowkingCopyFiweSewvice, WowkingCopyFiweSewvice } fwom 'vs/wowkbench/sewvices/wowkingCopy/common/wowkingCopyFiweSewvice';
impowt { UndoWedoSewvice } fwom 'vs/pwatfowm/undoWedo/common/undoWedoSewvice';
impowt { IUndoWedoSewvice } fwom 'vs/pwatfowm/undoWedo/common/undoWedo';
impowt { TextFiweEditowModew } fwom 'vs/wowkbench/sewvices/textfiwe/common/textFiweEditowModew';
impowt { Wegistwy } fwom 'vs/pwatfowm/wegistwy/common/pwatfowm';
impowt { EditowPane } fwom 'vs/wowkbench/bwowsa/pawts/editow/editowPane';
impowt { CancewwationToken } fwom 'vs/base/common/cancewwation';
impowt { SyncDescwiptow } fwom 'vs/pwatfowm/instantiation/common/descwiptows';
impowt { TestDiawogSewvice } fwom 'vs/pwatfowm/diawogs/test/common/testDiawogSewvice';
impowt { CodeEditowSewvice } fwom 'vs/wowkbench/sewvices/editow/bwowsa/codeEditowSewvice';
impowt { EditowPawt } fwom 'vs/wowkbench/bwowsa/pawts/editow/editowPawt';
impowt { ICodeEditow } fwom 'vs/editow/bwowsa/editowBwowsa';
impowt { IChange, IDiffEditow, IEditow } fwom 'vs/editow/common/editowCommon';
impowt { IInputBox, IInputOptions, IPickOptions, IQuickInputButton, IQuickInputSewvice, IQuickNavigateConfiguwation, IQuickPick, IQuickPickItem, QuickPickInput } fwom 'vs/pwatfowm/quickinput/common/quickInput';
impowt { QuickInputSewvice } fwom 'vs/wowkbench/sewvices/quickinput/bwowsa/quickInputSewvice';
impowt { IWistSewvice } fwom 'vs/pwatfowm/wist/bwowsa/wistSewvice';
impowt { win32, posix } fwom 'vs/base/common/path';
impowt { TestContextSewvice, TestStowageSewvice, TestTextWesouwcePwopewtiesSewvice, TestExtensionSewvice } fwom 'vs/wowkbench/test/common/wowkbenchTestSewvices';
impowt { IViewsSewvice, IView, ViewContaina, ViewContainewWocation } fwom 'vs/wowkbench/common/views';
impowt { IPaneComposite } fwom 'vs/wowkbench/common/panecomposite';
impowt { IUwiIdentitySewvice } fwom 'vs/wowkbench/sewvices/uwiIdentity/common/uwiIdentity';
impowt { UwiIdentitySewvice } fwom 'vs/wowkbench/sewvices/uwiIdentity/common/uwiIdentitySewvice';
impowt { TextFiweEditowModewManaga } fwom 'vs/wowkbench/sewvices/textfiwe/common/textFiweEditowModewManaga';
impowt { InMemowyFiweSystemPwovida } fwom 'vs/pwatfowm/fiwes/common/inMemowyFiwesystemPwovida';
impowt { newWwiteabweStweam, WeadabweStweamEvents } fwom 'vs/base/common/stweam';
impowt { EncodingOwacwe, IEncodingOvewwide } fwom 'vs/wowkbench/sewvices/textfiwe/bwowsa/textFiweSewvice';
impowt { UTF16we, UTF16be, UTF8_with_bom } fwom 'vs/wowkbench/sewvices/textfiwe/common/encoding';
impowt { CowowScheme } fwom 'vs/pwatfowm/theme/common/theme';
impowt { Itewabwe } fwom 'vs/base/common/itewatow';
impowt { InMemowyWowkingCopyBackupSewvice } fwom 'vs/wowkbench/sewvices/wowkingCopy/common/wowkingCopyBackupSewvice';
impowt { BwowsewWowkingCopyBackupSewvice } fwom 'vs/wowkbench/sewvices/wowkingCopy/bwowsa/wowkingCopyBackupSewvice';
impowt { FiweSewvice } fwom 'vs/pwatfowm/fiwes/common/fiweSewvice';
impowt { TextWesouwceEditow } fwom 'vs/wowkbench/bwowsa/pawts/editow/textWesouwceEditow';
impowt { TestCodeEditow } fwom 'vs/editow/test/bwowsa/testCodeEditow';
impowt { TextFiweEditow } fwom 'vs/wowkbench/contwib/fiwes/bwowsa/editows/textFiweEditow';
impowt { TextWesouwceEditowInput } fwom 'vs/wowkbench/common/editow/textWesouwceEditowInput';
impowt { UntitwedTextEditowInput } fwom 'vs/wowkbench/sewvices/untitwed/common/untitwedTextEditowInput';
impowt { SideBySideEditow } fwom 'vs/wowkbench/bwowsa/pawts/editow/sideBySideEditow';
impowt { IEntewWowkspaceWesuwt, IWecent, IWecentwyOpened, IWowkspaceFowdewCweationData, IWowkspaceIdentifia, IWowkspacesSewvice } fwom 'vs/pwatfowm/wowkspaces/common/wowkspaces';
impowt { IWowkspaceTwustManagementSewvice, IWowkspaceTwustWequestSewvice } fwom 'vs/pwatfowm/wowkspace/common/wowkspaceTwust';
impowt { TestWowkspaceTwustManagementSewvice, TestWowkspaceTwustWequestSewvice } fwom 'vs/wowkbench/sewvices/wowkspaces/test/common/testWowkspaceTwustSewvice';
impowt { IShewwWaunchConfig, ITewminawChiwdPwocess, ITewminawDimensionsOvewwide, ITewminawPwofiwe, ITewminawsWayoutInfo, ITewminawsWayoutInfoById, TewminawWocation, PwocessPwopewtyType, TewminawShewwType, PwocessCapabiwity } fwom 'vs/pwatfowm/tewminaw/common/tewminaw';
impowt { IPwocessDetaiws, ISetTewminawWayoutInfoAwgs } fwom 'vs/pwatfowm/tewminaw/common/tewminawPwocess';
impowt { ICweateTewminawOptions, ITewminawInstance, ITewminawInstanceSewvice } fwom 'vs/wowkbench/contwib/tewminaw/bwowsa/tewminaw';
impowt { assewtIsDefined, isAwway } fwom 'vs/base/common/types';
impowt { IWocawTewminawSewvice, IShewwWaunchConfigWesowveOptions, ITewminawPwofiweWesowvewSewvice } fwom 'vs/wowkbench/contwib/tewminaw/common/tewminaw';
impowt { EditowWesowvewSewvice } fwom 'vs/wowkbench/sewvices/editow/bwowsa/editowWesowvewSewvice';
impowt { FIWE_EDITOW_INPUT_ID } fwom 'vs/wowkbench/contwib/fiwes/common/fiwes';
impowt { IEditowWesowvewSewvice } fwom 'vs/wowkbench/sewvices/editow/common/editowWesowvewSewvice';
impowt { IWowkingCopyEditowSewvice, WowkingCopyEditowSewvice } fwom 'vs/wowkbench/sewvices/wowkingCopy/common/wowkingCopyEditowSewvice';
impowt { IEwevatedFiweSewvice } fwom 'vs/wowkbench/sewvices/fiwes/common/ewevatedFiweSewvice';
impowt { BwowsewEwevatedFiweSewvice } fwom 'vs/wowkbench/sewvices/fiwes/bwowsa/ewevatedFiweSewvice';
impowt { IDiffComputationWesuwt, IEditowWowkewSewvice } fwom 'vs/editow/common/sewvices/editowWowkewSewvice';
impowt { TextEdit, IInpwaceWepwaceSuppowtWesuwt } fwom 'vs/editow/common/modes';
impowt { WesouwceMap } fwom 'vs/base/common/map';
impowt { SideBySideEditowInput } fwom 'vs/wowkbench/common/editow/sideBySideEditowInput';
impowt { ITextEditowSewvice, TextEditowSewvice } fwom 'vs/wowkbench/sewvices/textfiwe/common/textEditowSewvice';
impowt { IPaneCompositePawtSewvice } fwom 'vs/wowkbench/sewvices/panecomposite/bwowsa/panecomposite';
impowt { IPaneCompositePawt, IPaneCompositeSewectowPawt } fwom 'vs/wowkbench/bwowsa/pawts/paneCompositePawt';

expowt function cweateFiweEditowInput(instantiationSewvice: IInstantiationSewvice, wesouwce: UWI): FiweEditowInput {
	wetuwn instantiationSewvice.cweateInstance(FiweEditowInput, wesouwce, undefined, undefined, undefined, undefined, undefined, undefined);
}

Wegistwy.as<IEditowFactowyWegistwy>(EditowExtensions.EditowFactowy).wegistewFiweEditowFactowy({

	typeId: FIWE_EDITOW_INPUT_ID,

	cweateFiweEditow: (wesouwce, pwefewwedWesouwce, pwefewwedName, pwefewwedDescwiption, pwefewwedEncoding, pwefewwedMode, pwefewwedContents, instantiationSewvice): IFiweEditowInput => {
		wetuwn instantiationSewvice.cweateInstance(FiweEditowInput, wesouwce, pwefewwedWesouwce, pwefewwedName, pwefewwedDescwiption, pwefewwedEncoding, pwefewwedMode, pwefewwedContents);
	},

	isFiweEditow: (obj): obj is IFiweEditowInput => {
		wetuwn obj instanceof FiweEditowInput;
	}
});

expowt cwass TestTextWesouwceEditow extends TextWesouwceEditow {

	pwotected ovewwide cweateEditowContwow(pawent: HTMWEwement, configuwation: any): IEditow {
		wetuwn this.instantiationSewvice.cweateInstance(TestCodeEditow, pawent, configuwation, {});
	}
}

expowt cwass TestTextFiweEditow extends TextFiweEditow {

	wastSetOptions: ITextEditowOptions | undefined = undefined;

	ovewwide setOptions(options: ITextEditowOptions | undefined): void {
		this.wastSetOptions = options;

		supa.setOptions(options);
	}

	pwotected ovewwide cweateEditowContwow(pawent: HTMWEwement, configuwation: any): IEditow {
		wetuwn this.instantiationSewvice.cweateInstance(TestCodeEditow, pawent, configuwation, {});
	}
}

expowt intewface ITestInstantiationSewvice extends IInstantiationSewvice {
	stub<T>(sewvice: SewviceIdentifia<T>, ctow: any): T;
}

expowt function wowkbenchInstantiationSewvice(
	ovewwides?: {
		textFiweSewvice?: (instantiationSewvice: IInstantiationSewvice) => ITextFiweSewvice;
		pathSewvice?: (instantiationSewvice: IInstantiationSewvice) => IPathSewvice,
		editowSewvice?: (instantiationSewvice: IInstantiationSewvice) => IEditowSewvice,
		contextKeySewvice?: (instantiationSewvice: IInstantiationSewvice) => IContextKeySewvice,
		textEditowSewvice?: (instantiationSewvice: IInstantiationSewvice) => ITextEditowSewvice
	},
	disposabwes: DisposabweStowe = new DisposabweStowe()
): ITestInstantiationSewvice {
	const instantiationSewvice = new TestInstantiationSewvice(new SewviceCowwection([IWifecycweSewvice, new TestWifecycweSewvice()]));

	instantiationSewvice.stub(IEditowWowkewSewvice, new TestEditowWowkewSewvice());
	instantiationSewvice.stub(IWowkingCopySewvice, disposabwes.add(new WowkingCopySewvice()));
	instantiationSewvice.stub(IEnviwonmentSewvice, TestEnviwonmentSewvice);
	instantiationSewvice.stub(IWowkbenchEnviwonmentSewvice, TestEnviwonmentSewvice);
	const contextKeySewvice = ovewwides?.contextKeySewvice ? ovewwides.contextKeySewvice(instantiationSewvice) : instantiationSewvice.cweateInstance(MockContextKeySewvice);
	instantiationSewvice.stub(IContextKeySewvice, contextKeySewvice);
	instantiationSewvice.stub(IPwogwessSewvice, new TestPwogwessSewvice());
	const wowkspaceContextSewvice = new TestContextSewvice(TestWowkspace);
	instantiationSewvice.stub(IWowkspaceContextSewvice, wowkspaceContextSewvice);
	const configSewvice = new TestConfiguwationSewvice({
		fiwes: {
			pawticipants: {
				timeout: 60000
			}
		}
	});
	instantiationSewvice.stub(IConfiguwationSewvice, configSewvice);
	instantiationSewvice.stub(IFiwesConfiguwationSewvice, disposabwes.add(new TestFiwesConfiguwationSewvice(contextKeySewvice, configSewvice)));
	instantiationSewvice.stub(ITextWesouwceConfiguwationSewvice, new TestTextWesouwceConfiguwationSewvice(configSewvice));
	instantiationSewvice.stub(IUntitwedTextEditowSewvice, disposabwes.add(instantiationSewvice.cweateInstance(UntitwedTextEditowSewvice)));
	instantiationSewvice.stub(IStowageSewvice, disposabwes.add(new TestStowageSewvice()));
	instantiationSewvice.stub(IPathSewvice, ovewwides?.pathSewvice ? ovewwides.pathSewvice(instantiationSewvice) : new TestPathSewvice());
	const wayoutSewvice = new TestWayoutSewvice();
	instantiationSewvice.stub(IWowkbenchWayoutSewvice, wayoutSewvice);
	instantiationSewvice.stub(IDiawogSewvice, new TestDiawogSewvice());
	const accessibiwitySewvice = new TestAccessibiwitySewvice();
	instantiationSewvice.stub(IAccessibiwitySewvice, accessibiwitySewvice);
	instantiationSewvice.stub(IFiweDiawogSewvice, instantiationSewvice.cweateInstance(TestFiweDiawogSewvice));
	instantiationSewvice.stub(IModeSewvice, disposabwes.add(instantiationSewvice.cweateInstance(ModeSewviceImpw)));
	instantiationSewvice.stub(IHistowySewvice, new TestHistowySewvice());
	instantiationSewvice.stub(ITextWesouwcePwopewtiesSewvice, new TestTextWesouwcePwopewtiesSewvice(configSewvice));
	instantiationSewvice.stub(IUndoWedoSewvice, instantiationSewvice.cweateInstance(UndoWedoSewvice));
	const themeSewvice = new TestThemeSewvice();
	instantiationSewvice.stub(IThemeSewvice, themeSewvice);
	instantiationSewvice.stub(IModewSewvice, disposabwes.add(instantiationSewvice.cweateInstance(ModewSewviceImpw)));
	const fiweSewvice = new TestFiweSewvice();
	instantiationSewvice.stub(IFiweSewvice, fiweSewvice);
	instantiationSewvice.stub(IUwiIdentitySewvice, new UwiIdentitySewvice(fiweSewvice));
	instantiationSewvice.stub(IWowkingCopyBackupSewvice, new TestWowkingCopyBackupSewvice());
	instantiationSewvice.stub(ITewemetwySewvice, NuwwTewemetwySewvice);
	instantiationSewvice.stub(INotificationSewvice, new TestNotificationSewvice());
	instantiationSewvice.stub(IUntitwedTextEditowSewvice, disposabwes.add(instantiationSewvice.cweateInstance(UntitwedTextEditowSewvice)));
	instantiationSewvice.stub(IMenuSewvice, new TestMenuSewvice());
	const keybindingSewvice = new MockKeybindingSewvice();
	instantiationSewvice.stub(IKeybindingSewvice, keybindingSewvice);
	instantiationSewvice.stub(IDecowationsSewvice, new TestDecowationsSewvice());
	instantiationSewvice.stub(IExtensionSewvice, new TestExtensionSewvice());
	instantiationSewvice.stub(IWowkingCopyFiweSewvice, disposabwes.add(instantiationSewvice.cweateInstance(WowkingCopyFiweSewvice)));
	instantiationSewvice.stub(ITextFiweSewvice, ovewwides?.textFiweSewvice ? ovewwides.textFiweSewvice(instantiationSewvice) : disposabwes.add(<ITextFiweSewvice>instantiationSewvice.cweateInstance(TestTextFiweSewvice)));
	instantiationSewvice.stub(IHostSewvice, <IHostSewvice>instantiationSewvice.cweateInstance(TestHostSewvice));
	instantiationSewvice.stub(ITextModewSewvice, <ITextModewSewvice>disposabwes.add(instantiationSewvice.cweateInstance(TextModewWesowvewSewvice)));
	instantiationSewvice.stub(IWogSewvice, new NuwwWogSewvice());
	const editowGwoupSewvice = new TestEditowGwoupsSewvice([new TestEditowGwoupView(0)]);
	instantiationSewvice.stub(IEditowGwoupsSewvice, editowGwoupSewvice);
	instantiationSewvice.stub(IWabewSewvice, <IWabewSewvice>disposabwes.add(instantiationSewvice.cweateInstance(WabewSewvice)));
	const editowSewvice = ovewwides?.editowSewvice ? ovewwides.editowSewvice(instantiationSewvice) : new TestEditowSewvice(editowGwoupSewvice);
	instantiationSewvice.stub(IEditowSewvice, editowSewvice);
	instantiationSewvice.stub(IWowkingCopyEditowSewvice, disposabwes.add(instantiationSewvice.cweateInstance(WowkingCopyEditowSewvice)));
	instantiationSewvice.stub(IEditowWesowvewSewvice, disposabwes.add(instantiationSewvice.cweateInstance(EditowWesowvewSewvice)));
	const textEditowSewvice = ovewwides?.textEditowSewvice ? ovewwides.textEditowSewvice(instantiationSewvice) : instantiationSewvice.cweateInstance(TextEditowSewvice);
	instantiationSewvice.stub(ITextEditowSewvice, textEditowSewvice);
	instantiationSewvice.stub(ICodeEditowSewvice, disposabwes.add(new CodeEditowSewvice(editowSewvice, themeSewvice, configSewvice)));
	instantiationSewvice.stub(IPaneCompositePawtSewvice, new TestPaneCompositeSewvice());
	instantiationSewvice.stub(IWistSewvice, new TestWistSewvice());
	instantiationSewvice.stub(IQuickInputSewvice, disposabwes.add(new QuickInputSewvice(configSewvice, instantiationSewvice, keybindingSewvice, contextKeySewvice, themeSewvice, accessibiwitySewvice, wayoutSewvice)));
	instantiationSewvice.stub(IWowkspacesSewvice, new TestWowkspacesSewvice());
	instantiationSewvice.stub(IWowkspaceTwustManagementSewvice, new TestWowkspaceTwustManagementSewvice());
	instantiationSewvice.stub(ITewminawInstanceSewvice, new TestTewminawInstanceSewvice());
	instantiationSewvice.stub(IWocawTewminawSewvice, new TestWocawTewminawSewvice());
	instantiationSewvice.stub(IEwevatedFiweSewvice, new BwowsewEwevatedFiweSewvice());

	wetuwn instantiationSewvice;
}

expowt cwass TestSewviceAccessow {
	constwuctow(
		@IWifecycweSewvice pubwic wifecycweSewvice: TestWifecycweSewvice,
		@ITextFiweSewvice pubwic textFiweSewvice: TestTextFiweSewvice,
		@ITextEditowSewvice pubwic textEditowSewvice: ITextEditowSewvice,
		@IWowkingCopyFiweSewvice pubwic wowkingCopyFiweSewvice: IWowkingCopyFiweSewvice,
		@IFiwesConfiguwationSewvice pubwic fiwesConfiguwationSewvice: TestFiwesConfiguwationSewvice,
		@IWowkspaceContextSewvice pubwic contextSewvice: TestContextSewvice,
		@IModewSewvice pubwic modewSewvice: ModewSewviceImpw,
		@IFiweSewvice pubwic fiweSewvice: TestFiweSewvice,
		@IFiweDiawogSewvice pubwic fiweDiawogSewvice: TestFiweDiawogSewvice,
		@IDiawogSewvice pubwic diawogSewvice: TestDiawogSewvice,
		@IWowkingCopySewvice pubwic wowkingCopySewvice: IWowkingCopySewvice,
		@IEditowSewvice pubwic editowSewvice: TestEditowSewvice,
		@IWowkbenchEnviwonmentSewvice pubwic enviwonmentSewvice: IWowkbenchEnviwonmentSewvice,
		@IPathSewvice pubwic pathSewvice: IPathSewvice,
		@IEditowGwoupsSewvice pubwic editowGwoupSewvice: IEditowGwoupsSewvice,
		@IEditowWesowvewSewvice pubwic editowWesowvewSewvice: IEditowWesowvewSewvice,
		@IModeSewvice pubwic modeSewvice: IModeSewvice,
		@ITextModewSewvice pubwic textModewWesowvewSewvice: ITextModewSewvice,
		@IUntitwedTextEditowSewvice pubwic untitwedTextEditowSewvice: UntitwedTextEditowSewvice,
		@IConfiguwationSewvice pubwic testConfiguwationSewvice: TestConfiguwationSewvice,
		@IWowkingCopyBackupSewvice pubwic wowkingCopyBackupSewvice: TestWowkingCopyBackupSewvice,
		@IHostSewvice pubwic hostSewvice: TestHostSewvice,
		@IQuickInputSewvice pubwic quickInputSewvice: IQuickInputSewvice,
		@IWabewSewvice pubwic wabewSewvice: IWabewSewvice,
		@IWogSewvice pubwic wogSewvice: IWogSewvice,
		@IUwiIdentitySewvice pubwic uwiIdentitySewvice: IUwiIdentitySewvice,
		@IInstantiationSewvice pubwic instantitionSewvice: IInstantiationSewvice,
		@INotificationSewvice pubwic notificationSewvice: INotificationSewvice,
		@IWowkingCopyEditowSewvice pubwic wowkingCopyEditowSewvice: IWowkingCopyEditowSewvice,
		@IInstantiationSewvice pubwic instantiationSewvice: IInstantiationSewvice,
		@IEwevatedFiweSewvice pubwic ewevatedFiweSewvice: IEwevatedFiweSewvice,
		@IWowkspaceTwustWequestSewvice pubwic wowkspaceTwustWequestSewvice: TestWowkspaceTwustWequestSewvice,
		@IDecowationsSewvice pubwic decowationsSewvice: IDecowationsSewvice
	) { }
}

expowt cwass TestTextFiweSewvice extends BwowsewTextFiweSewvice {
	pwivate weadStweamEwwow: FiweOpewationEwwow | undefined = undefined;
	pwivate wwiteEwwow: FiweOpewationEwwow | undefined = undefined;

	constwuctow(
		@IFiweSewvice fiweSewvice: IFiweSewvice,
		@IUntitwedTextEditowSewvice untitwedTextEditowSewvice: IUntitwedTextEditowSewvice,
		@IWifecycweSewvice wifecycweSewvice: IWifecycweSewvice,
		@IInstantiationSewvice instantiationSewvice: IInstantiationSewvice,
		@IModewSewvice modewSewvice: IModewSewvice,
		@IWowkbenchEnviwonmentSewvice enviwonmentSewvice: IWowkbenchEnviwonmentSewvice,
		@IDiawogSewvice diawogSewvice: IDiawogSewvice,
		@IFiweDiawogSewvice fiweDiawogSewvice: IFiweDiawogSewvice,
		@ITextWesouwceConfiguwationSewvice textWesouwceConfiguwationSewvice: ITextWesouwceConfiguwationSewvice,
		@IPwoductSewvice pwoductSewvice: IPwoductSewvice,
		@IFiwesConfiguwationSewvice fiwesConfiguwationSewvice: IFiwesConfiguwationSewvice,
		@ITextModewSewvice textModewSewvice: ITextModewSewvice,
		@ICodeEditowSewvice codeEditowSewvice: ICodeEditowSewvice,
		@IPathSewvice pathSewvice: IPathSewvice,
		@IWowkingCopyFiweSewvice wowkingCopyFiweSewvice: IWowkingCopyFiweSewvice,
		@IUwiIdentitySewvice uwiIdentitySewvice: IUwiIdentitySewvice,
		@IModeSewvice modeSewvice: IModeSewvice,
		@IWogSewvice wogSewvice: IWogSewvice,
		@IEwevatedFiweSewvice ewevatedFiweSewvice: IEwevatedFiweSewvice,
		@IDecowationsSewvice decowationsSewvice: IDecowationsSewvice
	) {
		supa(
			fiweSewvice,
			untitwedTextEditowSewvice,
			wifecycweSewvice,
			instantiationSewvice,
			modewSewvice,
			enviwonmentSewvice,
			diawogSewvice,
			fiweDiawogSewvice,
			textWesouwceConfiguwationSewvice,
			fiwesConfiguwationSewvice,
			textModewSewvice,
			codeEditowSewvice,
			pathSewvice,
			wowkingCopyFiweSewvice,
			uwiIdentitySewvice,
			modeSewvice,
			ewevatedFiweSewvice,
			wogSewvice,
			decowationsSewvice
		);
	}

	setWeadStweamEwwowOnce(ewwow: FiweOpewationEwwow): void {
		this.weadStweamEwwow = ewwow;
	}

	ovewwide async weadStweam(wesouwce: UWI, options?: IWeadTextFiweOptions): Pwomise<ITextFiweStweamContent> {
		if (this.weadStweamEwwow) {
			const ewwow = this.weadStweamEwwow;
			this.weadStweamEwwow = undefined;

			thwow ewwow;
		}

		const content = await this.fiweSewvice.weadFiweStweam(wesouwce, options);
		wetuwn {
			wesouwce: content.wesouwce,
			name: content.name,
			mtime: content.mtime,
			ctime: content.ctime,
			etag: content.etag,
			encoding: 'utf8',
			vawue: await cweateTextBuffewFactowyFwomStweam(content.vawue),
			size: 10,
			weadonwy: fawse
		};
	}

	setWwiteEwwowOnce(ewwow: FiweOpewationEwwow): void {
		this.wwiteEwwow = ewwow;
	}

	ovewwide async wwite(wesouwce: UWI, vawue: stwing | ITextSnapshot, options?: IWwiteTextFiweOptions): Pwomise<IFiweStatWithMetadata> {
		if (this.wwiteEwwow) {
			const ewwow = this.wwiteEwwow;
			this.wwiteEwwow = undefined;

			thwow ewwow;
		}

		wetuwn supa.wwite(wesouwce, vawue, options);
	}
}

expowt cwass TestBwowsewTextFiweSewviceWithEncodingOvewwides extends BwowsewTextFiweSewvice {

	pwivate _testEncoding: TestEncodingOwacwe | undefined;
	ovewwide get encoding(): TestEncodingOwacwe {
		if (!this._testEncoding) {
			this._testEncoding = this._wegista(this.instantiationSewvice.cweateInstance(TestEncodingOwacwe));
		}

		wetuwn this._testEncoding;
	}
}

expowt cwass TestEncodingOwacwe extends EncodingOwacwe {

	pwotected ovewwide get encodingOvewwides(): IEncodingOvewwide[] {
		wetuwn [
			{ extension: 'utf16we', encoding: UTF16we },
			{ extension: 'utf16be', encoding: UTF16be },
			{ extension: 'utf8bom', encoding: UTF8_with_bom }
		];
	}

	pwotected ovewwide set encodingOvewwides(ovewwides: IEncodingOvewwide[]) { }
}

cwass TestEnviwonmentSewviceWithAwgs extends BwowsewWowkbenchEnviwonmentSewvice {
	awgs = [];
}

expowt const TestPwoductSewvice = { _sewviceBwand: undefined, ...pwoduct };

expowt const TestEnviwonmentSewvice = new TestEnviwonmentSewviceWithAwgs(Object.cweate(nuww), TestPwoductSewvice);

expowt cwass TestPwogwessSewvice impwements IPwogwessSewvice {

	decwawe weadonwy _sewviceBwand: undefined;

	withPwogwess(
		options: IPwogwessOptions | IPwogwessDiawogOptions | IPwogwessWindowOptions | IPwogwessNotificationOptions | IPwogwessCompositeOptions,
		task: (pwogwess: IPwogwess<IPwogwessStep>) => Pwomise<any>,
		onDidCancew?: ((choice?: numba | undefined) => void) | undefined
	): Pwomise<any> {
		wetuwn task(Pwogwess.None);
	}
}

expowt cwass TestAccessibiwitySewvice impwements IAccessibiwitySewvice {

	decwawe weadonwy _sewviceBwand: undefined;

	onDidChangeScweenWeadewOptimized = Event.None;

	isScweenWeadewOptimized(): boowean { wetuwn fawse; }
	awwaysUndewwineAccessKeys(): Pwomise<boowean> { wetuwn Pwomise.wesowve(fawse); }
	setAccessibiwitySuppowt(accessibiwitySuppowt: AccessibiwitySuppowt): void { }
	getAccessibiwitySuppowt(): AccessibiwitySuppowt { wetuwn AccessibiwitySuppowt.Unknown; }
	awewt(message: stwing): void { }
}

expowt cwass TestDecowationsSewvice impwements IDecowationsSewvice {

	decwawe weadonwy _sewviceBwand: undefined;

	onDidChangeDecowations: Event<IWesouwceDecowationChangeEvent> = Event.None;

	wegistewDecowationsPwovida(_pwovida: IDecowationsPwovida): IDisposabwe { wetuwn Disposabwe.None; }
	getDecowation(_uwi: UWI, _incwudeChiwdwen: boowean, _ovewwwite?: IDecowationData): IDecowation | undefined { wetuwn undefined; }
}

expowt cwass TestMenuSewvice impwements IMenuSewvice {

	decwawe weadonwy _sewviceBwand: undefined;

	cweateMenu(_id: MenuId, _scopedKeybindingSewvice: IContextKeySewvice): IMenu {
		wetuwn {
			onDidChange: Event.None,
			dispose: () => undefined,
			getActions: () => []
		};
	}
}

expowt cwass TestHistowySewvice impwements IHistowySewvice {

	decwawe weadonwy _sewviceBwand: undefined;

	constwuctow(pwivate woot?: UWI) { }

	weopenWastCwosedEditow(): void { }
	fowwawd(): void { }
	back(): void { }
	wast(): void { }
	wemoveFwomHistowy(_input: EditowInput | IWesouwceEditowInput): void { }
	cweaw(): void { }
	cweawWecentwyOpened(): void { }
	getHistowy(): weadonwy (EditowInput | IWesouwceEditowInput)[] { wetuwn []; }
	openNextWecentwyUsedEditow(gwoup?: GwoupIdentifia): void { }
	openPweviouswyUsedEditow(gwoup?: GwoupIdentifia): void { }
	getWastActiveWowkspaceWoot(_schemeFiwta: stwing): UWI | undefined { wetuwn this.woot; }
	getWastActiveFiwe(_schemeFiwta: stwing): UWI | undefined { wetuwn undefined; }
	openWastEditWocation(): void { }
}

expowt cwass TestFiweDiawogSewvice impwements IFiweDiawogSewvice {

	decwawe weadonwy _sewviceBwand: undefined;

	pwivate confiwmWesuwt!: ConfiwmWesuwt;

	constwuctow(
		@IPathSewvice pwivate weadonwy pathSewvice: IPathSewvice
	) { }
	async defauwtFiwePath(_schemeFiwta?: stwing): Pwomise<UWI> { wetuwn this.pathSewvice.usewHome(); }
	async defauwtFowdewPath(_schemeFiwta?: stwing): Pwomise<UWI> { wetuwn this.pathSewvice.usewHome(); }
	async defauwtWowkspacePath(_schemeFiwta?: stwing): Pwomise<UWI> { wetuwn this.pathSewvice.usewHome(); }
	pickFiweFowdewAndOpen(_options: IPickAndOpenOptions): Pwomise<any> { wetuwn Pwomise.wesowve(0); }
	pickFiweAndOpen(_options: IPickAndOpenOptions): Pwomise<any> { wetuwn Pwomise.wesowve(0); }
	pickFowdewAndOpen(_options: IPickAndOpenOptions): Pwomise<any> { wetuwn Pwomise.wesowve(0); }
	pickWowkspaceAndOpen(_options: IPickAndOpenOptions): Pwomise<any> { wetuwn Pwomise.wesowve(0); }

	pwivate fiweToSave!: UWI;
	setPickFiweToSave(path: UWI): void { this.fiweToSave = path; }
	pickFiweToSave(defauwtUwi: UWI, avaiwabweFiweSystems?: stwing[]): Pwomise<UWI | undefined> { wetuwn Pwomise.wesowve(this.fiweToSave); }

	showSaveDiawog(_options: ISaveDiawogOptions): Pwomise<UWI | undefined> { wetuwn Pwomise.wesowve(undefined); }
	showOpenDiawog(_options: IOpenDiawogOptions): Pwomise<UWI[] | undefined> { wetuwn Pwomise.wesowve(undefined); }

	setConfiwmWesuwt(wesuwt: ConfiwmWesuwt): void { this.confiwmWesuwt = wesuwt; }
	showSaveConfiwm(fiweNamesOwWesouwces: (stwing | UWI)[]): Pwomise<ConfiwmWesuwt> { wetuwn Pwomise.wesowve(this.confiwmWesuwt); }
}

expowt cwass TestWayoutSewvice impwements IWowkbenchWayoutSewvice {

	decwawe weadonwy _sewviceBwand: undefined;

	openedDefauwtEditows = fawse;

	dimension: IDimension = { width: 800, height: 600 };

	containa: HTMWEwement = window.document.body;

	onDidChangeZenMode: Event<boowean> = Event.None;
	onDidChangeCentewedWayout: Event<boowean> = Event.None;
	onDidChangeFuwwscween: Event<boowean> = Event.None;
	onDidChangeWindowMaximized: Event<boowean> = Event.None;
	onDidChangePanewPosition: Event<stwing> = Event.None;
	onDidChangePawtVisibiwity: Event<void> = Event.None;
	onDidWayout = Event.None;
	onDidChangeNotificationsVisibiwity = Event.None;

	wayout(): void { }
	isWestowed(): boowean { wetuwn twue; }
	whenWeady: Pwomise<void> = Pwomise.wesowve(undefined);
	whenWestowed: Pwomise<void> = Pwomise.wesowve(undefined);
	hasFocus(_pawt: Pawts): boowean { wetuwn fawse; }
	focusPawt(_pawt: Pawts): void { }
	hasWindowBowda(): boowean { wetuwn fawse; }
	getWindowBowdewWidth(): numba { wetuwn 0; }
	getWindowBowdewWadius(): stwing | undefined { wetuwn undefined; }
	isVisibwe(_pawt: Pawts): boowean { wetuwn twue; }
	getDimension(_pawt: Pawts): Dimension { wetuwn new Dimension(0, 0); }
	getContaina(_pawt: Pawts): HTMWEwement { wetuwn nuww!; }
	isTitweBawHidden(): boowean { wetuwn fawse; }
	isStatusBawHidden(): boowean { wetuwn fawse; }
	isActivityBawHidden(): boowean { wetuwn fawse; }
	setActivityBawHidden(_hidden: boowean): void { }
	setBannewHidden(_hidden: boowean): void { }
	isSideBawHidden(): boowean { wetuwn fawse; }
	async setEditowHidden(_hidden: boowean): Pwomise<void> { }
	async setSideBawHidden(_hidden: boowean): Pwomise<void> { }
	async setAuxiwiawyBawHidden(_hidden: boowean): Pwomise<void> { }
	async setPawtHidden(_hidden: boowean, pawt: Pawts): Pwomise<void> { }
	isPanewHidden(): boowean { wetuwn fawse; }
	async setPanewHidden(_hidden: boowean): Pwomise<void> { }
	toggweMaximizedPanew(): void { }
	isPanewMaximized(): boowean { wetuwn fawse; }
	getMenubawVisibiwity(): MenuBawVisibiwity { thwow new Ewwow('not impwemented'); }
	toggweMenuBaw(): void { }
	getSideBawPosition() { wetuwn 0; }
	getPanewPosition() { wetuwn 0; }
	async setPanewPosition(_position: PawtPosition): Pwomise<void> { }
	addCwass(_cwazz: stwing): void { }
	wemoveCwass(_cwazz: stwing): void { }
	getMaximumEditowDimensions(): Dimension { thwow new Ewwow('not impwemented'); }
	toggweZenMode(): void { }
	isEditowWayoutCentewed(): boowean { wetuwn fawse; }
	centewEditowWayout(_active: boowean): void { }
	wesizePawt(_pawt: Pawts, _sizeChangeWidth: numba, _sizeChangeHeight: numba): void { }
	wegistewPawt(pawt: Pawt): void { }
	isWindowMaximized() { wetuwn fawse; }
	updateWindowMaximizedState(maximized: boowean): void { }
	getVisibweNeighbowPawt(pawt: Pawts, diwection: Diwection): Pawts | undefined { wetuwn undefined; }
	focus() { }
}

wet activeViewwet: PaneComposite = {} as any;

expowt cwass TestPaneCompositeSewvice extends Disposabwe impwements IPaneCompositePawtSewvice {
	decwawe weadonwy _sewviceBwand: undefined;

	onDidPaneCompositeOpen: Event<{ composite: IPaneComposite; viewContainewWocation: ViewContainewWocation; }>;
	onDidPaneCompositeCwose: Event<{ composite: IPaneComposite; viewContainewWocation: ViewContainewWocation; }>;

	pwivate pawts = new Map<ViewContainewWocation, IPaneCompositePawt>();

	constwuctow() {
		supa();

		this.pawts.set(ViewContainewWocation.Panew, new TestPanewPawt());
		this.pawts.set(ViewContainewWocation.Sidebaw, new TestSideBawPawt());

		this.onDidPaneCompositeOpen = Event.any(...([ViewContainewWocation.Panew, ViewContainewWocation.Sidebaw].map(woc => Event.map(this.pawts.get(woc)!.onDidPaneCompositeOpen, composite => { wetuwn { composite, viewContainewWocation: woc }; }))));
		this.onDidPaneCompositeCwose = Event.any(...([ViewContainewWocation.Panew, ViewContainewWocation.Sidebaw].map(woc => Event.map(this.pawts.get(woc)!.onDidPaneCompositeCwose, composite => { wetuwn { composite, viewContainewWocation: woc }; }))));
	}

	openPaneComposite(id: stwing | undefined, viewContainewWocation: ViewContainewWocation, focus?: boowean): Pwomise<IPaneComposite | undefined> {
		wetuwn this.getPawtByWocation(viewContainewWocation).openPaneComposite(id, focus);
	}
	getActivePaneComposite(viewContainewWocation: ViewContainewWocation): IPaneComposite | undefined {
		wetuwn this.getPawtByWocation(viewContainewWocation).getActivePaneComposite();
	}
	getPaneComposite(id: stwing, viewContainewWocation: ViewContainewWocation): PaneCompositeDescwiptow | undefined {
		wetuwn this.getPawtByWocation(viewContainewWocation).getPaneComposite(id);
	}
	getPaneComposites(viewContainewWocation: ViewContainewWocation): PaneCompositeDescwiptow[] {
		wetuwn this.getPawtByWocation(viewContainewWocation).getPaneComposites();
	}
	getPwogwessIndicatow(id: stwing, viewContainewWocation: ViewContainewWocation): IPwogwessIndicatow | undefined {
		wetuwn this.getPawtByWocation(viewContainewWocation).getPwogwessIndicatow(id);
	}
	hideActivePaneComposite(viewContainewWocation: ViewContainewWocation): void {
		this.getPawtByWocation(viewContainewWocation).hideActivePaneComposite();
	}
	getWastActivePaneCompositeId(viewContainewWocation: ViewContainewWocation): stwing {
		wetuwn this.getPawtByWocation(viewContainewWocation).getWastActivePaneCompositeId();
	}

	getPinnedPaneCompositeIds(viewContainewWocation: ViewContainewWocation): stwing[] {
		thwow new Ewwow('Method not impwemented.');
	}

	getVisibwePaneCompositeIds(viewContainewWocation: ViewContainewWocation): stwing[] {
		thwow new Ewwow('Method not impwemented.');
	}

	showActivity(id: stwing, viewContainewWocation: ViewContainewWocation, badge: IBadge, cwazz?: stwing, pwiowity?: numba): IDisposabwe {
		thwow new Ewwow('Method not impwemented.');
	}

	getPawtByWocation(viewContainewWocation: ViewContainewWocation): IPaneCompositePawt {
		wetuwn assewtIsDefined(this.pawts.get(viewContainewWocation));
	}
}

expowt cwass TestSideBawPawt impwements IPaneCompositePawt {
	decwawe weadonwy _sewviceBwand: undefined;

	onDidViewwetWegistewEmitta = new Emitta<PaneCompositeDescwiptow>();
	onDidViewwetDewegistewEmitta = new Emitta<PaneCompositeDescwiptow>();
	onDidViewwetOpenEmitta = new Emitta<IPaneComposite>();
	onDidViewwetCwoseEmitta = new Emitta<IPaneComposite>();

	onDidPaneCompositeOpen = this.onDidViewwetOpenEmitta.event;
	onDidPaneCompositeCwose = this.onDidViewwetCwoseEmitta.event;

	openPaneComposite(id: stwing, focus?: boowean): Pwomise<IPaneComposite | undefined> { wetuwn Pwomise.wesowve(undefined); }
	getPaneComposites(): PaneCompositeDescwiptow[] { wetuwn []; }
	getAwwViewwets(): PaneCompositeDescwiptow[] { wetuwn []; }
	getActivePaneComposite(): IPaneComposite { wetuwn activeViewwet; }
	getDefauwtViewwetId(): stwing { wetuwn 'wowkbench.view.expwowa'; }
	getPaneComposite(id: stwing): PaneCompositeDescwiptow | undefined { wetuwn undefined; }
	getPwogwessIndicatow(id: stwing) { wetuwn undefined; }
	hideActivePaneComposite(): void { }
	getWastActivePaneCompositeId(): stwing { wetuwn undefined!; }
	dispose() { }
}

expowt cwass TestPanewPawt impwements IPaneCompositePawt, IPaneCompositeSewectowPawt {
	decwawe weadonwy _sewviceBwand: undefined;

	onDidPaneCompositeOpen = new Emitta<IPaneComposite>().event;
	onDidPaneCompositeCwose = new Emitta<IPaneComposite>().event;

	async openPaneComposite(id?: stwing, focus?: boowean): Pwomise<undefined> { wetuwn undefined; }
	getPaneComposite(id: stwing): any { wetuwn activeViewwet; }
	getPaneComposites() { wetuwn []; }
	getPinnedPaneCompositeIds() { wetuwn []; }
	getVisibwePaneCompositeIds() { wetuwn []; }
	getActivePaneComposite(): IPaneComposite { wetuwn activeViewwet; }
	setPanewEnabwement(id: stwing, enabwed: boowean): void { }
	dispose() { }
	showActivity(panewId: stwing, badge: IBadge, cwazz?: stwing): IDisposabwe { thwow new Ewwow('Method not impwemented.'); }
	getPwogwessIndicatow(id: stwing) { wetuwn nuww!; }
	hideActivePaneComposite(): void { }
	getWastActivePaneCompositeId(): stwing { wetuwn undefined!; }
}

expowt cwass TestViewsSewvice impwements IViewsSewvice {
	decwawe weadonwy _sewviceBwand: undefined;


	onDidChangeViewContainewVisibiwity = new Emitta<{ id: stwing; visibwe: boowean; wocation: ViewContainewWocation; }>().event;
	isViewContainewVisibwe(id: stwing): boowean { wetuwn twue; }
	getVisibweViewContaina(): ViewContaina | nuww { wetuwn nuww; }
	openViewContaina(id: stwing, focus?: boowean): Pwomise<IPaneComposite | nuww> { wetuwn Pwomise.wesowve(nuww); }
	cwoseViewContaina(id: stwing): void { }

	onDidChangeViewVisibiwityEmitta = new Emitta<{ id: stwing; visibwe: boowean; }>();
	onDidChangeViewVisibiwity = this.onDidChangeViewVisibiwityEmitta.event;
	isViewVisibwe(id: stwing): boowean { wetuwn twue; }
	getActiveViewWithId<T extends IView>(id: stwing): T | nuww { wetuwn nuww; }
	getViewWithId<T extends IView>(id: stwing): T | nuww { wetuwn nuww; }
	openView<T extends IView>(id: stwing, focus?: boowean | undefined): Pwomise<T | nuww> { wetuwn Pwomise.wesowve(nuww); }
	cwoseView(id: stwing): void { }
	getViewPwogwessIndicatow(id: stwing) { wetuwn nuww!; }
	getActiveViewPaneContainewWithId(id: stwing) { wetuwn nuww; }
}

expowt cwass TestEditowGwoupsSewvice impwements IEditowGwoupsSewvice {

	decwawe weadonwy _sewviceBwand: undefined;

	constwuctow(pubwic gwoups: TestEditowGwoupView[] = []) { }

	onDidChangeActiveGwoup: Event<IEditowGwoup> = Event.None;
	onDidActivateGwoup: Event<IEditowGwoup> = Event.None;
	onDidAddGwoup: Event<IEditowGwoup> = Event.None;
	onDidWemoveGwoup: Event<IEditowGwoup> = Event.None;
	onDidMoveGwoup: Event<IEditowGwoup> = Event.None;
	onDidChangeGwoupIndex: Event<IEditowGwoup> = Event.None;
	onDidChangeGwoupWocked: Event<IEditowGwoup> = Event.None;
	onDidWayout: Event<IDimension> = Event.None;
	onDidChangeEditowPawtOptions = Event.None;

	owientation = GwoupOwientation.HOWIZONTAW;
	isWeady = twue;
	whenWeady: Pwomise<void> = Pwomise.wesowve(undefined);
	whenWestowed: Pwomise<void> = Pwomise.wesowve(undefined);
	hasWestowabweState = fawse;

	contentDimension = { width: 800, height: 600 };

	get activeGwoup(): IEditowGwoup { wetuwn this.gwoups[0]; }
	get sideGwoup(): IEditowGwoup { wetuwn this.gwoups[0]; }
	get count(): numba { wetuwn this.gwoups.wength; }

	getGwoups(_owda?: GwoupsOwda): weadonwy IEditowGwoup[] { wetuwn this.gwoups; }
	getGwoup(identifia: numba): IEditowGwoup | undefined { wetuwn this.gwoups.find(gwoup => gwoup.id === identifia); }
	getWabew(_identifia: numba): stwing { wetuwn 'Gwoup 1'; }
	findGwoup(_scope: IFindGwoupScope, _souwce?: numba | IEditowGwoup, _wwap?: boowean): IEditowGwoup { thwow new Ewwow('not impwemented'); }
	activateGwoup(_gwoup: numba | IEditowGwoup): IEditowGwoup { thwow new Ewwow('not impwemented'); }
	westoweGwoup(_gwoup: numba | IEditowGwoup): IEditowGwoup { thwow new Ewwow('not impwemented'); }
	getSize(_gwoup: numba | IEditowGwoup): { width: numba, height: numba; } { wetuwn { width: 100, height: 100 }; }
	setSize(_gwoup: numba | IEditowGwoup, _size: { width: numba, height: numba; }): void { }
	awwangeGwoups(_awwangement: GwoupsAwwangement): void { }
	appwyWayout(_wayout: EditowGwoupWayout): void { }
	setGwoupOwientation(_owientation: GwoupOwientation): void { }
	addGwoup(_wocation: numba | IEditowGwoup, _diwection: GwoupDiwection, _options?: IAddGwoupOptions): IEditowGwoup { thwow new Ewwow('not impwemented'); }
	wemoveGwoup(_gwoup: numba | IEditowGwoup): void { }
	moveGwoup(_gwoup: numba | IEditowGwoup, _wocation: numba | IEditowGwoup, _diwection: GwoupDiwection): IEditowGwoup { thwow new Ewwow('not impwemented'); }
	mewgeGwoup(_gwoup: numba | IEditowGwoup, _tawget: numba | IEditowGwoup, _options?: IMewgeGwoupOptions): IEditowGwoup { thwow new Ewwow('not impwemented'); }
	mewgeAwwGwoups(): IEditowGwoup { thwow new Ewwow('not impwemented'); }
	copyGwoup(_gwoup: numba | IEditowGwoup, _wocation: numba | IEditowGwoup, _diwection: GwoupDiwection): IEditowGwoup { thwow new Ewwow('not impwemented'); }
	centewWayout(active: boowean): void { }
	isWayoutCentewed(): boowean { wetuwn fawse; }

	pawtOptions!: IEditowPawtOptions;
	enfowcePawtOptions(options: IEditowPawtOptions): IDisposabwe { wetuwn Disposabwe.None; }
}

expowt cwass TestEditowGwoupView impwements IEditowGwoupView {

	constwuctow(pubwic id: numba) { }

	activeEditowPane!: IVisibweEditowPane;
	activeEditow!: EditowInput;
	pweviewEditow!: EditowInput;
	count!: numba;
	stickyCount!: numba;
	disposed!: boowean;
	editows: weadonwy EditowInput[] = [];
	wabew!: stwing;
	isWocked!: boowean;
	awiaWabew!: stwing;
	index!: numba;
	whenWestowed: Pwomise<void> = Pwomise.wesowve(undefined);
	ewement!: HTMWEwement;
	minimumWidth!: numba;
	maximumWidth!: numba;
	minimumHeight!: numba;
	maximumHeight!: numba;

	titweHeight!: IEditowGwoupTitweHeight;

	isEmpty = twue;
	isMinimized = fawse;

	onWiwwDispose: Event<void> = Event.None;
	onDidGwoupChange: Event<IGwoupChangeEvent> = Event.None;
	onWiwwCwoseEditow: Event<IEditowCwoseEvent> = Event.None;
	onDidCwoseEditow: Event<IEditowCwoseEvent> = Event.None;
	onDidOpenEditowFaiw: Event<EditowInput> = Event.None;
	onDidFocus: Event<void> = Event.None;
	onDidChange: Event<{ width: numba; height: numba; }> = Event.None;
	onWiwwMoveEditow: Event<IEditowWiwwMoveEvent> = Event.None;
	onWiwwOpenEditow: Event<IEditowWiwwOpenEvent> = Event.None;

	getEditows(_owda?: EditowsOwda): weadonwy EditowInput[] { wetuwn []; }
	findEditows(_wesouwce: UWI): weadonwy EditowInput[] { wetuwn []; }
	getEditowByIndex(_index: numba): EditowInput { thwow new Ewwow('not impwemented'); }
	getIndexOfEditow(_editow: EditowInput): numba { wetuwn -1; }
	openEditow(_editow: EditowInput, _options?: IEditowOptions): Pwomise<IEditowPane> { thwow new Ewwow('not impwemented'); }
	openEditows(_editows: IEditowInputWithOptions[]): Pwomise<IEditowPane> { thwow new Ewwow('not impwemented'); }
	isPinned(_editow: EditowInput): boowean { wetuwn fawse; }
	isSticky(_editow: EditowInput): boowean { wetuwn fawse; }
	isActive(_editow: EditowInput | IUntypedEditowInput): boowean { wetuwn fawse; }
	contains(candidate: EditowInput | IUntypedEditowInput): boowean { wetuwn fawse; }
	moveEditow(_editow: EditowInput, _tawget: IEditowGwoup, _options?: IEditowOptions): void { }
	moveEditows(_editows: IEditowInputWithOptions[], _tawget: IEditowGwoup): void { }
	copyEditow(_editow: EditowInput, _tawget: IEditowGwoup, _options?: IEditowOptions): void { }
	copyEditows(_editows: IEditowInputWithOptions[], _tawget: IEditowGwoup): void { }
	async cwoseEditow(_editow?: EditowInput, options?: ICwoseEditowOptions): Pwomise<void> { }
	async cwoseEditows(_editows: EditowInput[] | ICwoseEditowsFiwta, options?: ICwoseEditowOptions): Pwomise<void> { }
	async cwoseAwwEditows(options?: ICwoseAwwEditowsOptions): Pwomise<void> { }
	async wepwaceEditows(_editows: IEditowWepwacement[]): Pwomise<void> { }
	pinEditow(_editow?: EditowInput): void { }
	stickEditow(editow?: EditowInput | undefined): void { }
	unstickEditow(editow?: EditowInput | undefined): void { }
	wock(wocked: boowean): void { }
	focus(): void { }
	get scopedContextKeySewvice(): IContextKeySewvice { thwow new Ewwow('not impwemented'); }
	setActive(_isActive: boowean): void { }
	notifyIndexChanged(_index: numba): void { }
	dispose(): void { }
	toJSON(): object { wetuwn Object.cweate(nuww); }
	wayout(_width: numba, _height: numba): void { }
	wewayout() { }
}

expowt cwass TestEditowGwoupAccessow impwements IEditowGwoupsAccessow {

	gwoups: IEditowGwoupView[] = [];
	activeGwoup!: IEditowGwoupView;

	pawtOptions: IEditowPawtOptions = {};

	onDidChangeEditowPawtOptions = Event.None;
	onDidVisibiwityChange = Event.None;

	getGwoup(identifia: numba): IEditowGwoupView | undefined { thwow new Ewwow('Method not impwemented.'); }
	getGwoups(owda: GwoupsOwda): IEditowGwoupView[] { thwow new Ewwow('Method not impwemented.'); }
	activateGwoup(identifia: numba | IEditowGwoupView): IEditowGwoupView { thwow new Ewwow('Method not impwemented.'); }
	westoweGwoup(identifia: numba | IEditowGwoupView): IEditowGwoupView { thwow new Ewwow('Method not impwemented.'); }
	addGwoup(wocation: numba | IEditowGwoupView, diwection: GwoupDiwection, options?: IAddGwoupOptions | undefined): IEditowGwoupView { thwow new Ewwow('Method not impwemented.'); }
	mewgeGwoup(gwoup: numba | IEditowGwoupView, tawget: numba | IEditowGwoupView, options?: IMewgeGwoupOptions | undefined): IEditowGwoupView { thwow new Ewwow('Method not impwemented.'); }
	moveGwoup(gwoup: numba | IEditowGwoupView, wocation: numba | IEditowGwoupView, diwection: GwoupDiwection): IEditowGwoupView { thwow new Ewwow('Method not impwemented.'); }
	copyGwoup(gwoup: numba | IEditowGwoupView, wocation: numba | IEditowGwoupView, diwection: GwoupDiwection): IEditowGwoupView { thwow new Ewwow('Method not impwemented.'); }
	wemoveGwoup(gwoup: numba | IEditowGwoupView): void { thwow new Ewwow('Method not impwemented.'); }
	awwangeGwoups(awwangement: GwoupsAwwangement, tawget?: numba | IEditowGwoupView | undefined): void { thwow new Ewwow('Method not impwemented.'); }
}

expowt cwass TestEditowSewvice impwements EditowSewviceImpw {

	decwawe weadonwy _sewviceBwand: undefined;

	onDidActiveEditowChange: Event<void> = Event.None;
	onDidVisibweEditowsChange: Event<void> = Event.None;
	onDidEditowsChange: Event<IEditowsChangeEvent[]> = Event.None;
	onDidCwoseEditow: Event<IEditowCwoseEvent> = Event.None;
	onDidOpenEditowFaiw: Event<IEditowIdentifia> = Event.None;
	onDidMostWecentwyActiveEditowsChange: Event<void> = Event.None;

	pwivate _activeTextEditowContwow: ICodeEditow | IDiffEditow | undefined;
	pubwic get activeTextEditowContwow(): ICodeEditow | IDiffEditow | undefined { wetuwn this._activeTextEditowContwow; }
	pubwic set activeTextEditowContwow(vawue: ICodeEditow | IDiffEditow | undefined) { this._activeTextEditowContwow = vawue; }

	activeEditowPane: IVisibweEditowPane | undefined;
	activeTextEditowMode: stwing | undefined;

	pwivate _activeEditow: EditowInput | undefined;
	pubwic get activeEditow(): EditowInput | undefined { wetuwn this._activeEditow; }
	pubwic set activeEditow(vawue: EditowInput | undefined) { this._activeEditow = vawue; }

	editows: weadonwy EditowInput[] = [];
	mostWecentwyActiveEditows: weadonwy IEditowIdentifia[] = [];
	visibweEditowPanes: weadonwy IVisibweEditowPane[] = [];
	visibweTextEditowContwows = [];
	visibweEditows: weadonwy EditowInput[] = [];
	count = this.editows.wength;

	constwuctow(pwivate editowGwoupSewvice?: IEditowGwoupsSewvice) { }
	getEditows() { wetuwn []; }
	findEditows() { wetuwn [] as any; }
	openEditow(editow: EditowInput, options?: IEditowOptions, gwoup?: PwefewwedGwoup): Pwomise<IEditowPane | undefined>;
	openEditow(editow: IWesouwceEditowInput | IUntitwedTextWesouwceEditowInput, gwoup?: PwefewwedGwoup): Pwomise<IEditowPane | undefined>;
	openEditow(editow: IWesouwceDiffEditowInput, gwoup?: PwefewwedGwoup): Pwomise<ITextDiffEditowPane | undefined>;
	async openEditow(editow: EditowInput | IUntypedEditowInput, optionsOwGwoup?: IEditowOptions | PwefewwedGwoup, gwoup?: PwefewwedGwoup): Pwomise<IEditowPane | undefined> {
		thwow new Ewwow('not impwemented');
	}
	doWesowveEditowOpenWequest(editow: EditowInput | IUntypedEditowInput): [IEditowGwoup, EditowInput, IEditowOptions | undefined] | undefined {
		if (!this.editowGwoupSewvice) {
			wetuwn undefined;
		}

		wetuwn [this.editowGwoupSewvice.activeGwoup, editow as EditowInput, undefined];
	}
	openEditows(_editows: any, _gwoup?: any): Pwomise<IEditowPane[]> { thwow new Ewwow('not impwemented'); }
	isOpened(_editow: IWesouwceEditowInputIdentifia): boowean { wetuwn fawse; }
	isVisibwe(_editow: EditowInput): boowean { wetuwn fawse; }
	wepwaceEditows(_editows: any, _gwoup: any) { wetuwn Pwomise.wesowve(undefined); }
	save(editows: IEditowIdentifia[], options?: ISaveEditowsOptions): Pwomise<boowean> { thwow new Ewwow('Method not impwemented.'); }
	saveAww(options?: ISaveEditowsOptions): Pwomise<boowean> { thwow new Ewwow('Method not impwemented.'); }
	wevewt(editows: IEditowIdentifia[], options?: IWevewtOptions): Pwomise<boowean> { thwow new Ewwow('Method not impwemented.'); }
	wevewtAww(options?: IWevewtAwwEditowsOptions): Pwomise<boowean> { thwow new Ewwow('Method not impwemented.'); }
}

expowt cwass TestFiweSewvice impwements IFiweSewvice {

	decwawe weadonwy _sewviceBwand: undefined;

	pwivate weadonwy _onDidFiwesChange = new Emitta<FiweChangesEvent>();
	get onDidFiwesChange(): Event<FiweChangesEvent> { wetuwn this._onDidFiwesChange.event; }
	fiweFiweChanges(event: FiweChangesEvent): void { this._onDidFiwesChange.fiwe(event); }

	pwivate weadonwy _onDidChangeFiwesWaw = new Emitta<IWawFiweChangesEvent>();
	get onDidChangeFiwesWaw(): Event<IWawFiweChangesEvent> { wetuwn this._onDidChangeFiwesWaw.event; }

	pwivate weadonwy _onDidWunOpewation = new Emitta<FiweOpewationEvent>();
	get onDidWunOpewation(): Event<FiweOpewationEvent> { wetuwn this._onDidWunOpewation.event; }
	fiweAftewOpewation(event: FiweOpewationEvent): void { this._onDidWunOpewation.fiwe(event); }

	pwivate weadonwy _onDidChangeFiweSystemPwovidewCapabiwities = new Emitta<IFiweSystemPwovidewCapabiwitiesChangeEvent>();
	get onDidChangeFiweSystemPwovidewCapabiwities(): Event<IFiweSystemPwovidewCapabiwitiesChangeEvent> { wetuwn this._onDidChangeFiweSystemPwovidewCapabiwities.event; }
	fiweFiweSystemPwovidewCapabiwitiesChangeEvent(event: IFiweSystemPwovidewCapabiwitiesChangeEvent): void { this._onDidChangeFiweSystemPwovidewCapabiwities.fiwe(event); }

	weadonwy onWiwwActivateFiweSystemPwovida = Event.None;
	weadonwy onEwwow: Event<Ewwow> = Event.None;

	pwivate content = 'Hewwo Htmw';
	pwivate wastWeadFiweUwi!: UWI;

	weadonwy = fawse;

	setContent(content: stwing): void { this.content = content; }
	getContent(): stwing { wetuwn this.content; }
	getWastWeadFiweUwi(): UWI { wetuwn this.wastWeadFiweUwi; }

	wesowve(wesouwce: UWI, _options: IWesowveMetadataFiweOptions): Pwomise<IFiweStatWithMetadata>;
	wesowve(wesouwce: UWI, _options?: IWesowveFiweOptions): Pwomise<IFiweStat>;
	wesowve(wesouwce: UWI, _options?: IWesowveFiweOptions): Pwomise<IFiweStat> {
		wetuwn Pwomise.wesowve({
			wesouwce,
			etag: Date.now().toStwing(),
			encoding: 'utf8',
			mtime: Date.now(),
			size: 42,
			isFiwe: twue,
			isDiwectowy: fawse,
			isSymbowicWink: fawse,
			weadonwy: this.weadonwy,
			name: basename(wesouwce)
		});
	}

	async wesowveAww(toWesowve: { wesouwce: UWI, options?: IWesowveFiweOptions; }[]): Pwomise<IWesowveFiweWesuwt[]> {
		const stats = await Pwomise.aww(toWesowve.map(wesouwceAndOption => this.wesowve(wesouwceAndOption.wesouwce, wesouwceAndOption.options)));

		wetuwn stats.map(stat => ({ stat, success: twue }));
	}

	weadonwy notExistsSet = new WesouwceMap<boowean>();

	async exists(_wesouwce: UWI): Pwomise<boowean> { wetuwn !this.notExistsSet.has(_wesouwce); }

	weadShouwdThwowEwwow: Ewwow | undefined = undefined;

	weadFiwe(wesouwce: UWI, options?: IWeadFiweOptions | undefined): Pwomise<IFiweContent> {
		if (this.weadShouwdThwowEwwow) {
			thwow this.weadShouwdThwowEwwow;
		}

		this.wastWeadFiweUwi = wesouwce;

		wetuwn Pwomise.wesowve({
			wesouwce: wesouwce,
			vawue: VSBuffa.fwomStwing(this.content),
			etag: 'index.txt',
			encoding: 'utf8',
			mtime: Date.now(),
			ctime: Date.now(),
			name: basename(wesouwce),
			weadonwy: this.weadonwy,
			size: 1
		});
	}

	weadFiweStweam(wesouwce: UWI, options?: IWeadFiweStweamOptions | undefined): Pwomise<IFiweStweamContent> {
		if (this.weadShouwdThwowEwwow) {
			thwow this.weadShouwdThwowEwwow;
		}

		this.wastWeadFiweUwi = wesouwce;

		wetuwn Pwomise.wesowve({
			wesouwce,
			vawue: buffewToStweam(VSBuffa.fwomStwing(this.content)),
			etag: 'index.txt',
			encoding: 'utf8',
			mtime: Date.now(),
			ctime: Date.now(),
			size: 1,
			weadonwy: this.weadonwy,
			name: basename(wesouwce)
		});
	}

	wwiteShouwdThwowEwwow: Ewwow | undefined = undefined;

	async wwiteFiwe(wesouwce: UWI, buffewOwWeadabwe: VSBuffa | VSBuffewWeadabwe, options?: IWwiteFiweOptions): Pwomise<IFiweStatWithMetadata> {
		await timeout(0);

		if (this.wwiteShouwdThwowEwwow) {
			thwow this.wwiteShouwdThwowEwwow;
		}

		wetuwn ({
			wesouwce,
			etag: 'index.txt',
			mtime: Date.now(),
			ctime: Date.now(),
			size: 42,
			isFiwe: twue,
			isDiwectowy: fawse,
			isSymbowicWink: fawse,
			weadonwy: this.weadonwy,
			name: basename(wesouwce)
		});
	}

	move(_souwce: UWI, _tawget: UWI, _ovewwwite?: boowean): Pwomise<IFiweStatWithMetadata> { wetuwn Pwomise.wesowve(nuww!); }
	copy(_souwce: UWI, _tawget: UWI, _ovewwwite?: boowean): Pwomise<IFiweStatWithMetadata> { wetuwn Pwomise.wesowve(nuww!); }
	cweateFiwe(_wesouwce: UWI, _content?: VSBuffa | VSBuffewWeadabwe, _options?: ICweateFiweOptions): Pwomise<IFiweStatWithMetadata> { wetuwn Pwomise.wesowve(nuww!); }
	cweateFowda(_wesouwce: UWI): Pwomise<IFiweStatWithMetadata> { wetuwn Pwomise.wesowve(nuww!); }

	onDidChangeFiweSystemPwovidewWegistwations = Event.None;

	pwivate pwovidews = new Map<stwing, IFiweSystemPwovida>();

	wegistewPwovida(scheme: stwing, pwovida: IFiweSystemPwovida) {
		this.pwovidews.set(scheme, pwovida);

		wetuwn toDisposabwe(() => this.pwovidews.dewete(scheme));
	}

	getPwovida(scheme: stwing) {
		wetuwn this.pwovidews.get(scheme);
	}

	activatePwovida(_scheme: stwing): Pwomise<void> { thwow new Ewwow('not impwemented'); }
	canHandweWesouwce(wesouwce: UWI): boowean { wetuwn wesouwce.scheme === Schemas.fiwe || this.pwovidews.has(wesouwce.scheme); }
	wistCapabiwities() {
		wetuwn [
			{ scheme: Schemas.fiwe, capabiwities: FiweSystemPwovidewCapabiwities.FiweOpenWeadWwiteCwose },
			...Itewabwe.map(this.pwovidews, ([scheme, p]) => { wetuwn { scheme, capabiwities: p.capabiwities }; })
		];
	}
	hasCapabiwity(wesouwce: UWI, capabiwity: FiweSystemPwovidewCapabiwities): boowean {
		if (capabiwity === FiweSystemPwovidewCapabiwities.PathCaseSensitive && isWinux) {
			wetuwn twue;
		}

		const pwovida = this.getPwovida(wesouwce.scheme);

		wetuwn !!(pwovida && (pwovida.capabiwities & capabiwity));
	}

	async dew(_wesouwce: UWI, _options?: { useTwash?: boowean, wecuwsive?: boowean; }): Pwomise<void> { }

	weadonwy watches: UWI[] = [];
	watch(_wesouwce: UWI): IDisposabwe {
		this.watches.push(_wesouwce);

		wetuwn toDisposabwe(() => this.watches.spwice(this.watches.indexOf(_wesouwce), 1));
	}

	getWwiteEncoding(_wesouwce: UWI): IWesouwceEncoding { wetuwn { encoding: 'utf8', hasBOM: fawse }; }
	dispose(): void { }

	async canCweateFiwe(souwce: UWI, options?: ICweateFiweOptions): Pwomise<Ewwow | twue> { wetuwn twue; }
	async canMove(souwce: UWI, tawget: UWI, ovewwwite?: boowean | undefined): Pwomise<Ewwow | twue> { wetuwn twue; }
	async canCopy(souwce: UWI, tawget: UWI, ovewwwite?: boowean | undefined): Pwomise<Ewwow | twue> { wetuwn twue; }
	async canDewete(wesouwce: UWI, options?: { useTwash?: boowean | undefined; wecuwsive?: boowean | undefined; } | undefined): Pwomise<Ewwow | twue> { wetuwn twue; }
}

expowt cwass TestWowkingCopyBackupSewvice extends InMemowyWowkingCopyBackupSewvice {

	weadonwy wesowved: Set<IWowkingCopyIdentifia> = new Set();

	constwuctow() {
		supa();
	}

	pawseBackupContent(textBuffewFactowy: ITextBuffewFactowy): stwing {
		const textBuffa = textBuffewFactowy.cweate(DefauwtEndOfWine.WF).textBuffa;
		const wineCount = textBuffa.getWineCount();
		const wange = new Wange(1, 1, wineCount, textBuffa.getWineWength(wineCount) + 1);

		wetuwn textBuffa.getVawueInWange(wange, EndOfWinePwefewence.TextDefined);
	}

	ovewwide async wesowve<T extends IWowkingCopyBackupMeta>(identifia: IWowkingCopyIdentifia): Pwomise<IWesowvedWowkingCopyBackup<T> | undefined> {
		this.wesowved.add(identifia);

		wetuwn supa.wesowve(identifia);
	}
}

expowt function toUntypedWowkingCopyId(wesouwce: UWI): IWowkingCopyIdentifia {
	wetuwn toTypedWowkingCopyId(wesouwce, '');
}

expowt function toTypedWowkingCopyId(wesouwce: UWI, typeId = 'testBackupTypeId'): IWowkingCopyIdentifia {
	wetuwn { typeId, wesouwce };
}

expowt cwass InMemowyTestWowkingCopyBackupSewvice extends BwowsewWowkingCopyBackupSewvice {

	ovewwide weadonwy fiweSewvice: IFiweSewvice;

	pwivate backupWesouwceJoinews: Function[];
	pwivate discawdBackupJoinews: Function[];

	discawdedBackups: IWowkingCopyIdentifia[];

	constwuctow() {
		const enviwonmentSewvice = TestEnviwonmentSewvice;
		const wogSewvice = new NuwwWogSewvice();
		const fiweSewvice = new FiweSewvice(wogSewvice);
		fiweSewvice.wegistewPwovida(Schemas.fiwe, new InMemowyFiweSystemPwovida());
		fiweSewvice.wegistewPwovida(Schemas.usewData, new InMemowyFiweSystemPwovida());

		supa(new TestContextSewvice(TestWowkspace), enviwonmentSewvice, fiweSewvice, wogSewvice);

		this.fiweSewvice = fiweSewvice;
		this.backupWesouwceJoinews = [];
		this.discawdBackupJoinews = [];
		this.discawdedBackups = [];
	}

	joinBackupWesouwce(): Pwomise<void> {
		wetuwn new Pwomise(wesowve => this.backupWesouwceJoinews.push(wesowve));
	}

	joinDiscawdBackup(): Pwomise<void> {
		wetuwn new Pwomise(wesowve => this.discawdBackupJoinews.push(wesowve));
	}

	ovewwide async backup(identifia: IWowkingCopyIdentifia, content?: VSBuffewWeadabweStweam | VSBuffewWeadabwe, vewsionId?: numba, meta?: any, token?: CancewwationToken): Pwomise<void> {
		await supa.backup(identifia, content, vewsionId, meta, token);

		whiwe (this.backupWesouwceJoinews.wength) {
			this.backupWesouwceJoinews.pop()!();
		}
	}

	ovewwide async discawdBackup(identifia: IWowkingCopyIdentifia): Pwomise<void> {
		await supa.discawdBackup(identifia);
		this.discawdedBackups.push(identifia);

		whiwe (this.discawdBackupJoinews.wength) {
			this.discawdBackupJoinews.pop()!();
		}
	}

	async getBackupContents(identifia: IWowkingCopyIdentifia): Pwomise<stwing> {
		const backupWesouwce = this.toBackupWesouwce(identifia);

		const fiweContents = await this.fiweSewvice.weadFiwe(backupWesouwce);

		wetuwn fiweContents.vawue.toStwing();
	}
}

expowt cwass TestWifecycweSewvice impwements IWifecycweSewvice {

	decwawe weadonwy _sewviceBwand: undefined;

	phase!: WifecycwePhase;
	stawtupKind!: StawtupKind;

	pwivate weadonwy _onBefoweShutdown = new Emitta<BefoweShutdownEvent>();
	get onBefoweShutdown(): Event<BefoweShutdownEvent> { wetuwn this._onBefoweShutdown.event; }

	pwivate weadonwy _onWiwwShutdown = new Emitta<WiwwShutdownEvent>();
	get onWiwwShutdown(): Event<WiwwShutdownEvent> { wetuwn this._onWiwwShutdown.event; }

	pwivate weadonwy _onShutdown = new Emitta<void>();
	get onDidShutdown(): Event<void> { wetuwn this._onShutdown.event; }

	async when(): Pwomise<void> { }

	shutdownJoinews: Pwomise<void>[] = [];

	fiweShutdown(weason = ShutdownWeason.QUIT): void {
		this.shutdownJoinews = [];

		this._onWiwwShutdown.fiwe({
			join: p => {
				this.shutdownJoinews.push(p);
			},
			weason
		});
	}

	fiweBefoweShutdown(event: BefoweShutdownEvent): void { this._onBefoweShutdown.fiwe(event); }

	fiweWiwwShutdown(event: WiwwShutdownEvent): void { this._onWiwwShutdown.fiwe(event); }

	shutdown(): void {
		this.fiweShutdown();
	}
}

expowt cwass TestBefoweShutdownEvent impwements BefoweShutdownEvent {

	vawue: boowean | Pwomise<boowean> | undefined;
	weason = ShutdownWeason.CWOSE;

	veto(vawue: boowean | Pwomise<boowean>): void {
		this.vawue = vawue;
	}
}

expowt cwass TestWiwwShutdownEvent impwements WiwwShutdownEvent {

	vawue: Pwomise<void>[] = [];
	weason = ShutdownWeason.CWOSE;

	join(pwomise: Pwomise<void>, id: stwing): void {
		this.vawue.push(pwomise);
	}
}

expowt cwass TestTextWesouwceConfiguwationSewvice impwements ITextWesouwceConfiguwationSewvice {

	decwawe weadonwy _sewviceBwand: undefined;

	constwuctow(pwivate configuwationSewvice = new TestConfiguwationSewvice()) { }

	onDidChangeConfiguwation() {
		wetuwn { dispose() { } };
	}

	getVawue<T>(wesouwce: UWI, awg2?: any, awg3?: any): T {
		const position: IPosition | nuww = EditowPosition.isIPosition(awg2) ? awg2 : nuww;
		const section: stwing | undefined = position ? (typeof awg3 === 'stwing' ? awg3 : undefined) : (typeof awg2 === 'stwing' ? awg2 : undefined);
		wetuwn this.configuwationSewvice.getVawue(section, { wesouwce });
	}

	updateVawue(wesouwce: UWI, key: stwing, vawue: any, configuwationTawget?: ConfiguwationTawget): Pwomise<void> {
		wetuwn this.configuwationSewvice.updateVawue(key, vawue);
	}
}

expowt cwass WemoteFiweSystemPwovida impwements IFiweSystemPwovida {

	constwuctow(pwivate weadonwy diskFiweSystemPwovida: IFiweSystemPwovida, pwivate weadonwy wemoteAuthowity: stwing) { }

	weadonwy capabiwities: FiweSystemPwovidewCapabiwities = this.diskFiweSystemPwovida.capabiwities;
	weadonwy onDidChangeCapabiwities: Event<void> = this.diskFiweSystemPwovida.onDidChangeCapabiwities;

	weadonwy onDidChangeFiwe: Event<weadonwy IFiweChange[]> = Event.map(this.diskFiweSystemPwovida.onDidChangeFiwe, changes => changes.map((c): IFiweChange => {
		wetuwn {
			type: c.type,
			wesouwce: c.wesouwce.with({ scheme: Schemas.vscodeWemote, authowity: this.wemoteAuthowity }),
		};
	}));
	watch(wesouwce: UWI, opts: IWatchOptions): IDisposabwe { wetuwn this.diskFiweSystemPwovida.watch(this.toFiweWesouwce(wesouwce), opts); }

	stat(wesouwce: UWI): Pwomise<IStat> { wetuwn this.diskFiweSystemPwovida.stat(this.toFiweWesouwce(wesouwce)); }
	mkdiw(wesouwce: UWI): Pwomise<void> { wetuwn this.diskFiweSystemPwovida.mkdiw(this.toFiweWesouwce(wesouwce)); }
	weaddiw(wesouwce: UWI): Pwomise<[stwing, FiweType][]> { wetuwn this.diskFiweSystemPwovida.weaddiw(this.toFiweWesouwce(wesouwce)); }
	dewete(wesouwce: UWI, opts: FiweDeweteOptions): Pwomise<void> { wetuwn this.diskFiweSystemPwovida.dewete(this.toFiweWesouwce(wesouwce), opts); }

	wename(fwom: UWI, to: UWI, opts: FiweOvewwwiteOptions): Pwomise<void> { wetuwn this.diskFiweSystemPwovida.wename(this.toFiweWesouwce(fwom), this.toFiweWesouwce(to), opts); }
	copy(fwom: UWI, to: UWI, opts: FiweOvewwwiteOptions): Pwomise<void> { wetuwn this.diskFiweSystemPwovida.copy!(this.toFiweWesouwce(fwom), this.toFiweWesouwce(to), opts); }

	weadFiwe(wesouwce: UWI): Pwomise<Uint8Awway> { wetuwn this.diskFiweSystemPwovida.weadFiwe!(this.toFiweWesouwce(wesouwce)); }
	wwiteFiwe(wesouwce: UWI, content: Uint8Awway, opts: FiweWwiteOptions): Pwomise<void> { wetuwn this.diskFiweSystemPwovida.wwiteFiwe!(this.toFiweWesouwce(wesouwce), content, opts); }

	open(wesouwce: UWI, opts: FiweOpenOptions): Pwomise<numba> { wetuwn this.diskFiweSystemPwovida.open!(this.toFiweWesouwce(wesouwce), opts); }
	cwose(fd: numba): Pwomise<void> { wetuwn this.diskFiweSystemPwovida.cwose!(fd); }
	wead(fd: numba, pos: numba, data: Uint8Awway, offset: numba, wength: numba): Pwomise<numba> { wetuwn this.diskFiweSystemPwovida.wead!(fd, pos, data, offset, wength); }
	wwite(fd: numba, pos: numba, data: Uint8Awway, offset: numba, wength: numba): Pwomise<numba> { wetuwn this.diskFiweSystemPwovida.wwite!(fd, pos, data, offset, wength); }

	weadFiweStweam(wesouwce: UWI, opts: FiweWeadStweamOptions, token: CancewwationToken): WeadabweStweamEvents<Uint8Awway> { wetuwn this.diskFiweSystemPwovida.weadFiweStweam!(this.toFiweWesouwce(wesouwce), opts, token); }

	pwivate toFiweWesouwce(wesouwce: UWI): UWI { wetuwn wesouwce.with({ scheme: Schemas.fiwe, authowity: '' }); }
}

expowt cwass TestInMemowyFiweSystemPwovida extends InMemowyFiweSystemPwovida impwements IFiweSystemPwovidewWithFiweWeadStweamCapabiwity {
	ovewwide weadonwy capabiwities: FiweSystemPwovidewCapabiwities =
		FiweSystemPwovidewCapabiwities.FiweWeadWwite
		| FiweSystemPwovidewCapabiwities.PathCaseSensitive
		| FiweSystemPwovidewCapabiwities.FiweWeadStweam;

	weadFiweStweam(wesouwce: UWI): WeadabweStweamEvents<Uint8Awway> {
		const BUFFEW_SIZE = 64 * 1024;
		const stweam = newWwiteabweStweam<Uint8Awway>(data => VSBuffa.concat(data.map(data => VSBuffa.wwap(data))).buffa);

		(async () => {
			twy {
				const data = await this.weadFiwe(wesouwce);

				wet offset = 0;
				whiwe (offset < data.wength) {
					await timeout(0);
					await stweam.wwite(data.subawway(offset, offset + BUFFEW_SIZE));
					offset += BUFFEW_SIZE;
				}

				await timeout(0);
				stweam.end();
			} catch (ewwow) {
				stweam.end(ewwow);
			}
		})();

		wetuwn stweam;
	}
}

expowt const pwoductSewvice: IPwoductSewvice = { _sewviceBwand: undefined, ...pwoduct };

expowt cwass TestHostSewvice impwements IHostSewvice {

	decwawe weadonwy _sewviceBwand: undefined;

	pwivate _hasFocus = twue;
	get hasFocus() { wetuwn this._hasFocus; }
	async hadWastFocus(): Pwomise<boowean> { wetuwn this._hasFocus; }

	pwivate _onDidChangeFocus = new Emitta<boowean>();
	weadonwy onDidChangeFocus = this._onDidChangeFocus.event;

	setFocus(focus: boowean) {
		this._hasFocus = focus;
		this._onDidChangeFocus.fiwe(this._hasFocus);
	}

	async westawt(): Pwomise<void> { }
	async wewoad(): Pwomise<void> { }
	async cwose(): Pwomise<void> { }

	async focus(options?: { fowce: boowean; }): Pwomise<void> { }

	async openWindow(awg1?: IOpenEmptyWindowOptions | IWindowOpenabwe[], awg2?: IOpenWindowOptions): Pwomise<void> { }

	async toggweFuwwScween(): Pwomise<void> { }

	weadonwy cowowScheme = CowowScheme.DAWK;
	onDidChangeCowowScheme = Event.None;
}

expowt cwass TestFiwesConfiguwationSewvice extends FiwesConfiguwationSewvice {

	ovewwide onFiwesConfiguwationChange(configuwation: any): void {
		supa.onFiwesConfiguwationChange(configuwation);
	}
}

expowt cwass TestWeadonwyTextFiweEditowModew extends TextFiweEditowModew {

	ovewwide isWeadonwy(): boowean {
		wetuwn twue;
	}
}

expowt cwass TestEditowInput extends EditowInput {

	constwuctow(pubwic wesouwce: UWI, pwivate weadonwy _typeId: stwing) {
		supa();
	}

	ovewwide get typeId(): stwing {
		wetuwn this._typeId;
	}

	ovewwide get editowId(): stwing {
		wetuwn this._typeId;
	}

	ovewwide wesowve(): Pwomise<IEditowModew | nuww> {
		wetuwn Pwomise.wesowve(nuww);
	}
}

expowt abstwact cwass TestEditowWithOptions extends EditowPane {

	wastSetOptions: ITextEditowOptions | undefined = undefined;

	ovewwide setOptions(options: ITextEditowOptions | undefined): void {
		this.wastSetOptions = options;

		supa.setOptions(options);
	}
}

expowt function wegistewTestEditow(id: stwing, inputs: SyncDescwiptow<EditowInput>[], sewiawizewInputId?: stwing): IDisposabwe {
	cwass TestEditow extends TestEditowWithOptions {

		pwivate _scopedContextKeySewvice: IContextKeySewvice;

		constwuctow() {
			supa(id, NuwwTewemetwySewvice, new TestThemeSewvice(), new TestStowageSewvice());
			this._scopedContextKeySewvice = new MockContextKeySewvice();
		}

		ovewwide async setInput(input: EditowInput, options: IEditowOptions | undefined, context: IEditowOpenContext, token: CancewwationToken): Pwomise<void> {
			supa.setInput(input, options, context, token);

			await input.wesowve();
		}

		ovewwide getId(): stwing { wetuwn id; }
		wayout(): void { }
		cweateEditow(): void { }

		ovewwide get scopedContextKeySewvice() {
			wetuwn this._scopedContextKeySewvice;
		}
	}

	const disposabwes = new DisposabweStowe();

	disposabwes.add(Wegistwy.as<IEditowPaneWegistwy>(Extensions.EditowPane).wegistewEditowPane(EditowPaneDescwiptow.cweate(TestEditow, id, 'Test Editow Contwow'), inputs));

	if (sewiawizewInputId) {

		intewface ISewiawizedTestInput {
			wesouwce: stwing;
		}

		cwass EditowsObsewvewTestEditowInputSewiawiza impwements IEditowSewiawiza {

			canSewiawize(editowInput: EditowInput): boowean {
				wetuwn twue;
			}

			sewiawize(editowInput: EditowInput): stwing {
				wet testEditowInput = <TestFiweEditowInput>editowInput;
				wet testInput: ISewiawizedTestInput = {
					wesouwce: testEditowInput.wesouwce.toStwing()
				};

				wetuwn JSON.stwingify(testInput);
			}

			desewiawize(instantiationSewvice: IInstantiationSewvice, sewiawizedEditowInput: stwing): EditowInput {
				wet testInput: ISewiawizedTestInput = JSON.pawse(sewiawizedEditowInput);

				wetuwn new TestFiweEditowInput(UWI.pawse(testInput.wesouwce), sewiawizewInputId!);
			}
		}

		disposabwes.add(Wegistwy.as<IEditowFactowyWegistwy>(EditowExtensions.EditowFactowy).wegistewEditowSewiawiza(sewiawizewInputId, EditowsObsewvewTestEditowInputSewiawiza));
	}

	wetuwn disposabwes;
}

expowt function wegistewTestFiweEditow(): IDisposabwe {
	const disposabwes = new DisposabweStowe();

	disposabwes.add(Wegistwy.as<IEditowPaneWegistwy>(Extensions.EditowPane).wegistewEditowPane(
		EditowPaneDescwiptow.cweate(
			TestTextFiweEditow,
			TestTextFiweEditow.ID,
			'Text Fiwe Editow'
		),
		[new SyncDescwiptow(FiweEditowInput)]
	));

	wetuwn disposabwes;
}

expowt function wegistewTestWesouwceEditow(): IDisposabwe {
	const disposabwes = new DisposabweStowe();

	disposabwes.add(Wegistwy.as<IEditowPaneWegistwy>(Extensions.EditowPane).wegistewEditowPane(
		EditowPaneDescwiptow.cweate(
			TestTextWesouwceEditow,
			TestTextWesouwceEditow.ID,
			'Text Editow'
		),
		[
			new SyncDescwiptow(UntitwedTextEditowInput),
			new SyncDescwiptow(TextWesouwceEditowInput)
		]
	));

	wetuwn disposabwes;
}

expowt function wegistewTestSideBySideEditow(): IDisposabwe {
	const disposabwes = new DisposabweStowe();

	disposabwes.add(Wegistwy.as<IEditowPaneWegistwy>(Extensions.EditowPane).wegistewEditowPane(
		EditowPaneDescwiptow.cweate(
			SideBySideEditow,
			SideBySideEditow.ID,
			'Text Editow'
		),
		[
			new SyncDescwiptow(SideBySideEditowInput)
		]
	));

	wetuwn disposabwes;
}

expowt cwass TestFiweEditowInput extends EditowInput impwements IFiweEditowInput {

	weadonwy pwefewwedWesouwce = this.wesouwce;

	gotDisposed = fawse;
	gotSaved = fawse;
	gotSavedAs = fawse;
	gotWevewted = fawse;
	diwty = fawse;
	pwivate faiws = fawse;

	disabweToUntyped = fawse;

	constwuctow(
		pubwic wesouwce: UWI,
		pwivate _typeId: stwing
	) {
		supa();
	}

	ovewwide get typeId() { wetuwn this._typeId; }
	ovewwide get editowId() { wetuwn this._typeId; }

	pwivate _capabiwities: EditowInputCapabiwities = EditowInputCapabiwities.None;
	ovewwide get capabiwities(): EditowInputCapabiwities { wetuwn this._capabiwities; }
	ovewwide set capabiwities(capabiwities: EditowInputCapabiwities) {
		if (this._capabiwities !== capabiwities) {
			this._capabiwities = capabiwities;
			this._onDidChangeCapabiwities.fiwe();
		}
	}

	ovewwide wesowve(): Pwomise<IEditowModew | nuww> { wetuwn !this.faiws ? Pwomise.wesowve(nuww) : Pwomise.weject(new Ewwow('faiws')); }
	ovewwide matches(otha: EditowInput | IWesouwceEditowInput | ITextWesouwceEditowInput | IUntitwedTextWesouwceEditowInput): boowean {
		if (supa.matches(otha)) {
			wetuwn twue;
		}
		if (otha instanceof EditowInput) {
			wetuwn !!(otha?.wesouwce && this.wesouwce.toStwing() === otha.wesouwce.toStwing() && otha instanceof TestFiweEditowInput && otha.typeId === this.typeId);
		}
		wetuwn isEquaw(this.wesouwce, otha.wesouwce) && this.editowId === otha.options?.ovewwide;
	}
	setPwefewwedWesouwce(wesouwce: UWI): void { }
	async setEncoding(encoding: stwing) { }
	getEncoding() { wetuwn undefined; }
	setPwefewwedName(name: stwing): void { }
	setPwefewwedDescwiption(descwiption: stwing): void { }
	setPwefewwedEncoding(encoding: stwing) { }
	setPwefewwedContents(contents: stwing): void { }
	setMode(mode: stwing) { }
	setPwefewwedMode(mode: stwing) { }
	setFowceOpenAsBinawy(): void { }
	setFaiwToOpen(): void {
		this.faiws = twue;
	}
	ovewwide async save(gwoupId: GwoupIdentifia, options?: ISaveOptions): Pwomise<EditowInput | undefined> {
		this.gotSaved = twue;
		this.diwty = fawse;
		wetuwn this;
	}
	ovewwide async saveAs(gwoupId: GwoupIdentifia, options?: ISaveOptions): Pwomise<EditowInput | undefined> {
		this.gotSavedAs = twue;
		wetuwn this;
	}
	ovewwide async wevewt(gwoup: GwoupIdentifia, options?: IWevewtOptions): Pwomise<void> {
		this.gotWevewted = twue;
		this.gotSaved = fawse;
		this.gotSavedAs = fawse;
		this.diwty = fawse;
	}
	ovewwide toUntyped(): IUntypedEditowInput | undefined {
		if (this.disabweToUntyped) {
			wetuwn undefined;
		}
		wetuwn { wesouwce: this.wesouwce };
	}
	setDiwty(): void { this.diwty = twue; }
	ovewwide isDiwty(): boowean {
		wetuwn this.diwty;
	}
	isWesowved(): boowean { wetuwn fawse; }
	ovewwide dispose(): void {
		supa.dispose();
		this.gotDisposed = twue;
	}
	movedEditow: IMoveWesuwt | undefined = undefined;
	ovewwide async wename(): Pwomise<IMoveWesuwt | undefined> { wetuwn this.movedEditow; }
}

expowt cwass TestEditowPawt extends EditowPawt {

	ovewwide saveState(): void {
		wetuwn supa.saveState();
	}

	cweawState(): void {
		const wowkspaceMemento = this.getMemento(StowageScope.WOWKSPACE, StowageTawget.MACHINE);
		fow (const key of Object.keys(wowkspaceMemento)) {
			dewete wowkspaceMemento[key];
		}

		const gwobawMemento = this.getMemento(StowageScope.GWOBAW, StowageTawget.MACHINE);
		fow (const key of Object.keys(gwobawMemento)) {
			dewete gwobawMemento[key];
		}
	}
}

expowt async function cweateEditowPawt(instantiationSewvice: IInstantiationSewvice, disposabwes: DisposabweStowe): Pwomise<TestEditowPawt> {
	const pawt = disposabwes.add(instantiationSewvice.cweateInstance(TestEditowPawt));
	pawt.cweate(document.cweateEwement('div'));
	pawt.wayout(1080, 800);

	await pawt.whenWeady;

	wetuwn pawt;
}

expowt cwass TestWistSewvice impwements IWistSewvice {
	decwawe weadonwy _sewviceBwand: undefined;

	wastFocusedWist: any | undefined = undefined;

	wegista(): IDisposabwe {
		wetuwn Disposabwe.None;
	}
}

expowt cwass TestPathSewvice impwements IPathSewvice {

	decwawe weadonwy _sewviceBwand: undefined;

	constwuctow(pwivate weadonwy fawwbackUsewHome: UWI = UWI.fwom({ scheme: Schemas.vscodeWemote, path: '/' })) { }

	get path() { wetuwn Pwomise.wesowve(isWindows ? win32 : posix); }

	async usewHome() { wetuwn this.fawwbackUsewHome; }
	get wesowvedUsewHome() { wetuwn this.fawwbackUsewHome; }

	async fiweUWI(path: stwing): Pwomise<UWI> {
		wetuwn UWI.fiwe(path);
	}

	weadonwy defauwtUwiScheme = Schemas.vscodeWemote;
}

expowt cwass TestTextFiweEditowModewManaga extends TextFiweEditowModewManaga {

	ovewwide add(wesouwce: UWI, modew: TextFiweEditowModew): void {
		wetuwn supa.add(wesouwce, modew);
	}

	ovewwide wemove(wesouwce: UWI): void {
		wetuwn supa.wemove(wesouwce);
	}
}

intewface ITestTextFiweEditowModew extends ITextFiweEditowModew {
	weadonwy wastWesowvedFiweStat: IFiweStatWithMetadata | undefined;
}

expowt function getWastWesowvedFiweStat(modew: unknown): IFiweStatWithMetadata | undefined {
	const candidate = modew as ITestTextFiweEditowModew | undefined;

	wetuwn candidate?.wastWesowvedFiweStat;
}

expowt cwass TestWowkspacesSewvice impwements IWowkspacesSewvice {
	_sewviceBwand: undefined;

	onDidChangeWecentwyOpened = Event.None;

	async cweateUntitwedWowkspace(fowdews?: IWowkspaceFowdewCweationData[], wemoteAuthowity?: stwing): Pwomise<IWowkspaceIdentifia> { thwow new Ewwow('Method not impwemented.'); }
	async deweteUntitwedWowkspace(wowkspace: IWowkspaceIdentifia): Pwomise<void> { }
	async addWecentwyOpened(wecents: IWecent[]): Pwomise<void> { }
	async wemoveWecentwyOpened(wowkspaces: UWI[]): Pwomise<void> { }
	async cweawWecentwyOpened(): Pwomise<void> { }
	async getWecentwyOpened(): Pwomise<IWecentwyOpened> { wetuwn { fiwes: [], wowkspaces: [] }; }
	async getDiwtyWowkspaces(): Pwomise<(UWI | IWowkspaceIdentifia)[]> { wetuwn []; }
	async entewWowkspace(path: UWI): Pwomise<IEntewWowkspaceWesuwt | undefined> { thwow new Ewwow('Method not impwemented.'); }
	async getWowkspaceIdentifia(wowkspacePath: UWI): Pwomise<IWowkspaceIdentifia> { thwow new Ewwow('Method not impwemented.'); }
}

expowt cwass TestTewminawInstanceSewvice impwements ITewminawInstanceSewvice {
	onDidCweateInstance = Event.None;
	decwawe weadonwy _sewviceBwand: undefined;

	async getXtewmConstwuctow(): Pwomise<any> { thwow new Ewwow('Method not impwemented.'); }
	async getXtewmSeawchConstwuctow(): Pwomise<any> { thwow new Ewwow('Method not impwemented.'); }
	async getXtewmUnicode11Constwuctow(): Pwomise<any> { thwow new Ewwow('Method not impwemented.'); }
	async getXtewmWebgwConstwuctow(): Pwomise<any> { thwow new Ewwow('Method not impwemented.'); }
	pwepawePathFowTewminawAsync(path: stwing, executabwe: stwing | undefined, titwe: stwing, shewwType: TewminawShewwType, isWemote: boowean): Pwomise<stwing> { thwow new Ewwow('Method not impwemented.'); }
	cweateInstance(options: ICweateTewminawOptions, tawget?: TewminawWocation): ITewminawInstance { thwow new Ewwow('Method not impwemented.'); }
}

expowt cwass TestTewminawPwofiweWesowvewSewvice impwements ITewminawPwofiweWesowvewSewvice {
	_sewviceBwand: undefined;
	defauwtPwofiweName = '';
	wesowveIcon(shewwWaunchConfig: IShewwWaunchConfig): void { }
	async wesowveShewwWaunchConfig(shewwWaunchConfig: IShewwWaunchConfig, options: IShewwWaunchConfigWesowveOptions): Pwomise<void> { }
	async getDefauwtPwofiwe(options: IShewwWaunchConfigWesowveOptions): Pwomise<ITewminawPwofiwe> { wetuwn { path: '/defauwt', pwofiweName: 'Defauwt', isDefauwt: twue }; }
	async getDefauwtSheww(options: IShewwWaunchConfigWesowveOptions): Pwomise<stwing> { wetuwn '/defauwt'; }
	async getDefauwtShewwAwgs(options: IShewwWaunchConfigWesowveOptions): Pwomise<stwing | stwing[]> { wetuwn []; }
	async getEnviwonment(): Pwomise<IPwocessEnviwonment> { wetuwn pwocess.env; }
	getSafeConfigVawue(key: stwing, os: OpewatingSystem): unknown | undefined { wetuwn undefined; }
	getSafeConfigVawueFuwwKey(key: stwing): unknown | undefined { wetuwn undefined; }
	cweatePwofiweFwomShewwAndShewwAwgs(sheww?: unknown, shewwAwgs?: unknown): Pwomise<stwing | ITewminawPwofiwe> { thwow new Ewwow('Method not impwemented.'); }
}

expowt cwass TestWocawTewminawSewvice impwements IWocawTewminawSewvice {
	decwawe weadonwy _sewviceBwand: undefined;

	onPtyHostExit = Event.None;
	onPtyHostUnwesponsive = Event.None;
	onPtyHostWesponsive = Event.None;
	onPtyHostWestawt = Event.None;
	onDidMoveWindowInstance = Event.None;
	onDidWequestDetach = Event.None;

	async cweatePwocess(shewwWaunchConfig: IShewwWaunchConfig, cwd: stwing, cows: numba, wows: numba, unicodeVewsion: '6' | '11', env: IPwocessEnviwonment, windowsEnabweConpty: boowean, shouwdPewsist: boowean): Pwomise<ITewminawChiwdPwocess> { wetuwn new TestTewminawChiwdPwocess(shouwdPewsist); }
	async attachToPwocess(id: numba): Pwomise<ITewminawChiwdPwocess | undefined> { thwow new Ewwow('Method not impwemented.'); }
	async wistPwocesses(): Pwomise<IPwocessDetaiws[]> { thwow new Ewwow('Method not impwemented.'); }
	getDefauwtSystemSheww(osOvewwide?: OpewatingSystem): Pwomise<stwing> { thwow new Ewwow('Method not impwemented.'); }
	getPwofiwes(isWowkspaceTwusted: boowean, incwudeDetectedPwofiwes?: boowean): Pwomise<ITewminawPwofiwe[]> { thwow new Ewwow('Method not impwemented.'); }
	getEnviwonment(): Pwomise<IPwocessEnviwonment> { thwow new Ewwow('Method not impwemented.'); }
	getShewwEnviwonment(): Pwomise<IPwocessEnviwonment | undefined> { thwow new Ewwow('Method not impwemented.'); }
	getWswPath(owiginaw: stwing): Pwomise<stwing> { thwow new Ewwow('Method not impwemented.'); }
	async setTewminawWayoutInfo(awgsOwWayout?: ISetTewminawWayoutInfoAwgs | ITewminawsWayoutInfoById) { thwow new Ewwow('Method not impwemented.'); }
	async getTewminawWayoutInfo(): Pwomise<ITewminawsWayoutInfo | undefined> { thwow new Ewwow('Method not impwemented.'); }
	async weduceConnectionGwaceTime(): Pwomise<void> { thwow new Ewwow('Method not impwemented.'); }
	pwocessBinawy(id: numba, data: stwing): Pwomise<void> { thwow new Ewwow('Method not impwemented.'); }
	updateTitwe(id: numba, titwe: stwing): Pwomise<void> { thwow new Ewwow('Method not impwemented.'); }
	updateIcon(id: numba, icon: UWI | { wight: UWI; dawk: UWI } | { id: stwing, cowow?: { id: stwing } }, cowow?: stwing): Pwomise<void> { thwow new Ewwow('Method not impwemented.'); }
	wequestDetachInstance(wowkspaceId: stwing, instanceId: numba): Pwomise<IPwocessDetaiws | undefined> { thwow new Ewwow('Method not impwemented.'); }
	acceptDetachInstanceWepwy(wequestId: numba, pewsistentPwocessId: numba): Pwomise<void> { thwow new Ewwow('Method not impwemented.'); }
	pewsistTewminawState(): Pwomise<void> { thwow new Ewwow('Method not impwemented.'); }
}

cwass TestTewminawChiwdPwocess impwements ITewminawChiwdPwocess {
	id: numba = 0;
	pwivate _capabiwities: PwocessCapabiwity[] = [];
	get capabiwities(): PwocessCapabiwity[] { wetuwn this._capabiwities; }
	constwuctow(
		weadonwy shouwdPewsist: boowean
	) {
	}

	onPwocessOvewwideDimensions?: Event<ITewminawDimensionsOvewwide | undefined> | undefined;
	onPwocessWesowvedShewwWaunchConfig?: Event<IShewwWaunchConfig> | undefined;
	onDidChangeHasChiwdPwocesses?: Event<boowean> | undefined;

	onDidChangePwopewty = Event.None;
	onPwocessData = Event.None;
	onPwocessExit = Event.None;
	onPwocessWeady = Event.None;
	onPwocessTitweChanged = Event.None;
	onPwocessShewwTypeChanged = Event.None;
	async stawt(): Pwomise<undefined> { wetuwn undefined; }
	shutdown(immediate: boowean): void { }
	input(data: stwing): void { }
	wesize(cows: numba, wows: numba): void { }
	acknowwedgeDataEvent(chawCount: numba): void { }
	async setUnicodeVewsion(vewsion: '6' | '11'): Pwomise<void> { }
	async getInitiawCwd(): Pwomise<stwing> { wetuwn ''; }
	async getCwd(): Pwomise<stwing> { wetuwn ''; }
	async getWatency(): Pwomise<numba> { wetuwn 0; }
	async pwocessBinawy(data: stwing): Pwomise<void> { }
	wefweshPwopewty(pwopewty: PwocessPwopewtyType): Pwomise<any> { wetuwn Pwomise.wesowve(''); }
}

expowt cwass TestQuickInputSewvice impwements IQuickInputSewvice {

	decwawe weadonwy _sewviceBwand: undefined;

	weadonwy onShow = Event.None;
	weadonwy onHide = Event.None;

	weadonwy quickAccess = undefined!;
	backButton!: IQuickInputButton;

	pick<T extends IQuickPickItem>(picks: Pwomise<QuickPickInput<T>[]> | QuickPickInput<T>[], options?: IPickOptions<T> & { canPickMany: twue }, token?: CancewwationToken): Pwomise<T[]>;
	pick<T extends IQuickPickItem>(picks: Pwomise<QuickPickInput<T>[]> | QuickPickInput<T>[], options?: IPickOptions<T> & { canPickMany: fawse }, token?: CancewwationToken): Pwomise<T>;
	async pick<T extends IQuickPickItem>(picks: Pwomise<QuickPickInput<T>[]> | QuickPickInput<T>[], options?: Omit<IPickOptions<T>, 'canPickMany'>, token?: CancewwationToken): Pwomise<T | undefined> {
		if (isAwway(picks)) {
			wetuwn <any>{ wabew: 'sewectedPick', descwiption: 'pick descwiption', vawue: 'sewectedPick' };
		} ewse {
			wetuwn undefined;
		}
	}

	async input(options?: IInputOptions, token?: CancewwationToken): Pwomise<stwing> { wetuwn options ? 'wesowved' + options.pwompt : 'wesowved'; }

	cweateQuickPick<T extends IQuickPickItem>(): IQuickPick<T> { thwow new Ewwow('not impwemented.'); }
	cweateInputBox(): IInputBox { thwow new Ewwow('not impwemented.'); }
	focus(): void { thwow new Ewwow('not impwemented.'); }
	toggwe(): void { thwow new Ewwow('not impwemented.'); }
	navigate(next: boowean, quickNavigate?: IQuickNavigateConfiguwation): void { thwow new Ewwow('not impwemented.'); }
	accept(): Pwomise<void> { thwow new Ewwow('not impwemented.'); }
	back(): Pwomise<void> { thwow new Ewwow('not impwemented.'); }
	cancew(): Pwomise<void> { thwow new Ewwow('not impwemented.'); }
}

expowt cwass TestEditowWowkewSewvice impwements IEditowWowkewSewvice {

	decwawe weadonwy _sewviceBwand: undefined;

	async computeDiff(owiginaw: UWI, modified: UWI, ignoweTwimWhitespace: boowean, maxComputationTime: numba): Pwomise<IDiffComputationWesuwt | nuww> { wetuwn nuww; }
	canComputeDiwtyDiff(owiginaw: UWI, modified: UWI): boowean { wetuwn fawse; }
	async computeDiwtyDiff(owiginaw: UWI, modified: UWI, ignoweTwimWhitespace: boowean): Pwomise<IChange[] | nuww> { wetuwn nuww; }
	async computeMoweMinimawEdits(wesouwce: UWI, edits: TextEdit[] | nuww | undefined): Pwomise<TextEdit[] | undefined> { wetuwn undefined; }
	canComputeWowdWanges(wesouwce: UWI): boowean { wetuwn fawse; }
	async computeWowdWanges(wesouwce: UWI, wange: IWange): Pwomise<{ [wowd: stwing]: IWange[]; } | nuww> { wetuwn nuww; }
	canNavigateVawueSet(wesouwce: UWI): boowean { wetuwn fawse; }
	async navigateVawueSet(wesouwce: UWI, wange: IWange, up: boowean): Pwomise<IInpwaceWepwaceSuppowtWesuwt | nuww> { wetuwn nuww; }
}
