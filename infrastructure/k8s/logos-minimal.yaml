---
# Minimal Logos deployment for infrastructure testing
# Will be replaced by Helm once images are built
apiVersion: v1
kind: Namespace
metadata:
  name: logos
  labels:
    app.kubernetes.io/name: logos
    platform: bravozero
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: logos-config
  namespace: logos
data:
  D3N_ENDPOINT: "http://d3n-gateway.bravozero.svc:9090"
  ARIA_ENDPOINT: "http://aria-inference.aria-inference.svc:80"
  PERSONA_ENDPOINT: "http://persona-api.persona-staging.svc:80"
  NODE_ENV: "production"
---
# Logos Web - Placeholder with nginx until real images built
apiVersion: apps/v1
kind: Deployment
metadata:
  name: logos-web
  namespace: logos
  labels:
    app: logos-web
    app.kubernetes.io/name: logos
    app.kubernetes.io/component: web
spec:
  replicas: 2
  selector:
    matchLabels:
      app: logos-web
  template:
    metadata:
      labels:
        app: logos-web
        app.kubernetes.io/name: logos
        app.kubernetes.io/component: web
    spec:
      containers:
        - name: logos-web
          image: nginx:alpine
          ports:
            - containerPort: 80
          resources:
            limits:
              cpu: 500m
              memory: 512Mi
            requests:
              cpu: 100m
              memory: 128Mi
          livenessProbe:
            httpGet:
              path: /
              port: 80
            initialDelaySeconds: 10
            periodSeconds: 10
          readinessProbe:
            httpGet:
              path: /
              port: 80
            initialDelaySeconds: 5
            periodSeconds: 5
          volumeMounts:
            - name: nginx-config
              mountPath: /etc/nginx/conf.d/default.conf
              subPath: default.conf
            - name: logos-html
              mountPath: /usr/share/nginx/html
      volumes:
        - name: nginx-config
          configMap:
            name: logos-nginx-config
        - name: logos-html
          configMap:
            name: logos-placeholder-html
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: logos-nginx-config
  namespace: logos
data:
  default.conf: |
    server {
        listen 80;
        server_name logos.bravozero.ai;

        location /health {
            access_log off;
            return 200 'healthy';
            add_header Content-Type text/plain;
        }

        location / {
            root /usr/share/nginx/html;
            index index.html;
        }
    }
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: logos-placeholder-html
  namespace: logos
data:
  index.html: |
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Logos - D3N-Native IDE</title>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
        <style>
            /* Hydra-aligned Minimalist Monochrome Design System */
            :root {
                --bg-primary: #000000;
                --bg-secondary: #0a0a0a;
                --bg-tertiary: #141414;
                --bg-elevated: #1a1a1a;
                --bg-hover: #242424;
                --text-primary: #ffffff;
                --text-secondary: #a0a0a0;
                --text-muted: #606060;
                --border-subtle: rgba(255, 255, 255, 0.08);
                --border-medium: rgba(255, 255, 255, 0.15);
                --accent-glow: rgba(255, 255, 255, 0.1);
                --status-success: #4ade80;
                --font-sans: 'Inter', system-ui, -apple-system, sans-serif;
                --font-mono: 'JetBrains Mono', 'SF Mono', monospace;
                --radius-md: 8px;
                --radius-lg: 16px;
                --radius-xl: 20px;
                --space-sm: 8px;
                --space-md: 16px;
                --space-lg: 24px;
                --space-xl: 32px;
            }
            * { margin: 0; padding: 0; box-sizing: border-box; }
            body {
                font-family: var(--font-sans);
                background: var(--bg-primary);
                min-height: 100vh;
                display: flex;
                align-items: center;
                justify-content: center;
                color: var(--text-primary);
                -webkit-font-smoothing: antialiased;
            }
            .container {
                text-align: center;
                padding: var(--space-xl) var(--space-xl);
                background: var(--bg-secondary);
                border-radius: var(--radius-xl);
                border: 1px solid var(--border-subtle);
                max-width: 560px;
                animation: slideUp 0.35s ease-out;
            }
            @keyframes slideUp {
                from { opacity: 0; transform: translateY(20px); }
                to { opacity: 1; transform: translateY(0); }
            }
            .logo-container {
                width: 64px;
                height: 64px;
                margin: 0 auto var(--space-lg);
                background: var(--bg-tertiary);
                border: 1px solid var(--border-medium);
                border-radius: var(--radius-lg);
                display: flex;
                align-items: center;
                justify-content: center;
            }
            .logo-container svg {
                width: 32px;
                height: 32px;
                stroke: var(--text-primary);
                fill: none;
                stroke-width: 2;
            }
            h1 {
                font-size: 2rem;
                font-weight: 700;
                letter-spacing: -0.02em;
                margin-bottom: var(--space-sm);
            }
            .subtitle {
                font-size: 1rem;
                color: var(--text-secondary);
                margin-bottom: var(--space-lg);
                line-height: 1.5;
            }
            .status {
                display: inline-flex;
                align-items: center;
                gap: var(--space-sm);
                padding: 10px 20px;
                background: var(--bg-tertiary);
                border: 1px solid var(--border-medium);
                border-radius: 9999px;
                font-size: 0.875rem;
                font-weight: 500;
            }
            .pulse {
                width: 8px;
                height: 8px;
                background: var(--status-success);
                border-radius: 50%;
                animation: pulse 2s ease-in-out infinite;
            }
            @keyframes pulse {
                0%, 100% { opacity: 1; }
                50% { opacity: 0.5; }
            }
            .features {
                margin-top: var(--space-xl);
                display: grid;
                grid-template-columns: repeat(2, 1fr);
                gap: var(--space-md);
                text-align: left;
            }
            .feature {
                padding: var(--space-md);
                background: var(--bg-tertiary);
                border-radius: var(--radius-md);
                border: 1px solid var(--border-subtle);
                transition: all 0.2s ease-out;
            }
            .feature:hover {
                background: var(--bg-hover);
                border-color: var(--border-medium);
            }
            .feature-header {
                display: flex;
                align-items: center;
                gap: var(--space-sm);
                margin-bottom: 6px;
            }
            .feature-icon {
                width: 20px;
                height: 20px;
                color: var(--text-secondary);
            }
            .feature-title {
                font-weight: 600;
                font-size: 0.875rem;
            }
            .feature-desc {
                font-size: 0.75rem;
                color: var(--text-muted);
                line-height: 1.4;
            }
            .footer {
                margin-top: var(--space-xl);
                padding-top: var(--space-lg);
                border-top: 1px solid var(--border-subtle);
            }
            .footer-text {
                font-size: 0.75rem;
                color: var(--text-muted);
                font-family: var(--font-mono);
            }
            @media (max-width: 480px) {
                .features { grid-template-columns: 1fr; }
                .container { margin: var(--space-md); }
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div class="logo-container">
                <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </div>
            <h1>Logos</h1>
            <p class="subtitle">D3N-Native Cognitive Development Environment</p>
            <div class="status">
                <div class="pulse"></div>
                <span>Deployment in Progress</span>
            </div>
            <div class="features">
                <div class="feature">
                    <div class="feature-header">
                        <svg class="feature-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                        </svg>
                        <span class="feature-title">Multi-Agent Chat</span>
                    </div>
                    <p class="feature-desc">ARIA-powered conversations with @-mention routing</p>
                </div>
                <div class="feature">
                    <div class="feature-header">
                        <svg class="feature-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/>
                        </svg>
                        <span class="feature-title">Flash Completions</span>
                    </div>
                    <p class="feature-desc">Sub-10ms code completion via spiking networks</p>
                </div>
                <div class="feature">
                    <div class="feature-header">
                        <svg class="feature-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <path d="M12 16v-4M12 8h.01"/>
                        </svg>
                        <span class="feature-title">Cognitive Architect</span>
                    </div>
                    <p class="feature-desc">Per-workspace AI assistant for architecture</p>
                </div>
                <div class="feature">
                    <div class="feature-header">
                        <svg class="feature-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                            <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
                        </svg>
                        <span class="feature-title">PERSONA Auth</span>
                    </div>
                    <p class="feature-desc">Zero-trust identity with quantum-secure options</p>
                </div>
            </div>
            <div class="footer">
                <p class="footer-text">Part of the Bravo Zero Platform</p>
            </div>
        </div>
    </body>
    </html>
---
apiVersion: v1
kind: Service
metadata:
  name: logos-web
  namespace: logos
  labels:
    app: logos-web
spec:
  selector:
    app: logos-web
  ports:
    - port: 8080
      targetPort: 80
      protocol: TCP
  type: ClusterIP
---
# ALB Ingress
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: logos-ingress
  namespace: logos
  annotations:
    kubernetes.io/ingress.class: alb
    alb.ingress.kubernetes.io/scheme: internet-facing
    alb.ingress.kubernetes.io/target-type: ip
    alb.ingress.kubernetes.io/listen-ports: '[{"HTTP": 80}, {"HTTPS": 443}]'
    alb.ingress.kubernetes.io/ssl-redirect: "443"
    alb.ingress.kubernetes.io/certificate-arn: arn:aws:acm:us-east-1:113513624033:certificate/5a10c11d-7556-4ba3-808f-114b8cbd951d
    alb.ingress.kubernetes.io/ssl-policy: ELBSecurityPolicy-TLS13-1-2-2021-06
    alb.ingress.kubernetes.io/healthcheck-path: /health
    alb.ingress.kubernetes.io/healthcheck-interval-seconds: "15"
    alb.ingress.kubernetes.io/load-balancer-attributes: idle_timeout.timeout_seconds=3600
    alb.ingress.kubernetes.io/tags: Environment=production,Project=logos,Platform=bravozero
spec:
  ingressClassName: alb
  rules:
    - host: logos.bravozero.ai
      http:
        paths:
          - path: /
            pathType: Prefix
            backend:
              service:
                name: logos-web
                port:
                  number: 8080

