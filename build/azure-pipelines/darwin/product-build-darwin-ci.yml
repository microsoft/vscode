parameters:
  - name: VSCODE_CIBUILD
    type: boolean
  - name: VSCODE_TEST_SUITE
    type: string

jobs:
  - job: macOS${{ parameters.VSCODE_TEST_SUITE }}
    displayName: ${{ parameters.VSCODE_TEST_SUITE }} Tests
    timeoutInMinutes: 30
    variables:
      VSCODE_ARCH: arm64
    steps:
      - template: ./steps/product-build-darwin-compile.yml@self
        parameters:
          VSCODE_ARCH: arm64
          VSCODE_CIBUILD: ${{ parameters.VSCODE_CIBUILD }}
          ${{ if eq(parameters.VSCODE_TEST_SUITE, 'Electron') }}:
            VSCODE_RUN_ELECTRON_TESTS: true
          ${{ if eq(parameters.VSCODE_TEST_SUITE, 'Browser') }}:
            VSCODE_RUN_BROWSER_TESTS: true
          ${{ if eq(parameters.VSCODE_TEST_SUITE, 'Remote') }}:
            VSCODE_RUN_REMOTE_TESTS: true
