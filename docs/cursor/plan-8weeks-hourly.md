# 8 周研发计划（按小时细化）

说明：按 5 天/周、每天 8 小时（09:00–18:00，午休 12:00–13:00）细化。
时间段定义：09-10、10-11、11-12、13-14、14-15、15-16、16-17、17-18。

## 第 1 周｜基线与架构落点（已完成）
### 周一
- 09-10 代码仓库状态确认，分支检查与同步
- 10-11 Chat/InlineChat 目录结构梳理
- 11-12 关键入口与服务层定位
- 13-14 IChatService 入口梳理与链路绘制
- 14-15 Chat 数据模型与请求流确认
- 15-16 架构落点文档草拟
- 16-17 架构落点文档完善
- 17-18 评审与修订
### 周二
- 09-10 改造清单框架搭建
- 10-11 aiCore 目录规划
- 11-12 服务注册模式调研
- 13-14 aiCoreTypes 初版设计
- 14-15 aiCoreService 骨架设计
- 15-16 ChatService 注入点设计
- 16-17 文档同步更新
- 17-18 风险清单补充
### 周三
- 09-10 新增 aiCoreTypes 文件
- 10-11 新增 aiCoreService 文件
- 11-12 registerSingleton 接入
- 13-14 ChatService 注入 IAICoreService
- 14-15 sendRequest 接入调用
- 15-16 日志与异常兜底
- 16-17 lints 检查
- 17-18 代码整理
### 周四
- 09-10 架构改造清单补全
- 10-11 IAICoreService 接口草案文档
- 11-12 文档校对
- 13-14 规划审查
- 14-15 反馈修订
- 15-16 结论确认
- 16-17 产物归档
- 17-18 交付确认
### 周五
- 09-10 第 2 周准备
- 10-11 目录与依赖验证
- 11-12 后续风险预案
- 13-14 项目节奏复核
- 14-15 预留问题解决
- 15-16 文档微调
- 16-17 状态汇总
- 17-18 周结

## 第 2 周｜上下文系统 v1
### 周一
- 09-10 需求拆分与上下文范围定义
- 10-11 选择区/当前文件接口调研
- 11-12 设计 ContextBuilder 结构
- 13-14 新增 `aiCoreContextBuilder.ts`
- 14-15 读取当前文件内容
- 15-16 读取选区内容
- 16-17 单元逻辑验证
- 17-18 文档更新
### 周二
- 09-10 ContextBuilder 与 IAICoreService 接口对接
- 10-11 接入 ChatService 调用链
- 11-12 处理空上下文与边界
- 13-14 日志与错误处理
- 14-15 基础测试场景
- 15-16 修复问题
- 16-17 文档更新
- 17-18 周内复盘
### 周三
- 09-10 结构整理与重构
- 10-11 添加 context hint 参数
- 11-12 选区范围格式统一
- 13-14 性能检查（大文件）
- 14-15 缓存策略预留
- 15-16 补充注释
- 16-17 自测
- 17-18 同步记录
### 周四
- 09-10 接入 InlineChat（预留）
- 10-11 兼容无工作区场景
- 11-12 处理 URI 序列化
- 13-14 日志增强
- 14-15 细节修复
- 15-16 文档补齐
- 16-17 评审修订
- 17-18 预留
### 周五
- 09-10 周总结与问题清单
- 10-11 下周检索方案预研
- 11-12 需求对齐
- 13-14 代码整理
- 14-15 文档整理
- 15-16 进度汇总
- 16-17 预留
- 17-18 周结

## 第 3 周｜上下文系统 v2 + Prompt 规范
### 周一
- 09-10 最近文件列表方案
- 10-11 摘要策略设计
- 11-12 Prompt 模板结构定义
- 13-14 模板注册机制设计
- 14-15 模板变量注入
- 15-16 基础模板实现
- 16-17 文档更新
- 17-18 评审
### 周二
- 09-10 最近文件上下文实现
- 10-11 摘要抽取策略实现
- 11-12 上下文拼装优化
- 13-14 变量命名规范
- 14-15 兼容旧请求
- 15-16 日志与边界
- 16-17 自测
- 17-18 修订
### 周三
- 09-10 Prompt 版本管理草案
- 10-11 模板回滚策略
- 11-12 可观测性字段设计
- 13-14 规范文档补齐
- 14-15 代码整理
- 15-16 修复问题
- 16-17 复盘
- 17-18 预留
### 周四
- 09-10 工程级摘要（可选）
- 10-11 性能评估
- 11-12 降级策略预留
- 13-14 联调
- 14-15 问题修复
- 15-16 文档完善
- 16-17 评审
- 17-18 预留
### 周五
- 09-10 周总结
- 10-11 下周索引预研
- 11-12 需求对齐
- 13-14 代码整理
- 14-15 文档整理
- 15-16 进度汇总
- 16-17 预留
- 17-18 周结

## 第 4 周｜索引与检索 v1
### 周一
- 09-10 索引数据模型设计
- 10-11 文件扫描策略
- 11-12 chunking 规则
- 13-14 `aiIndex` 目录创建
- 14-15 indexer 骨架
- 15-16 embedding 管道设计
- 16-17 文档更新
- 17-18 评审
### 周二
- 09-10 索引扫描实现
- 10-11 chunking 实现
- 11-12 基础存储实现
- 13-14 embedding 接口对接
- 14-15 TopK 检索实现
- 15-16 与 context 融合
- 16-17 自测
- 17-18 修复
### 周三
- 09-10 增量索引策略
- 10-11 文件变更监听
- 11-12 性能评估
- 13-14 失败兜底
- 14-15 日志与指标
- 15-16 文档更新
- 16-17 修复
- 17-18 预留
### 周四
- 09-10 过滤规则（忽略文件）
- 10-11 优先级排序
- 11-12 联调
- 13-14 问题修复
- 14-15 代码整理
- 15-16 文档补齐
- 16-17 评审
- 17-18 预留
### 周五
- 09-10 周总结
- 10-11 下周编辑能力预研
- 11-12 需求对齐
- 13-14 代码整理
- 14-15 文档整理
- 15-16 进度汇总
- 16-17 预留
- 17-18 周结

## 第 5 周｜智能编辑能力 v1
### 周一
- 09-10 编辑接口梳理
- 10-11 Diff 预览方案
- 11-12 统一编辑出口设计
- 13-14 applyEdits 链路设计
- 14-15 编辑确认 UI 规则
- 15-16 编辑回滚策略
- 16-17 文档更新
- 17-18 评审
### 周二
- 09-10 applyEdits 骨架实现
- 10-11 与 chatEditing 连接
- 11-12 与 inlineChat 连接
- 13-14 编辑预览联调
- 14-15 边界处理
- 15-16 自测
- 16-17 修复
- 17-18 预留
### 周三
- 09-10 批量文件编辑
- 10-11 冲突策略
- 11-12 失败兜底
- 13-14 日志补齐
- 14-15 文档更新
- 15-16 修复
- 16-17 复盘
- 17-18 预留
### 周四
- 09-10 性能评估
- 10-11 体验优化
- 11-12 预留问题处理
- 13-14 代码整理
- 14-15 文档补齐
- 15-16 评审
- 16-17 预留
- 17-18 预留
### 周五
- 09-10 周总结
- 10-11 下周 Agent 预研
- 11-12 需求对齐
- 13-14 代码整理
- 14-15 文档整理
- 15-16 进度汇总
- 16-17 预留
- 17-18 周结

## 第 6 周｜Agent 工作流雏形
### 周一
- 09-10 工具调用协议梳理
- 10-11 工具注册体系
- 11-12 安全确认策略
- 13-14 tool runner 骨架
- 14-15 任务链路设计
- 15-16 状态模型设计
- 16-17 文档更新
- 17-18 评审
### 周二
- 09-10 任务执行流实现
- 10-11 工具调用联调
- 11-12 状态展示联调
- 13-14 失败兜底
- 14-15 自测
- 15-16 修复
- 16-17 文档补齐
- 17-18 预留
### 周三
- 09-10 多步骤任务串联
- 10-11 结果回传规范
- 11-12 任务终止策略
- 13-14 日志与诊断
- 14-15 性能评估
- 15-16 修复
- 16-17 复盘
- 17-18 预留
### 周四
- 09-10 UI 体验优化
- 10-11 任务历史记录
- 11-12 预留问题处理
- 13-14 代码整理
- 14-15 文档补齐
- 15-16 评审
- 16-17 预留
- 17-18 预留
### 周五
- 09-10 周总结
- 10-11 下周性能预研
- 11-12 需求对齐
- 13-14 代码整理
- 14-15 文档整理
- 15-16 进度汇总
- 16-17 预留
- 17-18 周结

## 第 7 周｜性能与稳定性
### 周一
- 09-10 性能指标定义
- 10-11 缓存策略设计
- 11-12 超时与重试策略
- 13-14 缓存实现
- 14-15 限流实现
- 15-16 超时处理
- 16-17 文档更新
- 17-18 评审
### 周二
- 09-10 失败降级策略
- 10-11 日志与诊断增强
- 11-12 telemetry 方案
- 13-14 集成验证
- 14-15 自测
- 15-16 修复
- 16-17 文档补齐
- 17-18 预留
### 周三
- 09-10 长对话稳定性
- 10-11 资源释放
- 11-12 泄露排查
- 13-14 性能回归测试
- 14-15 修复问题
- 15-16 文档更新
- 16-17 复盘
- 17-18 预留
### 周四
- 09-10 用户体验打磨
- 10-11 监控与报警策略
- 11-12 预留问题处理
- 13-14 代码整理
- 14-15 文档补齐
- 15-16 评审
- 16-17 预留
- 17-18 预留
### 周五
- 09-10 周总结
- 10-11 下周封装预研
- 11-12 需求对齐
- 13-14 代码整理
- 14-15 文档整理
- 15-16 进度汇总
- 16-17 预留
- 17-18 周结

## 第 8 周｜体验打磨与封装
### 周一
- 09-10 设置面板规划
- 10-11 配置项落地
- 11-12 入口完善
- 13-14 打包流程梳理
- 14-15 版本策略草案
- 15-16 文档更新
- 16-17 评审
- 17-18 预留
### 周二
- 09-10 设置面板联调
- 10-11 UI 细节修复
- 11-12 体验优化
- 13-14 构建脚本整理
- 14-15 自测
- 15-16 修复
- 16-17 文档补齐
- 17-18 预留
### 周三
- 09-10 内测准备
- 10-11 反馈通道建立
- 11-12 修复清单
- 13-14 性能回归
- 14-15 代码整理
- 15-16 文档更新
- 16-17 复盘
- 17-18 预留
### 周四
- 09-10 版本冻结
- 10-11 打包验证
- 11-12 交付材料准备
- 13-14 交付检查
- 14-15 文档整理
- 15-16 评审
- 16-17 预留
- 17-18 预留
### 周五
- 09-10 交付与验收
- 10-11 迭代路线图草案
- 11-12 复盘总结
- 13-14 资料归档
- 14-15 项目总结
- 15-16 进度汇总
- 16-17 预留
- 17-18 周结

