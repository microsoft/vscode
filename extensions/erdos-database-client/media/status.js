/*---------------------------------------------------------------------------------------------
 *  Copyright (c) 2025 Lotas Inc. All rights reserved.
 *--------------------------------------------------------------------------------------------*/

var EC=Object.defineProperty;var Bt=(r,e)=>{for(var t in e)EC(r,t,{get:e[t],enumerable:!0})};var ff=function(r,e){return ff=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])},ff(r,e)};function S(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");ff(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var d=function(){return d=Object.assign||function(e){for(var t,i=1,a=arguments.length;i<a;i++){t=arguments[i];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},d.apply(this,arguments)};function gt(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(r);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(r,i[a])&&(t[i[a]]=r[i[a]]);return t}function vr(r,e,t,i){function a(n){return n instanceof t?n:new t(function(o){o(n)})}return new(t||(t=Promise))(function(n,o){function s(u){try{f(i.next(u))}catch(h){o(h)}}function l(u){try{f(i.throw(u))}catch(h){o(h)}}function f(u){u.done?n(u.value):a(u.value).then(s,l)}f((i=i.apply(r,e||[])).next())})}function mr(r,e){var t={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},i,a,n,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(f){return function(u){return l([f,u])}}function l(f){if(i)throw new TypeError("Generator is already executing.");for(;o&&(o=0,f[0]&&(t=0)),t;)try{if(i=1,a&&(n=f[0]&2?a.return:f[0]?a.throw||((n=a.return)&&n.call(a),0):a.next)&&!(n=n.call(a,f[1])).done)return n;switch(a=0,n&&(f=[f[0]&2,n.value]),f[0]){case 0:case 1:n=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,a=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(n=t.trys,!(n=n.length>0&&n[n.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!n||f[1]>n[0]&&f[1]<n[3])){t.label=f[1];break}if(f[0]===6&&t.label<n[1]){t.label=n[1],n=f;break}if(n&&t.label<n[2]){t.label=n[2],t.ops.push(f);break}n[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(r,t)}catch(u){f=[6,u],a=0}finally{i=n=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function j(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function _(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),a,n=[],o;try{for(;(e===void 0||e-- >0)&&!(a=i.next()).done;)n.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(t=i.return)&&t.call(i)}finally{if(o)throw o.error}}return n}function dr(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var i=Array(r),a=0,e=0;e<t;e++)for(var n=arguments[e],o=0,s=n.length;o<s;o++,a++)i[a]=n[o];return i}function U(r,e,t){if(t||arguments.length===2)for(var i=0,a=e.length,n;i<a;i++)(n||!(i in e))&&(n||(n=Array.prototype.slice.call(e,0,i)),n[i]=e[i]);return r.concat(n||Array.prototype.slice.call(e))}var LC=function(r){return r!==null&&typeof r!="function"&&isFinite(r.length)},Ct=LC;var IC=function(r,e){return Ct(r)?r.indexOf(e)>-1:!1},fe=IC;var PC=function(r,e){if(!Ct(r))return r;for(var t=[],i=0;i<r.length;i++){var a=r[i];e(a,i)&&t.push(a)}return t},St=PC;var BC=function(r,e){return e===void 0&&(e=[]),St(r,function(t){return!fe(e,t)})},uf=BC;var kC={}.toString,OC=function(r,e){return kC.call(r)==="[object "+e+"]"},Wt=OC;var D=function(r){return Wt(r,"Function")};var FC=function(r){return r==null},I=FC;var B=function(r){return Array.isArray?Array.isArray(r):Wt(r,"Array")};var K=function(r){var e=typeof r;return r!==null&&e==="object"||e==="function"};function _C(r,e){if(r){var t;if(B(r))for(var i=0,a=r.length;i<a&&(t=e(r[i],i),t!==!1);i++);else if(K(r)){for(var n in r)if(r.hasOwnProperty(n)&&(t=e(r[n],n),t===!1))break}}}var M=_C;var RC=Object.keys?function(r){return Object.keys(r)}:function(r){var e=[];return M(r,function(t,i){D(r)&&i==="prototype"||e.push(i)}),e},Re=RC;function DC(r,e){var t=Re(e),i=t.length;if(I(r))return!i;for(var a=0;a<i;a+=1){var n=t[a];if(e[n]!==r[n]||!(n in r))return!1}return!0}var hf=DC;var NC=function(r){return typeof r=="object"&&r!==null},sa=NC;var GC=function(r){if(!sa(r)||!Wt(r,"Object"))return!1;if(Object.getPrototypeOf(r)===null)return!0;for(var e=r;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(r)===e},qt=GC;function YC(r,e){if(!B(r))return null;var t;if(D(e)&&(t=e),qt(e)&&(t=function(a){return hf(a,e)}),t){for(var i=0;i<r.length;i+=1)if(t(r[i]))return r[i]}return null}var ee=YC;var HC=function(r,e){for(var t=null,i=0;i<r.length;i++){var a=r[i],n=a[e];if(!I(n)){B(n)?t=n[0]:t=n;break}}return t},cf=HC;var VC=function(r){if(!B(r))return[];for(var e=[],t=0;t<r.length;t++)e=e.concat(r[t]);return e},Ft=VC;var Dt=function(r){if(B(r))return r.reduce(function(e,t){return Math.max(e,t)},r[0])};var Vt=function(r){if(B(r))return r.reduce(function(e,t){return Math.min(e,t)},r[0])};var zC=function(r){var e=r.filter(function(o){return!isNaN(o)});if(!e.length)return{min:0,max:0};if(B(r[0])){for(var t=[],i=0;i<r.length;i++)t=t.concat(r[i]);e=t}var a=Dt(e),n=Vt(e);return{min:n,max:a}},pf=zC;var Oc=Array.prototype,xB=Oc.splice,CB=Oc.indexOf;var XC=Array.prototype.splice,WC=function(e,t){if(!Ct(e))return[];for(var i=e?t.length:0,a=i-1;i--;){var n=void 0,o=t[i];(i===a||o!==n)&&(n=o,XC.call(e,o,1))}return e},vf=WC;var qC=function(r,e,t){if(!B(r)&&!qt(r))return r;var i=t;return M(r,function(a,n){i=e(i,a,n)}),i},la=qC;var UC=function(r,e){var t=[];if(!Ct(r))return t;for(var i=-1,a=[],n=r.length;++i<n;){var o=r[i];e(o,i,r)&&(t.push(o),a.push(i))}return vf(r,a),t},mf=UC;var G=function(r){return Wt(r,"String")};function Li(r,e){e===void 0&&(e=new Map);var t=[];if(Array.isArray(r))for(var i=0,a=r.length;i<a;i++){var n=r[i];e.has(n)||(t.push(n),e.set(n,!0))}return t}var Ut=function(r,e){for(var t=[],i={},a=0;a<r.length;a++){var n=r[a],o=n[e];if(!I(o)){B(o)||(o=[o]);for(var s=0;s<o.length;s++){var l=o[s];i[l]||(t.push(l),i[l]=!0)}}}return t};function wt(r){if(Ct(r))return r[0]}function nt(r){if(Ct(r)){var e=r;return e[e.length-1]}}var jC=function(r,e){for(var t=0;t<r.length;t++)if(!e(r[t],t))return!1;return!0},df=jC;var ZC=function(r,e){for(var t=0;t<r.length;t++)if(e(r[t],t))return!0;return!1},gr=ZC;var QC=Object.prototype.hasOwnProperty;function $C(r,e){if(!e||!B(r))return{};for(var t={},i=D(e)?e:function(s){return s[e]},a,n=0;n<r.length;n++){var o=r[n];a=i(o),QC.call(t,a)?t[a].push(o):t[a]=[o]}return t}var jt=$C;function fa(r,e){if(!e)return{0:r};if(!D(e)){var t=B(e)?e:e.replace(/\s+/g,"").split("*");e=function(i){for(var a="_",n=0,o=t.length;n<o;n++)a+=i[t[n]]&&i[t[n]].toString();return a}}return jt(r,e)}var gf=function(r,e){if(!e)return[r];var t=fa(r,e),i=[];for(var a in t)i.push(t[a]);return i};var KC=function(r,e,t){return r<e?e:r>t?t:r},ft=KC;var JC=function(r,e){var t=e.toString(),i=t.indexOf(".");if(i===-1)return Math.round(r);var a=t.substr(i+1).length;return a>20&&(a=20),parseFloat(r.toFixed(a))},gn=JC;var tw=function(r){return Wt(r,"Number")},z=tw;var Ak=Number.isInteger?Number.isInteger:function(r){return z(r)&&r%1===0};var ew=1e-5;function pt(r,e,t){return t===void 0&&(t=ew),Math.abs(r-e)<t}var rw=function(r,e){return(r%e+e)%e},Wr=rw;var Yk=180/Math.PI;var iw=Math.PI/180,aw=function(r){return iw*r},qr=aw;var yf=function(r,e){return r.hasOwnProperty(e)};var De=yf;var nw=Object.values?function(r){return Object.values(r)}:function(r){var e=[];return M(r,function(t,i){D(r)&&i==="prototype"||e.push(t)}),e},Ur=nw;var Ne=function(r){return I(r)?"":r.toString()};var ow=function(r){return Ne(r).toLowerCase()},$e=ow;function sw(r,e){return!r||!e?r:r.replace(/\\?\{([^{}]+)\}/g,function(t,i){return t.charAt(0)==="\\"?t.slice(1):e[i]===void 0?"":e[i]})}var yn=sw;var lw=function(r){var e=Ne(r);return e.charAt(0).toUpperCase()+e.substring(1)},ue=lw;var fw={}.toString,uw=function(r){return fw.call(r).replace(/^\[object /,"").replace(/]$/,"")},xf=uw;var hw=function(r){return Wt(r,"Boolean")},Ke=hw;var cw=function(r){return Wt(r,"Date")},xn=cw;var pw=function(r){return r===null},Cf=pw;var vw=Object.prototype,mw=function(r){var e=r&&r.constructor,t=typeof e=="function"&&e.prototype||vw;return r===t},wf=mw;var dw=function(r){return r===void 0},Je=dw;var gw=function(r){return r instanceof Element||r instanceof HTMLDocument},Cn=gw;function wn(r){var e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return setTimeout(t,16)};return e(r)}function Mn(r){var e=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;e(r)}function Mf(r,e){for(var t in e)e.hasOwnProperty(t)&&t!=="constructor"&&e[t]!==void 0&&(r[t]=e[t])}function J(r,e,t,i){return e&&Mf(r,e),t&&Mf(r,t),i&&Mf(r,i),r}var Sf=function(r){if(typeof r!="object"||r===null)return r;var e;if(B(r)){e=[];for(var t=0,i=r.length;t<i;t++)typeof r[t]=="object"&&r[t]!=null?e[t]=Sf(r[t]):e[t]=r[t]}else{e={};for(var a in r)typeof r[a]=="object"&&r[a]!=null?e[a]=Sf(r[a]):e[a]=r[a]}return e},zt=Sf;function yw(r,e,t){var i;return function(){var a=this,n=arguments,o=function(){i=null,t||r.apply(a,n)},s=t&&!i;clearTimeout(i),i=setTimeout(o,e),s&&r.apply(a,n)}}var Sn=yw;var yr=function(r,e){if(!D(r))throw new TypeError("Expected a function");var t=function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var n=e?e.apply(this,i):i[0],o=t.cache;if(o.has(n))return o.get(n);var s=r.apply(this,i);return o.set(n,s),s};return t.cache=new Map,t};var xw=5;function Fc(r,e,t,i){t=t||0,i=i||xw;for(var a in e)if(e.hasOwnProperty(a)){var n=e[a];n!==null&&qt(n)?(qt(r[a])||(r[a]={}),t<i?Fc(r[a],n,t+1,i):r[a]=e[a]):B(n)?(r[a]=[],r[a]=r[a].concat(n)):n!==void 0&&(r[a]=n)}}var Cw=function(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];for(var i=0;i<e.length;i+=1)Fc(r,e[i]);return r},O=Cw;var ww=function(r,e){if(!Ct(r))return-1;var t=Array.prototype.indexOf;if(t)return t.call(r,e);for(var i=-1,a=0;a<r.length;a++)if(r[a]===e){i=a;break}return i},Vo=ww;var Mw=Object.prototype.hasOwnProperty;function Sw(r){if(I(r))return!0;if(Ct(r))return!r.length;var e=xf(r);if(e==="Map"||e==="Set")return!r.size;if(wf(r))return!Object.keys(r).length;for(var t in r)if(Mw.call(r,t))return!1;return!0}var Gt=Sw;var Af=function(r,e){if(r===e)return!0;if(!r||!e||G(r)||G(e))return!1;if(Ct(r)||Ct(e)){if(r.length!==e.length)return!1;for(var t=!0,i=0;i<r.length&&(t=Af(r[i],e[i]),!!t);i++);return t}if(sa(r)||sa(e)){var a=Object.keys(r),n=Object.keys(e);if(a.length!==n.length)return!1;for(var t=!0,i=0;i<a.length&&(t=Af(r[a[i]],e[a[i]]),!!t);i++);return t}return!1},ot=Af;var Aw=function(r,e){if(!Ct(r))return r;for(var t=[],i=0;i<r.length;i++){var a=r[i];t.push(e(a,i))}return t},Mt=Aw;var bw=function(r){return r},bf=function(r,e){e===void 0&&(e=bw);var t={};return K(r)&&!I(r)&&Object.keys(r).forEach(function(i){t[i]=e(r[i],i)}),t};var b=function(r,e,t){for(var i=0,a=G(e)?e.split("."):e;r&&i<a.length;)r=r[a[i++]];return r===void 0||i<a.length?t:r};var kt=function(r,e,t){var i=r,a=G(e)?e.split("."):e;return a.forEach(function(n,o){o<a.length-1?(K(i[n])||(i[n]=z(a[o+1])?[]:{}),i=i[n]):i[n]=t}),r};var Tw=Object.prototype.hasOwnProperty,Ii=function(r,e){if(r===null||!qt(r))return{};var t={};return M(e,function(i){Tw.call(r,i)&&(t[i]=r[i])}),t};var Pi=function(r,e,t){var i,a,n,o,s=0;t||(t={});var l=function(){s=t.leading===!1?0:Date.now(),i=null,o=r.apply(a,n),i||(a=n=null)},f=function(){var u=Date.now();!s&&t.leading===!1&&(s=u);var h=e-(u-s);return a=this,n=arguments,h<=0||h>e?(i&&(clearTimeout(i),i=null),s=u,o=r.apply(a,n),i||(a=n=null)):!i&&t.trailing!==!1&&(i=setTimeout(l,h)),o};return f.cancel=function(){clearTimeout(i),s=0,i=a=n=null},f};var Tf=function(r){return Ct(r)?Array.prototype.slice.call(r):[]};var zo={},Zt=function(r){return r=r||"g",zo[r]?zo[r]+=1:zo[r]=1,r+zo[r]};var he=function(){};function Tt(r){return I(r)?0:Ct(r)?r.length:Object.keys(r).length}var Xo,ua=yr(function(r,e){e===void 0&&(e={});var t=e.fontSize,i=e.fontFamily,a=e.fontWeight,n=e.fontStyle,o=e.fontVariant;return Xo||(Xo=document.createElement("canvas").getContext("2d")),Xo.font=[n,o,a,t+"px",i].join(" "),Xo.measureText(G(r)?r:"").width},function(r,e){return e===void 0&&(e={}),dr([r],Ur(e)).join("")});var Ef=function(r,e,t,i){i===void 0&&(i="...");var a=16,n=ua(i,t),o=G(r)?r:Ne(r),s=e,l=[],f,u;if(ua(r,t)<=e)return r;for(;f=o.substr(0,a),u=ua(f,t),!(u+n>s&&u>s);)if(l.push(f),s-=u,o=o.substr(a),!o)return l.join("");for(;f=o.substr(0,1),u=ua(f,t),!(u+n>s);)if(l.push(f),s-=u,o=o.substr(1),!o)return l.join("");return""+l.join("")+i};var Ew=function(){function r(){this.map={}}return r.prototype.has=function(e){return this.map[e]!==void 0},r.prototype.get=function(e,t){var i=this.map[e];return i===void 0?t:i},r.prototype.set=function(e,t){this.map[e]=t},r.prototype.clear=function(){this.map={}},r.prototype.delete=function(e){delete this.map[e]},r.prototype.size=function(){return Object.keys(this.map).length},r}(),Lf=Ew;var ht;(function(r){r.FORE="fore",r.MID="mid",r.BG="bg"})(ht||(ht={}));var F;(function(r){r.TOP="top",r.TOP_LEFT="top-left",r.TOP_RIGHT="top-right",r.RIGHT="right",r.RIGHT_TOP="right-top",r.RIGHT_BOTTOM="right-bottom",r.LEFT="left",r.LEFT_TOP="left-top",r.LEFT_BOTTOM="left-bottom",r.BOTTOM="bottom",r.BOTTOM_LEFT="bottom-left",r.BOTTOM_RIGHT="bottom-right",r.RADIUS="radius",r.CIRCLE="circle",r.NONE="none"})(F||(F={}));var At;(function(r){r.AXIS="axis",r.GRID="grid",r.LEGEND="legend",r.TOOLTIP="tooltip",r.ANNOTATION="annotation",r.SLIDER="slider",r.SCROLLBAR="scrollbar",r.OTHER="other"})(At||(At={}));var jr={FORE:3,MID:2,BG:1},st;(function(r){r.BEFORE_RENDER="beforerender",r.AFTER_RENDER="afterrender",r.BEFORE_PAINT="beforepaint",r.AFTER_PAINT="afterpaint",r.BEFORE_CHANGE_DATA="beforechangedata",r.AFTER_CHANGE_DATA="afterchangedata",r.BEFORE_CLEAR="beforeclear",r.AFTER_CLEAR="afterclear",r.BEFORE_DESTROY="beforedestroy",r.BEFORE_CHANGE_SIZE="beforechangesize",r.AFTER_CHANGE_SIZE="afterchangesize"})(st||(st={}));var Ge;(function(r){r.BEFORE_DRAW_ANIMATE="beforeanimate",r.AFTER_DRAW_ANIMATE="afteranimate",r.BEFORE_RENDER_LABEL="beforerenderlabel",r.AFTER_RENDER_LABEL="afterrenderlabel"})(Ge||(Ge={}));var ne;(function(r){r.MOUSE_ENTER="plot:mouseenter",r.MOUSE_DOWN="plot:mousedown",r.MOUSE_MOVE="plot:mousemove",r.MOUSE_UP="plot:mouseup",r.MOUSE_LEAVE="plot:mouseleave",r.TOUCH_START="plot:touchstart",r.TOUCH_MOVE="plot:touchmove",r.TOUCH_END="plot:touchend",r.TOUCH_CANCEL="plot:touchcancel",r.CLICK="plot:click",r.DBLCLICK="plot:dblclick",r.CONTEXTMENU="plot:contextmenu",r.LEAVE="plot:leave",r.ENTER="plot:enter"})(ne||(ne={}));var bn;(function(r){r.ACTIVE="active",r.INACTIVE="inactive",r.SELECTED="selected",r.DEFAULT="default"})(bn||(bn={}));var xr=["color","shape","size"],rt="_origin",If=1,Pf=1,Bf=.25;var _c={};function kf(r){var e=_c[r];if(!e)throw new Error("G engine '".concat(r,"' is not exist, please register it at first."));return e}function Wo(r,e){_c[r]=e}function Cr(r,e,t){if(r){if(typeof r.addEventListener=="function")return r.addEventListener(e,t,!1),{remove:function(){r.removeEventListener(e,t,!1)}};if(typeof r.attachEvent=="function")return r.attachEvent("on"+e,t),{remove:function(){r.detachEvent("on"+e,t)}}}}var Tn,Of,Rc,Ff;function Lw(){Tn=document.createElement("table"),Of=document.createElement("tr"),Rc=/^\s*<(\w+|!)[^>]*>/,Ff={tr:document.createElement("tbody"),tbody:Tn,thead:Tn,tfoot:Tn,td:Of,th:Of,"*":document.createElement("div")}}function re(r){Tn||Lw();var e=Rc.test(r)&&RegExp.$1;(!e||!(e in Ff))&&(e="*");var t=Ff[e];r=typeof r=="string"?r.replace(/(^\s*)|(\s*$)/g,""):r,t.innerHTML=""+r;var i=t.childNodes[0];return i&&t.contains(i)&&t.removeChild(i),i}function Yt(r,e,t){var i;try{i=window.getComputedStyle?window.getComputedStyle(r,null)[e]:r.style[e]}catch{}finally{i=i===void 0?t:i}return i}function qo(r,e){var t=Yt(r,"height",e);return t==="auto"&&(t=r.offsetHeight),parseFloat(t)}function Uo(r,e){var t=qo(r,e),i=parseFloat(Yt(r,"borderTopWidth"))||0,a=parseFloat(Yt(r,"paddingTop"))||0,n=parseFloat(Yt(r,"paddingBottom"))||0,o=parseFloat(Yt(r,"borderBottomWidth"))||0,s=parseFloat(Yt(r,"marginTop"))||0,l=parseFloat(Yt(r,"marginBottom"))||0;return t+i+o+a+n+s+l}function jo(r,e){var t=Yt(r,"width",e);return t==="auto"&&(t=r.offsetWidth),parseFloat(t)}function Zo(r,e){var t=jo(r,e),i=parseFloat(Yt(r,"borderLeftWidth"))||0,a=parseFloat(Yt(r,"paddingLeft"))||0,n=parseFloat(Yt(r,"paddingRight"))||0,o=parseFloat(Yt(r,"borderRightWidth"))||0,s=parseFloat(Yt(r,"marginRight"))||0,l=parseFloat(Yt(r,"marginLeft"))||0;return t+i+o+a+n+l+s}function Et(r,e){if(r)for(var t in e)e.hasOwnProperty(t)&&(r.style[t]=e[t]);return r}function Iw(r){var e=getComputedStyle(r);return{width:(r.clientWidth||parseInt(e.width,10))-parseInt(e.paddingLeft,10)-parseInt(e.paddingRight,10),height:(r.clientHeight||parseInt(e.height,10))-parseInt(e.paddingTop,10)-parseInt(e.paddingBottom,10)}}function Dc(r){return typeof r=="number"&&!isNaN(r)}function _f(r,e,t,i){var a=t,n=i;if(e){var o=Iw(r);a=o.width?o.width:a,n=o.height?o.height:n}return{width:Math.max(Dc(a)?a:If,If),height:Math.max(Dc(n)?n:Pf,Pf)}}function Nc(r){var e=r.parentNode;e&&e.removeChild(r)}var Pw="*",Bw=function(){function r(){this._events={}}return r.prototype.on=function(e,t,i){return this._events[e]||(this._events[e]=[]),this._events[e].push({callback:t,once:!!i}),this},r.prototype.once=function(e,t){return this.on(e,t,!0)},r.prototype.emit=function(e){for(var t=this,i=[],a=1;a<arguments.length;a++)i[a-1]=arguments[a];var n=this._events[e]||[],o=this._events[Pw]||[],s=function(l){for(var f=l.length,u=0;u<f;u++)if(l[u]){var h=l[u],c=h.callback,p=h.once;p&&(l.splice(u,1),l.length===0&&delete t._events[e],f--,u--),c.apply(t,i)}};s(n),s(o)},r.prototype.off=function(e,t){if(!e)this._events={};else if(!t)delete this._events[e];else{for(var i=this._events[e]||[],a=i.length,n=0;n<a;n++)i[n].callback===t&&(i.splice(n,1),a--,n--);i.length===0&&delete this._events[e]}return this},r.prototype.getEvents=function(){return this._events},r}(),Qo=Bw;var kw=function(r){S(e,r);function e(t){var i=r.call(this)||this;i.destroyed=!1;var a=t.visible,n=a===void 0?!0:a;return i.visible=n,i}return e.prototype.show=function(){var t=this.visible;t||this.changeVisible(!0)},e.prototype.hide=function(){var t=this.visible;t&&this.changeVisible(!1)},e.prototype.destroy=function(){this.off(),this.destroyed=!0},e.prototype.changeVisible=function(t){this.visible!==t&&(this.visible=t)},e}(Qo),ha=kw;var ki={};Bt(ki,{catmullRomToBezier:()=>Df,fillPath:()=>Ww,fillPathByDiff:()=>Hf,formatPath:()=>Jo,intersection:()=>Hw,parsePathArray:()=>Wc,parsePathString:()=>Bi,pathToAbsolute:()=>Nf,pathToCurve:()=>Gf,rectPath:()=>qc});var En=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,Ow=new RegExp("([a-z])["+En+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+En+"]*,?["+En+"]*)+)","ig"),Fw=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+En+"]*,?["+En+"]*","ig"),Bi=function(r){if(!r)return null;if(B(r))return r;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},t=[];return String(r).replace(Ow,function(i,a,n){var o=[],s=a.toLowerCase();if(n.replace(Fw,function(l,f){f&&o.push(+f)}),s==="m"&&o.length>2&&(t.push([a].concat(o.splice(0,2))),s="l",a=a==="m"?"l":"L"),s==="o"&&o.length===1&&t.push([a,o[0]]),s==="r")t.push([a].concat(o));else for(;o.length>=e[s]&&(t.push([a].concat(o.splice(0,e[s]))),!!e[s]););return r}),t},Df=function(r,e){for(var t=[],i=0,a=r.length;a-2*!e>i;i+=2){var n=[{x:+r[i-2],y:+r[i-1]},{x:+r[i],y:+r[i+1]},{x:+r[i+2],y:+r[i+3]},{x:+r[i+4],y:+r[i+5]}];e?i?a-4===i?n[3]={x:+r[0],y:+r[1]}:a-2===i&&(n[2]={x:+r[0],y:+r[1]},n[3]={x:+r[2],y:+r[3]}):n[0]={x:+r[a-2],y:+r[a-1]}:a-4===i?n[3]=n[2]:i||(n[0]={x:+r[i],y:+r[i+1]}),t.push(["C",(-n[0].x+6*n[1].x+n[2].x)/6,(-n[0].y+6*n[1].y+n[2].y)/6,(n[1].x+6*n[2].x-n[3].x)/6,(n[1].y+6*n[2].y-n[3].y)/6,n[2].x,n[2].y])}return t},$o=function(r,e,t,i,a){var n=[];if(a===null&&i===null&&(i=t),r=+r,e=+e,t=+t,i=+i,a!==null){var o=Math.PI/180,s=r+t*Math.cos(-i*o),l=r+t*Math.cos(-a*o),f=e+t*Math.sin(-i*o),u=e+t*Math.sin(-a*o);n=[["M",s,f],["A",t,t,0,+(a-i>180),0,l,u]]}else n=[["M",r,e],["m",0,-i],["a",t,i,0,1,1,0,2*i],["a",t,i,0,1,1,0,-2*i],["z"]];return n},Nf=function(r){if(r=Bi(r),!r||!r.length)return[["M",0,0]];var e=[],t=0,i=0,a=0,n=0,o=0,s,l;r[0][0]==="M"&&(t=+r[0][1],i=+r[0][2],a=t,n=i,o++,e[0]=["M",t,i]);for(var f=r.length===3&&r[0][0]==="M"&&r[1][0].toUpperCase()==="R"&&r[2][0].toUpperCase()==="Z",u=void 0,h=void 0,c=o,p=r.length;c<p;c++){if(e.push(u=[]),h=r[c],s=h[0],s!==s.toUpperCase())switch(u[0]=s.toUpperCase(),u[0]){case"A":u[1]=h[1],u[2]=h[2],u[3]=h[3],u[4]=h[4],u[5]=h[5],u[6]=+h[6]+t,u[7]=+h[7]+i;break;case"V":u[1]=+h[1]+i;break;case"H":u[1]=+h[1]+t;break;case"R":l=[t,i].concat(h.slice(1));for(var v=2,m=l.length;v<m;v++)l[v]=+l[v]+t,l[++v]=+l[v]+i;e.pop(),e=e.concat(Df(l,f));break;case"O":e.pop(),l=$o(t,i,h[1],h[2]),l.push(l[0]),e=e.concat(l);break;case"U":e.pop(),e=e.concat($o(t,i,h[1],h[2],h[3])),u=["U"].concat(e[e.length-1].slice(-2));break;case"M":a=+h[1]+t,n=+h[2]+i;break;default:for(var v=1,m=h.length;v<m;v++)u[v]=+h[v]+(v%2?t:i)}else if(s==="R")l=[t,i].concat(h.slice(1)),e.pop(),e=e.concat(Df(l,f)),u=["R"].concat(h.slice(-2));else if(s==="O")e.pop(),l=$o(t,i,h[1],h[2]),l.push(l[0]),e=e.concat(l);else if(s==="U")e.pop(),e=e.concat($o(t,i,h[1],h[2],h[3])),u=["U"].concat(e[e.length-1].slice(-2));else for(var g=0,y=h.length;g<y;g++)u[g]=h[g];if(s=s.toUpperCase(),s!=="O")switch(u[0]){case"Z":t=+a,i=+n;break;case"H":t=u[1];break;case"V":i=u[1];break;case"M":a=u[u.length-2],n=u[u.length-1];break;default:t=u[u.length-2],i=u[u.length-1]}}return e},Ko=function(r,e,t,i){return[r,e,t,i,t,i]},Gc=function(r,e,t,i,a,n){var o=.3333333333333333,s=2/3;return[o*r+s*t,o*e+s*i,o*a+s*t,o*n+s*i,a,n]},Xc=function(r,e,t,i,a,n,o,s,l,f){t===i&&(t+=1);var u=Math.PI*120/180,h=Math.PI/180*(+a||0),c=[],p,v,m,g,y,w=function(Yo,Ho,oa){var af=Yo*Math.cos(oa)-Ho*Math.sin(oa),Ei=Yo*Math.sin(oa)+Ho*Math.cos(oa);return{x:af,y:Ei}};if(f)v=f[0],m=f[1],g=f[2],y=f[3];else{p=w(r,e,-h),r=p.x,e=p.y,p=w(s,l,-h),s=p.x,l=p.y,r===s&&e===l&&(s+=1,l+=1);var x=(r-s)/2,C=(e-l)/2,A=x*x/(t*t)+C*C/(i*i);A>1&&(A=Math.sqrt(A),t=A*t,i=A*i);var T=t*t,E=i*i,k=(n===o?-1:1)*Math.sqrt(Math.abs((T*E-T*C*C-E*x*x)/(T*C*C+E*x*x)));g=k*t*C/i+(r+s)/2,y=k*-i*x/t+(e+l)/2,v=Math.asin(((e-y)/i).toFixed(9)),m=Math.asin(((l-y)/i).toFixed(9)),v=r<g?Math.PI-v:v,m=s<g?Math.PI-m:m,v<0&&(v=Math.PI*2+v),m<0&&(m=Math.PI*2+m),o&&v>m&&(v=v-Math.PI*2),!o&&m>v&&(m=m-Math.PI*2)}var P=m-v;if(Math.abs(P)>u){var L=m,R=s,N=l;m=v+u*(o&&m>v?1:-1),s=g+t*Math.cos(m),l=y+i*Math.sin(m),c=Xc(s,l,t,i,a,0,o,R,N,[m,L,g,y])}P=m-v;var H=Math.cos(v),V=Math.sin(v),Q=Math.cos(m),mt=Math.sin(m),ct=Math.tan(P/4),bt=4/3*t*ct,it=4/3*i*ct,Nt=[r,e],te=[r+bt*V,e-it*H],je=[s+bt*mt,l-it*Q],Vr=[s,l];if(te[0]=2*Nt[0]-te[0],te[1]=2*Nt[1]-te[1],f)return[te,je,Vr].concat(c);c=[te,je,Vr].concat(c).join().split(",");for(var Go=[],Ze=0,zr=c.length;Ze<zr;Ze++)Go[Ze]=Ze%2?w(c[Ze-1],c[Ze],h).y:w(c[Ze],c[Ze+1],h).x;return Go},Gf=function(r,e){var t=Nf(r),i=e&&Nf(e),a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},n={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o=[],s=[],l="",f="",u,h=function(x,C,A){var T,E;if(!x)return["C",C.x,C.y,C.x,C.y,C.x,C.y];switch(!(x[0]in{T:1,Q:1})&&(C.qx=C.qy=null),x[0]){case"M":C.X=x[1],C.Y=x[2];break;case"A":x=["C"].concat(Xc.apply(0,[C.x,C.y].concat(x.slice(1))));break;case"S":A==="C"||A==="S"?(T=C.x*2-C.bx,E=C.y*2-C.by):(T=C.x,E=C.y),x=["C",T,E].concat(x.slice(1));break;case"T":A==="Q"||A==="T"?(C.qx=C.x*2-C.qx,C.qy=C.y*2-C.qy):(C.qx=C.x,C.qy=C.y),x=["C"].concat(Gc(C.x,C.y,C.qx,C.qy,x[1],x[2]));break;case"Q":C.qx=x[1],C.qy=x[2],x=["C"].concat(Gc(C.x,C.y,x[1],x[2],x[3],x[4]));break;case"L":x=["C"].concat(Ko(C.x,C.y,x[1],x[2]));break;case"H":x=["C"].concat(Ko(C.x,C.y,x[1],C.y));break;case"V":x=["C"].concat(Ko(C.x,C.y,C.x,x[1]));break;case"Z":x=["C"].concat(Ko(C.x,C.y,C.X,C.Y));break;default:break}return x},c=function(x,C){if(x[C].length>7){x[C].shift();for(var A=x[C];A.length;)o[C]="A",i&&(s[C]="A"),x.splice(C++,0,["C"].concat(A.splice(0,6)));x.splice(C,1),u=Math.max(t.length,i&&i.length||0)}},p=function(x,C,A,T,E){x&&C&&x[E][0]==="M"&&C[E][0]!=="M"&&(C.splice(E,0,["M",T.x,T.y]),A.bx=0,A.by=0,A.x=x[E][1],A.y=x[E][2],u=Math.max(t.length,i&&i.length||0))};u=Math.max(t.length,i&&i.length||0);for(var v=0;v<u;v++){t[v]&&(l=t[v][0]),l!=="C"&&(o[v]=l,v&&(f=o[v-1])),t[v]=h(t[v],a,f),o[v]!=="A"&&l==="C"&&(o[v]="C"),c(t,v),i&&(i[v]&&(l=i[v][0]),l!=="C"&&(s[v]=l,v&&(f=s[v-1])),i[v]=h(i[v],n,f),s[v]!=="A"&&l==="C"&&(s[v]="C"),c(i,v)),p(t,i,a,n,v),p(i,t,n,a,v);var m=t[v],g=i&&i[v],y=m.length,w=i&&g.length;a.x=m[y-2],a.y=m[y-1],a.bx=parseFloat(m[y-4])||a.x,a.by=parseFloat(m[y-3])||a.y,n.bx=i&&(parseFloat(g[w-4])||n.x),n.by=i&&(parseFloat(g[w-3])||n.y),n.x=i&&g[w-2],n.y=i&&g[w-1]}return i?[t,i]:t},_w=/,?([a-z]),?/gi,Wc=function(r){return r.join(",").replace(_w,"$1")},Yc=function(r,e,t,i,a){var n=-3*e+9*t-9*i+3*a,o=r*n+6*e-12*t+6*i;return r*o-3*e+3*t},Hc=function(r,e,t,i,a,n,o,s,l){l===null&&(l=1),l=l>1?1:l<0?0:l;for(var f=l/2,u=12,h=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],c=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],p=0,v=0;v<u;v++){var m=f*h[v]+f,g=Yc(m,r,t,a,o),y=Yc(m,e,i,n,s),w=g*g+y*y;p+=c[v]*Math.sqrt(w)}return f*p},Rw=function(r,e,t,i,a,n,o,s){for(var l=[],f=[[],[]],u,h,c,p,v=0;v<2;++v){if(v===0?(h=6*r-12*t+6*a,u=-3*r+9*t-9*a+3*o,c=3*t-3*r):(h=6*e-12*i+6*n,u=-3*e+9*i-9*n+3*s,c=3*i-3*e),Math.abs(u)<1e-12){if(Math.abs(h)<1e-12)continue;p=-c/h,p>0&&p<1&&l.push(p);continue}var m=h*h-4*c*u,g=Math.sqrt(m);if(!(m<0)){var y=(-h+g)/(2*u);y>0&&y<1&&l.push(y);var w=(-h-g)/(2*u);w>0&&w<1&&l.push(w)}}for(var x=l.length,C=x,A;x--;)p=l[x],A=1-p,f[0][x]=A*A*A*r+3*A*A*p*t+3*A*p*p*a+p*p*p*o,f[1][x]=A*A*A*e+3*A*A*p*i+3*A*p*p*n+p*p*p*s;return f[0][C]=r,f[1][C]=e,f[0][C+1]=o,f[1][C+1]=s,f[0].length=f[1].length=C+2,{min:{x:Math.min.apply(0,f[0]),y:Math.min.apply(0,f[1])},max:{x:Math.max.apply(0,f[0]),y:Math.max.apply(0,f[1])}}},Dw=function(r,e,t,i,a,n,o,s){if(!(Math.max(r,t)<Math.min(a,o)||Math.min(r,t)>Math.max(a,o)||Math.max(e,i)<Math.min(n,s)||Math.min(e,i)>Math.max(n,s))){var l=(r*i-e*t)*(a-o)-(r-t)*(a*s-n*o),f=(r*i-e*t)*(n-s)-(e-i)*(a*s-n*o),u=(r-t)*(n-s)-(e-i)*(a-o);if(u){var h=l/u,c=f/u,p=+h.toFixed(2),v=+c.toFixed(2);if(!(p<+Math.min(r,t).toFixed(2)||p>+Math.max(r,t).toFixed(2)||p<+Math.min(a,o).toFixed(2)||p>+Math.max(a,o).toFixed(2)||v<+Math.min(e,i).toFixed(2)||v>+Math.max(e,i).toFixed(2)||v<+Math.min(n,s).toFixed(2)||v>+Math.max(n,s).toFixed(2)))return{x:h,y:c}}}},Zr=function(r,e,t){return e>=r.x&&e<=r.x+r.width&&t>=r.y&&t<=r.y+r.height},qc=function(r,e,t,i,a){if(a)return[["M",+r+ +a,e],["l",t-a*2,0],["a",a,a,0,0,1,a,a],["l",0,i-a*2],["a",a,a,0,0,1,-a,a],["l",a*2-t,0],["a",a,a,0,0,1,-a,-a],["l",0,a*2-i],["a",a,a,0,0,1,a,-a],["z"]];var n=[["M",r,e],["l",t,0],["l",0,i],["l",-t,0],["z"]];return n.parsePathArray=Wc,n},Yf=function(r,e,t,i){return r===null&&(r=e=t=i=0),e===null&&(e=r.y,t=r.width,i=r.height,r=r.x),{x:r,y:e,width:t,w:t,height:i,h:i,x2:r+t,y2:e+i,cx:r+t/2,cy:e+i/2,r1:Math.min(t,i)/2,r2:Math.max(t,i)/2,r0:Math.sqrt(t*t+i*i)/2,path:qc(r,e,t,i),vb:[r,e,t,i].join(" ")}},Nw=function(r,e){return r=Yf(r),e=Yf(e),Zr(e,r.x,r.y)||Zr(e,r.x2,r.y)||Zr(e,r.x,r.y2)||Zr(e,r.x2,r.y2)||Zr(r,e.x,e.y)||Zr(r,e.x2,e.y)||Zr(r,e.x,e.y2)||Zr(r,e.x2,e.y2)||(r.x<e.x2&&r.x>e.x||e.x<r.x2&&e.x>r.x)&&(r.y<e.y2&&r.y>e.y||e.y<r.y2&&e.y>r.y)},Vc=function(r,e,t,i,a,n,o,s){B(r)||(r=[r,e,t,i,a,n,o,s]);var l=Rw.apply(null,r);return Yf(l.min.x,l.min.y,l.max.x-l.min.x,l.max.y-l.min.y)},zc=function(r,e,t,i,a,n,o,s,l){var f=1-l,u=Math.pow(f,3),h=Math.pow(f,2),c=l*l,p=c*l,v=u*r+h*3*l*t+f*3*l*l*a+p*o,m=u*e+h*3*l*i+f*3*l*l*n+p*s,g=r+2*l*(t-r)+c*(a-2*t+r),y=e+2*l*(i-e)+c*(n-2*i+e),w=t+2*l*(a-t)+c*(o-2*a+t),x=i+2*l*(n-i)+c*(s-2*n+i),C=f*r+l*t,A=f*e+l*i,T=f*a+l*o,E=f*n+l*s,k=90-Math.atan2(g-w,y-x)*180/Math.PI;return{x:v,y:m,m:{x:g,y},n:{x:w,y:x},start:{x:C,y:A},end:{x:T,y:E},alpha:k}},Gw=function(r,e,t){var i=Vc(r),a=Vc(e);if(!Nw(i,a))return t?0:[];for(var n=Hc.apply(0,r),o=Hc.apply(0,e),s=~~(n/8),l=~~(o/8),f=[],u=[],h={},c=t?0:[],p=0;p<s+1;p++){var v=zc.apply(0,r.concat(p/s));f.push({x:v.x,y:v.y,t:p/s})}for(var p=0;p<l+1;p++){var v=zc.apply(0,e.concat(p/l));u.push({x:v.x,y:v.y,t:p/l})}for(var p=0;p<s;p++)for(var m=0;m<l;m++){var g=f[p],y=f[p+1],w=u[m],x=u[m+1],C=Math.abs(y.x-g.x)<.001?"y":"x",A=Math.abs(x.x-w.x)<.001?"y":"x",T=Dw(g.x,g.y,y.x,y.y,w.x,w.y,x.x,x.y);if(T){if(h[T.x.toFixed(4)]===T.y.toFixed(4))continue;h[T.x.toFixed(4)]=T.y.toFixed(4);var E=g.t+Math.abs((T[C]-g[C])/(y[C]-g[C]))*(y.t-g.t),k=w.t+Math.abs((T[A]-w[A])/(x[A]-w[A]))*(x.t-w.t);E>=0&&E<=1&&k>=0&&k<=1&&(t?c+=1:c.push({x:T.x,y:T.y,t1:E,t2:k}))}}return c},Yw=function(r,e,t){r=Gf(r),e=Gf(e);for(var i,a,n,o,s,l,f,u,h,c,p=t?0:[],v=0,m=r.length;v<m;v++){var g=r[v];if(g[0]==="M")i=s=g[1],a=l=g[2];else{g[0]==="C"?(h=[i,a].concat(g.slice(1)),i=h[6],a=h[7]):(h=[i,a,i,a,s,l,s,l],i=s,a=l);for(var y=0,w=e.length;y<w;y++){var x=e[y];if(x[0]==="M")n=f=x[1],o=u=x[2];else{x[0]==="C"?(c=[n,o].concat(x.slice(1)),n=c[6],o=c[7]):(c=[n,o,n,o,f,u,f,u],n=f,o=u);var C=Gw(h,c,t);if(t)p+=C;else{for(var A=0,T=C.length;A<T;A++)C[A].segment1=v,C[A].segment2=y,C[A].bez1=h,C[A].bez2=c;p=p.concat(C)}}}}}return p},Hw=function(r,e){return Yw(r,e)};function Vw(r,e){var t=[],i=[];function a(n,o){if(n.length===1)t.push(n[0]),i.push(n[0]);else{for(var s=[],l=0;l<n.length-1;l++)l===0&&t.push(n[0]),l===n.length-2&&i.push(n[l+1]),s[l]=[(1-o)*n[l][0]+o*n[l+1][0],(1-o)*n[l][1]+o*n[l+1][1]];a(s,o)}}return r.length&&a(r,e),{left:t,right:i.reverse()}}function zw(r,e,t){var i=[[r[1],r[2]]];t=t||2;var a=[];e[0]==="A"?(i.push(e[6]),i.push(e[7])):e[0]==="C"?(i.push([e[1],e[2]]),i.push([e[3],e[4]]),i.push([e[5],e[6]])):e[0]==="S"||e[0]==="Q"?(i.push([e[1],e[2]]),i.push([e[3],e[4]])):i.push([e[1],e[2]]);for(var n=i,o=1/t,s=0;s<t-1;s++){var l=o/(1-o*s),f=Vw(n,l);a.push(f.left),n=f.right}a.push(n);var u=a.map(function(h){var c=[];return h.length===4&&(c.push("C"),c=c.concat(h[2])),h.length>=3&&(h.length===3&&c.push("Q"),c=c.concat(h[1])),h.length===2&&c.push("L"),c=c.concat(h[h.length-1]),c});return u}var Xw=function(r,e,t){if(t===1)return[[].concat(r)];var i=[];if(e[0]==="L"||e[0]==="C"||e[0]==="Q")i=i.concat(zw(r,e,t));else{var a=[].concat(r);a[0]==="M"&&(a[0]="L");for(var n=0;n<=t-1;n++)i.push(a)}return i},Ww=function(r,e){if(r.length===1)return r;var t=r.length-1,i=e.length-1,a=t/i,n=[];if(r.length===1&&r[0][0]==="M"){for(var o=0;o<i-t;o++)r.push(r[0]);return r}for(var o=0;o<i;o++){var s=Math.floor(a*o);n[s]=(n[s]||0)+1}var l=n.reduce(function(f,u,h){return h===t?f.concat(r[t]):f.concat(Xw(r[h],r[h+1],u))},[]);return l.unshift(r[0]),(e[i]==="Z"||e[i]==="z")&&l.push("Z"),l},qw=function(r,e){if(r.length!==e.length)return!1;var t=!0;return M(r,function(i,a){if(i!==e[a])return t=!1,!1}),t};function Uw(r,e,t){var i=null,a=t;return e<a&&(a=e,i="add"),r<a&&(a=r,i="del"),{type:i,min:a}}var jw=function(r,e){var t=r.length,i=e.length,a,n,o=0;if(t===0||i===0)return null;for(var s=[],l=0;l<=t;l++)s[l]=[],s[l][0]={min:l};for(var f=0;f<=i;f++)s[0][f]={min:f};for(var l=1;l<=t;l++){a=r[l-1];for(var f=1;f<=i;f++){n=e[f-1],qw(a,n)?o=0:o=1;var u=s[l-1][f].min+1,h=s[l][f-1].min+1,c=s[l-1][f-1].min+o;s[l][f]=Uw(u,h,c)}}return s},Hf=function(r,e){var t=jw(r,e),i=r.length,a=e.length,n=[],o=1,s=1;if(t[i][a].min!==i){for(var l=1;l<=i;l++){var f=t[l][l].min;s=l;for(var u=o;u<=a;u++)t[l][u].min<f&&(f=t[l][u].min,s=u);o=s,t[l][o].type&&n.push({index:l-1,type:t[l][o].type})}for(var l=n.length-1;l>=0;l--)o=n[l].index,n[l].type==="add"?r.splice(o,0,[].concat(r[o])):r.splice(o,1)}i=r.length;var h=a-i;if(i<a)for(var l=0;l<h;l++)r[i-1][0]==="z"||r[i-1][0]==="Z"?r.splice(i-2,0,r[i-2]):r.push(r[i-1]),i+=1;return r};function Rf(r,e,t){for(var i=[].concat(r),a,n=1/(t+1),o=Uc(e)[0],s=1;s<=t;s++)n*=s,a=Math.floor(r.length*n),a===0?i.unshift([o[0]*n+r[a][0]*(1-n),o[1]*n+r[a][1]*(1-n)]):i.splice(a,0,[o[0]*n+r[a][0]*(1-n),o[1]*n+r[a][1]*(1-n)]);return i}function Uc(r){var e=[];switch(r[0]){case"M":e.push([r[1],r[2]]);break;case"L":e.push([r[1],r[2]]);break;case"A":e.push([r[6],r[7]]);break;case"Q":e.push([r[3],r[4]]),e.push([r[1],r[2]]);break;case"T":e.push([r[1],r[2]]);break;case"C":e.push([r[5],r[6]]),e.push([r[1],r[2]]),e.push([r[3],r[4]]);break;case"S":e.push([r[3],r[4]]),e.push([r[1],r[2]]);break;case"H":e.push([r[1],r[1]]);break;case"V":e.push([r[1],r[1]]);break;default:}return e}var Jo=function(r,e){if(r.length<=1)return r;for(var t,i=0;i<e.length;i++)if(r[i][0]!==e[i][0])switch(t=Uc(r[i]),e[i][0]){case"M":r[i]=["M"].concat(t[0]);break;case"L":r[i]=["L"].concat(t[0]);break;case"A":r[i]=[].concat(e[i]),r[i][6]=t[0][0],r[i][7]=t[0][1];break;case"Q":if(t.length<2)if(i>0)t=Rf(t,r[i-1],1);else{r[i]=e[i];break}r[i]=["Q"].concat(t.reduce(function(a,n){return a.concat(n)},[]));break;case"T":r[i]=["T"].concat(t[0]);break;case"C":if(t.length<3)if(i>0)t=Rf(t,r[i-1],2);else{r[i]=e[i];break}r[i]=["C"].concat(t.reduce(function(a,n){return a.concat(n)},[]));break;case"S":if(t.length<2)if(i>0)t=Rf(t,r[i-1],1);else{r[i]=e[i];break}r[i]=["S"].concat(t.reduce(function(a,n){return a.concat(n)},[]));break;default:r[i]=e[i]}return r};var Zw=function(){function r(e,t){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=e,this.name=e,this.originalEvent=t,this.timeStamp=t.timeStamp}return r.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},r.prototype.stopPropagation=function(){this.propagationStopped=!0},r.prototype.toString=function(){var e=this.type;return"[Event (type="+e+")]"},r.prototype.save=function(){},r.prototype.restore=function(){},r}(),tr=Zw;function ts(r,e){var t=r.indexOf(e);t!==-1&&r.splice(t,1)}var Vf=typeof window<"u"&&typeof window.document<"u";function es(r,e){if(r.isCanvas())return!0;for(var t=e.getParent(),i=!1;t;){if(t===r){i=!0;break}t=t.getParent()}return i}function Qr(r){return r.cfg.visible&&r.cfg.capture}var Qw=function(r){S(e,r);function e(t){var i=r.call(this)||this;i.destroyed=!1;var a=i.getDefaultCfg();return i.cfg=J(a,t),i}return e.prototype.getDefaultCfg=function(){return{}},e.prototype.get=function(t){return this.cfg[t]},e.prototype.set=function(t,i){this.cfg[t]=i},e.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},e}(Qo),Oi=Qw;var jc=function(r,e,t){if(t||arguments.length===2)for(var i=0,a=e.length,n;i<a;i++)(n||!(i in e))&&(n||(n=Array.prototype.slice.call(e,0,i)),n[i]=e[i]);return r.concat(n||Array.prototype.slice.call(e))},$w=function(){function r(e,t,i){this.name=e,this.version=t,this.os=i,this.type="browser"}return r}();var Kw=function(){function r(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return r}();var Jw=function(){function r(e,t,i,a){this.name=e,this.version=t,this.os=i,this.bot=a,this.type="bot-device"}return r}();var t1=function(){function r(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return r}();var e1=function(){function r(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return r}();var r1=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,i1=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Zc=3,a1=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",r1]],Qc=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function rs(r){return r?$c(r):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new e1:typeof navigator<"u"?$c(navigator.userAgent):s1()}function n1(r){return r!==""&&a1.reduce(function(e,t){var i=t[0],a=t[1];if(e)return e;var n=a.exec(r);return!!n&&[i,n]},!1)}function $c(r){var e=n1(r);if(!e)return null;var t=e[0],i=e[1];if(t==="searchbot")return new t1;var a=i[1]&&i[1].split(".").join("_").split("_").slice(0,3);a?a.length<Zc&&(a=jc(jc([],a,!0),l1(Zc-a.length),!0)):a=[];var n=a.join("."),o=o1(r),s=i1.exec(r);return s&&s[1]?new Jw(t,n,o,s[1]):new $w(t,n,o)}function o1(r){for(var e=0,t=Qc.length;e<t;e++){var i=Qc[e],a=i[0],n=i[1],o=n.exec(r);if(o)return a}return null}function s1(){var r=typeof process<"u"&&process.version;return r?new Kw(process.version.slice(1)):null}function l1(r){for(var e=[],t=0;t<r;t++)e.push("0");return e}var Qt=1e-6,oe=typeof Float32Array<"u"?Float32Array:Array,Ln=Math.random;function Fi(r){return r>=0?Math.round(r):r%.5===0?Math.floor(r):Math.round(r)}var pN=Math.PI/180,vN=180/Math.PI;var ce={};Bt(ce,{add:()=>k1,adjoint:()=>y1,clone:()=>h1,copy:()=>c1,create:()=>f1,determinant:()=>x1,equals:()=>R1,exactEquals:()=>_1,frob:()=>B1,fromMat2d:()=>T1,fromMat4:()=>u1,fromQuat:()=>E1,fromRotation:()=>A1,fromScaling:()=>b1,fromTranslation:()=>S1,fromValues:()=>p1,identity:()=>m1,invert:()=>g1,mul:()=>D1,multiply:()=>Kc,multiplyScalar:()=>O1,multiplyScalarAndAdd:()=>F1,normalFromMat4:()=>L1,projection:()=>I1,rotate:()=>w1,scale:()=>M1,set:()=>v1,str:()=>P1,sub:()=>N1,subtract:()=>Jc,translate:()=>C1,transpose:()=>d1});function f1(){var r=new oe(9);return oe!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[5]=0,r[6]=0,r[7]=0),r[0]=1,r[4]=1,r[8]=1,r}function u1(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[4],r[4]=e[5],r[5]=e[6],r[6]=e[8],r[7]=e[9],r[8]=e[10],r}function h1(r){var e=new oe(9);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e}function c1(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r}function p1(r,e,t,i,a,n,o,s,l){var f=new oe(9);return f[0]=r,f[1]=e,f[2]=t,f[3]=i,f[4]=a,f[5]=n,f[6]=o,f[7]=s,f[8]=l,f}function v1(r,e,t,i,a,n,o,s,l,f){return r[0]=e,r[1]=t,r[2]=i,r[3]=a,r[4]=n,r[5]=o,r[6]=s,r[7]=l,r[8]=f,r}function m1(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=1,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r}function d1(r,e){if(r===e){var t=e[1],i=e[2],a=e[5];r[1]=e[3],r[2]=e[6],r[3]=t,r[5]=e[7],r[6]=i,r[7]=a}else r[0]=e[0],r[1]=e[3],r[2]=e[6],r[3]=e[1],r[4]=e[4],r[5]=e[7],r[6]=e[2],r[7]=e[5],r[8]=e[8];return r}function g1(r,e){var t=e[0],i=e[1],a=e[2],n=e[3],o=e[4],s=e[5],l=e[6],f=e[7],u=e[8],h=u*o-s*f,c=-u*n+s*l,p=f*n-o*l,v=t*h+i*c+a*p;return v?(v=1/v,r[0]=h*v,r[1]=(-u*i+a*f)*v,r[2]=(s*i-a*o)*v,r[3]=c*v,r[4]=(u*t-a*l)*v,r[5]=(-s*t+a*n)*v,r[6]=p*v,r[7]=(-f*t+i*l)*v,r[8]=(o*t-i*n)*v,r):null}function y1(r,e){var t=e[0],i=e[1],a=e[2],n=e[3],o=e[4],s=e[5],l=e[6],f=e[7],u=e[8];return r[0]=o*u-s*f,r[1]=a*f-i*u,r[2]=i*s-a*o,r[3]=s*l-n*u,r[4]=t*u-a*l,r[5]=a*n-t*s,r[6]=n*f-o*l,r[7]=i*l-t*f,r[8]=t*o-i*n,r}function x1(r){var e=r[0],t=r[1],i=r[2],a=r[3],n=r[4],o=r[5],s=r[6],l=r[7],f=r[8];return e*(f*n-o*l)+t*(-f*a+o*s)+i*(l*a-n*s)}function Kc(r,e,t){var i=e[0],a=e[1],n=e[2],o=e[3],s=e[4],l=e[5],f=e[6],u=e[7],h=e[8],c=t[0],p=t[1],v=t[2],m=t[3],g=t[4],y=t[5],w=t[6],x=t[7],C=t[8];return r[0]=c*i+p*o+v*f,r[1]=c*a+p*s+v*u,r[2]=c*n+p*l+v*h,r[3]=m*i+g*o+y*f,r[4]=m*a+g*s+y*u,r[5]=m*n+g*l+y*h,r[6]=w*i+x*o+C*f,r[7]=w*a+x*s+C*u,r[8]=w*n+x*l+C*h,r}function C1(r,e,t){var i=e[0],a=e[1],n=e[2],o=e[3],s=e[4],l=e[5],f=e[6],u=e[7],h=e[8],c=t[0],p=t[1];return r[0]=i,r[1]=a,r[2]=n,r[3]=o,r[4]=s,r[5]=l,r[6]=c*i+p*o+f,r[7]=c*a+p*s+u,r[8]=c*n+p*l+h,r}function w1(r,e,t){var i=e[0],a=e[1],n=e[2],o=e[3],s=e[4],l=e[5],f=e[6],u=e[7],h=e[8],c=Math.sin(t),p=Math.cos(t);return r[0]=p*i+c*o,r[1]=p*a+c*s,r[2]=p*n+c*l,r[3]=p*o-c*i,r[4]=p*s-c*a,r[5]=p*l-c*n,r[6]=f,r[7]=u,r[8]=h,r}function M1(r,e,t){var i=t[0],a=t[1];return r[0]=i*e[0],r[1]=i*e[1],r[2]=i*e[2],r[3]=a*e[3],r[4]=a*e[4],r[5]=a*e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r}function S1(r,e){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=1,r[5]=0,r[6]=e[0],r[7]=e[1],r[8]=1,r}function A1(r,e){var t=Math.sin(e),i=Math.cos(e);return r[0]=i,r[1]=t,r[2]=0,r[3]=-t,r[4]=i,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r}function b1(r,e){return r[0]=e[0],r[1]=0,r[2]=0,r[3]=0,r[4]=e[1],r[5]=0,r[6]=0,r[7]=0,r[8]=1,r}function T1(r,e){return r[0]=e[0],r[1]=e[1],r[2]=0,r[3]=e[2],r[4]=e[3],r[5]=0,r[6]=e[4],r[7]=e[5],r[8]=1,r}function E1(r,e){var t=e[0],i=e[1],a=e[2],n=e[3],o=t+t,s=i+i,l=a+a,f=t*o,u=i*o,h=i*s,c=a*o,p=a*s,v=a*l,m=n*o,g=n*s,y=n*l;return r[0]=1-h-v,r[3]=u-y,r[6]=c+g,r[1]=u+y,r[4]=1-f-v,r[7]=p-m,r[2]=c-g,r[5]=p+m,r[8]=1-f-h,r}function L1(r,e){var t=e[0],i=e[1],a=e[2],n=e[3],o=e[4],s=e[5],l=e[6],f=e[7],u=e[8],h=e[9],c=e[10],p=e[11],v=e[12],m=e[13],g=e[14],y=e[15],w=t*s-i*o,x=t*l-a*o,C=t*f-n*o,A=i*l-a*s,T=i*f-n*s,E=a*f-n*l,k=u*m-h*v,P=u*g-c*v,L=u*y-p*v,R=h*g-c*m,N=h*y-p*m,H=c*y-p*g,V=w*H-x*N+C*R+A*L-T*P+E*k;return V?(V=1/V,r[0]=(s*H-l*N+f*R)*V,r[1]=(l*L-o*H-f*P)*V,r[2]=(o*N-s*L+f*k)*V,r[3]=(a*N-i*H-n*R)*V,r[4]=(t*H-a*L+n*P)*V,r[5]=(i*L-t*N-n*k)*V,r[6]=(m*E-g*T+y*A)*V,r[7]=(g*C-v*E-y*x)*V,r[8]=(v*T-m*C+y*w)*V,r):null}function I1(r,e,t){return r[0]=2/e,r[1]=0,r[2]=0,r[3]=0,r[4]=-2/t,r[5]=0,r[6]=-1,r[7]=1,r[8]=1,r}function P1(r){return"mat3("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+", "+r[4]+", "+r[5]+", "+r[6]+", "+r[7]+", "+r[8]+")"}function B1(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]+r[3]*r[3]+r[4]*r[4]+r[5]*r[5]+r[6]*r[6]+r[7]*r[7]+r[8]*r[8])}function k1(r,e,t){return r[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r[3]=e[3]+t[3],r[4]=e[4]+t[4],r[5]=e[5]+t[5],r[6]=e[6]+t[6],r[7]=e[7]+t[7],r[8]=e[8]+t[8],r}function Jc(r,e,t){return r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r[3]=e[3]-t[3],r[4]=e[4]-t[4],r[5]=e[5]-t[5],r[6]=e[6]-t[6],r[7]=e[7]-t[7],r[8]=e[8]-t[8],r}function O1(r,e,t){return r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r[3]=e[3]*t,r[4]=e[4]*t,r[5]=e[5]*t,r[6]=e[6]*t,r[7]=e[7]*t,r[8]=e[8]*t,r}function F1(r,e,t,i){return r[0]=e[0]+t[0]*i,r[1]=e[1]+t[1]*i,r[2]=e[2]+t[2]*i,r[3]=e[3]+t[3]*i,r[4]=e[4]+t[4]*i,r[5]=e[5]+t[5]*i,r[6]=e[6]+t[6]*i,r[7]=e[7]+t[7]*i,r[8]=e[8]+t[8]*i,r}function _1(r,e){return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]&&r[3]===e[3]&&r[4]===e[4]&&r[5]===e[5]&&r[6]===e[6]&&r[7]===e[7]&&r[8]===e[8]}function R1(r,e){var t=r[0],i=r[1],a=r[2],n=r[3],o=r[4],s=r[5],l=r[6],f=r[7],u=r[8],h=e[0],c=e[1],p=e[2],v=e[3],m=e[4],g=e[5],y=e[6],w=e[7],x=e[8];return Math.abs(t-h)<=Qt*Math.max(1,Math.abs(t),Math.abs(h))&&Math.abs(i-c)<=Qt*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(a-p)<=Qt*Math.max(1,Math.abs(a),Math.abs(p))&&Math.abs(n-v)<=Qt*Math.max(1,Math.abs(n),Math.abs(v))&&Math.abs(o-m)<=Qt*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(s-g)<=Qt*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(l-y)<=Qt*Math.max(1,Math.abs(l),Math.abs(y))&&Math.abs(f-w)<=Qt*Math.max(1,Math.abs(f),Math.abs(w))&&Math.abs(u-x)<=Qt*Math.max(1,Math.abs(u),Math.abs(x))}var D1=Kc,N1=Jc;var Le={};Bt(Le,{add:()=>z1,angle:()=>hM,bezier:()=>aM,ceil:()=>X1,clone:()=>G1,copy:()=>H1,create:()=>tp,cross:()=>tM,dist:()=>xM,distance:()=>np,div:()=>yM,divide:()=>ap,dot:()=>Xf,equals:()=>mM,exactEquals:()=>vM,floor:()=>W1,forEach:()=>SM,fromValues:()=>Y1,hermite:()=>iM,inverse:()=>K1,len:()=>wM,length:()=>ep,lerp:()=>eM,max:()=>U1,min:()=>q1,mul:()=>gM,multiply:()=>ip,negate:()=>$1,normalize:()=>J1,random:()=>nM,rotateX:()=>lM,rotateY:()=>fM,rotateZ:()=>uM,round:()=>j1,scale:()=>Z1,scaleAndAdd:()=>Q1,set:()=>V1,slerp:()=>rM,sqrDist:()=>CM,sqrLen:()=>MM,squaredDistance:()=>op,squaredLength:()=>sp,str:()=>pM,sub:()=>dM,subtract:()=>rp,transformMat3:()=>Wf,transformMat4:()=>oM,transformQuat:()=>sM,zero:()=>cM});function tp(){var r=new oe(3);return oe!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r}function G1(r){var e=new oe(3);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e}function ep(r){var e=r[0],t=r[1],i=r[2];return Math.sqrt(e*e+t*t+i*i)}function Y1(r,e,t){var i=new oe(3);return i[0]=r,i[1]=e,i[2]=t,i}function H1(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r}function V1(r,e,t,i){return r[0]=e,r[1]=t,r[2]=i,r}function z1(r,e,t){return r[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r}function rp(r,e,t){return r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r}function ip(r,e,t){return r[0]=e[0]*t[0],r[1]=e[1]*t[1],r[2]=e[2]*t[2],r}function ap(r,e,t){return r[0]=e[0]/t[0],r[1]=e[1]/t[1],r[2]=e[2]/t[2],r}function X1(r,e){return r[0]=Math.ceil(e[0]),r[1]=Math.ceil(e[1]),r[2]=Math.ceil(e[2]),r}function W1(r,e){return r[0]=Math.floor(e[0]),r[1]=Math.floor(e[1]),r[2]=Math.floor(e[2]),r}function q1(r,e,t){return r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[2]=Math.min(e[2],t[2]),r}function U1(r,e,t){return r[0]=Math.max(e[0],t[0]),r[1]=Math.max(e[1],t[1]),r[2]=Math.max(e[2],t[2]),r}function j1(r,e){return r[0]=Fi(e[0]),r[1]=Fi(e[1]),r[2]=Fi(e[2]),r}function Z1(r,e,t){return r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r}function Q1(r,e,t,i){return r[0]=e[0]+t[0]*i,r[1]=e[1]+t[1]*i,r[2]=e[2]+t[2]*i,r}function np(r,e){var t=e[0]-r[0],i=e[1]-r[1],a=e[2]-r[2];return Math.sqrt(t*t+i*i+a*a)}function op(r,e){var t=e[0]-r[0],i=e[1]-r[1],a=e[2]-r[2];return t*t+i*i+a*a}function sp(r){var e=r[0],t=r[1],i=r[2];return e*e+t*t+i*i}function $1(r,e){return r[0]=-e[0],r[1]=-e[1],r[2]=-e[2],r}function K1(r,e){return r[0]=1/e[0],r[1]=1/e[1],r[2]=1/e[2],r}function J1(r,e){var t=e[0],i=e[1],a=e[2],n=t*t+i*i+a*a;return n>0&&(n=1/Math.sqrt(n)),r[0]=e[0]*n,r[1]=e[1]*n,r[2]=e[2]*n,r}function Xf(r,e){return r[0]*e[0]+r[1]*e[1]+r[2]*e[2]}function tM(r,e,t){var i=e[0],a=e[1],n=e[2],o=t[0],s=t[1],l=t[2];return r[0]=a*l-n*s,r[1]=n*o-i*l,r[2]=i*s-a*o,r}function eM(r,e,t,i){var a=e[0],n=e[1],o=e[2];return r[0]=a+i*(t[0]-a),r[1]=n+i*(t[1]-n),r[2]=o+i*(t[2]-o),r}function rM(r,e,t,i){var a=Math.acos(Math.min(Math.max(Xf(e,t),-1),1)),n=Math.sin(a),o=Math.sin((1-i)*a)/n,s=Math.sin(i*a)/n;return r[0]=o*e[0]+s*t[0],r[1]=o*e[1]+s*t[1],r[2]=o*e[2]+s*t[2],r}function iM(r,e,t,i,a,n){var o=n*n,s=o*(2*n-3)+1,l=o*(n-2)+n,f=o*(n-1),u=o*(3-2*n);return r[0]=e[0]*s+t[0]*l+i[0]*f+a[0]*u,r[1]=e[1]*s+t[1]*l+i[1]*f+a[1]*u,r[2]=e[2]*s+t[2]*l+i[2]*f+a[2]*u,r}function aM(r,e,t,i,a,n){var o=1-n,s=o*o,l=n*n,f=s*o,u=3*n*s,h=3*l*o,c=l*n;return r[0]=e[0]*f+t[0]*u+i[0]*h+a[0]*c,r[1]=e[1]*f+t[1]*u+i[1]*h+a[1]*c,r[2]=e[2]*f+t[2]*u+i[2]*h+a[2]*c,r}function nM(r,e){e=e===void 0?1:e;var t=Ln()*2*Math.PI,i=Ln()*2-1,a=Math.sqrt(1-i*i)*e;return r[0]=Math.cos(t)*a,r[1]=Math.sin(t)*a,r[2]=i*e,r}function oM(r,e,t){var i=e[0],a=e[1],n=e[2],o=t[3]*i+t[7]*a+t[11]*n+t[15];return o=o||1,r[0]=(t[0]*i+t[4]*a+t[8]*n+t[12])/o,r[1]=(t[1]*i+t[5]*a+t[9]*n+t[13])/o,r[2]=(t[2]*i+t[6]*a+t[10]*n+t[14])/o,r}function Wf(r,e,t){var i=e[0],a=e[1],n=e[2];return r[0]=i*t[0]+a*t[3]+n*t[6],r[1]=i*t[1]+a*t[4]+n*t[7],r[2]=i*t[2]+a*t[5]+n*t[8],r}function sM(r,e,t){var i=t[0],a=t[1],n=t[2],o=t[3],s=e[0],l=e[1],f=e[2],u=a*f-n*l,h=n*s-i*f,c=i*l-a*s;return u=u+u,h=h+h,c=c+c,r[0]=s+o*u+a*c-n*h,r[1]=l+o*h+n*u-i*c,r[2]=f+o*c+i*h-a*u,r}function lM(r,e,t,i){var a=[],n=[];return a[0]=e[0]-t[0],a[1]=e[1]-t[1],a[2]=e[2]-t[2],n[0]=a[0],n[1]=a[1]*Math.cos(i)-a[2]*Math.sin(i),n[2]=a[1]*Math.sin(i)+a[2]*Math.cos(i),r[0]=n[0]+t[0],r[1]=n[1]+t[1],r[2]=n[2]+t[2],r}function fM(r,e,t,i){var a=[],n=[];return a[0]=e[0]-t[0],a[1]=e[1]-t[1],a[2]=e[2]-t[2],n[0]=a[2]*Math.sin(i)+a[0]*Math.cos(i),n[1]=a[1],n[2]=a[2]*Math.cos(i)-a[0]*Math.sin(i),r[0]=n[0]+t[0],r[1]=n[1]+t[1],r[2]=n[2]+t[2],r}function uM(r,e,t,i){var a=[],n=[];return a[0]=e[0]-t[0],a[1]=e[1]-t[1],a[2]=e[2]-t[2],n[0]=a[0]*Math.cos(i)-a[1]*Math.sin(i),n[1]=a[0]*Math.sin(i)+a[1]*Math.cos(i),n[2]=a[2],r[0]=n[0]+t[0],r[1]=n[1]+t[1],r[2]=n[2]+t[2],r}function hM(r,e){var t=r[0],i=r[1],a=r[2],n=e[0],o=e[1],s=e[2],l=Math.sqrt((t*t+i*i+a*a)*(n*n+o*o+s*s)),f=l&&Xf(r,e)/l;return Math.acos(Math.min(Math.max(f,-1),1))}function cM(r){return r[0]=0,r[1]=0,r[2]=0,r}function pM(r){return"vec3("+r[0]+", "+r[1]+", "+r[2]+")"}function vM(r,e){return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]}function mM(r,e){var t=r[0],i=r[1],a=r[2],n=e[0],o=e[1],s=e[2];return Math.abs(t-n)<=Qt*Math.max(1,Math.abs(t),Math.abs(n))&&Math.abs(i-o)<=Qt*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(a-s)<=Qt*Math.max(1,Math.abs(a),Math.abs(s))}var dM=rp,gM=ip,yM=ap,xM=np,CM=op,wM=ep,MM=sp,SM=function(){var r=tp();return function(e,t,i,a,n,o){var s,l;for(t||(t=3),i||(i=0),a?l=Math.min(a*t+i,e.length):l=e.length,s=i;s<l;s+=t)r[0]=e[s],r[1]=e[s+1],r[2]=e[s+2],n(r,r,o),e[s]=r[0],e[s+1]=r[1],e[s+2]=r[2];return e}}();var Y={};Bt(Y,{add:()=>LM,angle:()=>qM,ceil:()=>IM,clone:()=>AM,copy:()=>TM,create:()=>lp,cross:()=>NM,dist:()=>eS,distance:()=>cp,div:()=>tS,divide:()=>hp,dot:()=>Uf,equals:()=>QM,exactEquals:()=>jf,floor:()=>PM,forEach:()=>aS,fromValues:()=>bM,inverse:()=>DM,len:()=>$M,length:()=>vp,lerp:()=>GM,max:()=>kM,min:()=>BM,mul:()=>JM,multiply:()=>up,negate:()=>RM,normalize:()=>qf,random:()=>YM,rotate:()=>WM,round:()=>OM,scale:()=>FM,scaleAndAdd:()=>_M,set:()=>EM,signedAngle:()=>UM,sqrDist:()=>rS,sqrLen:()=>iS,squaredDistance:()=>pp,squaredLength:()=>mp,str:()=>ZM,sub:()=>KM,subtract:()=>fp,transformMat2:()=>HM,transformMat2d:()=>VM,transformMat3:()=>zM,transformMat4:()=>XM,zero:()=>jM});function lp(){var r=new oe(2);return oe!=Float32Array&&(r[0]=0,r[1]=0),r}function AM(r){var e=new oe(2);return e[0]=r[0],e[1]=r[1],e}function bM(r,e){var t=new oe(2);return t[0]=r,t[1]=e,t}function TM(r,e){return r[0]=e[0],r[1]=e[1],r}function EM(r,e,t){return r[0]=e,r[1]=t,r}function LM(r,e,t){return r[0]=e[0]+t[0],r[1]=e[1]+t[1],r}function fp(r,e,t){return r[0]=e[0]-t[0],r[1]=e[1]-t[1],r}function up(r,e,t){return r[0]=e[0]*t[0],r[1]=e[1]*t[1],r}function hp(r,e,t){return r[0]=e[0]/t[0],r[1]=e[1]/t[1],r}function IM(r,e){return r[0]=Math.ceil(e[0]),r[1]=Math.ceil(e[1]),r}function PM(r,e){return r[0]=Math.floor(e[0]),r[1]=Math.floor(e[1]),r}function BM(r,e,t){return r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r}function kM(r,e,t){return r[0]=Math.max(e[0],t[0]),r[1]=Math.max(e[1],t[1]),r}function OM(r,e){return r[0]=Fi(e[0]),r[1]=Fi(e[1]),r}function FM(r,e,t){return r[0]=e[0]*t,r[1]=e[1]*t,r}function _M(r,e,t,i){return r[0]=e[0]+t[0]*i,r[1]=e[1]+t[1]*i,r}function cp(r,e){var t=e[0]-r[0],i=e[1]-r[1];return Math.sqrt(t*t+i*i)}function pp(r,e){var t=e[0]-r[0],i=e[1]-r[1];return t*t+i*i}function vp(r){var e=r[0],t=r[1];return Math.sqrt(e*e+t*t)}function mp(r){var e=r[0],t=r[1];return e*e+t*t}function RM(r,e){return r[0]=-e[0],r[1]=-e[1],r}function DM(r,e){return r[0]=1/e[0],r[1]=1/e[1],r}function qf(r,e){var t=e[0],i=e[1],a=t*t+i*i;return a>0&&(a=1/Math.sqrt(a)),r[0]=e[0]*a,r[1]=e[1]*a,r}function Uf(r,e){return r[0]*e[0]+r[1]*e[1]}function NM(r,e,t){var i=e[0]*t[1]-e[1]*t[0];return r[0]=r[1]=0,r[2]=i,r}function GM(r,e,t,i){var a=e[0],n=e[1];return r[0]=a+i*(t[0]-a),r[1]=n+i*(t[1]-n),r}function YM(r,e){e=e===void 0?1:e;var t=Ln()*2*Math.PI;return r[0]=Math.cos(t)*e,r[1]=Math.sin(t)*e,r}function HM(r,e,t){var i=e[0],a=e[1];return r[0]=t[0]*i+t[2]*a,r[1]=t[1]*i+t[3]*a,r}function VM(r,e,t){var i=e[0],a=e[1];return r[0]=t[0]*i+t[2]*a+t[4],r[1]=t[1]*i+t[3]*a+t[5],r}function zM(r,e,t){var i=e[0],a=e[1];return r[0]=t[0]*i+t[3]*a+t[6],r[1]=t[1]*i+t[4]*a+t[7],r}function XM(r,e,t){var i=e[0],a=e[1];return r[0]=t[0]*i+t[4]*a+t[12],r[1]=t[1]*i+t[5]*a+t[13],r}function WM(r,e,t,i){var a=e[0]-t[0],n=e[1]-t[1],o=Math.sin(i),s=Math.cos(i);return r[0]=a*s-n*o+t[0],r[1]=a*o+n*s+t[1],r}function qM(r,e){var t=r[0],i=r[1],a=e[0],n=e[1];return Math.abs(Math.atan2(i*a-t*n,t*a+i*n))}function UM(r,e){var t=r[0],i=r[1],a=e[0],n=e[1];return Math.atan2(t*n-i*a,t*a+i*n)}function jM(r){return r[0]=0,r[1]=0,r}function ZM(r){return"vec2("+r[0]+", "+r[1]+")"}function jf(r,e){return r[0]===e[0]&&r[1]===e[1]}function QM(r,e){var t=r[0],i=r[1],a=e[0],n=e[1];return Math.abs(t-a)<=Qt*Math.max(1,Math.abs(t),Math.abs(a))&&Math.abs(i-n)<=Qt*Math.max(1,Math.abs(i),Math.abs(n))}var $M=vp,KM=fp,JM=up,tS=hp,eS=cp,rS=pp,iS=mp,aS=function(){var r=lp();return function(e,t,i,a,n,o){var s,l;for(t||(t=2),i||(i=0),a?l=Math.min(a*t+i,e.length):l=e.length,s=i;s<l;s+=t)r[0]=e[s],r[1]=e[s+1],n(r,r,o),e[s]=r[0],e[s+1]=r[1];return e}}();var $={};Bt($,{angleTo:()=>sS,direction:()=>xp,leftRotate:()=>gp,leftScale:()=>yp,leftTranslate:()=>dp,transform:()=>oS,vertical:()=>lS});function dp(r,e,t){var i=[0,0,0,0,0,0,0,0,0];return ce.fromTranslation(i,t),ce.multiply(r,i,e)}function gp(r,e,t){var i=[0,0,0,0,0,0,0,0,0];return ce.fromRotation(i,t),ce.multiply(r,i,e)}function yp(r,e,t){var i=[0,0,0,0,0,0,0,0,0];return ce.fromScaling(i,t),ce.multiply(r,i,e)}function nS(r,e,t){return ce.multiply(r,t,e)}function oS(r,e){for(var t=r?[].concat(r):[1,0,0,0,1,0,0,0,1],i=0,a=e.length;i<a;i++){var n=e[i];switch(n[0]){case"t":dp(t,t,[n[1],n[2]]);break;case"s":yp(t,t,[n[1],n[2]]);break;case"r":gp(t,t,n[1]);break;case"m":nS(t,t,n[1]);break;default:break}}return t}function xp(r,e){return r[0]*e[1]-e[0]*r[1]}function sS(r,e,t){var i=Y.angle(r,e),a=xp(r,e)>=0;return t?a?Math.PI*2-i:i:a?i:Math.PI*2-i}function lS(r,e,t){return t?(r[0]=e[1],r[1]=-1*e[0]):(r[0]=-1*e[1],r[1]=e[0]),r}function Zf(r,e){var t=[],i=r[0],a=r[1],n=r[2],o=r[3],s=r[4],l=r[5],f=r[6],u=r[7],h=r[8],c=e[0],p=e[1],v=e[2],m=e[3],g=e[4],y=e[5],w=e[6],x=e[7],C=e[8];return t[0]=c*i+p*o+v*f,t[1]=c*a+p*s+v*u,t[2]=c*n+p*l+v*h,t[3]=m*i+g*o+y*f,t[4]=m*a+g*s+y*u,t[5]=m*n+g*l+y*h,t[6]=w*i+x*o+C*f,t[7]=w*a+x*s+C*u,t[8]=w*n+x*l+C*h,t}function Ce(r,e){var t=[],i=e[0],a=e[1];return t[0]=r[0]*i+r[3]*a+r[6],t[1]=r[1]*i+r[4]*a+r[7],t}function _i(r){var e=[],t=r[0],i=r[1],a=r[2],n=r[3],o=r[4],s=r[5],l=r[6],f=r[7],u=r[8],h=u*o-s*f,c=-u*n+s*l,p=f*n-o*l,v=t*h+i*c+a*p;return v?(v=1/v,e[0]=h*v,e[1]=(-u*i+a*f)*v,e[2]=(s*i-a*o)*v,e[3]=c*v,e[4]=(u*t-a*l)*v,e[5]=(-s*t+a*n)*v,e[6]=p*v,e[7]=(-f*t+i*l)*v,e[8]=(o*t-i*n)*v,e):null}var In=$.transform,Qf="matrix",fS=["zIndex","capture","visible","type"],uS=["repeat"],hS=":",cS="*";function pS(r){for(var e=[],t=0;t<r.length;t++)B(r[t])?e.push([].concat(r[t])):e.push(r[t]);return e}function vS(r,e){var t={},i=e.attrs;for(var a in r)t[a]=i[a];return t}function mS(r,e){var t={},i=e.attr();return M(r,function(a,n){uS.indexOf(n)===-1&&!ot(i[n],a)&&(t[n]=a)}),t}function dS(r,e){if(e.onFrame)return r;var t=e.startTime,i=e.delay,a=e.duration,n=Object.prototype.hasOwnProperty;return M(r,function(o){t+i<o.startTime+o.delay+o.duration&&a>o.delay&&M(e.toAttrs,function(s,l){n.call(o.toAttrs,l)&&(delete o.toAttrs[l],delete o.fromAttrs[l])})}),r}var gS=function(r){S(e,r);function e(t){var i=r.call(this,t)||this;i.attrs={};var a=i.getDefaultAttrs();return J(a,t.attrs),i.attrs=a,i.initAttrs(a),i.initAnimate(),i}return e.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},e.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},e.prototype.onCanvasChange=function(t){},e.prototype.initAttrs=function(t){},e.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},e.prototype.isGroup=function(){return!1},e.prototype.getParent=function(){return this.get("parent")},e.prototype.getCanvas=function(){return this.get("canvas")},e.prototype.attr=function(){for(var t,i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var n=i[0],o=i[1];if(!n)return this.attrs;if(K(n)){for(var s in n)this.setAttr(s,n[s]);return this.afterAttrsChange(n),this}return i.length===2?(this.setAttr(n,o),this.afterAttrsChange((t={},t[n]=o,t)),this):this.attrs[n]},e.prototype.isClipped=function(t,i){var a=this.getClip();return a&&!a.isHit(t,i)},e.prototype.setAttr=function(t,i){var a=this.attrs[t];a!==i&&(this.attrs[t]=i,this.onAttrChange(t,i,a))},e.prototype.onAttrChange=function(t,i,a){t==="matrix"&&this.set("totalMatrix",null)},e.prototype.afterAttrsChange=function(t){if(this.cfg.isClipShape){var i=this.cfg.applyTo;i&&i.onCanvasChange("clip")}else this.onCanvasChange("attr")},e.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},e.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},e.prototype.setZIndex=function(t){this.set("zIndex",t);var i=this.getParent();return i&&i.sort(),this},e.prototype.toFront=function(){var t=this.getParent();if(t){var i=t.getChildren(),a=this.get("el"),n=i.indexOf(this);i.splice(n,1),i.push(this),this.onCanvasChange("zIndex")}},e.prototype.toBack=function(){var t=this.getParent();if(t){var i=t.getChildren(),a=this.get("el"),n=i.indexOf(this);i.splice(n,1),i.unshift(this),this.onCanvasChange("zIndex")}},e.prototype.remove=function(t){t===void 0&&(t=!0);var i=this.getParent();i?(ts(i.getChildren(),this),i.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),t&&this.destroy()},e.prototype.resetMatrix=function(){this.attr(Qf,this.getDefaultMatrix()),this.onCanvasChange("matrix")},e.prototype.getMatrix=function(){return this.attr(Qf)},e.prototype.setMatrix=function(t){this.attr(Qf,t),this.onCanvasChange("matrix")},e.prototype.getTotalMatrix=function(){var t=this.cfg.totalMatrix;if(!t){var i=this.attr("matrix"),a=this.cfg.parentMatrix;a&&i?t=Zf(a,i):t=i||a,this.set("totalMatrix",t)}return t},e.prototype.applyMatrix=function(t){var i=this.attr("matrix"),a=null;t&&i?a=Zf(t,i):a=i||t,this.set("totalMatrix",a),this.set("parentMatrix",t)},e.prototype.getDefaultMatrix=function(){return null},e.prototype.applyToMatrix=function(t){var i=this.attr("matrix");return i?Ce(i,t):t},e.prototype.invertFromMatrix=function(t){var i=this.attr("matrix");if(i){var a=_i(i);if(a)return Ce(a,t)}return t},e.prototype.setClip=function(t){var i=this.getCanvas(),a=null;if(t){var n=this.getShapeBase(),o=ue(t.type),s=n[o];s&&(a=new s({type:t.type,isClipShape:!0,applyTo:this,attrs:t.attrs,canvas:i}))}return this.set("clipShape",a),this.onCanvasChange("clip"),a},e.prototype.getClip=function(){var t=this.cfg.clipShape;return t||null},e.prototype.clone=function(){var t=this,i=this.attrs,a={};M(i,function(s,l){B(i[l])?a[l]=pS(i[l]):a[l]=i[l]});var n=this.constructor,o=new n({attrs:a});return M(fS,function(s){o.set(s,t.get(s))}),o},e.prototype.destroy=function(){var t=this.destroyed;t||(this.attrs={},r.prototype.destroy.call(this))},e.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},e.prototype.animate=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];if(!(!this.get("timeline")&&!this.get("canvas"))){this.set("animating",!0);var a=this.get("timeline");a||(a=this.get("canvas").get("timeline"),this.set("timeline",a));var n=this.get("animations")||[];a.timer||a.initTimer();var o=t[0],s=t[1],l=t[2],f=l===void 0?"easeLinear":l,u=t[3],h=u===void 0?he:u,c=t[4],p=c===void 0?0:c,v,m,g,y,w;D(o)?(v=o,o={}):K(o)&&o.onFrame&&(v=o.onFrame,m=o.repeat),K(s)?(w=s,s=w.duration,f=w.easing||"easeLinear",p=w.delay||0,m=w.repeat||m||!1,h=w.callback||he,g=w.pauseCallback||he,y=w.resumeCallback||he):(z(h)&&(p=h,h=null),D(f)?(h=f,f="easeLinear"):f=f||"easeLinear");var x=mS(o,this),C={fromAttrs:vS(x,this),toAttrs:x,duration:s,easing:f,repeat:m,callback:h,pauseCallback:g,resumeCallback:y,delay:p,startTime:a.getTime(),id:Zt(),onFrame:v,pathFormatted:!1};n.length>0?n=dS(n,C):a.addAnimator(this),n.push(C),this.set("animations",n),this.set("_pause",{isPaused:!1})}},e.prototype.stopAnimate=function(t){var i=this;t===void 0&&(t=!0);var a=this.get("animations");M(a,function(n){t&&(n.onFrame?i.attr(n.onFrame(1)):i.attr(n.toAttrs)),n.callback&&n.callback()}),this.set("animating",!1),this.set("animations",[])},e.prototype.pauseAnimate=function(){var t=this.get("timeline"),i=this.get("animations"),a=t.getTime();return M(i,function(n){n._paused=!0,n._pauseTime=a,n.pauseCallback&&n.pauseCallback()}),this.set("_pause",{isPaused:!0,pauseTime:a}),this},e.prototype.resumeAnimate=function(){var t=this.get("timeline"),i=t.getTime(),a=this.get("animations"),n=this.get("_pause").pauseTime;return M(a,function(o){o.startTime=o.startTime+(i-n),o._paused=!1,o._pauseTime=null,o.resumeCallback&&o.resumeCallback()}),this.set("_pause",{isPaused:!1}),this.set("animations",a),this},e.prototype.emitDelegation=function(t,i){var a=this,n=i.propagationPath,o=this.getEvents(),s;t==="mouseenter"?s=i.fromShape:t==="mouseleave"&&(s=i.toShape);for(var l=function(c){var p=n[c],v=p.get("name");if(v){if((p.isGroup()||p.isCanvas&&p.isCanvas())&&s&&es(p,s))return"break";B(v)?M(v,function(m){a.emitDelegateEvent(p,m,i)}):f.emitDelegateEvent(p,v,i)}},f=this,u=0;u<n.length;u++){var h=l(u);if(h==="break")break}},e.prototype.emitDelegateEvent=function(t,i,a){var n=this.getEvents(),o=i+hS+a.type;(n[o]||n[cS])&&(a.name=o,a.currentTarget=t,a.delegateTarget=this,a.delegateObject=t.get("delegateObject"),this.emit(o,a))},e.prototype.translate=function(t,i){t===void 0&&(t=0),i===void 0&&(i=0);var a=this.getMatrix(),n=In(a,[["t",t,i]]);return this.setMatrix(n),this},e.prototype.move=function(t,i){var a=this.attr("x")||0,n=this.attr("y")||0;return this.translate(t-a,i-n),this},e.prototype.moveTo=function(t,i){return this.move(t,i)},e.prototype.scale=function(t,i){var a=this.getMatrix(),n=In(a,[["s",t,i||t]]);return this.setMatrix(n),this},e.prototype.rotate=function(t){var i=this.getMatrix(),a=In(i,[["r",t]]);return this.setMatrix(a),this},e.prototype.rotateAtStart=function(t){var i=this.attr(),a=i.x,n=i.y,o=this.getMatrix(),s=In(o,[["t",-a,-n],["r",t],["t",a,n]]);return this.setMatrix(s),this},e.prototype.rotateAtPoint=function(t,i,a){var n=this.getMatrix(),o=In(n,[["t",-t,-i],["r",a],["t",t,i]]);return this.setMatrix(o),this},e}(Oi),is=gS;var Cp={},$f="_INDEX";function wp(r,e){if(r.set("canvas",e),r.isGroup()){var t=r.get("children");t.length&&t.forEach(function(i){wp(i,e)})}}function Mp(r,e){if(r.set("timeline",e),r.isGroup()){var t=r.get("children");t.length&&t.forEach(function(i){Mp(i,e)})}}function yS(r,e,t){t===void 0&&(t=!0),t?e.destroy():(e.set("parent",null),e.set("canvas",null)),ts(r.getChildren(),e)}function xS(r){return function(e,t){var i=r(e,t);return i===0?e[$f]-t[$f]:i}}var CS=function(r){S(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.isCanvas=function(){return!1},e.prototype.getBBox=function(){var t=1/0,i=-1/0,a=1/0,n=-1/0,o=this.getChildren().filter(function(l){return l.get("visible")&&(!l.isGroup()||l.isGroup()&&l.getChildren().length>0)});o.length>0?M(o,function(l){var f=l.getBBox(),u=f.minX,h=f.maxX,c=f.minY,p=f.maxY;u<t&&(t=u),h>i&&(i=h),c<a&&(a=c),p>n&&(n=p)}):(t=0,i=0,a=0,n=0);var s={x:t,y:a,minX:t,minY:a,maxX:i,maxY:n,width:i-t,height:n-a};return s},e.prototype.getCanvasBBox=function(){var t=1/0,i=-1/0,a=1/0,n=-1/0,o=this.getChildren().filter(function(l){return l.get("visible")&&(!l.isGroup()||l.isGroup()&&l.getChildren().length>0)});o.length>0?M(o,function(l){var f=l.getCanvasBBox(),u=f.minX,h=f.maxX,c=f.minY,p=f.maxY;u<t&&(t=u),h>i&&(i=h),c<a&&(a=c),p>n&&(n=p)}):(t=0,i=0,a=0,n=0);var s={x:t,y:a,minX:t,minY:a,maxX:i,maxY:n,width:i-t,height:n-a};return s},e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return t.children=[],t},e.prototype.onAttrChange=function(t,i,a){if(r.prototype.onAttrChange.call(this,t,i,a),t==="matrix"){var n=this.getTotalMatrix();this._applyChildrenMarix(n)}},e.prototype.applyMatrix=function(t){var i=this.getTotalMatrix();r.prototype.applyMatrix.call(this,t);var a=this.getTotalMatrix();a!==i&&this._applyChildrenMarix(a)},e.prototype._applyChildrenMarix=function(t){var i=this.getChildren();M(i,function(a){a.applyMatrix(t)})},e.prototype.addShape=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var a=t[0],n=t[1];K(a)?n=a:n.type=a;var o=Cp[n.type];o||(o=ue(n.type),Cp[n.type]=o);var s=this.getShapeBase(),l=new s[o](n);return this.add(l),l},e.prototype.addGroup=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var a=t[0],n=t[1],o;if(D(a))n?o=new a(n):o=new a({parent:this});else{var s=a||{},l=this.getGroupBase();o=new l(s)}return this.add(o),o},e.prototype.getCanvas=function(){var t;return this.isCanvas()?t=this:t=this.get("canvas"),t},e.prototype.getShape=function(t,i,a){if(!Qr(this))return null;var n=this.getChildren(),o;if(this.isCanvas())o=this._findShape(n,t,i,a);else{var s=[t,i,1];s=this.invertFromMatrix(s),this.isClipped(s[0],s[1])||(o=this._findShape(n,s[0],s[1],a))}return o},e.prototype._findShape=function(t,i,a,n){for(var o=null,s=t.length-1;s>=0;s--){var l=t[s];if(Qr(l)&&(l.isGroup()?o=l.getShape(i,a,n):l.isHit(i,a)&&(o=l)),o)break}return o},e.prototype.add=function(t){var i=this.getCanvas(),a=this.getChildren(),n=this.get("timeline"),o=t.getParent();o&&yS(o,t,!1),t.set("parent",this),i&&wp(t,i),n&&Mp(t,n),a.push(t),t.onCanvasChange("add"),this._applyElementMatrix(t)},e.prototype._applyElementMatrix=function(t){var i=this.getTotalMatrix();i&&t.applyMatrix(i)},e.prototype.getChildren=function(){return this.get("children")||[]},e.prototype.sort=function(){var t=this.getChildren();M(t,function(i,a){return i[$f]=a,i}),t.sort(xS(function(i,a){return i.get("zIndex")-a.get("zIndex")})),this.onCanvasChange("sort")},e.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var t=this.getChildren(),i=t.length-1;i>=0;i--)t[i].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},e.prototype.destroy=function(){this.get("destroyed")||(this.clear(),r.prototype.destroy.call(this))},e.prototype.getFirst=function(){return this.getChildByIndex(0)},e.prototype.getLast=function(){var t=this.getChildren();return this.getChildByIndex(t.length-1)},e.prototype.getChildByIndex=function(t){var i=this.getChildren();return i[t]},e.prototype.getCount=function(){var t=this.getChildren();return t.length},e.prototype.contain=function(t){var i=this.getChildren();return i.indexOf(t)>-1},e.prototype.removeChild=function(t,i){i===void 0&&(i=!0),this.contain(t)&&t.remove(i)},e.prototype.findAll=function(t){var i=[],a=this.getChildren();return M(a,function(n){t(n)&&i.push(n),n.isGroup()&&(i=i.concat(n.findAll(t)))}),i},e.prototype.find=function(t){var i=null,a=this.getChildren();return M(a,function(n){if(t(n)?i=n:n.isGroup()&&(i=n.find(t)),i)return!1}),i},e.prototype.findById=function(t){return this.find(function(i){return i.get("id")===t})},e.prototype.findByClassName=function(t){return this.find(function(i){return i.get("className")===t})},e.prototype.findAllByName=function(t){return this.findAll(function(i){return i.get("name")===t})},e}(is),as=CS;var ca=0,Bn=0,Pn=0,Ap=1e3,ns,kn,os=0,Ri=0,ss=0,On=typeof performance=="object"&&performance.now?performance:Date,bp=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(r){setTimeout(r,17)};function tu(){return Ri||(bp(wS),Ri=On.now()+ss)}function wS(){Ri=0}function Kf(){this._call=this._time=this._next=null}Kf.prototype=ls.prototype={constructor:Kf,restart:function(r,e,t){if(typeof r!="function")throw new TypeError("callback is not a function");t=(t==null?tu():+t)+(e==null?0:+e),!this._next&&kn!==this&&(kn?kn._next=this:ns=this,kn=this),this._call=r,this._time=t,Jf()},stop:function(){this._call&&(this._call=null,this._time=1/0,Jf())}};function ls(r,e,t){var i=new Kf;return i.restart(r,e,t),i}function Tp(){tu(),++ca;for(var r=ns,e;r;)(e=Ri-r._time)>=0&&r._call.call(null,e),r=r._next;--ca}function Sp(){Ri=(os=On.now())+ss,ca=Bn=0;try{Tp()}finally{ca=0,SS(),Ri=0}}function MS(){var r=On.now(),e=r-os;e>Ap&&(ss-=e,os=r)}function SS(){for(var r,e=ns,t,i=1/0;e;)e._call?(i>e._time&&(i=e._time),r=e,e=e._next):(t=e._next,e._next=null,e=r?r._next=t:ns=t);kn=r,Jf(i)}function Jf(r){if(!ca){Bn&&(Bn=clearTimeout(Bn));var e=r-Ri;e>24?(r<1/0&&(Bn=setTimeout(Sp,r-On.now()-ss)),Pn&&(Pn=clearInterval(Pn))):(Pn||(os=On.now(),Pn=setInterval(MS,Ap)),ca=1,bp(Sp))}}function fs(r,e,t){r.prototype=e.prototype=t,t.constructor=r}function eu(r,e){var t=Object.create(r.prototype);for(var i in e)t[i]=e[i];return t}function Rn(){}var Fn=.7,cs=1/Fn,pa="\\s*([+-]?\\d+)\\s*",_n="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",er="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",bS=/^#([0-9a-f]{3,8})$/,TS=new RegExp(`^rgb\\(${pa},${pa},${pa}\\)$`),ES=new RegExp(`^rgb\\(${er},${er},${er}\\)$`),LS=new RegExp(`^rgba\\(${pa},${pa},${pa},${_n}\\)$`),IS=new RegExp(`^rgba\\(${er},${er},${er},${_n}\\)$`),PS=new RegExp(`^hsl\\(${_n},${er},${er}\\)$`),BS=new RegExp(`^hsla\\(${_n},${er},${er},${_n}\\)$`),Ep={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};fs(Rn,$r,{copy(r){return Object.assign(new this.constructor,this,r)},displayable(){return this.rgb().displayable()},hex:Lp,formatHex:Lp,formatHex8:kS,formatHsl:OS,formatRgb:Ip,toString:Ip});function Lp(){return this.rgb().formatHex()}function kS(){return this.rgb().formatHex8()}function OS(){return _p(this).formatHsl()}function Ip(){return this.rgb().formatRgb()}function $r(r){var e,t;return r=(r+"").trim().toLowerCase(),(e=bS.exec(r))?(t=e[1].length,e=parseInt(e[1],16),t===6?Pp(e):t===3?new pe(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?us(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?us(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=TS.exec(r))?new pe(e[1],e[2],e[3],1):(e=ES.exec(r))?new pe(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=LS.exec(r))?us(e[1],e[2],e[3],e[4]):(e=IS.exec(r))?us(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=PS.exec(r))?Op(e[1],e[2]/100,e[3]/100,1):(e=BS.exec(r))?Op(e[1],e[2]/100,e[3]/100,e[4]):Ep.hasOwnProperty(r)?Pp(Ep[r]):r==="transparent"?new pe(NaN,NaN,NaN,0):null}function Pp(r){return new pe(r>>16&255,r>>8&255,r&255,1)}function us(r,e,t,i){return i<=0&&(r=e=t=NaN),new pe(r,e,t,i)}function FS(r){return r instanceof Rn||(r=$r(r)),r?(r=r.rgb(),new pe(r.r,r.g,r.b,r.opacity)):new pe}function va(r,e,t,i){return arguments.length===1?FS(r):new pe(r,e,t,i??1)}function pe(r,e,t,i){this.r=+r,this.g=+e,this.b=+t,this.opacity=+i}fs(pe,va,eu(Rn,{brighter(r){return r=r==null?cs:Math.pow(cs,r),new pe(this.r*r,this.g*r,this.b*r,this.opacity)},darker(r){return r=r==null?Fn:Math.pow(Fn,r),new pe(this.r*r,this.g*r,this.b*r,this.opacity)},rgb(){return this},clamp(){return new pe(Ni(this.r),Ni(this.g),Ni(this.b),ps(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Bp,formatHex:Bp,formatHex8:_S,formatRgb:kp,toString:kp}));function Bp(){return`#${Di(this.r)}${Di(this.g)}${Di(this.b)}`}function _S(){return`#${Di(this.r)}${Di(this.g)}${Di(this.b)}${Di((isNaN(this.opacity)?1:this.opacity)*255)}`}function kp(){let r=ps(this.opacity);return`${r===1?"rgb(":"rgba("}${Ni(this.r)}, ${Ni(this.g)}, ${Ni(this.b)}${r===1?")":`, ${r})`}`}function ps(r){return isNaN(r)?1:Math.max(0,Math.min(1,r))}function Ni(r){return Math.max(0,Math.min(255,Math.round(r)||0))}function Di(r){return r=Ni(r),(r<16?"0":"")+r.toString(16)}function Op(r,e,t,i){return i<=0?r=e=t=NaN:t<=0||t>=1?r=e=NaN:e<=0&&(r=NaN),new Ye(r,e,t,i)}function _p(r){if(r instanceof Ye)return new Ye(r.h,r.s,r.l,r.opacity);if(r instanceof Rn||(r=$r(r)),!r)return new Ye;if(r instanceof Ye)return r;r=r.rgb();var e=r.r/255,t=r.g/255,i=r.b/255,a=Math.min(e,t,i),n=Math.max(e,t,i),o=NaN,s=n-a,l=(n+a)/2;return s?(e===n?o=(t-i)/s+(t<i)*6:t===n?o=(i-e)/s+2:o=(e-t)/s+4,s/=l<.5?n+a:2-n-a,o*=60):s=l>0&&l<1?0:o,new Ye(o,s,l,r.opacity)}function Rp(r,e,t,i){return arguments.length===1?_p(r):new Ye(r,e,t,i??1)}function Ye(r,e,t,i){this.h=+r,this.s=+e,this.l=+t,this.opacity=+i}fs(Ye,Rp,eu(Rn,{brighter(r){return r=r==null?cs:Math.pow(cs,r),new Ye(this.h,this.s,this.l*r,this.opacity)},darker(r){return r=r==null?Fn:Math.pow(Fn,r),new Ye(this.h,this.s,this.l*r,this.opacity)},rgb(){var r=this.h%360+(this.h<0)*360,e=isNaN(r)||isNaN(this.s)?0:this.s,t=this.l,i=t+(t<.5?t:1-t)*e,a=2*t-i;return new pe(ru(r>=240?r-240:r+120,a,i),ru(r,a,i),ru(r<120?r+240:r-120,a,i),this.opacity)},clamp(){return new Ye(Fp(this.h),hs(this.s),hs(this.l),ps(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let r=ps(this.opacity);return`${r===1?"hsl(":"hsla("}${Fp(this.h)}, ${hs(this.s)*100}%, ${hs(this.l)*100}%${r===1?")":`, ${r})`}`}}));function Fp(r){return r=(r||0)%360,r<0?r+360:r}function hs(r){return Math.max(0,Math.min(1,r||0))}function ru(r,e,t){return(r<60?e+(t-e)*r/60:r<180?t:r<240?e+(t-e)*(240-r)/60:e)*255}function iu(r,e,t,i,a){var n=r*r,o=n*r;return((1-3*r+3*n-o)*e+(4-6*n+3*o)*t+(1+3*r+3*n-3*o)*i+o*a)/6}function Dp(r){var e=r.length-1;return function(t){var i=t<=0?t=0:t>=1?(t=1,e-1):Math.floor(t*e),a=r[i],n=r[i+1],o=i>0?r[i-1]:2*a-n,s=i<e-1?r[i+2]:2*n-a;return iu((t-i/e)*e,o,a,n,s)}}function Np(r){var e=r.length;return function(t){var i=Math.floor(((t%=1)<0?++t:t)*e),a=r[(i+e-1)%e],n=r[i%e],o=r[(i+1)%e],s=r[(i+2)%e];return iu((t-i/e)*e,a,n,o,s)}}var Dn=r=>()=>r;function RS(r,e){return function(t){return r+t*e}}function DS(r,e,t){return r=Math.pow(r,t),e=Math.pow(e,t)-r,t=1/t,function(i){return Math.pow(r+i*e,t)}}function Gp(r){return(r=+r)==1?vs:function(e,t){return t-e?DS(e,t,r):Dn(isNaN(e)?t:e)}}function vs(r,e){var t=e-r;return t?RS(r,t):Dn(isNaN(r)?e:r)}var au=function r(e){var t=Gp(e);function i(a,n){var o=t((a=va(a)).r,(n=va(n)).r),s=t(a.g,n.g),l=t(a.b,n.b),f=vs(a.opacity,n.opacity);return function(u){return a.r=o(u),a.g=s(u),a.b=l(u),a.opacity=f(u),a+""}}return i.gamma=r,i}(1);function Yp(r){return function(e){var t=e.length,i=new Array(t),a=new Array(t),n=new Array(t),o,s;for(o=0;o<t;++o)s=va(e[o]),i[o]=s.r||0,a[o]=s.g||0,n[o]=s.b||0;return i=r(i),a=r(a),n=r(n),s.opacity=1,function(l){return s.r=i(l),s.g=a(l),s.b=n(l),s+""}}}var jN=Yp(Dp),ZN=Yp(Np);function ms(r,e){e||(e=[]);var t=r?Math.min(e.length,r.length):0,i=e.slice(),a;return function(n){for(a=0;a<t;++a)i[a]=r[a]*(1-n)+e[a]*n;return i}}function ds(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}function nu(r,e){return(ds(e)?ms:ou)(r,e)}function ou(r,e){var t=e?e.length:0,i=r?Math.min(t,r.length):0,a=new Array(i),n=new Array(t),o;for(o=0;o<i;++o)a[o]=Kr(r[o],e[o]);for(;o<t;++o)n[o]=e[o];return function(s){for(o=0;o<i;++o)n[o]=a[o](s);return n}}function Hp(r,e){var t=new Date;return r=+r,e=+e,function(i){return t.setTime(r*(1-i)+e*i),t}}function Nn(r,e){return r=+r,e=+e,function(t){return r*(1-t)+e*t}}function Vp(r,e){var t={},i={},a;(r===null||typeof r!="object")&&(r={}),(e===null||typeof e!="object")&&(e={});for(a in e)a in r?t[a]=Kr(r[a],e[a]):i[a]=e[a];return function(n){for(a in t)i[a]=t[a](n);return i}}var lu=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,su=new RegExp(lu.source,"g");function NS(r){return function(){return r}}function GS(r){return function(e){return r(e)+""}}function zp(r,e){var t=lu.lastIndex=su.lastIndex=0,i,a,n,o=-1,s=[],l=[];for(r=r+"",e=e+"";(i=lu.exec(r))&&(a=su.exec(e));)(n=a.index)>t&&(n=e.slice(t,n),s[o]?s[o]+=n:s[++o]=n),(i=i[0])===(a=a[0])?s[o]?s[o]+=a:s[++o]=a:(s[++o]=null,l.push({i:o,x:Nn(i,a)})),t=su.lastIndex;return t<e.length&&(n=e.slice(t),s[o]?s[o]+=n:s[++o]=n),s.length<2?l[0]?GS(l[0].x):NS(e):(e=l.length,function(f){for(var u=0,h;u<e;++u)s[(h=l[u]).i]=h.x(f);return s.join("")})}function Kr(r,e){var t=typeof e,i;return e==null||t==="boolean"?Dn(e):(t==="number"?Nn:t==="string"?(i=$r(e))?(e=i,au):zp:e instanceof $r?au:e instanceof Date?Hp:ds(e)?ms:Array.isArray(e)?ou:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Vp:Nn)(r,e)}var Mu={};Bt(Mu,{easeBack:()=>yu,easeBackIn:()=>sv,easeBackInOut:()=>yu,easeBackOut:()=>lv,easeBounce:()=>ma,easeBounceIn:()=>nv,easeBounceInOut:()=>ov,easeBounceOut:()=>ma,easeCircle:()=>mu,easeCircleIn:()=>iv,easeCircleInOut:()=>mu,easeCircleOut:()=>av,easeCubic:()=>uu,easeCubicIn:()=>Up,easeCubicInOut:()=>uu,easeCubicOut:()=>jp,easeElastic:()=>wu,easeElasticIn:()=>fv,easeElasticInOut:()=>uv,easeElasticOut:()=>wu,easeExp:()=>vu,easeExpIn:()=>ev,easeExpInOut:()=>vu,easeExpOut:()=>rv,easeLinear:()=>Xp,easePoly:()=>cu,easePolyIn:()=>Zp,easePolyInOut:()=>cu,easePolyOut:()=>Qp,easeQuad:()=>fu,easeQuadIn:()=>Wp,easeQuadInOut:()=>fu,easeQuadOut:()=>qp,easeSin:()=>pu,easeSinIn:()=>Jp,easeSinInOut:()=>pu,easeSinOut:()=>tv});function Xp(r){return+r}function Wp(r){return r*r}function qp(r){return r*(2-r)}function fu(r){return((r*=2)<=1?r*r:--r*(2-r)+1)/2}function Up(r){return r*r*r}function jp(r){return--r*r*r+1}function uu(r){return((r*=2)<=1?r*r*r:(r-=2)*r*r+2)/2}var hu=3,Zp=function r(e){e=+e;function t(i){return Math.pow(i,e)}return t.exponent=r,t}(hu),Qp=function r(e){e=+e;function t(i){return 1-Math.pow(1-i,e)}return t.exponent=r,t}(hu),cu=function r(e){e=+e;function t(i){return((i*=2)<=1?Math.pow(i,e):2-Math.pow(2-i,e))/2}return t.exponent=r,t}(hu);var $p=Math.PI,Kp=$p/2;function Jp(r){return+r==1?1:1-Math.cos(r*Kp)}function tv(r){return Math.sin(r*Kp)}function pu(r){return(1-Math.cos($p*r))/2}function rr(r){return(Math.pow(2,-10*r)-.0009765625)*1.0009775171065494}function ev(r){return rr(1-+r)}function rv(r){return 1-rr(r)}function vu(r){return((r*=2)<=1?rr(1-r):2-rr(r-1))/2}function iv(r){return 1-Math.sqrt(1-r*r)}function av(r){return Math.sqrt(1- --r*r)}function mu(r){return((r*=2)<=1?1-Math.sqrt(1-r*r):Math.sqrt(1-(r-=2)*r)+1)/2}var du=.36363636363636365,YS=6/11,HS=8/11,VS=3/4,zS=9/11,XS=10/11,WS=15/16,qS=21/22,US=63/64,gs=1/du/du;function nv(r){return 1-ma(1-r)}function ma(r){return(r=+r)<du?gs*r*r:r<HS?gs*(r-=YS)*r+VS:r<XS?gs*(r-=zS)*r+WS:gs*(r-=qS)*r+US}function ov(r){return((r*=2)<=1?1-ma(1-r):ma(r-1)+1)/2}var gu=1.70158,sv=function r(e){e=+e;function t(i){return(i=+i)*i*(e*(i-1)+i)}return t.overshoot=r,t}(gu),lv=function r(e){e=+e;function t(i){return--i*i*((i+1)*e+i)+1}return t.overshoot=r,t}(gu),yu=function r(e){e=+e;function t(i){return((i*=2)<1?i*i*((e+1)*i-e):(i-=2)*i*((e+1)*i+e)+2)/2}return t.overshoot=r,t}(gu);var da=2*Math.PI,xu=1,Cu=.3,fv=function r(e,t){var i=Math.asin(1/(e=Math.max(1,e)))*(t/=da);function a(n){return e*rr(- --n)*Math.sin((i-n)/t)}return a.amplitude=function(n){return r(n,t*da)},a.period=function(n){return r(e,n)},a}(xu,Cu),wu=function r(e,t){var i=Math.asin(1/(e=Math.max(1,e)))*(t/=da);function a(n){return 1-e*rr(n=+n)*Math.sin((n+i)/t)}return a.amplitude=function(n){return r(n,t*da)},a.period=function(n){return r(e,n)},a}(xu,Cu),uv=function r(e,t){var i=Math.asin(1/(e=Math.max(1,e)))*(t/=da);function a(n){return((n=n*2-1)<0?e*rr(-n)*Math.sin((i-n)/t):2-e*rr(n)*Math.sin((i+n)/t))/2}return a.amplitude=function(n){return r(n,t*da)},a.period=function(n){return r(e,n)},a}(xu,Cu);var hv={};function cv(r){return hv[r.toLowerCase()]||Mu[r]}function Su(r,e){hv[r.toLowerCase()]=e}var pv=function(r){return["fill","stroke","fillStyle","strokeStyle"].includes(r)},vv=function(r){return/^[r,R,L,l]{1}[\s]*\(/.test(r)};var mv=[1,0,0,0,1,0,0,0,1];function jS(r,e,t){var i={},a=e.fromAttrs,n=e.toAttrs;if(!r.destroyed){var o;for(var s in n)if(!ot(a[s],n[s]))if(s==="path"){var l=n[s],f=a[s];l.length>f.length?(l=Bi(n[s]),f=Bi(a[s]),f=Hf(f,l),f=Jo(f,l),e.fromAttrs.path=f,e.toAttrs.path=l):e.pathFormatted||(l=Bi(n[s]),f=Bi(a[s]),f=Jo(f,l),e.fromAttrs.path=f,e.toAttrs.path=l,e.pathFormatted=!0),i[s]=[];for(var u=0;u<l.length;u++){for(var h=l[u],c=f[u],p=[],v=0;v<h.length;v++)z(h[v])&&c&&z(c[v])?(o=Kr(c[v],h[v]),p.push(o(t))):p.push(h[v]);i[s].push(p)}}else if(s==="matrix"){var m=nu(a[s]||mv,n[s]||mv),g=m(t);i[s]=g}else pv(s)&&vv(n[s])?i[s]=n[s]:D(n[s])||(o=Kr(a[s],n[s]),i[s]=o(t));r.attr(i)}}function ZS(r,e,t){var i=e.startTime,a=e.delay;if(t<i+a||e._paused)return!1;var n,o=e.duration,s=e.easing,l=cv(s);if(t=t-i-e.delay,e.repeat)n=t%o/o,n=l(n);else if(n=t/o,n<1)n=l(n);else return e.onFrame?r.attr(e.onFrame(1)):r.attr(e.toAttrs),!0;if(e.onFrame){var f=e.onFrame(n);r.attr(f)}else jS(r,e,n);return!1}var QS=function(){function r(e){this.animators=[],this.current=0,this.timer=null,this.canvas=e}return r.prototype.initTimer=function(){var e=this,t=!1,i,a,n;this.timer=ls(function(o){if(e.current=o,e.animators.length>0){for(var s=e.animators.length-1;s>=0;s--){if(i=e.animators[s],i.destroyed){e.removeAnimator(s);continue}if(!i.isAnimatePaused()){a=i.get("animations");for(var l=a.length-1;l>=0;l--)n=a[l],t=ZS(i,n,o),t&&(a.splice(l,1),t=!1,n.callback&&n.callback())}a.length===0&&e.removeAnimator(s)}var f=e.canvas.get("autoDraw");f||e.canvas.draw()}})},r.prototype.addAnimator=function(e){this.animators.push(e)},r.prototype.removeAnimator=function(e){this.animators.splice(e,1)},r.prototype.isAnimating=function(){return!!this.animators.length},r.prototype.stop=function(){this.timer&&this.timer.stop()},r.prototype.stopAllAnimations=function(e){e===void 0&&(e=!0),this.animators.forEach(function(t){t.stopAnimate(e)}),this.animators=[],this.canvas.draw()},r.prototype.getTime=function(){return this.current},r}(),dv=QS;var $S=40,gv=0;var yv=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function xv(r,e,t){t.name=e,t.target=r,t.currentTarget=r,t.delegateTarget=r,r.emit(e,t)}function KS(r,e,t){if(t.bubbles){var i=void 0,a=!1;if(e==="mouseenter"?(i=t.fromShape,a=!0):e==="mouseleave"&&(a=!0,i=t.toShape),r.isCanvas()&&a)return;if(i&&es(r,i)){t.bubbles=!1;return}t.name=e,t.currentTarget=r,t.delegateTarget=r,r.emit(e,t)}}var JS=function(){function r(e){var t=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(i){var a=i.type;t._triggerEvent(a,i)},this._onDocumentMove=function(i){var a=t.canvas,n=a.get("el");if(n!==i.target&&(t.dragging||t.currentShape)){var o=t._getPointInfo(i);t.dragging&&t._emitEvent("drag",i,o,t.draggingShape)}},this._onDocumentMouseUp=function(i){var a=t.canvas,n=a.get("el");if(n!==i.target&&t.dragging){var o=t._getPointInfo(i);t.draggingShape&&t._emitEvent("drop",i,o,null),t._emitEvent("dragend",i,o,t.draggingShape),t._afterDrag(t.draggingShape,o,i)}},this.canvas=e.canvas}return r.prototype.init=function(){this._bindEvents()},r.prototype._bindEvents=function(){var e=this,t=this.canvas.get("el");M(yv,function(i){t.addEventListener(i,e._eventCallback)}),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},r.prototype._clearEvents=function(){var e=this,t=this.canvas.get("el");M(yv,function(i){t.removeEventListener(i,e._eventCallback)}),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},r.prototype._getEventObj=function(e,t,i,a,n,o){var s=new tr(e,t);return s.fromShape=n,s.toShape=o,s.x=i.x,s.y=i.y,s.clientX=i.clientX,s.clientY=i.clientY,s.propagationPath.push(a),s},r.prototype._getShape=function(e,t){return this.canvas.getShape(e.x,e.y,t)},r.prototype._getPointInfo=function(e){var t=this.canvas,i=t.getClientByEvent(e),a=t.getPointByEvent(e);return{x:a.x,y:a.y,clientX:i.x,clientY:i.y}},r.prototype._triggerEvent=function(e,t){var i=this._getPointInfo(t),a=this._getShape(i,t),n=this["_on"+e],o=!1;if(n)n.call(this,i,a,t);else{var s=this.currentShape;e==="mouseenter"||e==="dragenter"||e==="mouseover"?(this._emitEvent(e,t,i,null,null,a),a&&this._emitEvent(e,t,i,a,null,a),e==="mouseenter"&&this.draggingShape&&this._emitEvent("dragenter",t,i,null)):e==="mouseleave"||e==="dragleave"||e==="mouseout"?(o=!0,s&&this._emitEvent(e,t,i,s,s,null),this._emitEvent(e,t,i,null,s,null),e==="mouseleave"&&this.draggingShape&&this._emitEvent("dragleave",t,i,null)):this._emitEvent(e,t,i,a,null,null)}if(o||(this.currentShape=a),a&&!a.get("destroyed")){var l=this.canvas,f=l.get("el");f.style.cursor=a.attr("cursor")||l.get("cursor")}},r.prototype._onmousedown=function(e,t,i){i.button===gv&&(this.mousedownShape=t,this.mousedownPoint=e,this.mousedownTimeStamp=i.timeStamp),this._emitEvent("mousedown",i,e,t,null,null)},r.prototype._emitMouseoverEvents=function(e,t,i,a){var n=this.canvas.get("el");i!==a&&(i&&(this._emitEvent("mouseout",e,t,i,i,a),this._emitEvent("mouseleave",e,t,i,i,a),(!a||a.get("destroyed"))&&(n.style.cursor=this.canvas.get("cursor"))),a&&(this._emitEvent("mouseover",e,t,a,i,a),this._emitEvent("mouseenter",e,t,a,i,a)))},r.prototype._emitDragoverEvents=function(e,t,i,a,n){a?(a!==i&&(i&&this._emitEvent("dragleave",e,t,i,i,a),this._emitEvent("dragenter",e,t,a,i,a)),n||this._emitEvent("dragover",e,t,a)):i&&this._emitEvent("dragleave",e,t,i,i,a),n&&this._emitEvent("dragover",e,t,a)},r.prototype._afterDrag=function(e,t,i){e&&(e.set("capture",!0),this.draggingShape=null),this.dragging=!1;var a=this._getShape(t,i);a!==e&&this._emitMouseoverEvents(i,t,e,a),this.currentShape=a},r.prototype._onmouseup=function(e,t,i){if(i.button===gv){var a=this.draggingShape;this.dragging?(a&&this._emitEvent("drop",i,e,t),this._emitEvent("dragend",i,e,a),this._afterDrag(a,e,i)):(this._emitEvent("mouseup",i,e,t),t===this.mousedownShape&&this._emitEvent("click",i,e,t),this.mousedownShape=null,this.mousedownPoint=null)}},r.prototype._ondragover=function(e,t,i){i.preventDefault();var a=this.currentShape;this._emitDragoverEvents(i,e,a,t,!0)},r.prototype._onmousemove=function(e,t,i){var a=this.canvas,n=this.currentShape,o=this.draggingShape;if(this.dragging)o&&this._emitDragoverEvents(i,e,n,t,!1),this._emitEvent("drag",i,e,o);else{var s=this.mousedownPoint;if(s){var l=this.mousedownShape,f=i.timeStamp,u=f-this.mousedownTimeStamp,h=s.clientX-e.clientX,c=s.clientY-e.clientY,p=h*h+c*c;u>120||p>$S?l&&l.get("draggable")?(o=this.mousedownShape,o.set("capture",!1),this.draggingShape=o,this.dragging=!0,this._emitEvent("dragstart",i,e,o),this.mousedownShape=null,this.mousedownPoint=null):!l&&a.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",i,e,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(i,e,n,t),this._emitEvent("mousemove",i,e,t)):(this._emitMouseoverEvents(i,e,n,t),this._emitEvent("mousemove",i,e,t))}else this._emitMouseoverEvents(i,e,n,t),this._emitEvent("mousemove",i,e,t)}},r.prototype._emitEvent=function(e,t,i,a,n,o){var s=this._getEventObj(e,t,i,a,n,o);if(a){s.shape=a,xv(a,e,s);for(var l=a.getParent();l;)l.emitDelegation(e,s),s.propagationStopped||KS(l,e,s),s.propagationPath.push(l),l=l.getParent()}else{var f=this.canvas;xv(f,e,s)}},r.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},r}(),Cv=JS;var wv="px",Mv=rs(),tA=Mv&&Mv.name==="firefox",eA=function(r){S(e,r);function e(t){var i=r.call(this,t)||this;return i.initContainer(),i.initDom(),i.initEvents(),i.initTimeline(),i}return e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return t.cursor="default",t.supportCSSTransform=!1,t},e.prototype.initContainer=function(){var t=this.get("container");G(t)&&(t=document.getElementById(t),this.set("container",t))},e.prototype.initDom=function(){var t=this.createDom();this.set("el",t);var i=this.get("container");i.appendChild(t),this.setDOMSize(this.get("width"),this.get("height"))},e.prototype.initEvents=function(){var t=new Cv({canvas:this});t.init(),this.set("eventController",t)},e.prototype.initTimeline=function(){var t=new dv(this);this.set("timeline",t)},e.prototype.setDOMSize=function(t,i){var a=this.get("el");Vf&&(a.style.width=t+wv,a.style.height=i+wv)},e.prototype.changeSize=function(t,i){this.setDOMSize(t,i),this.set("width",t),this.set("height",i),this.onCanvasChange("changeSize")},e.prototype.getRenderer=function(){return this.get("renderer")},e.prototype.getCursor=function(){return this.get("cursor")},e.prototype.setCursor=function(t){this.set("cursor",t);var i=this.get("el");Vf&&i&&(i.style.cursor=t)},e.prototype.getPointByEvent=function(t){var i=this.get("supportCSSTransform");if(i){if(tA&&!I(t.layerX)&&t.layerX!==t.offsetX)return{x:t.layerX,y:t.layerY};if(!I(t.offsetX))return{x:t.offsetX,y:t.offsetY}}var a=this.getClientByEvent(t),n=a.x,o=a.y;return this.getPointByClient(n,o)},e.prototype.getClientByEvent=function(t){var i=t;return t.touches&&(t.type==="touchend"?i=t.changedTouches[0]:i=t.touches[0]),{x:i.clientX,y:i.clientY}},e.prototype.getPointByClient=function(t,i){var a=this.get("el"),n=a.getBoundingClientRect();return{x:t-n.left,y:i-n.top}},e.prototype.getClientByPoint=function(t,i){var a=this.get("el"),n=a.getBoundingClientRect();return{x:t+n.left,y:i+n.top}},e.prototype.draw=function(){},e.prototype.removeDom=function(){var t=this.get("el");t.parentNode.removeChild(t)},e.prototype.clearEvents=function(){var t=this.get("eventController");t.destroy()},e.prototype.isCanvas=function(){return!0},e.prototype.getParent=function(){return null},e.prototype.destroy=function(){var t=this.get("timeline");this.get("destroyed")||(this.clear(),t&&t.stop(),this.clearEvents(),this.removeDom(),r.prototype.destroy.call(this))},e}(as),Gi=eA;var rA=function(r){S(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.isGroup=function(){return!0},e.prototype.isEntityGroup=function(){return!1},e.prototype.clone=function(){for(var t=r.prototype.clone.call(this),i=this.getChildren(),a=0;a<i.length;a++){var n=i[a];t.add(n.clone())}return t},e}(as),Jr=rA;var iA=function(r){S(e,r);function e(t){return r.call(this,t)||this}return e.prototype._isInBBox=function(t,i){var a=this.getBBox();return a.minX<=t&&a.maxX>=t&&a.minY<=i&&a.maxY>=i},e.prototype.afterAttrsChange=function(t){r.prototype.afterAttrsChange.call(this,t),this.clearCacheBBox()},e.prototype.getBBox=function(){var t=this.cfg.bbox;return t||(t=this.calculateBBox(),this.set("bbox",t)),t},e.prototype.getCanvasBBox=function(){var t=this.cfg.canvasBBox;return t||(t=this.calculateCanvasBBox(),this.set("canvasBBox",t)),t},e.prototype.applyMatrix=function(t){r.prototype.applyMatrix.call(this,t),this.set("canvasBBox",null)},e.prototype.calculateCanvasBBox=function(){var t=this.getBBox(),i=this.getTotalMatrix(),a=t.minX,n=t.minY,o=t.maxX,s=t.maxY;if(i){var l=Ce(i,[t.minX,t.minY]),f=Ce(i,[t.maxX,t.minY]),u=Ce(i,[t.minX,t.maxY]),h=Ce(i,[t.maxX,t.maxY]);a=Math.min(l[0],f[0],u[0],h[0]),o=Math.max(l[0],f[0],u[0],h[0]),n=Math.min(l[1],f[1],u[1],h[1]),s=Math.max(l[1],f[1],u[1],h[1])}var c=this.attrs;if(c.shadowColor){var p=c.shadowBlur,v=p===void 0?0:p,m=c.shadowOffsetX,g=m===void 0?0:m,y=c.shadowOffsetY,w=y===void 0?0:y,x=a-v+g,C=o+v+g,A=n-v+w,T=s+v+w;a=Math.min(a,x),o=Math.max(o,C),n=Math.min(n,A),s=Math.max(s,T)}return{x:a,y:n,minX:a,minY:n,maxX:o,maxY:s,width:o-a,height:s-n}},e.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},e.prototype.isClipShape=function(){return this.get("isClipShape")},e.prototype.isInShape=function(t,i){return!1},e.prototype.isOnlyHitBox=function(){return!1},e.prototype.isHit=function(t,i){var a=this.get("startArrowShape"),n=this.get("endArrowShape"),o=[t,i,1];o=this.invertFromMatrix(o);var s=o[0],l=o[1],f=this._isInBBox(s,l);return this.isOnlyHitBox()?f:!!(f&&!this.isClipped(s,l)&&(this.isInShape(s,l)||a&&a.isHit(s,l)||n&&n.isHit(s,l)))},e}(is),ti=iA;var Sv=new Map;function ve(r,e){Sv.set(r,e)}function ei(r){return Sv.get(r)}function Au(r){var e=r.attr(),t=e.x,i=e.y,a=e.width,n=e.height;return{x:t,y:i,width:a,height:n}}function bu(r){var e=r.attr(),t=e.x,i=e.y,a=e.r;return{x:t-a,y:i-a,width:a*2,height:a*2}}var ga={};Bt(ga,{distance:()=>Lt,getBBoxByArray:()=>wr,getBBoxRange:()=>aA,isNumberEqual:()=>Yi,piMod:()=>Mr});function Lt(r,e,t,i){var a=r-t,n=e-i;return Math.sqrt(a*a+n*n)}function Yi(r,e){return Math.abs(r-e)<.001}function wr(r,e){var t=Vt(r),i=Vt(e),a=Dt(r),n=Dt(e);return{x:t,y:i,width:a-t,height:n-i}}function aA(r,e,t,i){return{minX:Vt([r,t]),maxX:Dt([r,t]),minY:Vt([e,i]),maxY:Dt([e,i])}}function Mr(r){return(r+Math.PI*2)%(Math.PI*2)}var yt={box:function(r,e,t,i){return wr([r,t],[e,i])},length:function(r,e,t,i){return Lt(r,e,t,i)},pointAt:function(r,e,t,i,a){return{x:(1-a)*r+a*t,y:(1-a)*e+a*i}},pointDistance:function(r,e,t,i,a,n){var o=(t-r)*(a-r)+(i-e)*(n-e);if(o<0)return Lt(r,e,a,n);var s=(t-r)*(t-r)+(i-e)*(i-e);return o>s?Lt(t,i,a,n):this.pointToLine(r,e,t,i,a,n)},pointToLine:function(r,e,t,i,a,n){var o=[t-r,i-e];if(jf(o,[0,0]))return Math.sqrt((a-r)*(a-r)+(n-e)*(n-e));var s=[-o[1],o[0]];qf(s,s);var l=[a-r,n-e];return Math.abs(Uf(l,s))},tangentAngle:function(r,e,t,i){return Math.atan2(i-e,t-r)}};var nA=1e-4;function ys(r,e,t,i,a,n){var o,s=1/0,l=[t,i],f=20;n&&n>200&&(f=n/10);for(var u=1/f,h=u/10,c=0;c<=f;c++){var p=c*u,v=[a.apply(null,r.concat([p])),a.apply(null,e.concat([p]))],m=Lt(l[0],l[1],v[0],v[1]);m<s&&(o=p,s=m)}if(o===0)return{x:r[0],y:e[0]};if(o===1){var g=r.length;return{x:r[g-1],y:e[g-1]}}s=1/0;for(var c=0;c<32&&!(h<nA);c++){var y=o-h,w=o+h,v=[a.apply(null,r.concat([y])),a.apply(null,e.concat([y]))],m=Lt(l[0],l[1],v[0],v[1]);if(y>=0&&m<s)o=y,s=m;else{var x=[a.apply(null,r.concat([w])),a.apply(null,e.concat([w]))],C=Lt(l[0],l[1],x[0],x[1]);w<=1&&C<s?(o=w,s=C):h*=.5}}return{x:a.apply(null,r.concat([o])),y:a.apply(null,e.concat([o]))}}function Av(r,e){for(var t=0,i=r.length,a=0;a<i;a++){var n=r[a],o=e[a],s=r[(a+1)%i],l=e[(a+1)%i];t+=Lt(n,o,s,l)}return t/2}function ri(r,e,t,i){var a=1-i;return a*a*r+2*i*a*e+i*i*t}function bv(r,e,t){var i=r+t-2*e;if(Yi(i,0))return[.5];var a=(r-e)/i;return a<=1&&a>=0?[a]:[]}function Tv(r,e,t,i){return 2*(1-i)*(e-r)+2*i*(t-e)}function Ev(r,e,t,i,a,n,o){var s=ri(r,t,a,o),l=ri(e,i,n,o),f=yt.pointAt(r,e,t,i,o),u=yt.pointAt(t,i,a,n,o);return[[r,e,f.x,f.y,s,l],[s,l,u.x,u.y,a,n]]}function Tu(r,e,t,i,a,n,o){if(o===0)return(Lt(r,e,t,i)+Lt(t,i,a,n)+Lt(r,e,a,n))/2;var s=Ev(r,e,t,i,a,n,.5),l=s[0],f=s[1];return l.push(o-1),f.push(o-1),Tu.apply(null,l)+Tu.apply(null,f)}var Gn={box:function(r,e,t,i,a,n){var o=bv(r,t,a)[0],s=bv(e,i,n)[0],l=[r,a],f=[e,n];return o!==void 0&&l.push(ri(r,t,a,o)),s!==void 0&&f.push(ri(e,i,n,s)),wr(l,f)},length:function(r,e,t,i,a,n){return Tu(r,e,t,i,a,n,3)},nearestPoint:function(r,e,t,i,a,n,o,s){return ys([r,t,a],[e,i,n],o,s,ri)},pointDistance:function(r,e,t,i,a,n,o,s){var l=this.nearestPoint(r,e,t,i,a,n,o,s);return Lt(l.x,l.y,o,s)},interpolationAt:ri,pointAt:function(r,e,t,i,a,n,o){return{x:ri(r,t,a,o),y:ri(e,i,n,o)}},divide:function(r,e,t,i,a,n,o){return Ev(r,e,t,i,a,n,o)},tangentAngle:function(r,e,t,i,a,n,o){var s=Tv(r,t,a,o),l=Tv(e,i,n,o),f=Math.atan2(l,s);return Mr(f)}};function ii(r,e,t,i,a){var n=1-a;return n*n*n*r+3*e*a*n*n+3*t*a*a*n+i*a*a*a}function Lv(r,e,t,i,a){var n=1-a;return 3*(n*n*(e-r)+2*n*a*(t-e)+a*a*(i-t))}function Eu(r,e,t,i){var a=-3*r+9*e-9*t+3*i,n=6*r-12*e+6*t,o=3*e-3*r,s=[],l,f,u;if(Yi(a,0))Yi(n,0)||(l=-o/n,l>=0&&l<=1&&s.push(l));else{var h=n*n-4*a*o;Yi(h,0)?s.push(-n/(2*a)):h>0&&(u=Math.sqrt(h),l=(-n+u)/(2*a),f=(-n-u)/(2*a),l>=0&&l<=1&&s.push(l),f>=0&&f<=1&&s.push(f))}return s}function Iv(r,e,t,i,a,n,o,s,l){var f=ii(r,t,a,o,l),u=ii(e,i,n,s,l),h=yt.pointAt(r,e,t,i,l),c=yt.pointAt(t,i,a,n,l),p=yt.pointAt(a,n,o,s,l),v=yt.pointAt(h.x,h.y,c.x,c.y,l),m=yt.pointAt(c.x,c.y,p.x,p.y,l);return[[r,e,h.x,h.y,v.x,v.y,f,u],[f,u,m.x,m.y,p.x,p.y,o,s]]}function Lu(r,e,t,i,a,n,o,s,l){if(l===0)return Av([r,t,a,o],[e,i,n,s]);var f=Iv(r,e,t,i,a,n,o,s,.5),u=f[0],h=f[1];return u.push(l-1),h.push(l-1),Lu.apply(null,u)+Lu.apply(null,h)}var Sr={extrema:Eu,box:function(r,e,t,i,a,n,o,s){for(var l=[r,o],f=[e,s],u=Eu(r,t,a,o),h=Eu(e,i,n,s),c=0;c<u.length;c++)l.push(ii(r,t,a,o,u[c]));for(var c=0;c<h.length;c++)f.push(ii(e,i,n,s,h[c]));return wr(l,f)},length:function(r,e,t,i,a,n,o,s){return Lu(r,e,t,i,a,n,o,s,3)},nearestPoint:function(r,e,t,i,a,n,o,s,l,f,u){return ys([r,t,a,o],[e,i,n,s],l,f,ii,u)},pointDistance:function(r,e,t,i,a,n,o,s,l,f,u){var h=this.nearestPoint(r,e,t,i,a,n,o,s,l,f,u);return Lt(h.x,h.y,l,f)},interpolationAt:ii,pointAt:function(r,e,t,i,a,n,o,s,l){return{x:ii(r,t,a,o,l),y:ii(e,i,n,s,l)}},divide:function(r,e,t,i,a,n,o,s,l){return Iv(r,e,t,i,a,n,o,s,l)},tangentAngle:function(r,e,t,i,a,n,o,s,l){var f=Lv(r,t,a,o,l),u=Lv(e,i,n,s,l);return Mr(Math.atan2(u,f))}};function Pv(r,e){var t=Math.abs(r);return e>0?t:t*-1}var Bv={box:function(r,e,t,i){return{x:r-t,y:e-i,width:t*2,height:i*2}},length:function(r,e,t,i){return Math.PI*(3*(t+i)-Math.sqrt((3*t+i)*(t+3*i)))},nearestPoint:function(r,e,t,i,a,n){var o=t,s=i;if(o===0||s===0)return{x:r,y:e};for(var l=a-r,f=n-e,u=Math.abs(l),h=Math.abs(f),c=o*o,p=s*s,v=Math.PI/4,m,g,y=0;y<4;y++){m=o*Math.cos(v),g=s*Math.sin(v);var w=(c-p)*Math.pow(Math.cos(v),3)/o,x=(p-c)*Math.pow(Math.sin(v),3)/s,C=m-w,A=g-x,T=u-w,E=h-x,k=Math.hypot(A,C),P=Math.hypot(E,T),L=k*Math.asin((C*E-A*T)/(k*P)),R=L/Math.sqrt(c+p-m*m-g*g);v+=R,v=Math.min(Math.PI/2,Math.max(0,v))}return{x:r+Pv(m,l),y:e+Pv(g,f)}},pointDistance:function(r,e,t,i,a,n){var o=this.nearestPoint(r,e,t,i,a,n);return Lt(o.x,o.y,a,n)},pointAt:function(r,e,t,i,a){var n=2*Math.PI*a;return{x:r+t*Math.cos(n),y:e+i*Math.sin(n)}},tangentAngle:function(r,e,t,i,a){var n=2*Math.PI*a,o=Math.atan2(i*Math.cos(n),-t*Math.sin(n));return Mr(o)}};function oA(r,e,t,i,a,n,o,s){return-1*t*Math.cos(a)*Math.sin(s)-i*Math.sin(a)*Math.cos(s)}function sA(r,e,t,i,a,n,o,s){return-1*t*Math.sin(a)*Math.sin(s)+i*Math.cos(a)*Math.cos(s)}function lA(r,e,t){return Math.atan(-e/r*Math.tan(t))}function fA(r,e,t){return Math.atan(e/(r*Math.tan(t)))}function kv(r,e,t,i,a,n){return t*Math.cos(a)*Math.cos(n)-i*Math.sin(a)*Math.sin(n)+r}function Ov(r,e,t,i,a,n){return t*Math.sin(a)*Math.cos(n)+i*Math.cos(a)*Math.sin(n)+e}function uA(r,e,t,i){var a=Math.atan2(i*r,t*e);return(a+Math.PI*2)%(Math.PI*2)}function Fv(r,e,t){return{x:r*Math.cos(t),y:e*Math.sin(t)}}function _v(r,e,t){var i=Math.cos(t),a=Math.sin(t);return[r*i-e*a,r*a+e*i]}var Iu={box:function(r,e,t,i,a,n,o){for(var s=lA(t,i,a),l=1/0,f=-1/0,u=[n,o],h=-Math.PI*2;h<=Math.PI*2;h+=Math.PI){var c=s+h;n<o?n<c&&c<o&&u.push(c):o<c&&c<n&&u.push(c)}for(var h=0;h<u.length;h++){var p=kv(r,e,t,i,a,u[h]);p<l&&(l=p),p>f&&(f=p)}for(var v=fA(t,i,a),m=1/0,g=-1/0,y=[n,o],h=-Math.PI*2;h<=Math.PI*2;h+=Math.PI){var w=v+h;n<o?n<w&&w<o&&y.push(w):o<w&&w<n&&y.push(w)}for(var h=0;h<y.length;h++){var x=Ov(r,e,t,i,a,y[h]);x<m&&(m=x),x>g&&(g=x)}return{x:l,y:m,width:f-l,height:g-m}},length:function(r,e,t,i,a,n,o){},nearestPoint:function(r,e,t,i,a,n,o,s,l){var f=_v(s-r,l-e,-a),u=f[0],h=f[1],c=Bv.nearestPoint(0,0,t,i,u,h),p=uA(t,i,c.x,c.y);p<n?c=Fv(t,i,n):p>o&&(c=Fv(t,i,o));var v=_v(c.x,c.y,a);return{x:v[0]+r,y:v[1]+e}},pointDistance:function(r,e,t,i,a,n,o,s,l){var f=this.nearestPoint(r,e,t,i,s,l);return Lt(f.x,f.y,s,l)},pointAt:function(r,e,t,i,a,n,o,s){var l=(o-n)*s+n;return{x:kv(r,e,t,i,a,l),y:Ov(r,e,t,i,a,l)}},tangentAngle:function(r,e,t,i,a,n,o,s){var l=(o-n)*s+n,f=oA(r,e,t,i,a,n,o,l),u=sA(r,e,t,i,a,n,o,l);return Mr(Math.atan2(u,f))}};function Rv(r){for(var e=0,t=[],i=0;i<r.length-1;i++){var a=r[i],n=r[i+1],o=Lt(a[0],a[1],n[0],n[1]),s={from:a,to:n,length:o};t.push(s),e+=o}return{segments:t,totalLength:e}}function Pu(r){if(r.length<2)return 0;for(var e=0,t=0;t<r.length-1;t++){var i=r[t],a=r[t+1];e+=Lt(i[0],i[1],a[0],a[1])}return e}function Bu(r,e){if(e>1||e<0||r.length<2)return null;var t=Rv(r),i=t.segments,a=t.totalLength;if(a===0)return{x:r[0][0],y:r[0][1]};for(var n=0,o=null,s=0;s<i.length;s++){var l=i[s],f=l.from,u=l.to,h=l.length/a;if(e>=n&&e<=n+h){var c=(e-n)/h;o=yt.pointAt(f[0],f[1],u[0],u[1],c);break}n+=h}return o}function ku(r,e){if(e>1||e<0||r.length<2)return 0;for(var t=Rv(r),i=t.segments,a=t.totalLength,n=0,o=0,s=0;s<i.length;s++){var l=i[s],f=l.from,u=l.to,h=l.length/a;if(e>=n&&e<=n+h){o=Math.atan2(u[1]-f[1],u[0]-f[0]);break}n+=h}return o}function Ou(r,e,t){for(var i=1/0,a=0;a<r.length-1;a++){var n=r[a],o=r[a+1],s=yt.pointDistance(n[0],n[1],o[0],o[1],e,t);s<i&&(i=s)}return i}var ya={box:function(r){for(var e=[],t=[],i=0;i<r.length;i++){var a=r[i];e.push(a[0]),t.push(a[1])}return wr(e,t)},length:function(r){return Pu(r)},pointAt:function(r,e){return Bu(r,e)},pointDistance:function(r,e,t){return Ou(r,e,t)},tangentAngle:function(r,e){return ku(r,e)}};function Dv(r,e){return!r||!e?r||e:{minX:Math.min(r.minX,e.minX),minY:Math.min(r.minY,e.minY),maxX:Math.max(r.maxX,e.maxX),maxY:Math.max(r.maxY,e.maxY)}}function xa(r,e){var t=r.get("startArrowShape"),i=r.get("endArrowShape"),a=null,n=null;return t&&(a=t.getCanvasBBox(),e=Dv(e,a)),i&&(n=i.getCanvasBBox(),e=Dv(e,n)),e}function Nv(r){for(var e=r.attr(),t=e.points,i=[],a=[],n=0;n<t.length;n++){var o=t[n];i.push(o[0]),a.push(o[1])}var s=ga.getBBoxByArray(i,a),l=s.x,f=s.y,u=s.width,h=s.height,c={minX:l,minY:f,maxX:l+u,maxY:f+h};return c=xa(r,c),{x:c.minX,y:c.minY,width:c.maxX-c.minX,height:c.maxY-c.minY}}function Gv(r){for(var e=r.attr(),t=e.points,i=[],a=[],n=0;n<t.length;n++){var o=t[n];i.push(o[0]),a.push(o[1])}return ga.getBBoxByArray(i,a)}var Fu=null;function Hi(){if(!Fu){var r=document.createElement("canvas");r.width=1,r.height=1,Fu=r.getContext("2d")}return Fu}function Vi(r,e,t){var i=1;if(G(r)&&(i=r.split(`
`).length),i>1){var a=hA(e,t);return e*i+a*(i-1)}return e}function hA(r,e){return e?e-r:r*.14}function Yv(r,e){var t=Hi(),i=0;if(I(r)||r==="")return i;if(t.save(),t.font=e,G(r)&&r.includes(`
`)){var a=r.split(`
`);M(a,function(n){var o=t.measureText(n).width;i<o&&(i=o)})}else i=t.measureText(r).width;return t.restore(),i}function zi(r){var e=r.fontSize,t=r.fontFamily,i=r.fontWeight,a=r.fontStyle,n=r.fontVariant;return[a,n,i,e+"px",t].join(" ").trim()}function Hv(r){var e=r.attr(),t=e.x,i=e.y,a=e.text,n=e.fontSize,o=e.lineHeight,s=e.font;s||(s=zi(e));var l=Yv(a,s),f;if(!l)f={x:t,y:i,width:0,height:0};else{var u=e.textAlign,h=e.textBaseline,c=Vi(a,n,o),p={x:t,y:i-c};u&&(u==="end"||u==="right"?p.x-=l:u==="center"&&(p.x-=l/2)),h&&(h==="top"?p.y+=c:h==="middle"&&(p.y+=c/2)),f={x:p.x,y:p.y,width:l,height:c}}return f}var cA=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig,pA=/[^\s\,]+/ig;function vA(r){var e=r||[];if(B(e))return e;if(G(e))return e=e.match(cA),M(e,function(t,i){if(t=t.match(pA),t[0].length>1){var a=t[0].charAt(0);t.splice(1,0,t[0].substr(1)),t[0]=a}M(t,function(n,o){isNaN(n)||(t[o]=+n)}),e[i]=t}),e}var _u=vA;function dA(r,e,t,i){var a=[],n=!!i,o,s,l,f,u,h,c;if(n){l=i[0],f=i[1];for(var p=0,v=r.length;p<v;p+=1){var m=r[p];l=Y.min([0,0],l,m),f=Y.max([0,0],f,m)}}for(var p=0,g=r.length;p<g;p+=1){var m=r[p];if(p===0&&!t)c=m;else if(p===g-1&&!t)h=m,a.push(c),a.push(h);else{var y=[p?p-1:g-1,p-1][t?0:1];o=r[y],s=r[t?(p+1)%g:p+1];var w=[0,0];w=Y.sub(w,s,o),w=Y.scale(w,w,e);var x=Y.distance(m,o),C=Y.distance(m,s),A=x+C;A!==0&&(x/=A,C/=A);var T=Y.scale([0,0],w,-x),E=Y.scale([0,0],w,C);h=Y.add([0,0],m,T),u=Y.add([0,0],m,E),u=Y.min([0,0],u,Y.max([0,0],s,m)),u=Y.max([0,0],u,Y.min([0,0],s,m)),T=Y.sub([0,0],u,m),T=Y.scale([0,0],T,-x/C),h=Y.add([0,0],m,T),h=Y.min([0,0],h,Y.max([0,0],o,m)),h=Y.max([0,0],h,Y.min([0,0],o,m)),E=Y.sub([0,0],m,h),E=Y.scale([0,0],E,C/x),u=Y.add([0,0],m,E),n&&(h=Y.max([0,0],h,l),h=Y.min([0,0],h,f),u=Y.max([0,0],u,l),u=Y.min([0,0],u,f)),a.push(c),a.push(h),c=u}}return t&&a.push(a.shift()),a}function gA(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=[[0,0],[1,1]]);for(var i=!!e,a=[],n=0,o=r.length;n<o;n+=2)a.push([r[n],r[n+1]]);for(var s=dA(a,.4,i,t),l=a.length,f=[],u,h,c,n=0;n<l-1;n+=1)u=s[n*2],h=s[n*2+1],c=a[n+1],f.push(["C",u[0],u[1],h[0],h[1],c[0],c[1]]);return i&&(u=s[l],h=s[l+1],c=a[0],f.push(["C",u[0],u[1],h[0],h[1],c[0],c[1]])),f}var Ru=gA;var Yn=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,yA=new RegExp("([a-z])["+Yn+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+Yn+"]*,?["+Yn+"]*)+)","ig"),xA=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+Yn+"]*,?["+Yn+"]*","ig");function Ca(r){if(!r)return null;if(B(r))return r;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},t=[];return String(r).replace(yA,function(i,a,n){var o=[],s=a.toLowerCase();if(n.replace(xA,function(l,f){f&&o.push(+f)}),s==="m"&&o.length>2&&(t.push([a].concat(o.splice(0,2))),s="l",a=a==="m"?"l":"L"),s==="o"&&o.length===1&&t.push([a,o[0]]),s==="r")t.push([a].concat(o));else for(;o.length>=e[s]&&(t.push([a].concat(o.splice(0,e[s]))),!!e[s]););return""}),t}var CA=/[a-z]/;function Vv(r,e){return[e[0]+(e[0]-r[0]),e[1]+(e[1]-r[1])]}function Xi(r){var e=Ca(r);if(!e||!e.length)return[["M",0,0]];for(var t=!1,i=0;i<e.length;i++){var a=e[i][0];if(CA.test(a)||["V","H","T","S"].indexOf(a)>=0){t=!0;break}}if(!t)return e;var n=[],o=0,s=0,l=0,f=0,u=0,h,c,p=e[0];(p[0]==="M"||p[0]==="m")&&(o=+p[1],s=+p[2],l=o,f=s,u++,n[0]=["M",o,s]);for(var i=u,v=e.length;i<v;i++){var m=e[i],g=n[i-1],y=[],a=m[0],w=a.toUpperCase();if(a!==w)switch(y[0]=w,w){case"A":y[1]=m[1],y[2]=m[2],y[3]=m[3],y[4]=m[4],y[5]=m[5],y[6]=+m[6]+o,y[7]=+m[7]+s;break;case"V":y[1]=+m[1]+s;break;case"H":y[1]=+m[1]+o;break;case"M":l=+m[1]+o,f=+m[2]+s,y[1]=l,y[2]=f;break;default:for(var x=1,C=m.length;x<C;x++)y[x]=+m[x]+(x%2?o:s)}else y=e[i];switch(w){case"Z":o=+l,s=+f;break;case"H":o=y[1],y=["L",o,s];break;case"V":s=y[1],y=["L",o,s];break;case"T":o=y[1],s=y[2];var A=Vv([g[1],g[2]],[g[3],g[4]]);y=["Q",A[0],A[1],o,s];break;case"S":o=y[y.length-2],s=y[y.length-1];var T=g.length,E=Vv([g[T-4],g[T-3]],[g[T-2],g[T-1]]);y=["C",E[0],E[1],y[1],y[2],o,s];break;case"M":l=y[y.length-2],f=y[y.length-1];break;default:o=y[y.length-2],s=y[y.length-1]}n.push(y)}return n}var AH=Math.PI*2;function xs(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1])}function Du(r,e){return xs(r)*xs(e)?(r[0]*e[0]+r[1]*e[1])/(xs(r)*xs(e)):1}function zv(r,e){return(r[0]*e[1]<r[1]*e[0]?-1:1)*Math.acos(Du(r,e))}function Cs(r,e){return r[0]===e[0]&&r[1]===e[1]}function ws(r,e){var t=e[1],i=e[2],a=Wr(qr(e[3]),Math.PI*2),n=e[4],o=e[5],s=r[0],l=r[1],f=e[6],u=e[7],h=Math.cos(a)*(s-f)/2+Math.sin(a)*(l-u)/2,c=-1*Math.sin(a)*(s-f)/2+Math.cos(a)*(l-u)/2,p=h*h/(t*t)+c*c/(i*i);p>1&&(t*=Math.sqrt(p),i*=Math.sqrt(p));var v=t*t*(c*c)+i*i*(h*h),m=v?Math.sqrt((t*t*(i*i)-v)/v):1;n===o&&(m*=-1),isNaN(m)&&(m=0);var g=i?m*t*c/i:0,y=t?m*-i*h/t:0,w=(s+f)/2+Math.cos(a)*g-Math.sin(a)*y,x=(l+u)/2+Math.sin(a)*g+Math.cos(a)*y,C=[(h-g)/t,(c-y)/i],A=[(-1*h-g)/t,(-1*c-y)/i],T=zv([1,0],C),E=zv(C,A);return Du(C,A)<=-1&&(E=Math.PI),Du(C,A)>=1&&(E=0),o===0&&E>0&&(E=E-2*Math.PI),o===1&&E<0&&(E=E+2*Math.PI),{cx:w,cy:x,rx:Cs(r,[f,u])?0:t,ry:Cs(r,[f,u])?0:i,startAngle:T,endAngle:T+E,xRotation:a,arcFlag:n,sweepFlag:o}}function Xv(r,e){return[e[0]+(e[0]-r[0]),e[1]+(e[1]-r[1])]}function wa(r){r=_u(r);for(var e=[],t=null,i=null,a=null,n=0,o=r.length,s=0;s<o;s++){var l=r[s];i=r[s+1];var f=l[0],u={command:f,prePoint:t,params:l,startTangent:null,endTangent:null};switch(f){case"M":a=[l[1],l[2]],n=s;break;case"A":var h=ws(t,l);u.arcParams=h;break;default:break}if(f==="Z")t=a,i=r[n+1];else{var c=l.length;t=[l[c-2],l[c-1]]}i&&i[0]==="Z"&&(i=r[n],e[n]&&(e[n].prePoint=t)),u.currentPoint=t,e[n]&&Cs(t,e[n].currentPoint)&&(e[n].prePoint=u.prePoint);var p=i?[i[i.length-2],i[i.length-1]]:null;u.nextPoint=p;var v=u.prePoint;if(["L","H","V"].includes(f))u.startTangent=[v[0]-t[0],v[1]-t[1]],u.endTangent=[t[0]-v[0],t[1]-v[1]];else if(f==="Q"){var m=[l[1],l[2]];u.startTangent=[v[0]-m[0],v[1]-m[1]],u.endTangent=[t[0]-m[0],t[1]-m[1]]}else if(f==="T"){var g=e[s-1],m=Xv(g.currentPoint,v);g.command==="Q"?(u.command="Q",u.startTangent=[v[0]-m[0],v[1]-m[1]],u.endTangent=[t[0]-m[0],t[1]-m[1]]):(u.command="TL",u.startTangent=[v[0]-t[0],v[1]-t[1]],u.endTangent=[t[0]-v[0],t[1]-v[1]])}else if(f==="C"){var y=[l[1],l[2]],w=[l[3],l[4]];u.startTangent=[v[0]-y[0],v[1]-y[1]],u.endTangent=[t[0]-w[0],t[1]-w[1]],u.startTangent[0]===0&&u.startTangent[1]===0&&(u.startTangent=[y[0]-w[0],y[1]-w[1]]),u.endTangent[0]===0&&u.endTangent[1]===0&&(u.endTangent=[w[0]-y[0],w[1]-y[1]])}else if(f==="S"){var g=e[s-1],y=Xv(g.currentPoint,v),w=[l[1],l[2]];g.command==="C"?(u.command="C",u.startTangent=[v[0]-y[0],v[1]-y[1]],u.endTangent=[t[0]-w[0],t[1]-w[1]]):(u.command="SQ",u.startTangent=[v[0]-w[0],v[1]-w[1]],u.endTangent=[t[0]-w[0],t[1]-w[1]])}else if(f==="A"){var x=.001,C=u.arcParams||{},A=C.cx,T=A===void 0?0:A,E=C.cy,k=E===void 0?0:E,P=C.rx,L=P===void 0?0:P,R=C.ry,N=R===void 0?0:R,H=C.sweepFlag,V=H===void 0?0:H,Q=C.startAngle,mt=Q===void 0?0:Q,ct=C.endAngle,bt=ct===void 0?0:ct;V===0&&(x*=-1);var it=L*Math.cos(mt-x)+T,Nt=N*Math.sin(mt-x)+k;u.startTangent=[it-a[0],Nt-a[1]];var te=L*Math.cos(mt+bt+x)+T,je=N*Math.sin(mt+bt-x)+k;u.endTangent=[v[0]-te,v[1]-je]}e.push(u)}return e}var Wv=function(r,e,t){return r>=e&&r<=t};function Ms(r,e,t,i){var a=.001,n={x:t.x-r.x,y:t.y-r.y},o={x:e.x-r.x,y:e.y-r.y},s={x:i.x-t.x,y:i.y-t.y},l=o.x*s.y-o.y*s.x,f=l*l,u=o.x*o.x+o.y*o.y,h=s.x*s.x+s.y*s.y,c=null;if(f>a*u*h){var p=(n.x*s.y-n.y*s.x)/l,v=(n.x*o.y-n.y*o.x)/l;Wv(p,0,1)&&Wv(v,0,1)&&(c={x:r.x+p*o.x,y:r.y+p*o.y})}return c}var SA=1e-6;function Nu(r){return Math.abs(r)<SA?0:r<0?-1:1}function AA(r,e,t){return(t[0]-r[0])*(e[1]-r[1])===(e[0]-r[0])*(t[1]-r[1])&&Math.min(r[0],e[0])<=t[0]&&t[0]<=Math.max(r[0],e[0])&&Math.min(r[1],e[1])<=t[1]&&t[1]<=Math.max(r[1],e[1])}function Hn(r,e,t){var i=!1,a=r.length;if(a<=2)return!1;for(var n=0;n<a;n++){var o=r[n],s=r[(n+1)%a];if(AA(o,s,[e,t]))return!0;Nu(o[1]-t)>0!=Nu(s[1]-t)>0&&Nu(e-(t-o[1])*(o[0]-s[0])/(o[1]-s[1])-o[0])<0&&(i=!i)}return i}function qv(r){for(var e=[],t=r.length,i=0;i<t-1;i++){var a=r[i],n=r[i+1];e.push({from:{x:a[0],y:a[1]},to:{x:n[0],y:n[1]}})}if(e.length>1){var o=r[0],s=r[t-1];e.push({from:{x:s[0],y:s[1]},to:{x:o[0],y:o[1]}})}return e}function bA(r,e){var t=!1;return M(r,function(i){if(Ms(i.from,i.to,e.from,e.to))return t=!0,!1}),t}function Uv(r){var e=r.map(function(i){return i[0]}),t=r.map(function(i){return i[1]});return{minX:Math.min.apply(null,e),maxX:Math.max.apply(null,e),minY:Math.min.apply(null,t),maxY:Math.max.apply(null,t)}}function TA(r,e){return!(e.minX>r.maxX||e.maxX<r.minX||e.minY>r.maxY||e.maxY<r.minY)}function Ss(r,e){if(r.length<2||e.length<2)return!1;var t=Uv(r),i=Uv(e);if(!TA(t,i))return!1;var a=!1;if(M(e,function(l){if(Hn(r,l[0],l[1]))return a=!0,!1}),a||(M(r,function(l){if(Hn(e,l[0],l[1]))return a=!0,!1}),a))return!0;var n=qv(r),o=qv(e),s=!1;return M(o,function(l){if(bA(n,l))return s=!0,!1}),s}function EA(r,e){for(var t=[],i=[],a=[],n=0;n<r.length;n++){var o=r[n],s=o.currentPoint,l=o.params,f=o.prePoint,u=void 0;switch(o.command){case"Q":u=Gn.box(f[0],f[1],l[1],l[2],l[3],l[4]);break;case"C":u=Sr.box(f[0],f[1],l[1],l[2],l[3],l[4],l[5],l[6]);break;case"A":var h=o.arcParams;u=Iu.box(h.cx,h.cy,h.rx,h.ry,h.xRotation,h.startAngle,h.endAngle);break;default:t.push(s[0]),i.push(s[1]);break}u&&(o.box=u,t.push(u.x,u.x+u.width),i.push(u.y,u.y+u.height)),e&&(o.command==="L"||o.command==="M")&&o.prePoint&&o.nextPoint&&a.push(o)}t=t.filter(function(y){return!Number.isNaN(y)&&y!==1/0&&y!==-1/0}),i=i.filter(function(y){return!Number.isNaN(y)&&y!==1/0&&y!==-1/0});var c=Vt(t),p=Vt(i),v=Dt(t),m=Dt(i);if(a.length===0)return{x:c,y:p,width:v-c,height:m-p};for(var n=0;n<a.length;n++){var o=a[n],s=o.currentPoint,g=void 0;s[0]===c?(g=As(o,e),c=c-g.xExtra):s[0]===v&&(g=As(o,e),v=v+g.xExtra),s[1]===p?(g=As(o,e),p=p-g.yExtra):s[1]===m&&(g=As(o,e),m=m+g.yExtra)}return{x:c,y:p,width:v-c,height:m-p}}function As(r,e){var t=r.prePoint,i=r.currentPoint,a=r.nextPoint,n=Math.pow(i[0]-t[0],2)+Math.pow(i[1]-t[1],2),o=Math.pow(i[0]-a[0],2)+Math.pow(i[1]-a[1],2),s=Math.pow(t[0]-a[0],2)+Math.pow(t[1]-a[1],2),l=Math.acos((n+o-s)/(2*Math.sqrt(n)*Math.sqrt(o)));if(!l||Math.sin(l)===0||pt(l,0))return{xExtra:0,yExtra:0};var f=Math.abs(Math.atan2(a[1]-i[1],a[0]-i[0])),u=Math.abs(Math.atan2(a[0]-i[0],a[1]-i[1]));f=f>Math.PI/2?Math.PI-f:f,u=u>Math.PI/2?Math.PI-u:u;var h={xExtra:Math.cos(l/2-f)*(e/2*(1/Math.sin(l/2)))-e/2||0,yExtra:Math.cos(u-l/2)*(e/2*(1/Math.sin(l/2)))-e/2||0};return h}function jv(r){var e=r.attr(),t=e.path,i=e.stroke,a=i?e.lineWidth:0,n=r.get("segments")||wa(t),o=EA(n,a),s=o.x,l=o.y,f=o.width,u=o.height,h={minX:s,minY:l,maxX:s+f,maxY:l+u};return h=xa(r,h),{x:h.minX,y:h.minY,width:h.maxX-h.minX,height:h.maxY-h.minY}}function Zv(r){var e=r.attr(),t=e.x1,i=e.y1,a=e.x2,n=e.y2,o=Math.min(t,a),s=Math.max(t,a),l=Math.min(i,n),f=Math.max(i,n),u={minX:o,maxX:s,minY:l,maxY:f};return u=xa(r,u),{x:u.minX,y:u.minY,width:u.maxX-u.minX,height:u.maxY-u.minY}}function Qv(r){var e=r.attr(),t=e.x,i=e.y,a=e.rx,n=e.ry;return{x:t-a,y:i-n,width:a*2,height:n*2}}ve("rect",Au);ve("image",Au);ve("circle",bu);ve("marker",bu);ve("polyline",Nv);ve("polygon",Gv);ve("text",Hv);ve("path",jv);ve("line",Zv);ve("ellipse",Qv);var Gu=0,$v=1/2,Kv=1/2,Jv=.05;var LA=function(){function r(e){var t=e.xField,i=e.yField,a=e.adjustNames,n=a===void 0?["x","y"]:a,o=e.dimValuesMap;this.adjustNames=n,this.xField=t,this.yField=i,this.dimValuesMap=o}return r.prototype.isAdjust=function(e){return this.adjustNames.indexOf(e)>=0},r.prototype.getAdjustRange=function(e,t,i){var a=this.yField,n=i.indexOf(t),o=i.length,s,l;return!a&&this.isAdjust("y")?(s=0,l=1):o>1?(s=i[n===0?0:n-1],l=i[n===o-1?o-1:n+1],n!==0?s+=(t-s)/2:s-=(l-t)/2,n!==o-1?l-=(l-t)/2:l+=(t-i[o-2])/2):(s=t===0?0:t-.5,l=t===0?1:t+.5),{pre:s,next:l}},r.prototype.adjustData=function(e,t){var i=this,a=this.getDimValues(t);M(e,function(n,o){M(a,function(s,l){i.adjustDim(l,s,n,o)})})},r.prototype.groupData=function(e,t){return M(e,function(i){i[t]===void 0&&(i[t]=Gu)}),jt(e,t)},r.prototype.adjustDim=function(e,t,i,a){},r.prototype.getDimValues=function(e){var t=this,i=t.xField,a=t.yField,n=J({},this.dimValuesMap),o=[];if(i&&this.isAdjust("x")&&o.push(i),a&&this.isAdjust("y")&&o.push(a),o.forEach(function(l){n&&n[l]||(n[l]=Ut(e,l).sort(function(f,u){return f-u}))}),!a&&this.isAdjust("y")){var s="y";n[s]=[Gu,1]}return n},r}(),He=LA;var tm={},Vn=function(r){return tm[r.toLowerCase()]},Ma=function(r,e){if(Vn(r))throw new Error("Adjust type '"+r+"' existed.");tm[r.toLowerCase()]=e};var Yu=function(r,e){return Yu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var a in i)i.hasOwnProperty(a)&&(t[a]=i[a])},Yu(r,e)};function ai(r,e){Yu(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Ie=function(){return Ie=Object.assign||function(e){for(var t,i=1,a=arguments.length;i<a;i++){t=arguments[i];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},Ie.apply(this,arguments)};var IA=function(r){ai(e,r);function e(t){var i=r.call(this,t)||this;i.cacheMap={},i.adjustDataArray=[],i.mergeData=[];var a=t.marginRatio,n=a===void 0?$v:a,o=t.dodgeRatio,s=o===void 0?Kv:o,l=t.dodgeBy,f=t.intervalPadding,u=t.dodgePadding,h=t.xDimensionLength,c=t.groupNum,p=t.defaultSize,v=t.maxColumnWidth,m=t.minColumnWidth,g=t.columnWidthRatio,y=t.customOffset;return i.marginRatio=n,i.dodgeRatio=s,i.dodgeBy=l,i.intervalPadding=f,i.dodgePadding=u,i.xDimensionLegenth=h,i.groupNum=c,i.defaultSize=p,i.maxColumnWidth=v,i.minColumnWidth=m,i.columnWidthRatio=g,i.customOffset=y,i}return e.prototype.process=function(t){var i=zt(t),a=Ft(i),n=this.dodgeBy,o=n?gf(a,n):i;return this.cacheMap={},this.adjustDataArray=o,this.mergeData=a,this.adjustData(o,a),this.adjustDataArray=[],this.mergeData=[],i},e.prototype.adjustDim=function(t,i,a,n){var o=this,s=this.customOffset,l=this.getDistribution(t),f=this.groupData(a,t);return M(f,function(u,h){var c;i.length===1?c={pre:i[0]-1,next:i[0]+1}:c=o.getAdjustRange(t,parseFloat(h),i),M(u,function(p){var v=p[t],m=l[v],g=m.indexOf(n);if(I(s))p[t]=o.getDodgeOffset(c,g,m.length);else{var y=c.pre,w=c.next;p[t]=D(s)?s(p,c):(y+w)/2+s}})}),[]},e.prototype.getDodgeOffset=function(t,i,a){var n=this,o=n.dodgeRatio,s=n.marginRatio,l=n.intervalPadding,f=n.dodgePadding,u=t.pre,h=t.next,c=h-u,p;if(!I(l)&&I(f)&&l>=0){var v=this.getIntervalOnlyOffset(a,i);p=u+v}else if(!I(f)&&I(l)&&f>=0){var v=this.getDodgeOnlyOffset(a,i);p=u+v}else if(!I(l)&&!I(f)&&l>=0&&f>=0){var v=this.getIntervalAndDodgeOffset(a,i);p=u+v}else{var m=c*o/a,g=s*m,v=1/2*(c-a*m-(a-1)*g)+((i+1)*m+i*g)-1/2*m-1/2*c;p=(u+h)/2+v}return p},e.prototype.getIntervalOnlyOffset=function(t,i){var a=this,n=a.defaultSize,o=a.intervalPadding,s=a.xDimensionLegenth,l=a.groupNum,f=a.dodgeRatio,u=a.maxColumnWidth,h=a.minColumnWidth,c=a.columnWidthRatio,p=o/s,v=(1-(l-1)*p)/l*f/(t-1),m=((1-p*(l-1))/l-v*(t-1))/t;if(m=I(c)?m:1/l/t*c,!I(u)){var g=u/s;m=Math.min(m,g)}if(!I(h)){var y=h/s;m=Math.max(m,y)}m=n?n/s:m,v=((1-(l-1)*p)/l-t*m)/(t-1);var w=((1/2+i)*m+i*v+1/2*p)*l-p/2;return w},e.prototype.getDodgeOnlyOffset=function(t,i){var a=this,n=a.defaultSize,o=a.dodgePadding,s=a.xDimensionLegenth,l=a.groupNum,f=a.marginRatio,u=a.maxColumnWidth,h=a.minColumnWidth,c=a.columnWidthRatio,p=o/s,v=1*f/(l-1),m=((1-v*(l-1))/l-p*(t-1))/t;if(m=c?1/l/t*c:m,!I(u)){var g=u/s;m=Math.min(m,g)}if(!I(h)){var y=h/s;m=Math.max(m,y)}m=n?n/s:m,v=(1-(m*t+p*(t-1))*l)/(l-1);var w=((1/2+i)*m+i*p+1/2*v)*l-v/2;return w},e.prototype.getIntervalAndDodgeOffset=function(t,i){var a=this,n=a.intervalPadding,o=a.dodgePadding,s=a.xDimensionLegenth,l=a.groupNum,f=n/s,u=o/s,h=((1-f*(l-1))/l-u*(t-1))/t,c=((1/2+i)*h+i*u+1/2*f)*l-f/2;return c},e.prototype.getDistribution=function(t){var i=this.adjustDataArray,a=this.cacheMap,n=a[t];return n||(n={},M(i,function(o,s){var l=Ut(o,t);l.length||l.push(0),M(l,function(f){n[f]||(n[f]=[]),n[f].push(s)})}),a[t]=n),n},e}(He),em=IA;function PA(r,e){return(e-r)*Math.random()+r}var BA=function(r){ai(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.process=function(t){var i=zt(t),a=Ft(i);return this.adjustData(i,a),i},e.prototype.adjustDim=function(t,i,a){var n=this,o=this.groupData(a,t);return M(o,function(s,l){return n.adjustGroup(s,t,parseFloat(l),i)})},e.prototype.getAdjustOffset=function(t){var i=t.pre,a=t.next,n=(a-i)*Jv;return PA(i+n,a-n)},e.prototype.adjustGroup=function(t,i,a,n){var o=this,s=this.getAdjustRange(i,a,n);return M(t,function(l){l[i]=o.getAdjustOffset(s)}),t},e}(He),rm=BA;var Hu=Lf,kA=function(r){ai(e,r);function e(t){var i=r.call(this,t)||this,a=t.adjustNames,n=a===void 0?["y"]:a,o=t.height,s=o===void 0?NaN:o,l=t.size,f=l===void 0?10:l,u=t.reverseOrder,h=u===void 0?!1:u;return i.adjustNames=n,i.height=s,i.size=f,i.reverseOrder=h,i}return e.prototype.process=function(t){var i=this,a=i.yField,n=i.reverseOrder,o=a?this.processStack(t):this.processOneDimStack(t);return n?this.reverse(o):o},e.prototype.reverse=function(t){return t.slice(0).reverse()},e.prototype.processStack=function(t){var i=this,a=i.xField,n=i.yField,o=i.reverseOrder,s=o?this.reverse(t):t,l=new Hu,f=new Hu;return s.map(function(u){return u.map(function(h){var c,p=b(h,a,0),v=b(h,[n]),m=p.toString();if(v=B(v)?v[1]:v,!I(v)){var g=v>=0?l:f;g.has(m)||g.set(m,0);var y=g.get(m),w=v+y;return g.set(m,w),Ie(Ie({},h),(c={},c[n]=[y,w],c))}return h})})},e.prototype.processOneDimStack=function(t){var i=this,a=this,n=a.xField,o=a.height,s=a.reverseOrder,l="y",f=s?this.reverse(t):t,u=new Hu;return f.map(function(h){return h.map(function(c){var p,v=i.size,m=c[n],g=v*2/o;u.has(m)||u.set(m,g/2);var y=u.get(m);return u.set(m,y+g),Ie(Ie({},c),(p={},p[l]=y,p))})})},e}(He),im=kA;var OA=function(r){ai(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.process=function(t){var i=Ft(t),a=this,n=a.xField,o=a.yField,s=this.getXValuesMaxMap(i),l=Math.max.apply(Math,Object.keys(s).map(function(f){return s[f]}));return Mt(t,function(f){return Mt(f,function(u){var h,c,p=u[o],v=u[n];if(B(p)){var m=(l-s[v])/2;return Ie(Ie({},u),(h={},h[o]=Mt(p,function(y){return m+y}),h))}var g=(l-p)/2;return Ie(Ie({},u),(c={},c[o]=[g,p+g],c))})})},e.prototype.getXValuesMaxMap=function(t){var i=this,a=this,n=a.xField,o=a.yField,s=jt(t,function(l){return l[n]});return bf(s,function(l){return i.getDimMaxValue(l,o)})},e.prototype.getDimMaxValue=function(t,i){var a=Mt(t,function(o){return b(o,i,[])}),n=Ft(a);return Math.max.apply(Math,n)},e}(He),am=OA;Ma("Dodge",em);Ma("Jitter",rm);Ma("Stack",im);Ma("Symmetric",am);var nm=function(r,e){return G(e)?e:r.invert(r.scale(e))},FA=function(){function r(e){this.names=[],this.scales=[],this.linear=!1,this.values=[],this.callback=function(){return[]},this._parseCfg(e)}return r.prototype.mapping=function(){for(var e=this,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var a=t.map(function(n,o){return e._toOriginParam(n,e.scales[o])});return this.callback.apply(this,a)},r.prototype.getLinearValue=function(e){var t=this.values.length-1,i=Math.floor(t*e),a=t*e-i,n=this.values[i],o=i===t?n:this.values[i+1];return n+(o-n)*a},r.prototype.getNames=function(){for(var e=this.scales,t=this.names,i=Math.min(e.length,t.length),a=[],n=0;n<i;n+=1)a.push(t[n]);return a},r.prototype.getFields=function(){return this.scales.map(function(e){return e.field})},r.prototype.getScale=function(e){return this.scales[this.names.indexOf(e)]},r.prototype.defaultCallback=function(){for(var e=this,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return t.length===0?this.values:t.map(function(a,n){var o=e.scales[n];return o.type==="identity"?o.values[0]:e._getAttributeValue(o,a)})},r.prototype._parseCfg=function(e){var t=this,i=e.type,a=i===void 0?"base":i,n=e.names,o=n===void 0?[]:n,s=e.scales,l=s===void 0?[]:s,f=e.values,u=f===void 0?[]:f,h=e.callback;this.type=a,this.scales=l,this.values=u,this.names=o,this.callback=function(){for(var c=[],p=0;p<arguments.length;p++)c[p]=arguments[p];if(h){var v=h.apply(void 0,c);if(!I(v))return[v]}return t.defaultCallback.apply(t,c)}},r.prototype._getAttributeValue=function(e,t){if(e.isCategory&&!this.linear){var i=e.translate(t);return this.values[i%this.values.length]}var a=e.scale(t);return this.getLinearValue(a)},r.prototype._toOriginParam=function(e,t){return t.isLinear?e:B(e)?e.map(function(i){return nm(t,i)}):nm(t,e)},r}(),we=FA;var _A=/rgba?\(([\s.,0-9]+)\)/,RA=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,DA=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,NA=/[\d.]+:(#[^\s]+|[^\)]+\))/gi,GA=function(r){return/^[r,R,L,l]{1}[\s]*\(/.test(r)},YA=function(){var r=document.createElement("i");return r.title="Web Colour Picker",r.style.display="none",document.body.appendChild(r),r},Vu=function(r,e,t,i){return r[i]+(e[i]-r[i])*t};function om(r){return"#"+zu(r[0])+zu(r[1])+zu(r[2])}var sm=function(r){return[parseInt(r.substr(1,2),16),parseInt(r.substr(3,2),16),parseInt(r.substr(5,2),16)]},zu=function(r){var e=Math.round(r).toString(16);return e.length===1?"0"+e:e},HA=function(r,e){var t=isNaN(Number(e))||e<0?0:e>1?1:Number(e),i=r.length-1,a=Math.floor(i*t),n=i*t-a,o=r[a],s=a===i?o:r[a+1];return om([Vu(o,s,n,0),Vu(o,s,n,1),Vu(o,s,n,2)])},bs,lm=function(r){if(r[0]==="#"&&r.length===7)return r;bs||(bs=YA()),bs.style.color=r;var e=document.defaultView.getComputedStyle(bs,"").getPropertyValue("color"),t=_A.exec(e),i=t[1].split(/\s*,\s*/).map(function(a){return Number(a)});return e=om(i),e},VA=function(r){var e=G(r)?r.split("-"):r,t=Mt(e,function(i){return sm(i.indexOf("#")===-1?lm(i):i)});return function(i){return HA(t,i)}},zA=function(r){if(GA(r)){var e,t=void 0;if(r[0]==="l"){var i=RA.exec(r),a=+i[1]+90;t=i[2],e="linear-gradient("+a+"deg, "}else if(r[0]==="r"){e="radial-gradient(";var i=DA.exec(r);t=i[4]}var n=t.match(NA);return M(n,function(o,s){var l=o.split(":");e+=l[1]+" "+l[0]*100+"%",s!==n.length-1&&(e+=", ")}),e+=")",e}return r},Ar={rgb2arr:sm,gradient:VA,toRGB:yr(lm),toCSSGradient:zA};var XA=function(r){S(e,r);function e(t){var i=r.call(this,t)||this;return i.type="color",i.names=["color"],G(i.values)&&(i.linear=!0),i.gradient=Ar.gradient(i.values),i}return e.prototype.getLinearValue=function(t){return this.gradient(t)},e}(we),Xu=XA;var WA=function(r){S(e,r);function e(t){var i=r.call(this,t)||this;return i.type="opacity",i.names=["opacity"],i}return e}(we),fm=WA;var qA=function(r){S(e,r);function e(t){var i=r.call(this,t)||this;return i.names=["x","y"],i.type="position",i}return e.prototype.mapping=function(t,i){var a=this.scales,n=a[0],o=a[1];return I(t)||I(i)?[]:[B(t)?t.map(function(s){return n.scale(s)}):n.scale(t),B(i)?i.map(function(s){return o.scale(s)}):o.scale(i)]},e}(we),um=qA;var UA=function(r){S(e,r);function e(t){var i=r.call(this,t)||this;return i.type="shape",i.names=["shape"],i}return e.prototype.getLinearValue=function(t){var i=Math.round((this.values.length-1)*t);return this.values[i]},e}(we),hm=UA;var jA=function(r){S(e,r);function e(t){var i=r.call(this,t)||this;return i.type="size",i.names=["size"],i}return e}(we),cm=jA;var pm={};function Ts(r){return pm[r]}function Pe(r,e){pm[r]=e}var ZA=function(){function r(e){this.type="base",this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=e,this.initCfg(),this.init()}return r.prototype.translate=function(e){return e},r.prototype.change=function(e){J(this.__cfg__,e),this.init()},r.prototype.clone=function(){return this.constructor(this.__cfg__)},r.prototype.getTicks=function(){var e=this;return Mt(this.ticks,function(t,i){return K(t)?t:{text:e.getText(t,i),tickValue:t,value:e.scale(t)}})},r.prototype.getText=function(e,t){var i=this.formatter,a=i?i(e,t):e;return I(a)||!D(a.toString)?"":a.toString()},r.prototype.getConfig=function(e){return this.__cfg__[e]},r.prototype.init=function(){J(this,this.__cfg__),this.setDomain(),Gt(this.getConfig("ticks"))&&(this.ticks=this.calculateTicks())},r.prototype.initCfg=function(){},r.prototype.setDomain=function(){},r.prototype.calculateTicks=function(){var e=this.tickMethod,t=[];if(G(e)){var i=Ts(e);if(!i)throw new Error("There is no method to to calculate ticks!");t=i(this)}else D(e)&&(t=e(this));return t},r.prototype.rangeMin=function(){return this.range[0]},r.prototype.rangeMax=function(){return this.range[1]},r.prototype.calcPercent=function(e,t,i){return z(e)?(e-t)/(i-t):NaN},r.prototype.calcValue=function(e,t,i){return t+e*(i-t)},r}(),Ve=ZA;var QA=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="cat",t.isCategory=!0,t}return e.prototype.buildIndexMap=function(){if(!this.translateIndexMap){this.translateIndexMap=new Map;for(var t=0;t<this.values.length;t++)this.translateIndexMap.set(this.values[t],t)}},e.prototype.translate=function(t){this.buildIndexMap();var i=this.translateIndexMap.get(t);return i===void 0&&(i=z(t)?t:NaN),i},e.prototype.scale=function(t){var i=this.translate(t),a=this.calcPercent(i,this.min,this.max);return this.calcValue(a,this.rangeMin(),this.rangeMax())},e.prototype.invert=function(t){var i=this.max-this.min,a=this.calcPercent(t,this.rangeMin(),this.rangeMax()),n=Math.round(i*a)+this.min;return n<this.min||n>this.max?NaN:this.values[n]},e.prototype.getText=function(t){for(var i=[],a=1;a<arguments.length;a++)i[a-1]=arguments[a];var n=t;return z(t)&&!this.values.includes(t)&&(n=this.values[n]),r.prototype.getText.apply(this,dr([n],i))},e.prototype.initCfg=function(){this.tickMethod="cat"},e.prototype.setDomain=function(){if(I(this.getConfig("min"))&&(this.min=0),I(this.getConfig("max"))){var t=this.values.length;this.max=t>1?t-1:t}this.translateIndexMap&&(this.translateIndexMap=void 0)},e}(Ve),Wi=QA;var Uu={};Bt(Uu,{assign:()=>si,default:()=>qu,defaultI18n:()=>Wu,format:()=>Lm,parse:()=>Im,setGlobalDateI18n:()=>Tm,setGlobalDateMasks:()=>Em});var wm=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,oi="\\d\\d?",ni="\\d\\d",$A="\\d{3}",KA="\\d{4}",zn="[^\\s]+",Mm=/\[([^]*?)\]/gm;function Sm(r,e){for(var t=[],i=0,a=r.length;i<a;i++)t.push(r[i].substr(0,e));return t}var vm=function(r){return function(e,t){var i=t[r].map(function(n){return n.toLowerCase()}),a=i.indexOf(e.toLowerCase());return a>-1?a:null}};function si(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];for(var i=0,a=e;i<a.length;i++){var n=a[i];for(var o in n)r[o]=n[o]}return r}var Am=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],bm=["January","February","March","April","May","June","July","August","September","October","November","December"],JA=Sm(bm,3),tb=Sm(Am,3),Wu={dayNamesShort:tb,dayNames:Am,monthNamesShort:JA,monthNames:bm,amPm:["am","pm"],DoFn:function(r){return r+["th","st","nd","rd"][r%10>3?0:(r-r%10!==10?1:0)*r%10]}},Es=si({},Wu),Tm=function(r){return Es=si(Es,r)},mm=function(r){return r.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},me=function(r,e){for(e===void 0&&(e=2),r=String(r);r.length<e;)r="0"+r;return r},eb={D:function(r){return String(r.getDate())},DD:function(r){return me(r.getDate())},Do:function(r,e){return e.DoFn(r.getDate())},d:function(r){return String(r.getDay())},dd:function(r){return me(r.getDay())},ddd:function(r,e){return e.dayNamesShort[r.getDay()]},dddd:function(r,e){return e.dayNames[r.getDay()]},M:function(r){return String(r.getMonth()+1)},MM:function(r){return me(r.getMonth()+1)},MMM:function(r,e){return e.monthNamesShort[r.getMonth()]},MMMM:function(r,e){return e.monthNames[r.getMonth()]},YY:function(r){return me(String(r.getFullYear()),4).substr(2)},YYYY:function(r){return me(r.getFullYear(),4)},h:function(r){return String(r.getHours()%12||12)},hh:function(r){return me(r.getHours()%12||12)},H:function(r){return String(r.getHours())},HH:function(r){return me(r.getHours())},m:function(r){return String(r.getMinutes())},mm:function(r){return me(r.getMinutes())},s:function(r){return String(r.getSeconds())},ss:function(r){return me(r.getSeconds())},S:function(r){return String(Math.round(r.getMilliseconds()/100))},SS:function(r){return me(Math.round(r.getMilliseconds()/10),2)},SSS:function(r){return me(r.getMilliseconds(),3)},a:function(r,e){return r.getHours()<12?e.amPm[0]:e.amPm[1]},A:function(r,e){return r.getHours()<12?e.amPm[0].toUpperCase():e.amPm[1].toUpperCase()},ZZ:function(r){var e=r.getTimezoneOffset();return(e>0?"-":"+")+me(Math.floor(Math.abs(e)/60)*100+Math.abs(e)%60,4)},Z:function(r){var e=r.getTimezoneOffset();return(e>0?"-":"+")+me(Math.floor(Math.abs(e)/60),2)+":"+me(Math.abs(e)%60,2)}},dm=function(r){return+r-1},gm=[null,oi],ym=[null,zn],xm=["isPm",zn,function(r,e){var t=r.toLowerCase();return t===e.amPm[0]?0:t===e.amPm[1]?1:null}],Cm=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(r){var e=(r+"").match(/([+-]|\d\d)/gi);if(e){var t=+e[1]*60+parseInt(e[2],10);return e[0]==="+"?t:-t}return 0}],rb={D:["day",oi],DD:["day",ni],Do:["day",oi+zn,function(r){return parseInt(r,10)}],M:["month",oi,dm],MM:["month",ni,dm],YY:["year",ni,function(r){var e=new Date,t=+(""+e.getFullYear()).substr(0,2);return+(""+(+r>68?t-1:t)+r)}],h:["hour",oi,void 0,"isPm"],hh:["hour",ni,void 0,"isPm"],H:["hour",oi],HH:["hour",ni],m:["minute",oi],mm:["minute",ni],s:["second",oi],ss:["second",ni],YYYY:["year",KA],S:["millisecond","\\d",function(r){return+r*100}],SS:["millisecond",ni,function(r){return+r*10}],SSS:["millisecond",$A],d:gm,dd:gm,ddd:ym,dddd:ym,MMM:["month",zn,vm("monthNamesShort")],MMMM:["month",zn,vm("monthNames")],a:xm,A:xm,ZZ:Cm,Z:Cm},Ls={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},Em=function(r){return si(Ls,r)},Lm=function(r,e,t){if(e===void 0&&(e=Ls.default),t===void 0&&(t={}),typeof r=="number"&&(r=new Date(r)),Object.prototype.toString.call(r)!=="[object Date]"||isNaN(r.getTime()))throw new Error("Invalid Date pass to format");e=Ls[e]||e;var i=[];e=e.replace(Mm,function(n,o){return i.push(o),"@@@"});var a=si(si({},Es),t);return e=e.replace(wm,function(n){return eb[n](r,a)}),e.replace(/@@@/g,function(){return i.shift()})};function Im(r,e,t){if(t===void 0&&(t={}),typeof e!="string")throw new Error("Invalid format in fecha parse");if(e=Ls[e]||e,r.length>1e3)return null;var i=new Date,a={year:i.getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},n=[],o=[],s=e.replace(Mm,function(C,A){return o.push(mm(A)),"@@@"}),l={},f={};s=mm(s).replace(wm,function(C){var A=rb[C],T=A[0],E=A[1],k=A[3];if(l[T])throw new Error("Invalid format. "+T+" specified twice in format");return l[T]=!0,k&&(f[k]=!0),n.push(A),"("+E+")"}),Object.keys(f).forEach(function(C){if(!l[C])throw new Error("Invalid format. "+C+" is required in specified format")}),s=s.replace(/@@@/g,function(){return o.shift()});var u=r.match(new RegExp(s,"i"));if(!u)return null;for(var h=si(si({},Es),t),c=1;c<u.length;c++){var p=n[c-1],v=p[0],m=p[2],g=m?m(u[c],h):+u[c];if(g==null)return null;a[v]=g}a.isPm===1&&a.hour!=null&&+a.hour!=12?a.hour=+a.hour+12:a.isPm===0&&+a.hour==12&&(a.hour=0);var y;if(a.timezoneOffset==null){y=new Date(a.year,a.month,a.day,a.hour,a.minute,a.second,a.millisecond);for(var w=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],c=0,x=w.length;c<x;c++)if(l[w[c][0]]&&a[w[c][0]]!==y[w[c][1]]())return null}else if(y=new Date(Date.UTC(a.year,a.month,a.day,a.hour,a.minute-a.timezoneOffset,a.second,a.millisecond)),a.month>11||a.month<0||a.day>31||a.day<1||a.hour>23||a.hour<0||a.minute>59||a.minute<0||a.second>59||a.second<0)return null;return y}var ib={format:Lm,parse:Im,defaultI18n:Wu,setGlobalDateI18n:Tm,setGlobalDateMasks:Em},qu=ib;function Pm(r){return function(e,t,i,a){for(var n=I(i)?0:i,o=I(a)?e.length:a;n<o;){var s=n+o>>>1;r(e[s])>t?o=s:n=s+1}return n}}var Bm="format";function Is(r,e){var t=Uu[Bm]||qu[Bm];return t(r,e)}function Aa(r){return G(r)&&(r.indexOf("T")>0?r=new Date(r).getTime():r=new Date(r.replace(/-/gi,"/")).getTime()),xn(r)&&(r=r.getTime()),r}var Be=1e3,li=60*Be,fi=60*li,ir=24*fi,Sa=ir*31,ju=ir*365;var Xn=[["HH:mm:ss",Be],["HH:mm:ss",Be*10],["HH:mm:ss",Be*30],["HH:mm",li],["HH:mm",li*10],["HH:mm",li*30],["HH",fi],["HH",fi*6],["HH",fi*12],["YYYY-MM-DD",ir],["YYYY-MM-DD",ir*4],["YYYY-WW",ir*7],["YYYY-MM",Sa],["YYYY-MM",Sa*4],["YYYY-MM",Sa*6],["YYYY",ir*380]];function km(r,e,t){var i=(e-r)/t,a=Pm(function(o){return o[1]})(Xn,i)-1,n=Xn[a];return a<0?n=Xn[0]:a>=Xn.length&&(n=nt(Xn)),n}var ab=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="timeCat",t}return e.prototype.translate=function(t){t=Aa(t);var i=this.values.indexOf(t);return i===-1&&(z(t)&&t<this.values.length?i=t:i=NaN),i},e.prototype.getText=function(t,i){var a=this.translate(t);if(a>-1){var n=this.values[a],o=this.formatter;return n=o?o(n,i):Is(n,this.mask),n}return t},e.prototype.initCfg=function(){this.tickMethod="time-cat",this.mask="YYYY-MM-DD",this.tickCount=7},e.prototype.setDomain=function(){var t=this.values;M(t,function(i,a){t[a]=Aa(i)}),t.sort(function(i,a){return i-a}),r.prototype.setDomain.call(this)},e}(Wi),Om=ab;var nb=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.isContinuous=!0,t}return e.prototype.scale=function(t){if(I(t))return NaN;var i=this.rangeMin(),a=this.rangeMax(),n=this.max,o=this.min;if(n===o)return i;var s=this.getScalePercent(t);return i+s*(a-i)},e.prototype.init=function(){r.prototype.init.call(this);var t=this.ticks,i=wt(t),a=nt(t);i<this.min&&(this.min=i),a>this.max&&(this.max=a),I(this.minLimit)||(this.min=i),I(this.maxLimit)||(this.max=a)},e.prototype.setDomain=function(){var t=pf(this.values),i=t.min,a=t.max;I(this.min)&&(this.min=i),I(this.max)&&(this.max=a),this.min>this.max&&(this.min=i,this.max=a)},e.prototype.calculateTicks=function(){var t=this,i=r.prototype.calculateTicks.call(this);return this.nice||(i=St(i,function(a){return a>=t.min&&a<=t.max})),i},e.prototype.getScalePercent=function(t){var i=this.max,a=this.min;return(t-a)/(i-a)},e.prototype.getInvertPercent=function(t){return(t-this.rangeMin())/(this.rangeMax()-this.rangeMin())},e}(Ve),ui=nb;var ob=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="linear",t.isLinear=!0,t}return e.prototype.invert=function(t){var i=this.getInvertPercent(t);return this.min+i*(this.max-this.min)},e.prototype.initCfg=function(){this.tickMethod="wilkinson-extended",this.nice=!1},e}(ui),qi=ob;function ar(r,e){var t=Math.E,i;return e>=0?i=Math.pow(t,Math.log(e)/r):i=Math.pow(t,Math.log(-e)/r)*-1,i}function de(r,e){return r===1?1:Math.log(e)/Math.log(r)}function Ps(r,e,t){I(t)&&(t=Math.max.apply(null,r));var i=t;return M(r,function(a){a>0&&a<i&&(i=a)}),i===t&&(i=t/e),i>1&&(i=1),i}var sb=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="log",t}return e.prototype.invert=function(t){var i=this.base,a=de(i,this.max),n=this.rangeMin(),o=this.rangeMax()-n,s,l=this.positiveMin;if(l){if(t===0)return 0;s=de(i,l/i);var f=1/(a-s)*o;if(t<f)return t/f*l}else s=de(i,this.min);var u=(t-n)/o,h=u*(a-s)+s;return Math.pow(i,h)},e.prototype.initCfg=function(){this.tickMethod="log",this.base=10,this.tickCount=6,this.nice=!0},e.prototype.setDomain=function(){r.prototype.setDomain.call(this);var t=this.min;if(t<0)throw new Error("When you use log scale, the minimum value must be greater than zero!");t===0&&(this.positiveMin=Ps(this.values,this.base,this.max))},e.prototype.getScalePercent=function(t){var i=this.max,a=this.min;if(i===a||t<=0)return 0;var n=this.base,o=this.positiveMin;o&&(a=o*1/n);var s;return t<o?s=t/o/(de(n,i)-de(n,a)):s=(de(n,t)-de(n,a))/(de(n,i)-de(n,a)),s},e}(ui),Fm=sb;var lb=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="pow",t}return e.prototype.invert=function(t){var i=this.getInvertPercent(t),a=this.exponent,n=ar(a,this.max),o=ar(a,this.min),s=i*(n-o)+o,l=s>=0?1:-1;return Math.pow(s,a)*l},e.prototype.initCfg=function(){this.tickMethod="pow",this.exponent=2,this.tickCount=5,this.nice=!0},e.prototype.getScalePercent=function(t){var i=this.max,a=this.min;if(i===a)return 0;var n=this.exponent,o=(ar(n,t)-ar(n,a))/(ar(n,i)-ar(n,a));return o},e}(ui),_m=lb;var fb=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="time",t}return e.prototype.getText=function(t,i){var a=this.translate(t),n=this.formatter;return n?n(a,i):Is(a,this.mask)},e.prototype.scale=function(t){var i=t;return(G(i)||xn(i))&&(i=this.translate(i)),r.prototype.scale.call(this,i)},e.prototype.translate=function(t){return Aa(t)},e.prototype.initCfg=function(){this.tickMethod="time-pretty",this.mask="YYYY-MM-DD",this.tickCount=7,this.nice=!1},e.prototype.setDomain=function(){var t=this.values,i=this.getConfig("min"),a=this.getConfig("max");if((!I(i)||!z(i))&&(this.min=this.translate(this.min)),(!I(a)||!z(a))&&(this.max=this.translate(this.max)),t&&t.length){var n=[],o=1/0,s=o,l=0;M(t,function(f){var u=Aa(f);if(isNaN(u))throw new TypeError("Invalid Time: "+f+" in time scale!");o>u?(s=o,o=u):s>u&&(s=u),l<u&&(l=u),n.push(u)}),t.length>1&&(this.minTickInterval=s-o),I(i)&&(this.min=o),I(a)&&(this.max=l)}},e}(qi),Rm=fb;var ub=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="quantize",t}return e.prototype.invert=function(t){var i=this.ticks,a=i.length,n=this.getInvertPercent(t),o=Math.floor(n*(a-1));if(o>=a-1)return nt(i);if(o<0)return wt(i);var s=i[o],l=i[o+1],f=o/(a-1),u=(o+1)/(a-1);return s+(n-f)/(u-f)*(l-s)},e.prototype.initCfg=function(){this.tickMethod="r-pretty",this.tickCount=5,this.nice=!0},e.prototype.calculateTicks=function(){var t=r.prototype.calculateTicks.call(this);return this.nice||(nt(t)!==this.max&&t.push(this.max),wt(t)!==this.min&&t.unshift(this.min)),t},e.prototype.getScalePercent=function(t){var i=this.ticks;if(t<wt(i))return 0;if(t>nt(i))return 1;var a=0;return M(i,function(n,o){if(t>=n)a=o;else return!1}),a/(i.length-1)},e}(ui),Bs=ub;var hb=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="quantile",t}return e.prototype.initCfg=function(){this.tickMethod="quantile",this.tickCount=5,this.nice=!0},e}(Bs),Dm=hb;var Nm={};function ba(r){return Nm[r]}function ke(r,e){if(ba(r))throw new Error("type '"+r+"' existed.");Nm[r]=e}var cb=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="identity",t.isIdentity=!0,t}return e.prototype.calculateTicks=function(){return this.values},e.prototype.scale=function(t){return this.values[0]!==t&&z(t)?t:this.range[0]},e.prototype.invert=function(t){var i=this.range;return t<i[0]||t>i[1]?NaN:this.values[0]},e}(Ve),Gm=cb;function Wn(r){var e=r.values,t=r.tickInterval,i=r.tickCount,a=r.showLast;if(z(t)){var n=St(e,function(v,m){return m%t===0}),o=nt(e);return a&&nt(n)!==o&&n.push(o),n}var s=e.length,l=r.min,f=r.max;if(I(l)&&(l=0),I(f)&&(f=e.length-1),!z(i)||i>=s)return e.slice(l,f+1);if(i<=0||f<=0)return[];for(var u=i===1?s:Math.floor(s/(i-1)),h=[],c=l,p=0;p<i&&!(c>=f);p++)c=Math.min(l+p*u,f),p===i-1&&a?h.push(e[f]):h.push(e[c]);return h}function Qu(r){var e=r.min,t=r.max,i=r.nice,a=r.tickCount,n=new pb;return n.domain([e,t]),i&&n.nice(a),n.ticks(a)}var Zu=5,Ym=Math.sqrt(50),Hm=Math.sqrt(10),Vm=Math.sqrt(2),pb=function(){function r(){this._domain=[0,1]}return r.prototype.domain=function(e){return e?(this._domain=Array.from(e,Number),this):this._domain.slice()},r.prototype.nice=function(e){var t,i;e===void 0&&(e=Zu);var a=this._domain.slice(),n=0,o=this._domain.length-1,s=this._domain[n],l=this._domain[o],f;return l<s&&(t=[l,s],s=t[0],l=t[1],i=[o,n],n=i[0],o=i[1]),f=ks(s,l,e),f>0?(s=Math.floor(s/f)*f,l=Math.ceil(l/f)*f,f=ks(s,l,e)):f<0&&(s=Math.ceil(s*f)/f,l=Math.floor(l*f)/f,f=ks(s,l,e)),f>0?(a[n]=Math.floor(s/f)*f,a[o]=Math.ceil(l/f)*f,this.domain(a)):f<0&&(a[n]=Math.ceil(s*f)/f,a[o]=Math.floor(l*f)/f,this.domain(a)),this},r.prototype.ticks=function(e){return e===void 0&&(e=Zu),vb(this._domain[0],this._domain[this._domain.length-1],e||Zu)},r}();function vb(r,e,t){var i,a=-1,n,o,s;if(e=+e,r=+r,t=+t,r===e&&t>0)return[r];if((i=e<r)&&(n=r,r=e,e=n),(s=ks(r,e,t))===0||!isFinite(s))return[];if(s>0)for(r=Math.ceil(r/s),e=Math.floor(e/s),o=new Array(n=Math.ceil(e-r+1));++a<n;)o[a]=(r+a)*s;else for(r=Math.floor(r*s),e=Math.ceil(e*s),o=new Array(n=Math.ceil(r-e+1));++a<n;)o[a]=(r-a)/s;return i&&o.reverse(),o}function ks(r,e,t){var i=(e-r)/Math.max(0,t),a=Math.floor(Math.log(i)/Math.LN10),n=i/Math.pow(10,a);return a>=0?(n>=Ym?10:n>=Hm?5:n>=Vm?2:1)*Math.pow(10,a):-Math.pow(10,-a)/(n>=Ym?10:n>=Hm?5:n>=Vm?2:1)}function zm(r,e,t){var i;return t==="ceil"?i=Math.ceil(r/e):t==="floor"?i=Math.floor(r/e):i=Math.round(r/e),i*e}function Ui(r,e,t){var i=zm(r,t,"floor"),a=zm(e,t,"ceil");i=gn(i,t),a=gn(a,t);for(var n=[],o=Math.max((a-i)/(Math.pow(2,12)-1),t),s=i;s<=a;s=s+o){var l=gn(s,o);n.push(l)}return{min:i,max:a,ticks:n}}function ji(r,e,t){var i,a=r.minLimit,n=r.maxLimit,o=r.min,s=r.max,l=r.tickCount,f=l===void 0?5:l,u=I(a)?I(e)?o:e:a,h=I(n)?I(t)?s:t:n;if(u>h&&(i=[u,h],h=i[0],u=i[1]),f<=2)return[u,h];for(var c=(h-u)/(f-1),p=[],v=0;v<f;v++)p.push(u+c*v);return p}function $u(r){var e=r.min,t=r.max,i=r.tickInterval,a=r.minLimit,n=r.maxLimit,o=Qu(r);return!I(a)||!I(n)?ji(r,wt(o),nt(o)):i?Ui(e,t,i).ticks:o}function br(r){return Math.abs(r)<1e-15?r:parseFloat(r.toFixed(15))}var mb=[1,5,2,2.5,4,3];var Xm=Number.EPSILON*100;function db(r,e){return(r%e+e)%e}function gb(r){return Math.round(r*1e12)/1e12}function yb(r,e,t,i,a,n){var o=Tt(e),s=Vo(e,r),l=0,f=db(i,n);return(f<Xm||n-f<Xm)&&i<=0&&a>=0&&(l=1),1-s/(o-1)-t+l}function xb(r,e,t){var i=Tt(e),a=Vo(e,r),n=1;return 1-a/(i-1)-t+n}function Cb(r,e,t,i,a,n){var o=(r-1)/(n-a),s=(e-1)/(Math.max(n,i)-Math.min(t,a));return 2-Math.max(o/s,s/o)}function wb(r,e){return r>=e?2-(r-1)/(e-1):1}function Mb(r,e,t,i){var a=e-r;return 1-.5*(Math.pow(e-i,2)+Math.pow(r-t,2))/Math.pow(.1*a,2)}function Sb(r,e,t){var i=e-r;if(t>i){var a=(t-i)/2;return 1-Math.pow(a,2)/Math.pow(.1*i,2)}return 1}function Ab(){return 1}function Ku(r,e,t,i,a,n){t===void 0&&(t=5),i===void 0&&(i=!0),a===void 0&&(a=mb),n===void 0&&(n=[.25,.2,.5,.05]);var o=t<0?0:Math.round(t);if(Number.isNaN(r)||Number.isNaN(e)||typeof r!="number"||typeof e!="number"||!o)return{min:0,max:0,ticks:[]};if(e-r<1e-15||o===1)return{min:r,max:e,ticks:[r]};if(e-r>1e148){var s=t||5,l=(e-r)/s;return{min:r,max:e,ticks:Array(s).fill(null).map(function(te,je){return br(r+l*je)})}}for(var f={score:-2,lmin:0,lmax:0,lstep:0},u=1;u<1/0;){for(var h=0;h<a.length;h+=1){var c=a[h],p=xb(c,a,u);if(n[0]*p+n[1]+n[2]+n[3]<f.score){u=1/0;break}for(var v=2;v<1/0;){var m=wb(v,o);if(n[0]*p+n[1]+n[2]*m+n[3]<f.score)break;for(var g=(e-r)/(v+1)/u/c,y=Math.ceil(Math.log10(g));y<1/0;){var w=u*c*Math.pow(10,y),x=Sb(r,e,w*(v-1));if(n[0]*p+n[1]*x+n[2]*m+n[3]<f.score)break;var C=Math.floor(e/w)*u-(v-1)*u,A=Math.ceil(r/w)*u;if(C<=A)for(var s=A-C,T=0;T<=s;T+=1){var E=C+T,k=E*(w/u),P=k+w*(v-1),L=w,R=yb(c,a,u,k,P,L),N=Mb(r,e,k,P),H=Cb(v,o,r,e,k,P),V=Ab(),Q=n[0]*R+n[1]*N+n[2]*H+n[3]*V;Q>f.score&&(!i||k<=r&&P>=e)&&(f.lmin=k,f.lmax=P,f.lstep=L,f.score=Q)}y+=1}v+=1}}u+=1}var mt=br(f.lmax),ct=br(f.lmin),bt=br(f.lstep),it=Math.floor(gb((mt-ct)/bt))+1,Nt=new Array(it);Nt[0]=br(ct);for(var h=1;h<it;h++)Nt[h]=br(Nt[h-1]+bt);return{min:Math.min(r,wt(Nt)),max:Math.max(e,nt(Nt)),ticks:Nt}}function Ju(r){var e=r.min,t=r.max,i=r.tickCount,a=r.nice,n=r.tickInterval,o=r.minLimit,s=r.maxLimit,l=Ku(e,t,i,a).ticks;return!I(o)||!I(s)?ji(r,wt(l),nt(l)):n?Ui(e,t,n).ticks:l}function th(r){var e=r.base,t=r.tickCount,i=r.min,a=r.max,n=r.values,o,s=de(e,a);if(i>0)o=Math.floor(de(e,i));else{var l=Ps(n,e,a);o=Math.floor(de(e,l))}for(var f=s-o,u=Math.ceil(f/t),h=[],c=o;c<s+u;c=c+u)h.push(Math.pow(e,c));return i<=0&&h.unshift(0),h}function qn(r,e,t){if(t===void 0&&(t=5),r===e)return{max:e,min:r,ticks:[r]};var i=t<0?0:Math.round(t);if(i===0)return{max:e,min:r,ticks:[]};var a=1.5,n=.5+1.5*a,o=e-r,s=o/i,l=Math.pow(10,Math.floor(Math.log10(s))),f=l;2*l-s<a*(s-f)&&(f=2*l,5*l-s<n*(s-f)&&(f=5*l,10*l-s<a*(s-f)&&(f=10*l)));for(var u=Math.ceil(e/f),h=Math.floor(r/f),c=Math.max(u*f,e),p=Math.min(h*f,r),v=Math.floor((c-p)/f)+1,m=new Array(v),g=0;g<v;g++)m[g]=br(p+g*f);return{min:p,max:c,ticks:m}}function eh(r){var e=r.exponent,t=r.tickCount,i=Math.ceil(ar(e,r.max)),a=Math.floor(ar(e,r.min)),n=qn(a,i,t).ticks;return n.map(function(o){var s=o>=0?1:-1;return Math.pow(o,e)*s})}function bb(r,e){var t=r.length*e;return e===1?r[r.length-1]:e===0?r[0]:t%1!==0?r[Math.ceil(t)-1]:r.length%2===0?(r[t-1]+r[t])/2:r[t]}function rh(r){var e=r.tickCount,t=r.values;if(!t||!t.length)return[];for(var i=t.slice().sort(function(s,l){return s-l}),a=[],n=0;n<e;n++){var o=n/(e-1);a.push(bb(i,o))}return a}function ih(r){var e=r.min,t=r.max,i=r.tickCount,a=r.tickInterval,n=r.minLimit,o=r.maxLimit,s=qn(e,t,i).ticks;return!I(n)||!I(o)?ji(r,wt(s),nt(s)):a?Ui(e,t,a).ticks:s}function ah(r){var e=r.min,t=r.max,i=r.minTickInterval,a=r.tickInterval,n=r.tickCount;if(a)n=Math.ceil((t-e)/a);else{a=km(e,t,n)[1];var o=(t-e)/a,s=o/n;s>1&&(a=a*Math.ceil(s)),i&&a<i&&(a=i)}a=Math.max(Math.floor((t-e)/(Math.pow(2,12)-1)),a);for(var l=[],f=e;f<t+a;f+=a)l.push(f);return l}function nh(r){var e=Wn(d({showLast:!0},r));return e}function Os(r){return new Date(r).getFullYear()}function Tb(r){return new Date(r,0,1).getTime()}function oh(r){return new Date(r).getMonth()}function Eb(r,e){var t=Os(r),i=Os(e),a=oh(r),n=oh(e);return(i-t)*12+(n-a)%12}function Lb(r,e){return new Date(r,e,1).getTime()}function Ib(r,e){return Math.ceil((e-r)/ir)}function Pb(r,e){return Math.ceil((e-r)/fi)}function Bb(r,e){return Math.ceil((e-r)/(60*1e3))}function sh(r){var e=r.min,t=r.max,i=r.minTickInterval,a=r.tickCount,n=r.tickInterval,o=[];n||(n=(t-e)/a,i&&n<i&&(n=i)),n=Math.max(Math.floor((t-e)/(Math.pow(2,12)-1)),n);var s=Os(e);if(n>ju)for(var l=Os(t),f=Math.ceil(n/ju),u=s;u<=l+f;u=u+f)o.push(Tb(u));else if(n>Sa)for(var h=Math.ceil(n/Sa),c=oh(e),p=Eb(e,t),u=0;u<=p+h;u=u+h)o.push(Lb(s,u+c));else if(n>ir)for(var v=new Date(e),m=v.getFullYear(),g=v.getMonth(),y=v.getDate(),w=Math.ceil(n/ir),x=Ib(e,t),u=0;u<x+w;u=u+w)o.push(new Date(m,g,y+u).getTime());else if(n>fi)for(var v=new Date(e),m=v.getFullYear(),g=v.getMonth(),w=v.getDate(),C=v.getHours(),A=Math.ceil(n/fi),T=Pb(e,t),u=0;u<=T+A;u=u+A)o.push(new Date(m,g,w,C+u).getTime());else if(n>li)for(var E=Bb(e,t),k=Math.ceil(n/li),u=0;u<=E+k;u=u+k)o.push(e+u*li);else{var P=n;P<Be&&(P=Be);for(var L=Math.floor(e/Be)*Be,R=Math.ceil((t-e)/Be),N=Math.ceil(P/Be),u=0;u<R+N;u=u+N)o.push(L+u*Be)}return o.length>=512&&console.warn("Notice: current ticks length("+o.length+') >= 512, may cause performance issues, even out of memory. Because of the configure "tickInterval"(in milliseconds, current is '+n+") is too small, increase the value to solve the problem!"),o}Pe("cat",Wn);Pe("time-cat",nh);Pe("wilkinson-extended",Ju);Pe("r-pretty",ih);Pe("time",ah);Pe("time-pretty",sh);Pe("log",th);Pe("pow",eh);Pe("quantile",rh);Pe("d3-linear",$u);ke("cat",Wi);ke("category",Wi);ke("identity",Gm);ke("linear",qi);ke("log",Fm);ke("pow",_m);ke("time",Rm);ke("timeCat",Om);ke("quantize",Bs);ke("quantile",Dm);var Wm={},Un=function(r){return Wm[r.toLowerCase()]},Ta=function(r,e){if(Un(r))throw new Error("Attribute type '".concat(r,"' existed."));Wm[r.toLowerCase()]=e};Ta("Color",Xu);Ta("Opacity",fm);Ta("Position",um);Ta("Shape",hm);Ta("Size",cm);var kb=function(){function r(e){this.type="coordinate",this.isRect=!1,this.isHelix=!1,this.isPolar=!1,this.isReflectX=!1,this.isReflectY=!1;var t=e.start,i=e.end,a=e.matrix,n=a===void 0?[1,0,0,0,1,0,0,0,1]:a,o=e.isTransposed,s=o===void 0?!1:o;this.start=t,this.end=i,this.matrix=n,this.originalMatrix=U([],n),this.isTransposed=s}return r.prototype.initial=function(){this.center={x:(this.start.x+this.end.x)/2,y:(this.start.y+this.end.y)/2},this.width=Math.abs(this.end.x-this.start.x),this.height=Math.abs(this.end.y-this.start.y)},r.prototype.update=function(e){J(this,e),this.initial()},r.prototype.convertDim=function(e,t){var i,a=this[t],n=a.start,o=a.end;return this.isReflect(t)&&(i=[o,n],n=i[0],o=i[1]),n+e*(o-n)},r.prototype.invertDim=function(e,t){var i,a=this[t],n=a.start,o=a.end;return this.isReflect(t)&&(i=[o,n],n=i[0],o=i[1]),(e-n)/(o-n)},r.prototype.applyMatrix=function(e,t,i){i===void 0&&(i=0);var a=this.matrix,n=[e,t,i];return Le.transformMat3(n,n,a),n},r.prototype.invertMatrix=function(e,t,i){i===void 0&&(i=0);var a=this.matrix,n=ce.invert([0,0,0,0,0,0,0,0,0],a),o=[e,t,i];return n&&Le.transformMat3(o,o,n),o},r.prototype.convert=function(e){var t=this.convertPoint(e),i=t.x,a=t.y,n=this.applyMatrix(i,a,1);return{x:n[0],y:n[1]}},r.prototype.invert=function(e){var t=this.invertMatrix(e.x,e.y,1);return this.invertPoint({x:t[0],y:t[1]})},r.prototype.rotate=function(e){var t=this.matrix,i=this.center;return $.leftTranslate(t,t,[-i.x,-i.y]),$.leftRotate(t,t,e),$.leftTranslate(t,t,[i.x,i.y]),this},r.prototype.reflect=function(e){return e==="x"?this.isReflectX=!this.isReflectX:this.isReflectY=!this.isReflectY,this},r.prototype.scale=function(e,t){var i=this.matrix,a=this.center;return $.leftTranslate(i,i,[-a.x,-a.y]),$.leftScale(i,i,[e,t]),$.leftTranslate(i,i,[a.x,a.y]),this},r.prototype.translate=function(e,t){var i=this.matrix;return $.leftTranslate(i,i,[e,t]),this},r.prototype.transpose=function(){return this.isTransposed=!this.isTransposed,this},r.prototype.getCenter=function(){return this.center},r.prototype.getWidth=function(){return this.width},r.prototype.getHeight=function(){return this.height},r.prototype.getRadius=function(){return this.radius},r.prototype.isReflect=function(e){return e==="x"?this.isReflectX:this.isReflectY},r.prototype.resetMatrix=function(e){this.matrix=e||U([],this.originalMatrix)},r}(),Tr=kb;var Ob=function(r){S(e,r);function e(t){var i=r.call(this,t)||this;return i.isRect=!0,i.type="cartesian",i.initial(),i}return e.prototype.initial=function(){r.prototype.initial.call(this);var t=this.start,i=this.end;this.x={start:t.x,end:i.x},this.y={start:t.y,end:i.y}},e.prototype.convertPoint=function(t){var i,a=t.x,n=t.y;return this.isTransposed&&(i=[n,a],a=i[0],n=i[1]),{x:this.convertDim(a,"x"),y:this.convertDim(n,"y")}},e.prototype.invertPoint=function(t){var i,a=this.invertDim(t.x,"x"),n=this.invertDim(t.y,"y");return this.isTransposed&&(i=[n,a],a=i[0],n=i[1]),{x:a,y:n}},e}(Tr),lh=Ob;var Fb=function(r){S(e,r);function e(t){var i=r.call(this,t)||this;i.isHelix=!0,i.type="helix";var a=t.startAngle,n=a===void 0?1.25*Math.PI:a,o=t.endAngle,s=o===void 0?7.25*Math.PI:o,l=t.innerRadius,f=l===void 0?0:l,u=t.radius;return i.startAngle=n,i.endAngle=s,i.innerRadius=f,i.radius=u,i.initial(),i}return e.prototype.initial=function(){r.prototype.initial.call(this);var t=(this.endAngle-this.startAngle)/(2*Math.PI)+1,i=Math.min(this.width,this.height)/2;this.radius&&this.radius>=0&&this.radius<=1&&(i=i*this.radius),this.d=Math.floor(i*(1-this.innerRadius)/t),this.a=this.d/(Math.PI*2),this.x={start:this.startAngle,end:this.endAngle},this.y={start:this.innerRadius*i,end:this.innerRadius*i+this.d*.99}},e.prototype.convertPoint=function(t){var i,a=t.x,n=t.y;this.isTransposed&&(i=[n,a],a=i[0],n=i[1]);var o=this.convertDim(a,"x"),s=this.a*o,l=this.convertDim(n,"y");return{x:this.center.x+Math.cos(o)*(s+l),y:this.center.y+Math.sin(o)*(s+l)}},e.prototype.invertPoint=function(t){var i,a=this.d+this.y.start,n=Y.subtract([0,0],[t.x,t.y],[this.center.x,this.center.y]),o=$.angleTo(n,[1,0],!0),s=o*this.a;Y.length(n)<s&&(s=Y.length(n));var l=Math.floor((Y.length(n)-s)/a);o=2*l*Math.PI+o;var f=this.a*o,u=Y.length(n)-f;u=pt(u,0)?0:u;var h=this.invertDim(o,"x"),c=this.invertDim(u,"y");return h=pt(h,0)?0:h,c=pt(c,0)?0:c,this.isTransposed&&(i=[c,h],h=i[0],c=i[1]),{x:h,y:c}},e}(Tr),qm=Fb;var _b=function(r){S(e,r);function e(t){var i=r.call(this,t)||this;i.isPolar=!0,i.type="polar";var a=t.startAngle,n=a===void 0?-Math.PI/2:a,o=t.endAngle,s=o===void 0?Math.PI*3/2:o,l=t.innerRadius,f=l===void 0?0:l,u=t.radius;return i.startAngle=n,i.endAngle=s,i.innerRadius=f,i.radius=u,i.initial(),i}return e.prototype.initial=function(){for(r.prototype.initial.call(this);this.endAngle<this.startAngle;)this.endAngle+=Math.PI*2;var t=this.getOneBox(),i=t.maxX-t.minX,a=t.maxY-t.minY,n=Math.abs(t.minX)/i,o=Math.abs(t.minY)/a,s;this.height/a>this.width/i?(s=this.width/i,this.circleCenter={x:this.center.x-(.5-n)*this.width,y:this.center.y-(.5-o)*s*a}):(s=this.height/a,this.circleCenter={x:this.center.x-(.5-n)*s*i,y:this.center.y-(.5-o)*this.height}),this.polarRadius=this.radius,this.radius?this.radius>0&&this.radius<=1?this.polarRadius=s*this.radius:(this.radius<=0||this.radius>s)&&(this.polarRadius=s):this.polarRadius=s,this.x={start:this.startAngle,end:this.endAngle},this.y={start:this.innerRadius*this.polarRadius,end:this.polarRadius}},e.prototype.getRadius=function(){return this.polarRadius},e.prototype.convertPoint=function(t){var i,a=this.getCenter(),n=t.x,o=t.y;return this.isTransposed&&(i=[o,n],n=i[0],o=i[1]),n=this.convertDim(n,"x"),o=this.convertDim(o,"y"),{x:a.x+Math.cos(n)*o,y:a.y+Math.sin(n)*o}},e.prototype.invertPoint=function(t){var i,a=this.getCenter(),n=[t.x-a.x,t.y-a.y],o=this,s=o.startAngle,l=o.endAngle;this.isReflect("x")&&(i=[l,s],s=i[0],l=i[1]);var f=[1,0,0,0,1,0,0,0,1];$.leftRotate(f,f,s);var u=[1,0,0];Le.transformMat3(u,u,f);var h=[u[0],u[1]],c=$.angleTo(h,n,l<s);pt(c,Math.PI*2)&&(c=0);var p=Y.length(n),v=c/(l-s);v=l-s>0?v:-v;var m=this.invertDim(p,"y"),g={x:0,y:0};return g.x=this.isTransposed?m:v,g.y=this.isTransposed?v:m,g},e.prototype.getCenter=function(){return this.circleCenter},e.prototype.getOneBox=function(){var t=this.startAngle,i=this.endAngle;if(Math.abs(i-t)>=Math.PI*2)return{minX:-1,maxX:1,minY:-1,maxY:1};for(var a=[0,Math.cos(t),Math.cos(i)],n=[0,Math.sin(t),Math.sin(i)],o=Math.min(t,i);o<Math.max(t,i);o+=Math.PI/18)a.push(Math.cos(o)),n.push(Math.sin(o));return{minX:Math.min.apply(Math,a),maxX:Math.max.apply(Math,a),minY:Math.min.apply(Math,n),maxY:Math.max.apply(Math,n)}},e}(Tr),Um=_b;var jm={},Fs=function(r){return jm[r.toLowerCase()]},Ea=function(r,e){jm[r.toLowerCase()]=e};Ea("rect",lh);Ea("cartesian",lh);Ea("polar",Um);Ea("helix",qm);var Kn={};Bt(Kn,{Arc:()=>nd,DataMarker:()=>ld,DataRegion:()=>fd,Html:()=>cd,Image:()=>sd,Line:()=>id,Region:()=>od,RegionFilter:()=>ud,Shape:()=>hd,Text:()=>ad});function jn(r,e,t){var i=new tr(e,t);i.target=r,i.propagationPath.push(r),r.emitDelegation(e,i);for(var a=r.getParent();a;)a.emitDelegation(e,i),i.propagationPath.push(a),a=a.getParent()}var Zm=[1,0,0,0,1,0,0,0,1];function ze(r,e,t){if(t===void 0&&(t=Zm),!e)return null;var i=$.transform(t,[["t",-r.x,-r.y],["r",e],["t",r.x,r.y]]);return i}function Zn(r,e){return!r.x&&!r.y?null:$.transform(e||Zm,[["t",r.x,r.y]])}function Qm(r){var e=[1,0,0],t=[0,0,0];return Le.transformMat3(t,e,r),Math.atan2(t[1],t[0])}function _s(r,e){var t=[0,0];return Y.transformMat3(t,e,r),t}function $m(r,e){var t=_s(r,[e.minX,e.minY]),i=_s(r,[e.maxX,e.minY]),a=_s(r,[e.minX,e.maxY]),n=_s(r,[e.maxX,e.maxY]),o=Math.min(t[0],i[0],a[0],n[0]),s=Math.max(t[0],i[0],a[0],n[0]),l=Math.min(t[1],i[1],a[1],n[1]),f=Math.max(t[1],i[1],a[1],n[1]);return{x:o,y:l,minX:o,minY:l,maxX:s,maxY:f,width:s-o,height:f-l}}function Rs(r,e,t,i){if(e){var a=ze({x:t,y:i},e,r.getMatrix());r.setMatrix(a)}}function La(r,e,t){var i=Zn({x:e,y:t});r.attr("matrix",i)}function Zi(r){var e=0,t=0,i=0,a=0;return z(r)?e=t=i=a=r:B(r)&&(e=r[0],i=I(r[1])?r[0]:r[1],a=I(r[2])?r[0]:r[2],t=I(r[3])?i:r[3]),[e,i,a,t]}function Ia(r){for(var e=r.childNodes,t=e.length,i=t-1;i>=0;i--)r.removeChild(e[i])}function Km(r,e){return!!r.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function Lr(r){var e=r.start,t=r.end,i=Math.min(e.x,t.x),a=Math.min(e.y,t.y),n=Math.max(e.x,t.x),o=Math.max(e.y,t.y);return{x:i,y:a,minX:i,minY:a,maxX:n,maxY:o,width:n-i,height:o-a}}function Jm(r){var e=r.map(function(s){return s.x}),t=r.map(function(s){return s.y}),i=Math.min.apply(Math,e),a=Math.min.apply(Math,t),n=Math.max.apply(Math,e),o=Math.max.apply(Math,t);return{x:i,y:a,minX:i,minY:a,maxX:n,maxY:o,width:n-i,height:o-a}}function Pa(r,e,t,i){var a=r+t,n=e+i;return{x:r,y:e,width:t,height:i,minX:r,minY:e,maxX:isNaN(a)?0:a,maxY:isNaN(n)?0:n}}function Er(r,e,t){return(1-t)*r+e*t}function hi(r,e,t){return{x:r.x+Math.cos(t)*e,y:r.y+Math.sin(t)*e}}function Rb(r,e){var t=e.x-r.x,i=e.y-r.y;return Math.sqrt(t*t+i*i)}var Qn=function(r,e,t){return t===void 0&&(t=Math.pow(Number.EPSILON,.5)),[r,e].includes(1/0)?Math.abs(r)===Math.abs(e):Math.abs(r-e)<t};function Db(r,e){var t=Math.max(r.minX,e.minX),i=Math.max(r.minY,e.minY),a=Math.min(r.maxX,e.maxX),n=Math.min(r.maxY,e.maxY);return Pa(t,i,a-t,n-i)}function fh(r){var e=r.getClip(),t=e&&e.getBBox(),i;if(!r.isGroup())i=r.getBBox();else{var a=1/0,n=-1/0,o=1/0,s=-1/0,l=r.getChildren();l.length>0?M(l,function(f){if(f.get("visible")){if(f.isGroup()&&f.get("children").length===0)return!0;var u=fh(f),h=f.applyToMatrix([u.minX,u.minY,1]),c=f.applyToMatrix([u.minX,u.maxY,1]),p=f.applyToMatrix([u.maxX,u.minY,1]),v=f.applyToMatrix([u.maxX,u.maxY,1]),m=Math.min(h[0],c[0],p[0],v[0]),g=Math.max(h[0],c[0],p[0],v[0]),y=Math.min(h[1],c[1],p[1],v[1]),w=Math.max(h[1],c[1],p[1],v[1]);m<a&&(a=m),g>n&&(n=g),y<o&&(o=y),w>s&&(s=w)}}):(a=0,n=0,o=0,s=0),i=Pa(a,o,n-a,s-o)}return t?Db(i,t):i}function td(r,e){if(!(!r.getClip()&&!e.getClip())){var t=e.getClip();if(!t){r.setClip(null);return}var i={type:t.get("type"),attrs:t.attr()};r.setClip(i)}}function ie(r){return r+"px"}function Ds(r,e,t,i){var a=Rb(r,e),n=i/a,o=0;return t==="start"?o=0-n:t==="end"&&(o=1+n),{x:Er(r.x,e.x,o),y:Er(r.y,e.y,o)}}var Nb={none:[],point:["x","y"],region:["start","end"],points:["points"],circle:["center","radius","startAngle","endAngle"]},Gb=function(r){S(e,r);function e(t){var i=r.call(this,t)||this;return i.initCfg(),i}return e.prototype.getDefaultCfg=function(){return{id:"",name:"",type:"",locationType:"none",offsetX:0,offsetY:0,animate:!1,capture:!0,updateAutoRender:!1,animateOption:{appear:null,update:{duration:400,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut"},leave:{duration:350,easing:"easeQuadIn"}},events:null,defaultCfg:{},visible:!0}},e.prototype.clear=function(){},e.prototype.update=function(t){var i=this,a=this.get("defaultCfg")||{};M(t,function(n,o){var s=i.get(o),l=n;s!==n&&(K(n)&&a[o]&&(l=O({},a[o],n)),i.set(o,l))}),this.updateInner(t),this.afterUpdate(t)},e.prototype.updateInner=function(t){},e.prototype.afterUpdate=function(t){De(t,"visible")&&(t.visible?this.show():this.hide()),De(t,"capture")&&this.setCapture(t.capture)},e.prototype.getLayoutBBox=function(){return this.getBBox()},e.prototype.getLocationType=function(){return this.get("locationType")},e.prototype.getOffset=function(){return{offsetX:this.get("offsetX"),offsetY:this.get("offsetY")}},e.prototype.setOffset=function(t,i){this.update({offsetX:t,offsetY:i})},e.prototype.setLocation=function(t){var i=d({},t);this.update(i)},e.prototype.getLocation=function(){var t=this,i={},a=this.get("locationType"),n=Nb[a];return M(n,function(o){i[o]=t.get(o)}),i},e.prototype.isList=function(){return!1},e.prototype.isSlider=function(){return!1},e.prototype.init=function(){},e.prototype.initCfg=function(){var t=this,i=this.get("defaultCfg");M(i,function(a,n){var o=t.get(n);if(K(o)){var s=O({},a,o);t.set(n,s)}})},e}(Oi),Ba=Gb;var Qi="update_status",Yb=["visible","tip","delegateObject"],Hb=["container","group","shapesMap","isRegister","isUpdating","destroyed"],Vb=function(r){S(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return d(d({},t),{container:null,shapesMap:{},group:null,capture:!0,isRegister:!1,isUpdating:!1,isInit:!0})},e.prototype.remove=function(){this.clear();var t=this.get("group");t.remove()},e.prototype.clear=function(){var t=this.get("group");t.clear(),this.set("shapesMap",{}),this.clearOffScreenCache(),this.set("isInit",!0)},e.prototype.getChildComponentById=function(t){var i=this.getElementById(t),a=i&&i.get("component");return a},e.prototype.getElementById=function(t){return this.get("shapesMap")[t]},e.prototype.getElementByLocalId=function(t){var i=this.getElementId(t);return this.getElementById(i)},e.prototype.getElementsByName=function(t){var i=[];return M(this.get("shapesMap"),function(a){a.get("name")===t&&i.push(a)}),i},e.prototype.getContainer=function(){return this.get("container")},e.prototype.updateInner=function(t){this.offScreenRender(),this.get("updateAutoRender")&&this.render()},e.prototype.render=function(){var t=this.get("offScreenGroup");t||(t=this.offScreenRender());var i=this.get("group");this.updateElements(t,i),this.deleteElements(),this.applyOffset(),this.get("eventInitted")||(this.initEvent(),this.set("eventInitted",!0)),this.set("isInit",!1)},e.prototype.show=function(){var t=this.get("group");t.show(),this.set("visible",!0)},e.prototype.hide=function(){var t=this.get("group");t.hide(),this.set("visible",!1)},e.prototype.setCapture=function(t){var i=this.get("group");i.set("capture",t),this.set("capture",t)},e.prototype.destroy=function(){this.removeEvent(),this.remove(),r.prototype.destroy.call(this)},e.prototype.getBBox=function(){return this.get("group").getCanvasBBox()},e.prototype.getLayoutBBox=function(){var t=this.get("group"),i=this.getInnerLayoutBBox(),a=t.getTotalMatrix();return a&&(i=$m(a,i)),i},e.prototype.on=function(t,i,a){var n=this.get("group");return n.on(t,i,a),this},e.prototype.off=function(t,i){var a=this.get("group");return a&&a.off(t,i),this},e.prototype.emit=function(t,i){var a=this.get("group");a.emit(t,i)},e.prototype.init=function(){r.prototype.init.call(this),this.get("group")||this.initGroup(),this.offScreenRender()},e.prototype.getInnerLayoutBBox=function(){return this.get("offScreenBBox")||this.get("group").getBBox()},e.prototype.delegateEmit=function(t,i){var a=this.get("group");i.target=a,a.emit(t,i),jn(a,t,i)},e.prototype.createOffScreenGroup=function(){var t=this.get("group"),i=t.getGroupBase(),a=new i({delegateObject:this.getDelegateObject()});return a},e.prototype.applyOffset=function(){var t=this.get("offsetX"),i=this.get("offsetY");this.moveElementTo(this.get("group"),{x:t,y:i})},e.prototype.initGroup=function(){var t=this.get("container");this.set("group",t.addGroup({id:this.get("id"),name:this.get("name"),capture:this.get("capture"),visible:this.get("visible"),isComponent:!0,component:this,delegateObject:this.getDelegateObject()}))},e.prototype.offScreenRender=function(){this.clearOffScreenCache();var t=this.createOffScreenGroup();return this.renderInner(t),this.set("offScreenGroup",t),this.set("offScreenBBox",fh(t)),t},e.prototype.addGroup=function(t,i){this.appendDelegateObject(t,i);var a=t.addGroup(i);return this.get("isRegister")&&this.registerElement(a),a},e.prototype.addShape=function(t,i){this.appendDelegateObject(t,i);var a=t.addShape(i);return this.get("isRegister")&&this.registerElement(a),a},e.prototype.addComponent=function(t,i){var a=i.id,n=i.component,o=gt(i,["id","component"]),s=new n(d(d({},o),{id:a,container:t,updateAutoRender:this.get("updateAutoRender")}));return s.init(),s.render(),this.get("isRegister")&&this.registerElement(s.get("group")),s},e.prototype.initEvent=function(){},e.prototype.removeEvent=function(){var t=this.get("group");t.off()},e.prototype.getElementId=function(t){var i=this.get("id"),a=this.get("name");return i+"-"+a+"-"+t},e.prototype.registerElement=function(t){var i=t.get("id");this.get("shapesMap")[i]=t},e.prototype.unregisterElement=function(t){var i=t.get("id");delete this.get("shapesMap")[i]},e.prototype.moveElementTo=function(t,i){var a=Zn(i);t.attr("matrix",a)},e.prototype.addAnimation=function(t,i,a){var n=i.attr("opacity");I(n)&&(n=1),i.attr("opacity",0),i.animate({opacity:n},a)},e.prototype.removeAnimation=function(t,i,a){i.animate({opacity:0},a)},e.prototype.updateAnimation=function(t,i,a,n){i.animate(a,n)},e.prototype.updateElements=function(t,i){var a=this,n=this.get("animate"),o=this.get("animateOption"),s=t.getChildren().slice(0),l;M(s,function(f){var u=f.get("id"),h=a.getElementById(u),c=f.get("name");if(h)if(f.get("isComponent")){var p=f.get("component"),v=h.get("component"),m=Ii(p.cfg,uf(Re(p.cfg),Hb));v.update(m),h.set(Qi,"update")}else{var g=a.getReplaceAttrs(h,f);n&&o.update?a.updateAnimation(c,h,g,o.update):h.attr(g),f.isGroup()&&a.updateElements(f,h),M(Yb,function(C){h.set(C,f.get(C))}),td(h,f),l=h,h.set(Qi,"update")}else{i.add(f);var y=i.getChildren();if(y.splice(y.length-1,1),l){var w=y.indexOf(l);y.splice(w+1,0,f)}else y.unshift(f);if(a.registerElement(f),f.set(Qi,"add"),f.get("isComponent")){var p=f.get("component");p.set("container",i)}else f.isGroup()&&a.registerNewGroup(f);if(l=f,n){var x=a.get("isInit")?o.appear:o.enter;x&&a.addAnimation(c,f,x)}}})},e.prototype.clearUpdateStatus=function(t){var i=t.getChildren();M(i,function(a){a.set(Qi,null)})},e.prototype.clearOffScreenCache=function(){var t=this.get("offScreenGroup");t&&t.destroy(),this.set("offScreenGroup",null),this.set("offScreenBBox",null)},e.prototype.getDelegateObject=function(){var t,i=this.get("name"),a=(t={},t[i]=this,t.component=this,t);return a},e.prototype.appendDelegateObject=function(t,i){var a=t.get("delegateObject");i.delegateObject||(i.delegateObject={}),J(i.delegateObject,a)},e.prototype.getReplaceAttrs=function(t,i){var a=t.attr(),n=i.attr();return M(a,function(o,s){n[s]===void 0&&(n[s]=void 0)}),n},e.prototype.registerNewGroup=function(t){var i=this,a=t.getChildren();M(a,function(n){i.registerElement(n),n.set(Qi,"add"),n.isGroup()&&i.registerNewGroup(n)})},e.prototype.deleteElements=function(){var t=this,i=this.get("shapesMap"),a=[];M(i,function(s,l){!s.get(Qi)||s.destroyed?a.push([l,s]):s.set(Qi,null)});var n=this.get("animate"),o=this.get("animateOption");M(a,function(s){var l=s[0],f=s[1];if(!f.destroyed){var u=f.get("name");if(n&&o.leave){var h=J({callback:function(){t.removeElement(f)}},o.leave);t.removeAnimation(u,f,h)}else t.removeElement(f)}delete i[l]})},e.prototype.removeElement=function(t){if(t.get("isGroup")){var i=t.get("component");i&&i.destroy()}t.remove()},e}(Ba),at=Vb;var uh="\u2026";function ed(r){for(var e=0,t=0;t<r.length;t++)e+=$i(r,t);return e}function $i(r,e){return r.charCodeAt(e)>0&&r.charCodeAt(e)<128?1:2}function rd(r,e,t){t===void 0&&(t="tail");var i=r.length,a="";if(t==="tail"){for(var n=0,o=0;n<e;){var s=$i(r,o);if(n+s<=e)a+=r[o],n+=$i(r,o),o++;else break}a+=uh}else if(t==="head"){for(var n=0,o=i-1;n<e;){var s=$i(r,o);if(n+s<=e)a+=r[o],n+=$i(r,o),o--;else break}a=uh+a}else{for(var l="",f="",n=0,u=0,h=i-1;n<e;){var c=$i(r,u),p=!1;c+n<=e&&(l+=r[u],u++,n+=c,p=!0);var v=$i(r,h);if(v+n<=e&&(f=r[h]+f,n+=v,h--,p=!0),!p)break}a=l+uh+f}return a}var zb="\u2026",Xb=2,Wb=400;function qb(r){for(var e=r.map(function(l){var f=l.attr("text");return I(f)?"":""+f}),t=0,i=0,a=0;a<e.length;a+=1){for(var n=0,o=0;o<=e[a].length;o+=1){var s=e[a].charCodeAt(o);s>=19968&&s<=40869?n+=2:n+=1}n>t&&(t=n,i=a)}return r[i].getBBox().width}function $n(r){if(r.length>Wb)return qb(r);var e=0;return M(r,function(t){var i=t.getBBox(),a=i.width;e<a&&(e=a)}),e}function Ub(r,e){var t=e.getCanvasBBox();return r?t.width:t.height}function ci(r,e,t,i){var a;i===void 0&&(i="tail");var n=(a=e.attr("text"))!==null&&a!==void 0?a:"";if(i==="tail"){var o=Ii(e.attr(),["fontSize","fontFamily","fontWeight","fontStyle","fontVariant"]),s=Ef(n,t,o,"\u2026");return n!==s?(e.attr("text",s),e.set("tip",n),!0):(e.set("tip",null),!1)}var l=Ub(r,e),f=ed(n),u=!1;if(t<l){var h=Math.floor(t/l*f)-Xb,c=void 0;h>=0?c=rd(n,h,i):c=zb,c&&(e.attr("text",c),u=!0)}return u?e.set("tip",n):e.set("tip",null),u}function pi(r,e){var t=e.x,i=e.y,a=e.content,n=e.style,o=e.id,s=e.name,l=e.rotate,f=e.maxLength,u=e.autoEllipsis,h=e.isVertical,c=e.ellipsisPosition,p=e.background,v=r.addGroup({id:o+"-group",name:s+"-group",attrs:{x:t,y:i}}),m=v.addShape({type:"text",id:o,name:s,attrs:d({x:0,y:0,text:a},n)}),g=Zi(b(p,"padding",0));if(f&&u){var y=f-(g[1]+g[3]);ci(!h,m,y,c)}if(p){var w=b(p,"style",{}),x=m.getCanvasBBox(),C=x.minX,A=x.minY,T=x.width,E=x.height,k=v.addShape("rect",{id:o+"-bg",name:o+"-bg",attrs:d({x:C-g[3],y:A-g[0],width:T+g[1]+g[3],height:E+g[0]+g[2]},w)});k.toBack()}La(v,t,i),Rs(v,l,t,i)}var W={fontFamily:`
  BlinkMacSystemFont, "Segoe UI", Roboto,"Helvetica Neue",
  Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei",
  SimSun, "sans-serif"`,textColor:"#2C3542",activeTextColor:"#333333",uncheckedColor:"#D8D8D8",lineColor:"#416180",regionColor:"#CCD7EB",verticalAxisRotate:-Math.PI/4,horizontalAxisRotate:Math.PI/4,descriptionIconStroke:"#fff",descriptionIconFill:"rgba(58, 73, 101, .25)"};var jb=function(r){S(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return d(d({},t),{name:"annotation",type:"line",locationType:"region",start:null,end:null,style:{},text:null,defaultCfg:{style:{fill:W.textColor,fontSize:12,textAlign:"center",textBaseline:"bottom",fontFamily:W.fontFamily},text:{position:"center",autoRotate:!0,content:null,offsetX:0,offsetY:0,style:{stroke:W.lineColor,lineWidth:1}}}})},e.prototype.renderInner=function(t){this.renderLine(t),this.get("text")&&this.renderLabel(t)},e.prototype.renderLine=function(t){var i=this.get("start"),a=this.get("end"),n=this.get("style");this.addShape(t,{type:"line",id:this.getElementId("line"),name:"annotation-line",attrs:d({x1:i.x,y1:i.y,x2:a.x,y2:a.y},n)})},e.prototype.getLabelPoint=function(t,i,a){var n;return a==="start"?n=0:a==="center"?n=.5:G(a)&&a.indexOf("%")!==-1?n=parseInt(a,10)/100:z(a)?n=a:n=1,(n>1||n<0)&&(n=1),{x:Er(t.x,i.x,n),y:Er(t.y,i.y,n)}},e.prototype.renderLabel=function(t){var i=this.get("text"),a=this.get("start"),n=this.get("end"),o=i.position,s=i.content,l=i.style,f=i.offsetX,u=i.offsetY,h=i.autoRotate,c=i.maxLength,p=i.autoEllipsis,v=i.ellipsisPosition,m=i.background,g=i.isVertical,y=g===void 0?!1:g,w=this.getLabelPoint(a,n,o),x=w.x+f,C=w.y+u,A={id:this.getElementId("line-text"),name:"annotation-line-text",x,y:C,content:s,style:l,maxLength:c,autoEllipsis:p,ellipsisPosition:v,background:m,isVertical:y};if(h){var T=[n.x-a.x,n.y-a.y];A.rotate=Math.atan2(T[1],T[0])}pi(t,A)},e}(at),id=jb;var Zb=function(r){S(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return d(d({},t),{name:"annotation",type:"text",locationType:"point",x:0,y:0,content:"",rotate:null,style:{},background:null,maxLength:null,autoEllipsis:!0,isVertical:!1,ellipsisPosition:"tail",defaultCfg:{style:{fill:W.textColor,fontSize:12,textAlign:"center",textBaseline:"middle",fontFamily:W.fontFamily}}})},e.prototype.setLocation=function(t){this.set("x",t.x),this.set("y",t.y),this.resetLocation()},e.prototype.renderInner=function(t){var i=this.getLocation(),a=i.x,n=i.y,o=this.get("content"),s=this.get("style"),l=this.getElementId("text"),f=this.get("name")+"-text",u=this.get("maxLength"),h=this.get("autoEllipsis"),c=this.get("isVertical"),p=this.get("ellipsisPosition"),v=this.get("background"),m=this.get("rotate"),g={id:l,name:f,x:a,y:n,content:o,style:s,maxLength:u,autoEllipsis:h,isVertical:c,ellipsisPosition:p,background:v,rotate:m};pi(t,g)},e.prototype.resetLocation=function(){var t=this.getElementByLocalId("text-group");if(t){var i=this.getLocation(),a=i.x,n=i.y,o=this.get("rotate");La(t,a,n),Rs(t,o,a,n)}},e}(at),ad=Zb;var Qb=function(r){S(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return d(d({},t),{name:"annotation",type:"arc",locationType:"circle",center:null,radius:100,startAngle:-Math.PI/2,endAngle:Math.PI*3/2,style:{stroke:"#999",lineWidth:1}})},e.prototype.renderInner=function(t){this.renderArc(t)},e.prototype.getArcPath=function(){var t=this.getLocation(),i=t.center,a=t.radius,n=t.startAngle,o=t.endAngle,s=hi(i,a,n),l=hi(i,a,o),f=o-n>Math.PI?1:0,u=[["M",s.x,s.y]];if(o-n===Math.PI*2){var h=hi(i,a,n+Math.PI);u.push(["A",a,a,0,f,1,h.x,h.y]),u.push(["A",a,a,0,f,1,l.x,l.y])}else u.push(["A",a,a,0,f,1,l.x,l.y]);return u},e.prototype.renderArc=function(t){var i=this.getArcPath(),a=this.get("style");this.addShape(t,{type:"path",id:this.getElementId("arc"),name:"annotation-arc",attrs:d({path:i},a)})},e}(at),nd=Qb;var $b=function(r){S(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return d(d({},t),{name:"annotation",type:"region",locationType:"region",start:null,end:null,style:{},defaultCfg:{style:{lineWidth:0,fill:W.regionColor,opacity:.4}}})},e.prototype.renderInner=function(t){this.renderRegion(t)},e.prototype.renderRegion=function(t){var i=this.get("start"),a=this.get("end"),n=this.get("style"),o=Lr({start:i,end:a});this.addShape(t,{type:"rect",id:this.getElementId("region"),name:"annotation-region",attrs:d({x:o.x,y:o.y,width:o.width,height:o.height},n)})},e}(at),od=$b;var Kb=function(r){S(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return d(d({},t),{name:"annotation",type:"image",locationType:"region",start:null,end:null,src:null,style:{}})},e.prototype.renderInner=function(t){this.renderImage(t)},e.prototype.getImageAttrs=function(){var t=this.get("start"),i=this.get("end"),a=this.get("style"),n=Lr({start:t,end:i}),o=this.get("src");return d({x:n.x,y:n.y,img:o,width:n.width,height:n.height},a)},e.prototype.renderImage=function(t){this.addShape(t,{type:"image",id:this.getElementId("image"),name:"annotation-image",attrs:this.getImageAttrs()})},e}(at),sd=Kb;var Jb=function(r){S(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return d(d({},t),{name:"annotation",type:"dataMarker",locationType:"point",x:0,y:0,point:{},line:{},text:{},direction:"upward",autoAdjust:!0,coordinateBBox:null,defaultCfg:{point:{display:!0,style:{r:3,fill:"#FFFFFF",stroke:"#1890FF",lineWidth:2}},line:{display:!0,length:20,style:{stroke:W.lineColor,lineWidth:1}},text:{content:"",display:!0,style:{fill:W.textColor,opacity:.65,fontSize:12,textAlign:"start",fontFamily:W.fontFamily}}}})},e.prototype.renderInner=function(t){b(this.get("line"),"display")&&this.renderLine(t),b(this.get("text"),"display")&&this.renderText(t),b(this.get("point"),"display")&&this.renderPoint(t),this.get("autoAdjust")&&this.autoAdjust(t)},e.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x")+this.get("offsetX"),y:this.get("y")+this.get("offsetY")})},e.prototype.renderPoint=function(t){var i=this.getShapeAttrs().point;this.addShape(t,{type:"circle",id:this.getElementId("point"),name:"annotation-point",attrs:i})},e.prototype.renderLine=function(t){var i=this.getShapeAttrs().line;this.addShape(t,{type:"path",id:this.getElementId("line"),name:"annotation-line",attrs:i})},e.prototype.renderText=function(t){var i=this.getShapeAttrs().text,a=i.x,n=i.y,o=i.text,s=gt(i,["x","y","text"]),l=this.get("text"),f=l.background,u=l.maxLength,h=l.autoEllipsis,c=l.isVertival,p=l.ellipsisPosition,v={x:a,y:n,id:this.getElementId("text"),name:"annotation-text",content:o,style:s,background:f,maxLength:u,autoEllipsis:h,isVertival:c,ellipsisPosition:p};pi(t,v)},e.prototype.autoAdjust=function(t){var i=this.get("direction"),a=this.get("x"),n=this.get("y"),o=b(this.get("line"),"length",0),s=this.get("coordinateBBox"),l=t.getBBox(),f=l.minX,u=l.maxX,h=l.minY,c=l.maxY,p=t.findById(this.getElementId("text-group")),v=t.findById(this.getElementId("text")),m=t.findById(this.getElementId("line"));if(s&&p){var g=p.attr("x"),y=p.attr("y"),w=v.getCanvasBBox(),x=w.width,C=w.height,A=0,T=0;if(a+f<=s.minX)if(i==="leftward")A=1;else{var E=s.minX-(a+f);g=p.attr("x")+E}else if(a+u>=s.maxX)if(i==="rightward")A=-1;else{var E=a+u-s.maxX;g=p.attr("x")-E}if(A&&(m&&m.attr("path",[["M",0,0],["L",o*A,0]]),g=(o+2+x)*A),n+h<=s.minY)if(i==="upward")T=1;else{var E=s.minY-(n+h);y=p.attr("y")+E}else if(n+c>=s.maxY)if(i==="downward")T=-1;else{var E=n+c-s.maxY;y=p.attr("y")-E}T&&(m&&m.attr("path",[["M",0,0],["L",0,o*T]]),y=(o+2+C)*T),(g!==p.attr("x")||y!==p.attr("y"))&&La(p,g,y)}},e.prototype.getShapeAttrs=function(){var t=b(this.get("line"),"display"),i=b(this.get("point"),"style",{}),a=b(this.get("line"),"style",{}),n=b(this.get("text"),"style",{}),o=this.get("direction"),s=t?b(this.get("line"),"length",0):0,l=0,f=0,u="top",h="start";switch(o){case"upward":f=-1,u="bottom";break;case"downward":f=1,u="top";break;case"leftward":l=-1,h="end";break;case"rightward":l=1,h="start";break}return{point:d({x:0,y:0},i),line:d({path:[["M",0,0],["L",s*l,s*f]]},a),text:d({x:(s+2)*l,y:(s+2)*f,text:b(this.get("text"),"content",""),textBaseline:u,textAlign:h},n)}},e}(at),ld=Jb;var tT=function(r){S(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return d(d({},t),{name:"annotation",type:"dataRegion",locationType:"points",points:[],lineLength:0,region:{},text:{},defaultCfg:{region:{style:{lineWidth:0,fill:W.regionColor,opacity:.4}},text:{content:"",style:{textAlign:"center",textBaseline:"bottom",fontSize:12,fill:W.textColor,fontFamily:W.fontFamily}}}})},e.prototype.renderInner=function(t){var i=b(this.get("region"),"style",{}),a=b(this.get("text"),"style",{}),n=this.get("lineLength")||0,o=this.get("points");if(o.length){var s=Jm(o),l=[];l.push(["M",o[0].x,s.minY-n]),o.forEach(function(u){l.push(["L",u.x,u.y])}),l.push(["L",o[o.length-1].x,o[o.length-1].y-n]),this.addShape(t,{type:"path",id:this.getElementId("region"),name:"annotation-region",attrs:d({path:l},i)});var f=d({id:this.getElementId("text"),name:"annotation-text",x:(s.minX+s.maxX)/2,y:s.minY-n},this.get("text"));pi(t,f)}},e}(at),fd=tT;var eT=function(r){S(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return d(d({},t),{name:"annotation",type:"regionFilter",locationType:"region",start:null,end:null,color:null,shape:[]})},e.prototype.renderInner=function(t){var i=this,a=this.get("start"),n=this.get("end"),o=this.addGroup(t,{id:this.getElementId("region-filter"),capture:!1});M(this.get("shapes"),function(l,f){var u=l.get("type"),h=zt(l.attr());i.adjustShapeAttrs(h),i.addShape(o,{id:i.getElementId("shape-"+u+"-"+f),capture:!1,type:u,attrs:h})});var s=Lr({start:a,end:n});o.setClip({type:"rect",attrs:{x:s.minX,y:s.minY,width:s.width,height:s.height}})},e.prototype.adjustShapeAttrs=function(t){var i=this.get("color");t.fill&&(t.fill=t.fillStyle=i),t.stroke=t.strokeStyle=i},e}(at),ud=eT;var rT=function(r){S(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return d(d({},t),{name:"annotation",type:"shape",draw:he})},e.prototype.renderInner=function(t){var i=this.get("render");D(i)&&i(t)},e}(at),hd=rT;var iT=function(r){S(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return d(d({},t),{container:null,containerTpl:"<div></div>",updateAutoRender:!0,containerClassName:"",parent:null})},e.prototype.getContainer=function(){return this.get("container")},e.prototype.show=function(){var t=this.get("container");t.style.display="",this.set("visible",!0)},e.prototype.hide=function(){var t=this.get("container");t.style.display="none",this.set("visible",!1)},e.prototype.setCapture=function(t){var i=this.getContainer(),a=t?"auto":"none";i.style.pointerEvents=a,this.set("capture",t)},e.prototype.getBBox=function(){var t=this.getContainer(),i=parseFloat(t.style.left)||0,a=parseFloat(t.style.top)||0;return Pa(i,a,t.clientWidth,t.clientHeight)},e.prototype.clear=function(){var t=this.get("container");Ia(t)},e.prototype.destroy=function(){this.removeEvent(),this.removeDom(),r.prototype.destroy.call(this)},e.prototype.init=function(){r.prototype.init.call(this),this.initContainer(),this.initDom(),this.resetStyles(),this.applyStyles(),this.initEvent(),this.initCapture(),this.initVisible()},e.prototype.initCapture=function(){this.setCapture(this.get("capture"))},e.prototype.initVisible=function(){this.get("visible")?this.show():this.hide()},e.prototype.initDom=function(){},e.prototype.initContainer=function(){var t=this.get("container");if(I(t)){t=this.createDom();var i=this.get("parent");G(i)&&(i=document.getElementById(i),this.set("parent",i)),i.appendChild(t),this.get("containerId")&&t.setAttribute("id",this.get("containerId")),this.set("container",t)}else G(t)&&(t=document.getElementById(t),this.set("container",t));this.get("parent")||this.set("parent",t.parentNode)},e.prototype.resetStyles=function(){var t=this.get("domStyles"),i=this.get("defaultStyles");t?t=O({},i,t):t=i,this.set("domStyles",t)},e.prototype.applyStyles=function(){var t=this.get("domStyles");if(t){var i=this.getContainer();this.applyChildrenStyles(i,t);var a=this.get("containerClassName");if(a&&Km(i,a)){var n=t[a];Et(i,n)}}},e.prototype.applyChildrenStyles=function(t,i){M(i,function(a,n){var o=t.getElementsByClassName(n);M(o,function(s){Et(s,a)})})},e.prototype.applyStyle=function(t,i){var a=this.get("domStyles");Et(i,a[t])},e.prototype.createDom=function(){var t=this.get("containerTpl");return re(t)},e.prototype.initEvent=function(){},e.prototype.removeDom=function(){var t=this.get("container");t&&t.parentNode&&t.parentNode.removeChild(t)},e.prototype.removeEvent=function(){},e.prototype.updateInner=function(t){De(t,"domStyles")&&(this.resetStyles(),this.applyStyles()),this.resetPosition()},e.prototype.resetPosition=function(){},e}(Ba),vi=iT;var aT=function(r){S(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return d(d({},t),{name:"annotation",type:"html",locationType:"point",x:0,y:0,containerTpl:'<div class="g2-html-annotation" style="position:absolute"></div>',alignX:"left",alignY:"top",html:"",zIndex:7})},e.prototype.render=function(){var t=this.getContainer(),i=this.get("html");Ia(t);var a=D(i)?i(t):i;if(Cn(a))t.appendChild(a);else if(G(a)||z(a)){var n=re(""+a);n&&t.appendChild(n)}this.resetPosition()},e.prototype.resetPosition=function(){var t=this.getContainer(),i=this.getLocation(),a=i.x,n=i.y,o=this.get("alignX"),s=this.get("alignY"),l=this.get("offsetX"),f=this.get("offsetY"),u=Zo(t),h=Uo(t),c={x:a,y:n};o==="middle"?c.x-=Math.round(u/2):o==="right"&&(c.x-=Math.round(u)),s==="middle"?c.y-=Math.round(h/2):s==="bottom"&&(c.y-=Math.round(h)),l&&(c.x+=l),f&&(c.y+=f),Et(t,{position:"absolute",left:c.x+"px",top:c.y+"px",zIndex:this.get("zIndex")})},e}(vi),cd=aT;var eo={};Bt(eo,{Base:()=>ka,Circle:()=>Cd,Line:()=>xd});function Ki(r,e,t){var i=e+"Style",a=null;return M(t,function(n,o){r[o]&&n[i]&&(a||(a={}),J(a,n[i]))}),a}var nT=function(r){S(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return d(d({},t),{name:"axis",ticks:[],line:{},tickLine:{},subTickLine:null,title:null,label:{},verticalFactor:1,verticalLimitLength:null,overlapOrder:["autoRotate","autoEllipsis","autoHide"],tickStates:{},optimize:{},defaultCfg:{line:{style:{lineWidth:1,stroke:W.lineColor}},tickLine:{style:{lineWidth:1,stroke:W.lineColor},alignTick:!0,length:5,displayWithLabel:!0},subTickLine:{style:{lineWidth:1,stroke:W.lineColor},count:4,length:2},label:{autoRotate:!0,autoHide:!1,autoEllipsis:!1,style:{fontSize:12,fill:W.textColor,fontFamily:W.fontFamily,fontWeight:"normal"},offset:10,offsetX:0,offsetY:0},title:{autoRotate:!0,spacing:5,position:"center",style:{fontSize:12,fill:W.textColor,textBaseline:"middle",fontFamily:W.fontFamily,textAlign:"center"},iconStyle:{fill:W.descriptionIconFill,stroke:W.descriptionIconStroke},description:""},tickStates:{active:{labelStyle:{fontWeight:500},tickLineStyle:{lineWidth:2}},inactive:{labelStyle:{fill:W.uncheckedColor}}},optimize:{enable:!0,threshold:400}},theme:{}})},e.prototype.renderInner=function(t){this.get("line")&&this.drawLine(t),this.drawTicks(t),this.get("title")&&this.drawTitle(t)},e.prototype.isList=function(){return!0},e.prototype.getItems=function(){return this.get("ticks")},e.prototype.setItems=function(t){this.update({ticks:t})},e.prototype.updateItem=function(t,i){J(t,i),this.clear(),this.render()},e.prototype.clearItems=function(){var t=this.getElementByLocalId("label-group");t&&t.clear()},e.prototype.setItemState=function(t,i,a){t[i]=a,this.updateTickStates(t)},e.prototype.hasState=function(t,i){return!!t[i]},e.prototype.getItemStates=function(t){var i=this.get("tickStates"),a=[];return M(i,function(n,o){t[o]&&a.push(o)}),a},e.prototype.clearItemsState=function(t){var i=this,a=this.getItemsByState(t);M(a,function(n){i.setItemState(n,t,!1)})},e.prototype.getItemsByState=function(t){var i=this,a=this.getItems();return St(a,function(n){return i.hasState(n,t)})},e.prototype.getSidePoint=function(t,i){var a=this,n=a.getSideVector(i,t);return{x:t.x+n[0],y:t.y+n[1]}},e.prototype.getTextAnchor=function(t){var i;return pt(t[0],0)?i="center":t[0]>0?i="start":t[0]<0&&(i="end"),i},e.prototype.getTextBaseline=function(t){var i;return pt(t[1],0)?i="middle":t[1]>0?i="top":t[1]<0&&(i="bottom"),i},e.prototype.processOverlap=function(t){},e.prototype.drawLine=function(t){var i=this.getLinePath(),a=this.get("line");this.addShape(t,{type:"path",id:this.getElementId("line"),name:"axis-line",attrs:J({path:i},a.style)})},e.prototype.getTickLineItems=function(t){var i=this,a=[],n=this.get("tickLine"),o=n.alignTick,s=n.length,l=1,f=t.length;return f>=2&&(l=t[1].value-t[0].value),M(t,function(u){var h=u.point;o||(h=i.getTickPoint(u.value-l/2));var c=i.getSidePoint(h,s);a.push({startPoint:h,tickValue:u.value,endPoint:c,tickId:u.id,id:"tickline-"+u.id})}),a},e.prototype.getSubTickLineItems=function(t){var i=[],a=this.get("subTickLine"),n=a.count,o=t.length;if(o>=2)for(var s=0;s<o-1;s++)for(var l=t[s],f=t[s+1],u=0;u<n;u++){var h=(u+1)/(n+1),c=(1-h)*l.tickValue+h*f.tickValue,p=this.getTickPoint(c),v=this.getSidePoint(p,a.length);i.push({startPoint:p,endPoint:v,tickValue:c,id:"sub-"+l.id+"-"+u})}return i},e.prototype.getTickLineAttrs=function(t,i,a,n){var o=this.get(i).style,s={points:[t.startPoint,t.endPoint]},l=b(this.get("theme"),["tickLine","style"],{});o=D(o)?J({},l,o(s,a,n)):o;var f=t.startPoint,u=t.endPoint;return d({x1:f.x,y1:f.y,x2:u.x,y2:u.y},o)},e.prototype.drawTick=function(t,i,a,n,o){this.addShape(i,{type:"line",id:this.getElementId(t.id),name:"axis-"+a,attrs:this.getTickLineAttrs(t,a,n,o)})},e.prototype.drawTickLines=function(t){var i=this,a=this.get("ticks"),n=this.get("subTickLine"),o=this.getTickLineItems(a),s=this.addGroup(t,{name:"axis-tickline-group",id:this.getElementId("tickline-group")}),l=this.get("tickLine");if(M(o,function(u,h){if(l.displayWithLabel){var c=i.getElementId("label-"+u.tickId);t.findById(c)&&i.drawTick(u,s,"tickLine",h,o)}else i.drawTick(u,s,"tickLine",h,o)}),n){var f=this.getSubTickLineItems(o);M(f,function(u,h){i.drawTick(u,s,"subTickLine",h,f)})}},e.prototype.processTicks=function(){var t=this,i=this.get("ticks");M(i,function(a){a.point=t.getTickPoint(a.value),I(a.id)&&(a.id=a.name)})},e.prototype.drawTicks=function(t){var i=this;this.optimizeTicks(),this.processTicks(),this.get("label")&&this.drawLabels(t),this.get("tickLine")&&this.drawTickLines(t);var a=this.get("ticks");M(a,function(n){i.applyTickStates(n,t)})},e.prototype.optimizeTicks=function(){var t=this.get("optimize"),i=this.get("ticks");if(t&&t.enable&&t.threshold>0){var a=Tt(i);if(a>t.threshold){var n=Math.ceil(a/t.threshold),o=i.filter(function(s,l){return l%n===0});this.set("ticks",o),this.set("originalTicks",i)}}},e.prototype.getLabelAttrs=function(t,i,a){var n=this.get("label"),o=n.offset,s=n.offsetX,l=n.offsetY,f=n.rotate,u=n.formatter,h=this.getSidePoint(t.point,o),c=this.getSideVector(o,h),p=u?u(t.name,t,i):t.name,v=n.style;v=D(v)?b(this.get("theme"),["label","style"],{}):v;var m=J({x:h.x+s,y:h.y+l,text:p,textAlign:this.getTextAnchor(c),textBaseline:this.getTextBaseline(c)},v);return f&&(m.matrix=ze(h,f)),m},e.prototype.drawLabels=function(t){var i=this,a=this.get("ticks"),n=this.addGroup(t,{name:"axis-label-group",id:this.getElementId("label-group")});M(a,function(c,p){i.addShape(n,{type:"text",name:"axis-label",id:i.getElementId("label-"+c.id),attrs:i.getLabelAttrs(c,p,a),delegateObject:{tick:c,item:c,index:p}})}),this.processOverlap(n);var o=n.getChildren(),s=b(this.get("theme"),["label","style"],{}),l=this.get("label"),f=l.style,u=l.formatter;if(D(f)){var h=o.map(function(c){return b(c.get("delegateObject"),"tick")});M(o,function(c,p){var v=c.get("delegateObject").tick,m=u?u(v.name,v,p):v.name,g=J({},s,f(m,p,h));c.attr(g)})}},e.prototype.getTitleAttrs=function(){var t=this.get("title"),i=t.style,a=t.position,n=t.offset,o=t.spacing,s=o===void 0?0:o,l=t.autoRotate,f=i.fontSize,u=.5;a==="start"?u=0:a==="end"&&(u=1);var h=this.getTickPoint(u),c=this.getSidePoint(h,n||s+f/2),p=J({x:c.x,y:c.y,text:t.text},i),v=t.rotate,m=v;if(I(v)&&l){var g=this.getAxisVector(h),y=[1,0];m=$.angleTo(g,y,!0)}if(m){var w=ze(c,m);p.matrix=w}return p},e.prototype.drawTitle=function(t){var i,a=this.getTitleAttrs(),n=this.addShape(t,{type:"text",id:this.getElementId("title"),name:"axis-title",attrs:a});!((i=this.get("title"))===null||i===void 0)&&i.description&&this.drawDescriptionIcon(t,n,a.matrix)},e.prototype.drawDescriptionIcon=function(t,i,a){var n=this.addGroup(t,{name:"axis-description",id:this.getElementById("description")}),o=i.getBBox(),s=o.maxX,l=o.maxY,f=o.height,u=this.get("title").iconStyle,h=4,c=f/2,p=c/6,v=s+h,m=l-f/2,g=[v+c,m-c],y=g[0],w=g[1],x=[y+c,w+c],C=x[0],A=x[1],T=[y,A+c],E=T[0],k=T[1],P=[v,w+c],L=P[0],R=P[1],N=[v+c,m-f/4],H=N[0],V=N[1],Q=[H,V+p],mt=Q[0],ct=Q[1],bt=[mt,ct+p],it=bt[0],Nt=bt[1],te=[it,Nt+c*3/4],je=te[0],Vr=te[1];this.addShape(n,{type:"path",id:this.getElementId("title-description-icon"),name:"axis-title-description-icon",attrs:d({path:[["M",y,w],["A",c,c,0,0,1,C,A],["A",c,c,0,0,1,E,k],["A",c,c,0,0,1,L,R],["A",c,c,0,0,1,y,w],["M",H,V],["L",mt,ct],["M",it,Nt],["L",je,Vr]],lineWidth:p,matrix:a},u)}),this.addShape(n,{type:"rect",id:this.getElementId("title-description-rect"),name:"axis-title-description-rect",attrs:{x:v,y:m-f/2,width:f,height:f,stroke:"#000",fill:"#000",opacity:0,matrix:a,cursor:"pointer"}})},e.prototype.applyTickStates=function(t,i){var a=this.getItemStates(t);if(a.length){var n=this.get("tickStates"),o=this.getElementId("label-"+t.id),s=i.findById(o);if(s){var l=Ki(t,"label",n);l&&s.attr(l)}var f=this.getElementId("tickline-"+t.id),u=i.findById(f);if(u){var h=Ki(t,"tickLine",n);h&&u.attr(h)}}},e.prototype.updateTickStates=function(t){var i=this.getItemStates(t),a=this.get("tickStates"),n=this.get("label"),o=this.getElementByLocalId("label-"+t.id),s=this.get("tickLine"),l=this.getElementByLocalId("tickline-"+t.id);if(i.length){if(o){var f=Ki(t,"label",a);f&&o.attr(f)}if(l){var u=Ki(t,"tickLine",a);u&&l.attr(u)}}else o&&o.attr(n.style),l&&l.attr(s.style)},e}(at),ka=nT;var to={};Bt(to,{autoEllipsis:()=>ch,autoHide:()=>vh,autoRotate:()=>mh});var ch={};Bt(ch,{ellipsisHead:()=>sT,ellipsisMiddle:()=>lT,ellipsisTail:()=>pd,getDefault:()=>oT});function hh(r,e,t,i){var a=e.getChildren(),n=!1;return M(a,function(o){var s=ci(r,o,t,i);n=n||s}),n}function oT(){return pd}function sT(r,e,t){return hh(r,e,t,"head")}function pd(r,e,t){return hh(r,e,t,"tail")}function lT(r,e,t){return hh(r,e,t,"middle")}var vh={};Bt(vh,{equidistance:()=>dd,equidistanceWithReverseBoth:()=>vT,getDefault:()=>uT,reserveBoth:()=>pT,reserveFirst:()=>hT,reserveLast:()=>cT});function fT(r){var e=r.attr("matrix");return e&&e[0]!==1}function vd(r){var e=fT(r)?Qm(r.attr("matrix")):0;return e%360}function ph(r,e,t,i){var a=!1,n=vd(e),o=Math.abs(r?t.attr("y")-e.attr("y"):t.attr("x")-e.attr("x")),s=(r?t.attr("y")>e.attr("y"):t.attr("x")>e.attr("x"))?e.getBBox():t.getBBox();if(r){var l=Math.abs(Math.cos(n));Qn(l,0,Math.PI/180)?a=s.width+i>o:a=s.height/l+i>o}else{var l=Math.abs(Math.sin(n));Qn(l,0,Math.PI/180)?a=s.width+i>o:a=s.height/l+i>o}return a}function Jn(r,e,t,i){var a=i?.minGap||0,n=e.getChildren().slice().filter(function(v){return v.get("visible")});if(!n.length)return!1;var o=!1;t&&n.reverse();for(var s=n.length,l=n[0],f=l,u=1;u<s;u++){var h=n[u],c=h.getBBox(),p=ph(r,f,h,a);p?(h.hide(),o=!0):f=h}return o}function md(r,e,t){var i=t?.minGap||0,a=e.getChildren().slice();if(a.length<2)return!1;var n=!1,o=a[0],s=o.getBBox(),l=a[1],f=a.length,u=vd(o),h=Math.abs(r?l.attr("y")-o.attr("y"):l.attr("x")-o.attr("x")),c=0;if(r){var p=Math.abs(Math.cos(u));if(Qn(p,0,Math.PI/180)){var v=$n(a);c=(v+i)/h}else c=(s.height/p+i)/h}else{var p=Math.abs(Math.sin(u));if(Qn(p,0,Math.PI/180)){var v=$n(a);c=(v+i)/h}else c=(s.height/p+i)/h}if(c>1){c=Math.ceil(c);for(var m=0;m<f;m++)m%c!==0&&(a[m].hide(),n=!0)}return n}function uT(){return dd}function hT(r,e,t,i){return Jn(r,e,!1,i)}function cT(r,e,t,i){return Jn(r,e,!0,i)}function pT(r,e,t,i){var a=i?.minGap||0,n=e.getChildren().slice();if(n.length<=2)return!1;for(var o=!1,s=n.length,l=n[0],f=n[s-1],u=l,h=1;h<s-1;h++){var c=n[h],p=c.getBBox(),v=ph(r,u,c,a);v?(c.hide(),o=!0):u=c}var m=ph(r,u,f,a);return m&&(u.hide(),o=!0),o}function dd(r,e,t,i){var a=md(r,e,i);return Jn(r,e,!1)&&(a=!0),a}function vT(r,e,t,i){var a=e.getChildren().slice(),n=md(r,e,i);if(a.length>2){var o=a[0],s=a[a.length-1];o.get("visible")||(o.show(),Jn(r,e,!1,i)&&(n=!0)),s.get("visible")||(s.show(),Jn(r,e,!0,i)&&(n=!0))}return n}var mh={};Bt(mh,{fixedAngle:()=>yd,getDefault:()=>dT,unfixedAngle:()=>gT});function mT(r,e){M(r,function(t){var i=t.attr("x"),a=t.attr("y"),n=ze({x:i,y:a},e);t.attr("matrix",n)})}function gd(r,e,t,i){var a=e.getChildren();if(!a.length||!r&&a.length<2)return!1;var n=$n(a),o=!1;if(r)o=!!t&&n>t;else{var s=Math.abs(a[1].attr("x")-a[0].attr("x"));o=n>s}if(o){var l=i(t,n);mT(a,l)}return o}function dT(){return yd}function yd(r,e,t,i){return gd(r,e,t,function(){return z(i)?i:r?W.verticalAxisRotate:W.horizontalAxisRotate})}function gT(r,e,t){return gd(r,e,t,function(i,a){if(!i)return r?W.verticalAxisRotate:W.horizontalAxisRotate;if(r)return-Math.acos(i/a);var n=0;return i>a?n=Math.PI/4:(n=Math.asin(i/a),n>Math.PI/4&&(n=Math.PI/4)),n})}var yT=function(r){S(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return d(d({},t),{type:"line",locationType:"region",start:null,end:null})},e.prototype.getLinePath=function(){var t=this.get("start"),i=this.get("end"),a=[];return a.push(["M",t.x,t.y]),a.push(["L",i.x,i.y]),a},e.prototype.getInnerLayoutBBox=function(){var t=this.get("start"),i=this.get("end"),a=r.prototype.getInnerLayoutBBox.call(this),n=Math.min(t.x,i.x,a.x),o=Math.min(t.y,i.y,a.y),s=Math.max(t.x,i.x,a.maxX),l=Math.max(t.y,i.y,a.maxY);return{x:n,y:o,minX:n,minY:o,maxX:s,maxY:l,width:s-n,height:l-o}},e.prototype.isVertical=function(){var t=this.get("start"),i=this.get("end");return pt(t.x,i.x)},e.prototype.isHorizontal=function(){var t=this.get("start"),i=this.get("end");return pt(t.y,i.y)},e.prototype.getTickPoint=function(t){var i=this,a=i.get("start"),n=i.get("end"),o=n.x-a.x,s=n.y-a.y;return{x:a.x+o*t,y:a.y+s*t}},e.prototype.getSideVector=function(t){var i=this.getAxisVector(),a=Y.normalize([0,0],i),n=this.get("verticalFactor"),o=[a[1],a[0]*-1];return Y.scale([0,0],o,t*n)},e.prototype.getAxisVector=function(){var t=this.get("start"),i=this.get("end");return[i.x-t.x,i.y-t.y]},e.prototype.processOverlap=function(t){var i=this,a=this.isVertical(),n=this.isHorizontal();if(!(!a&&!n)){var o=this.get("label"),s=this.get("title"),l=this.get("verticalLimitLength"),f=o.offset,u=l,h=0,c=0;s&&(h=s.style.fontSize,c=s.spacing),u&&(u=u-f-c-h);var p=this.get("overlapOrder");if(M(p,function(g){o[g]&&i.canProcessOverlap(g)&&i.autoProcessOverlap(g,o[g],t,u)}),s&&I(s.offset)){var v=t.getCanvasBBox(),m=a?v.width:v.height;s.offset=f+m+c+h/2}}},e.prototype.canProcessOverlap=function(t){var i=this.get("label");return t==="autoRotate"?I(i.rotate):!0},e.prototype.autoProcessOverlap=function(t,i,a,n){var o=this,s=this.isVertical(),l=!1,f=to[t];if(i===!0){var u=this.get("label");l=f.getDefault()(s,a,n)}else if(D(i))l=i(s,a,n);else if(K(i)){var h=i;f[h.type]&&(l=f[h.type](s,a,n,h.cfg))}else f[i]&&(l=f[i](s,a,n));if(t==="autoRotate"){if(l){var c=a.getChildren(),p=this.get("verticalFactor");M(c,function(m){var g=m.attr("textAlign");if(g==="center"){var y=p>0?"end":"start";m.attr("textAlign",y)}})}}else if(t==="autoHide"){var v=a.getChildren().slice(0);M(v,function(m){m.get("visible")||(o.get("isRegister")&&o.unregisterElement(m),m.remove())})}},e}(ka),xd=yT;var xT=function(r){S(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return d(d({},t),{type:"circle",locationType:"circle",center:null,radius:null,startAngle:-Math.PI/2,endAngle:Math.PI*3/2})},e.prototype.getLinePath=function(){var t=this.get("center"),i=t.x,a=t.y,n=this.get("radius"),o=n,s=this.get("startAngle"),l=this.get("endAngle"),f=[];if(Math.abs(l-s)===Math.PI*2)f=[["M",i,a-o],["A",n,o,0,1,1,i,a+o],["A",n,o,0,1,1,i,a-o],["Z"]];else{var u=this.getCirclePoint(s),h=this.getCirclePoint(l),c=Math.abs(l-s)>Math.PI?1:0,p=s>l?0:1;f=[["M",i,a],["L",u.x,u.y],["A",n,o,0,c,p,h.x,h.y],["L",i,a]]}return f},e.prototype.getTickPoint=function(t){var i=this.get("startAngle"),a=this.get("endAngle"),n=i+(a-i)*t;return this.getCirclePoint(n)},e.prototype.getSideVector=function(t,i){var a=this.get("center"),n=[i.x-a.x,i.y-a.y],o=this.get("verticalFactor"),s=Y.length(n);return Y.scale(n,n,o*t/s),n},e.prototype.getAxisVector=function(t){var i=this.get("center"),a=[t.x-i.x,t.y-i.y];return[a[1],-1*a[0]]},e.prototype.getCirclePoint=function(t,i){var a=this.get("center");return i=i||this.get("radius"),{x:a.x+Math.cos(t)*i,y:a.y+Math.sin(t)*i}},e.prototype.canProcessOverlap=function(t){var i=this.get("label");return t==="autoRotate"?I(i.rotate):!0},e.prototype.processOverlap=function(t){var i=this,a=this.get("label"),n=this.get("title"),o=this.get("verticalLimitLength"),s=a.offset,l=o,f=0,u=0;n&&(f=n.style.fontSize,u=n.spacing),l&&(l=l-s-u-f);var h=this.get("overlapOrder");if(M(h,function(p){a[p]&&i.canProcessOverlap(p)&&i.autoProcessOverlap(p,a[p],t,l)}),n&&I(n.offset)){var c=t.getCanvasBBox().height;n.offset=s+c+u+f/2}},e.prototype.autoProcessOverlap=function(t,i,a,n){var o=this,s=!1,l=to[t];if(n>0)if(i===!0)s=l.getDefault()(!1,a,n);else if(D(i))s=i(!1,a,n);else if(K(i)){var f=i;l[f.type]&&(s=l[f.type](!1,a,n,f.cfg))}else l[i]&&(s=l[i](!1,a,n));if(t==="autoRotate"){if(s){var u=a.getChildren(),h=this.get("verticalFactor");M(u,function(p){var v=p.attr("textAlign");if(v==="center"){var m=h>0?"end":"start";p.attr("textAlign",m)}})}}else if(t==="autoHide"){var c=a.getChildren().slice(0);M(c,function(p){p.get("visible")||(o.get("isRegister")&&o.unregisterElement(p),p.remove())})}},e}(ka),Cd=xT;var ta={};Bt(ta,{Base:()=>Oa,Circle:()=>Md,Html:()=>bd,Line:()=>wd});var CT=function(r){S(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return d(d({},t),{name:"crosshair",type:"base",line:{},text:null,textBackground:{},capture:!1,defaultCfg:{line:{style:{lineWidth:1,stroke:W.lineColor}},text:{position:"start",offset:10,autoRotate:!1,content:null,style:{fill:W.textColor,textAlign:"center",textBaseline:"middle",fontFamily:W.fontFamily}},textBackground:{padding:5,style:{stroke:W.lineColor}}}})},e.prototype.renderInner=function(t){this.get("line")&&this.renderLine(t),this.get("text")&&(this.renderText(t),this.renderBackground(t))},e.prototype.renderText=function(t){var i=this.get("text"),a=i.style,n=i.autoRotate,o=i.content;if(!I(o)){var s=this.getTextPoint(),l=null;if(n){var f=this.getRotateAngle();l=ze(s,f)}this.addShape(t,{type:"text",name:"crosshair-text",id:this.getElementId("text"),attrs:d(d(d({},s),{text:o,matrix:l}),a)})}},e.prototype.renderLine=function(t){var i=this.getLinePath(),a=this.get("line"),n=a.style;this.addShape(t,{type:"path",name:"crosshair-line",id:this.getElementId("line"),attrs:d({path:i},n)})},e.prototype.renderBackground=function(t){var i=this.getElementId("text"),a=t.findById(i),n=this.get("textBackground");if(n&&a){var o=a.getBBox(),s=Zi(n.padding),l=n.style,f=this.addShape(t,{type:"rect",name:"crosshair-text-background",id:this.getElementId("text-background"),attrs:d({x:o.x-s[3],y:o.y-s[0],width:o.width+s[1]+s[3],height:o.height+s[0]+s[2],matrix:a.attr("matrix")},l)});f.toBack()}},e}(at),Oa=CT;var wT=function(r){S(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return d(d({},t),{type:"line",locationType:"region",start:null,end:null})},e.prototype.getRotateAngle=function(){var t=this.getLocation(),i=t.start,a=t.end,n=this.get("text").position,o=Math.atan2(a.y-i.y,a.x-i.x),s=n==="start"?o-Math.PI/2:o+Math.PI/2;return s},e.prototype.getTextPoint=function(){var t=this.getLocation(),i=t.start,a=t.end,n=this.get("text"),o=n.position,s=n.offset;return Ds(i,a,o,s)},e.prototype.getLinePath=function(){var t=this.getLocation(),i=t.start,a=t.end;return[["M",i.x,i.y],["L",a.x,a.y]]},e}(Oa),wd=wT;var MT=function(r){S(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return d(d({},t),{type:"circle",locationType:"circle",center:null,radius:100,startAngle:-Math.PI/2,endAngle:Math.PI*3/2})},e.prototype.getRotateAngle=function(){var t=this.getLocation(),i=t.startAngle,a=t.endAngle,n=this.get("text").position,o=n==="start"?i+Math.PI/2:a-Math.PI/2;return o},e.prototype.getTextPoint=function(){var t=this.get("text"),i=t.position,a=t.offset,n=this.getLocation(),o=n.center,s=n.radius,l=n.startAngle,f=n.endAngle,u=i==="start"?l:f,h=this.getRotateAngle()-Math.PI,c=hi(o,s,u),p=Math.cos(h)*a,v=Math.sin(h)*a;return{x:c.x+p,y:c.y+v}},e.prototype.getLinePath=function(){var t=this.getLocation(),i=t.center,a=t.radius,n=t.startAngle,o=t.endAngle,s=null;if(o-n===Math.PI*2){var l=i.x,f=i.y;s=[["M",l,f-a],["A",a,a,0,1,1,l,f+a],["A",a,a,0,1,1,l,f-a],["Z"]]}else{var u=hi(i,a,n),h=hi(i,a,o),c=Math.abs(o-n)>Math.PI?1:0,p=n>o?0:1;s=[["M",u.x,u.y],["A",a,a,0,c,p,h.x,h.y]]}return s},e}(Oa),Md=MT;var Ji="g2-crosshair",ro=Ji+"-line",io=Ji+"-text";var ao,Ad=(ao={},ao[""+Ji]={position:"relative"},ao[""+ro]={position:"absolute",backgroundColor:"rgba(0, 0, 0, 0.25)"},ao[""+io]={position:"absolute",color:W.textColor,fontFamily:W.fontFamily},ao);var ST=function(r){S(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return d(d({},t),{name:"crosshair",type:"html",locationType:"region",start:{x:0,y:0},end:{x:0,y:0},capture:!1,text:null,containerTpl:'<div class="'+Ji+'"></div>',crosshairTpl:'<div class="'+ro+'"></div>',textTpl:'<span class="'+io+'">{content}</span>',domStyles:null,containerClassName:Ji,defaultStyles:Ad,defaultCfg:{text:{position:"start",content:null,align:"center",offset:10}}})},e.prototype.render=function(){this.resetText(),this.resetPosition()},e.prototype.initCrossHair=function(){var t=this.getContainer(),i=this.get("crosshairTpl"),a=re(i);t.appendChild(a),this.applyStyle(ro,a),this.set("crosshairEl",a)},e.prototype.getTextPoint=function(){var t=this.getLocation(),i=t.start,a=t.end,n=this.get("text"),o=n.position,s=n.offset;return Ds(i,a,o,s)},e.prototype.resetText=function(){var t=this.get("text"),i=this.get("textEl");if(t){var a=t.content;if(!i){var n=this.getContainer(),o=yn(this.get("textTpl"),t);i=re(o),n.appendChild(i),this.applyStyle(io,i),this.set("textEl",i)}i.innerHTML=a}else i&&i.remove()},e.prototype.isVertical=function(t,i){return t.x===i.x},e.prototype.resetPosition=function(){var t=this.get("crosshairEl");t||(this.initCrossHair(),t=this.get("crosshairEl"));var i=this.get("start"),a=this.get("end"),n=Math.min(i.x,a.x),o=Math.min(i.y,a.y);this.isVertical(i,a)?Et(t,{width:"1px",height:ie(Math.abs(a.y-i.y))}):Et(t,{height:"1px",width:ie(Math.abs(a.x-i.x))}),Et(t,{top:ie(o),left:ie(n)}),this.alignText()},e.prototype.alignText=function(){var t=this.get("textEl");if(t){var i=this.get("text").align,a=t.clientWidth,n=this.getTextPoint();switch(i){case"center":n.x=n.x-a/2;break;case"right":n.x=n.x-a;case"left":break}Et(t,{top:ie(n.y),left:ie(n.x)})}},e.prototype.updateInner=function(t){De(t,"text")&&this.resetText(),r.prototype.updateInner.call(this,t)},e}(vi),bd=ST;var no={};Bt(no,{Base:()=>Fa,Circle:()=>Td,Line:()=>Ed});var AT=function(r){S(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return d(d({},t),{name:"grid",line:{},alternateColor:null,capture:!1,items:[],closed:!1,defaultCfg:{line:{type:"line",style:{lineWidth:1,stroke:W.lineColor}}}})},e.prototype.getLineType=function(){var t=this.get("line")||this.get("defaultCfg").line;return t.type},e.prototype.renderInner=function(t){this.drawGrid(t)},e.prototype.getAlternatePath=function(t,i){var a=this.getGridPath(t),n=i.slice(0).reverse(),o=this.getGridPath(n,!0),s=this.get("closed");return s?a=a.concat(o):(o[0][0]="L",a=a.concat(o),a.push(["Z"])),a},e.prototype.getPathStyle=function(){return this.get("line").style},e.prototype.drawGrid=function(t){var i=this,a=this.get("line"),n=this.get("items"),o=this.get("alternateColor"),s=null;M(n,function(l,f){var u=l.id||f;if(a){var h=i.getPathStyle();h=D(h)?h(l,f,n):h;var c=i.getElementId("line-"+u),p=i.getGridPath(l.points);i.addShape(t,{type:"path",name:"grid-line",id:c,attrs:J({path:p},h)})}if(o&&f>0){var v=i.getElementId("region-"+u),m=f%2===0;if(G(o))m&&i.drawAlternateRegion(v,t,s.points,l.points,o);else{var g=m?o[1]:o[0];i.drawAlternateRegion(v,t,s.points,l.points,g)}}s=l})},e.prototype.drawAlternateRegion=function(t,i,a,n,o){var s=this.getAlternatePath(a,n);this.addShape(i,{type:"path",id:t,name:"grid-region",attrs:{path:s,fill:o}})},e}(at),Fa=AT;function bT(r,e,t,i){var a=t-r,n=i-e;return Math.sqrt(a*a+n*n)}var TT=function(r){S(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return d(d({},t),{type:"circle",center:null,closed:!0})},e.prototype.getGridPath=function(t,i){var a=this.getLineType(),n=this.get("closed"),o=[];if(t.length)if(a==="circle"){var s=this.get("center"),l=t[0],f=bT(s.x,s.y,l.x,l.y),u=i?0:1;n?(o.push(["M",s.x,s.y-f]),o.push(["A",f,f,0,0,u,s.x,s.y+f]),o.push(["A",f,f,0,0,u,s.x,s.y-f]),o.push(["Z"])):M(t,function(h,c){c===0?o.push(["M",h.x,h.y]):o.push(["A",f,f,0,0,u,h.x,h.y])})}else M(t,function(h,c){c===0?o.push(["M",h.x,h.y]):o.push(["L",h.x,h.y])}),n&&o.push(["Z"]);return o},e}(Fa),Td=TT;var ET=function(r){S(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return d(d({},t),{type:"line"})},e.prototype.getGridPath=function(t){var i=[];return M(t,function(a,n){n===0?i.push(["M",a.x,a.y]):i.push(["L",a.x,a.y])}),i},e}(Fa),Ed=ET;var oo={};Bt(oo,{Base:()=>_a,Category:()=>Id,Continuous:()=>Bd});var LT=function(r){S(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return d(d({},t),{name:"legend",layout:"horizontal",locationType:"point",x:0,y:0,offsetX:0,offsetY:0,title:null,background:null})},e.prototype.getLayoutBBox=function(){var t=r.prototype.getLayoutBBox.call(this),i=this.get("maxWidth"),a=this.get("maxHeight"),n=t.width,o=t.height;return i&&(n=Math.min(n,i)),a&&(o=Math.min(o,a)),Pa(t.minX,t.minY,n,o)},e.prototype.setLocation=function(t){this.set("x",t.x),this.set("y",t.y),this.resetLocation()},e.prototype.resetLocation=function(){var t=this.get("x"),i=this.get("y"),a=this.get("offsetX"),n=this.get("offsetY");this.moveElementTo(this.get("group"),{x:t+a,y:i+n})},e.prototype.applyOffset=function(){this.resetLocation()},e.prototype.getDrawPoint=function(){return this.get("currentPoint")},e.prototype.setDrawPoint=function(t){return this.set("currentPoint",t)},e.prototype.renderInner=function(t){this.resetDraw(),this.get("title")&&this.drawTitle(t),this.drawLegendContent(t),this.get("background")&&this.drawBackground(t)},e.prototype.drawBackground=function(t){var i=this.get("background"),a=t.getBBox(),n=Zi(i.padding),o=d({x:0,y:0,width:a.width+n[1]+n[3],height:a.height+n[0]+n[2]},i.style),s=this.addShape(t,{type:"rect",id:this.getElementId("background"),name:"legend-background",attrs:o});s.toBack()},e.prototype.drawTitle=function(t){var i=this.get("currentPoint"),a=this.get("title"),n=a.spacing,o=a.style,s=a.text,l=this.addShape(t,{type:"text",id:this.getElementId("title"),name:"legend-title",attrs:d({text:s,x:i.x,y:i.y},o)}),f=l.getBBox();this.set("currentPoint",{x:i.x,y:f.maxY+n})},e.prototype.resetDraw=function(){var t=this.get("background"),i={x:0,y:0};if(t){var a=Zi(t.padding);i.x=a[3],i.y=a[0]}this.set("currentPoint",i)},e}(at),_a=LT;var dh={marker:{style:{inactiveFill:"#000",inactiveOpacity:.45,fill:"#000",opacity:1,size:12}},text:{style:{fill:"#ccc",fontSize:12}}},Ns={fill:W.textColor,fontSize:12,textAlign:"start",textBaseline:"middle",fontFamily:W.fontFamily,fontWeight:"normal",lineHeight:12},gh="navigation-arrow-right",yh="navigation-arrow-left",Ld={right:90*Math.PI/180,left:270*Math.PI/180,up:0,down:180*Math.PI/180},IT=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.currentPageIndex=1,t.totalPagesCnt=1,t.pageWidth=0,t.pageHeight=0,t.startX=0,t.startY=0,t.onNavigationBack=function(){var i=t.getElementByLocalId("item-group");if(t.currentPageIndex>1){t.currentPageIndex-=1,t.updateNavigation();var a=t.getCurrentNavigationMatrix();t.get("animate")?i.animate({matrix:a},100):i.attr({matrix:a})}},t.onNavigationAfter=function(){var i=t.getElementByLocalId("item-group");if(t.currentPageIndex<t.totalPagesCnt){t.currentPageIndex+=1,t.updateNavigation();var a=t.getCurrentNavigationMatrix();t.get("animate")?i.animate({matrix:a},100):i.attr({matrix:a})}},t}return e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return d(d({},t),{name:"legend",type:"category",itemSpacing:24,itemMarginBottom:8,maxItemWidth:null,itemWidth:null,itemHeight:null,itemName:{},itemValue:null,maxWidth:null,maxHeight:null,marker:{},radio:null,items:[],itemStates:{},itemBackground:{},pageNavigator:{},defaultCfg:{title:{spacing:5,style:{fill:W.textColor,fontSize:12,textAlign:"start",textBaseline:"top"}},background:{padding:5,style:{stroke:W.lineColor}},itemBackground:{style:{opacity:0,fill:"#fff"}},pageNavigator:dh,itemName:{spacing:16,style:Ns},marker:{spacing:8,style:{r:6,symbol:"circle"}},itemValue:{alignRight:!1,formatter:null,style:Ns,spacing:6},itemStates:{active:{nameStyle:{opacity:.8}},unchecked:{nameStyle:{fill:W.uncheckedColor},markerStyle:{fill:W.uncheckedColor,stroke:W.uncheckedColor}},inactive:{nameStyle:{fill:W.uncheckedColor},markerStyle:{opacity:.2}}}}})},e.prototype.isList=function(){return!0},e.prototype.getItems=function(){return this.get("items")},e.prototype.setItems=function(t){this.update({items:t})},e.prototype.updateItem=function(t,i){J(t,i),this.clear(),this.render()},e.prototype.clearItems=function(){var t=this.getElementByLocalId("item-group");t&&t.clear()},e.prototype.setItemState=function(t,i,a){t[i]=a;var n=this.getElementByLocalId("item-"+t.id);if(n){var o=this.getItems(),s=o.indexOf(t),l=this.createOffScreenGroup(),f=this.drawItem(t,s,this.getItemHeight(),l);this.updateElements(f,n),this.clearUpdateStatus(n)}},e.prototype.hasState=function(t,i){return!!t[i]},e.prototype.getItemStates=function(t){var i=this.get("itemStates"),a=[];return M(i,function(n,o){t[o]&&a.push(o)}),a},e.prototype.clearItemsState=function(t){var i=this,a=this.getItemsByState(t);M(a,function(n){i.setItemState(n,t,!1)})},e.prototype.getItemsByState=function(t){var i=this,a=this.getItems();return St(a,function(n){return i.hasState(n,t)})},e.prototype.drawLegendContent=function(t){this.processItems(),this.drawItems(t)},e.prototype.processItems=function(){var t=this.get("items");M(t,function(i){i.id||(i.id=i.name)})},e.prototype.drawItems=function(t){var i=this,a=this.addGroup(t,{id:this.getElementId("item-container-group"),name:"legend-item-container-group"}),n=this.addGroup(a,{id:this.getElementId("item-group"),name:"legend-item-group"}),o=this.getItemHeight(),s=this.get("itemWidth"),l=this.get("itemSpacing"),f=this.get("itemMarginBottom"),u=this.get("currentPoint"),h=u.x,c=u.y,p=this.get("layout"),v=this.get("items"),m=!1,g=0,y=this.get("maxWidth"),w=this.get("maxHeight");M(v,function(x,C){var A=i.drawItem(x,C,o,n),T=A.getBBox(),E=s||T.width;E>g&&(g=E),p==="horizontal"?(y&&y<u.x+E-h&&(m=!0,u.x=h,u.y+=o+f),i.moveElementTo(A,u),u.x+=E+l):(w&&w<u.y+o+f-c&&(m=!0,u.x+=g+l,u.y=c,g=0),i.moveElementTo(A,u),u.y+=o+f)}),m&&this.get("flipPage")&&(this.pageHeight=0,this.pageWidth=0,this.totalPagesCnt=1,this.startX=h,this.startY=c,this.adjustNavigation(t,n))},e.prototype.getItemHeight=function(){var t=this.get("itemHeight");if(!t){var i=(this.get("itemName")||{}).style;if(D(i)){var a=this.getItems();a.forEach(function(n,o){var s=d(d({},Ns),i(n,o,a)).fontSize;t<s&&(t=s)})}else i&&(t=i.fontSize)}return t},e.prototype.drawMarker=function(t,i,a,n){var o=d(d(d({x:0,y:n/2},i.style),{symbol:b(a.marker,"symbol","circle")}),b(a.marker,"style",{})),s=this.addShape(t,{type:"marker",id:this.getElementId("item-"+a.id+"-marker"),name:"legend-item-marker",attrs:o}),l=s.getBBox();s.attr("x",l.width/2);var f=s.attr(),u=f.stroke,h=f.fill;return u&&s.set("isStroke",!0),h&&s.set("isFill",!0),s},e.prototype.drawItemText=function(t,i,a,n,o,s,l){var f=a.formatter,u=a.style,h=d(d({x:s,y:o/2,text:f?f(n[i],n,l):n[i]},Ns),D(u)?u(n,l,this.getItems()):u);return this.addShape(t,{type:"text",id:this.getElementId("item-"+n.id+"-"+i),name:"legend-item-"+i,attrs:h})},e.prototype.drawRadio=function(t,i,a,n,o){var s,l,f=i.style||{},u=(s=f.r)!==null&&s!==void 0?s:n/2,h=u*3.6/8,c=[o+u,n/2-u],p=c[0],v=c[1],m=[p+u,v+u],g=m[0],y=m[1],w=[p,y+u],x=w[0],C=w[1],A=[o,v+u],T=A[0],E=A[1],k=a.showRadio,P=d(d({path:[["M",p,v],["A",u,u,0,0,1,g,y],["L",g-h,y],["L",g,y],["A",u,u,0,0,1,x,C],["L",x,C-h],["L",x,C],["A",u,u,0,0,1,T,E],["L",T+h,E],["L",T,E],["A",u,u,0,0,1,p,v],["L",p,v+h]],stroke:"#000000",fill:"#ffffff"},f),{opacity:k?(l=f?.opacity)!==null&&l!==void 0?l:.45:0}),L=this.addShape(t,{type:"path",id:this.getElementId("item-"+a.id+"-radio"),name:"legend-item-radio",attrs:P});return L.set("tip",i.tip),L},e.prototype.drawItem=function(t,i,a,n){var o="item-"+t.id,s=this.addGroup(n,{name:"legend-item-container",id:this.getElementId("item-container-"+o),delegateObject:{item:t,index:i}}),l=this.addGroup(s,{name:"legend-item",id:this.getElementId(o),delegateObject:{item:t,index:i}}),f=this.get("marker"),u=this.get("itemName"),h=this.get("itemValue"),c=this.get("itemBackground"),p=this.get("radio"),v=this.getLimitItemWidth(),m=0;if(f){var g=this.drawMarker(l,f,t,a),y=f.spacing,w=b(t,["marker","spacing"]);z(w)&&(y=w),m=g.getBBox().maxX+y}if(u){var x=this.drawItemText(l,"name",u,t,a,m,i);v&&ci(!0,x,ft(v-m,0,v)),m=x.getBBox().maxX+u.spacing}if(h){var C=this.drawItemText(l,"value",h,t,a,m,i);v&&(h.alignRight?(C.attr({textAlign:"right",x:v}),ci(!0,C,ft(v-m,0,v),"head")):ci(!0,C,ft(v-m,0,v))),m=C.getBBox().maxX+h.spacing}if(p&&this.drawRadio(l,p,t,a,m),c){var A=l.getBBox(),T=this.addShape(l,{type:"rect",name:"legend-item-background",id:this.getElementId(o+"-background"),attrs:d({x:0,y:0,width:A.width,height:a},c.style)});T.toBack()}return this.applyItemStates(t,l),l},e.prototype.adjustNavigation=function(t,i){var a=this,n=this.startX,o=this.startY,s=this.get("layout"),l=i.findAll(function(N){return N.get("name")==="legend-item"}),f=this.get("maxWidth"),u=this.get("maxHeight"),h=this.get("itemWidth"),c=this.get("itemSpacing"),p=this.getItemHeight(),v=O({},dh,this.get("pageNavigator")),m=this.drawNavigation(t,s,"00/00",v),g=m.getBBox(),y={x:n,y:o},w=1,x=0,C=0,A=0,T=this.get("itemMarginBottom");function E(N,H){var V=N.getBBox(),Q=h||V.width,mt=H.x+Q+c+g.width;return mt>f}if(s==="horizontal"){var k=this.get("maxRow")||1,P=p+(k===1?0:T),L=f-c-g.width-g.minX;this.pageHeight=P*k,this.pageWidth=L,M(l,function(N){var H=N.getBBox(),V=h||H.width;(x&&x<y.x+V+c||E(N,y))&&(w===1&&(x=y.x+c,a.moveElementTo(m,{x:L,y:y.y+p/2-g.height/2-g.minY})),w+=1,y.x=n,y.y+=P),a.moveElementTo(N,y),N.getParent().setClip({type:"rect",attrs:{x:y.x,y:y.y,width:V+c,height:p}}),y.x+=V+c})}else{M(l,function(N){var H=N.getBBox();H.width>C&&(C=H.width)}),A=C,C+=c,f&&(C=Math.min(f,C),A=Math.min(f,A)),this.pageWidth=C,this.pageHeight=u-Math.max(g.height,p+T);var R=Math.floor(this.pageHeight/(p+T));M(l,function(N,H){H!==0&&H%R===0&&(w+=1,y.x+=C,y.y=o),a.moveElementTo(N,y),N.getParent().setClip({type:"rect",attrs:{x:y.x,y:y.y,width:C,height:p}}),y.y+=p+T}),this.totalPagesCnt=w,this.moveElementTo(m,{x:n+A/2-g.width/2-g.minX,y:u-g.height-g.minY})}this.pageHeight&&this.pageWidth&&i.getParent().setClip({type:"rect",attrs:{x:this.startX,y:this.startY,width:this.pageWidth,height:this.pageHeight}}),s==="horizontal"&&this.get("maxRow")?this.totalPagesCnt=Math.ceil(w/this.get("maxRow")):this.totalPagesCnt=w,this.currentPageIndex>this.totalPagesCnt&&(this.currentPageIndex=1),this.updateNavigation(m),i.attr("matrix",this.getCurrentNavigationMatrix())},e.prototype.drawNavigation=function(t,i,a,n){var o={x:0,y:0},s=this.addGroup(t,{id:this.getElementId("navigation-group"),name:"legend-navigation"}),l=b(n.marker,"style",{}),f=l.size,u=f===void 0?12:f,h=gt(l,["size"]),c=this.drawArrow(s,o,yh,i==="horizontal"?"up":"left",u,h);c.on("click",this.onNavigationBack);var p=c.getBBox();o.x+=p.width+2;var v=this.addShape(s,{type:"text",id:this.getElementId("navigation-text"),name:"navigation-text",attrs:d({x:o.x,y:o.y+u/2,text:a,textBaseline:"middle"},b(n.text,"style"))}),m=v.getBBox();o.x+=m.width+2;var g=this.drawArrow(s,o,gh,i==="horizontal"?"down":"right",u,h);return g.on("click",this.onNavigationAfter),s},e.prototype.updateNavigation=function(t){var i=O({},dh,this.get("pageNavigator")),a=i.marker.style,n=a.fill,o=a.opacity,s=a.inactiveFill,l=a.inactiveOpacity,f=this.currentPageIndex+"/"+this.totalPagesCnt,u=t?t.getChildren()[1]:this.getElementByLocalId("navigation-text"),h=t?t.findById(this.getElementId(yh)):this.getElementByLocalId(yh),c=t?t.findById(this.getElementId(gh)):this.getElementByLocalId(gh);u.attr("text",f),h.attr("opacity",this.currentPageIndex===1?l:o),h.attr("fill",this.currentPageIndex===1?s:n),h.attr("cursor",this.currentPageIndex===1?"not-allowed":"pointer"),c.attr("opacity",this.currentPageIndex===this.totalPagesCnt?l:o),c.attr("fill",this.currentPageIndex===this.totalPagesCnt?s:n),c.attr("cursor",this.currentPageIndex===this.totalPagesCnt?"not-allowed":"pointer");var p=h.getBBox().maxX+2;u.attr("x",p),p+=u.getBBox().width+2,this.updateArrowPath(c,{x:p,y:0})},e.prototype.drawArrow=function(t,i,a,n,o,s){var l=i.x,f=i.y,u=this.addShape(t,{type:"path",id:this.getElementId(a),name:a,attrs:d({size:o,direction:n,path:[["M",l+o/2,f],["L",l,f+o],["L",l+o,f+o],["Z"]],cursor:"pointer"},s)});return u.attr("matrix",ze({x:l+o/2,y:f+o/2},Ld[n])),u},e.prototype.updateArrowPath=function(t,i){var a=i.x,n=i.y,o=t.attr(),s=o.size,l=o.direction,f=ze({x:a+s/2,y:n+s/2},Ld[l]);t.attr("path",[["M",a+s/2,n],["L",a,n+s],["L",a+s,n+s],["Z"]]),t.attr("matrix",f)},e.prototype.getCurrentNavigationMatrix=function(){var t=this,i=t.currentPageIndex,a=t.pageWidth,n=t.pageHeight,o=this.get("layout"),s=o==="horizontal"?{x:0,y:n*(1-i)}:{x:a*(1-i),y:0};return Zn(s)},e.prototype.applyItemStates=function(t,i){var a=this.getItemStates(t),n=a.length>0;if(n){var o=i.getChildren(),s=this.get("itemStates");M(o,function(l){var f=l.get("name"),u=f.split("-")[2],h=Ki(t,u,s);h&&(l.attr(h),u==="marker"&&!(l.get("isStroke")&&l.get("isFill"))&&(l.get("isStroke")&&l.attr("fill",null),l.get("isFill")&&l.attr("stroke",null)))})}},e.prototype.getLimitItemWidth=function(){var t=this.get("itemWidth"),i=this.get("maxItemWidth");return i?t&&(i=t<=i?t:i):t&&(i=t),i},e}(_a),Id=IT;var PT=1.4,Pd=.4,BT=function(r){S(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return d(d({},t),{type:"continue",min:0,max:100,value:null,colors:[],track:{},rail:{},label:{},handler:{},slidable:!0,tip:null,step:null,maxWidth:null,maxHeight:null,defaultCfg:{label:{align:"rail",spacing:5,formatter:null,style:{fontSize:12,fill:W.textColor,textBaseline:"middle",fontFamily:W.fontFamily}},handler:{size:10,style:{fill:"#fff",stroke:"#333"}},track:{},rail:{type:"color",size:20,defaultLength:100,style:{fill:"#DCDEE2"}},title:{spacing:5,style:{fill:W.textColor,fontSize:12,textAlign:"start",textBaseline:"top"}}}})},e.prototype.isSlider=function(){return!0},e.prototype.getValue=function(){return this.getCurrentValue()},e.prototype.getRange=function(){return{min:this.get("min"),max:this.get("max")}},e.prototype.setRange=function(t,i){this.update({min:t,max:i})},e.prototype.setValue=function(t){var i=this.getValue();this.set("value",t);var a=this.get("group");this.resetTrackClip(),this.get("slidable")&&this.resetHandlers(a),this.delegateEmit("valuechanged",{originValue:i,value:t})},e.prototype.initEvent=function(){var t=this.get("group");this.bindSliderEvent(t),this.bindRailEvent(t),this.bindTrackEvent(t)},e.prototype.drawLegendContent=function(t){this.drawRail(t),this.drawLabels(t),this.fixedElements(t),this.resetTrack(t),this.resetTrackClip(t),this.get("slidable")&&this.resetHandlers(t)},e.prototype.bindSliderEvent=function(t){this.bindHandlersEvent(t)},e.prototype.bindHandlersEvent=function(t){var i=this;t.on("legend-handler-min:drag",function(a){var n=i.getValueByCanvasPoint(a.x,a.y),o=i.getCurrentValue(),s=o[1];s<n&&(s=n),i.setValue([n,s])}),t.on("legend-handler-max:drag",function(a){var n=i.getValueByCanvasPoint(a.x,a.y),o=i.getCurrentValue(),s=o[0];s>n&&(s=n),i.setValue([s,n])})},e.prototype.bindRailEvent=function(t){},e.prototype.bindTrackEvent=function(t){var i=this,a=null;t.on("legend-track:dragstart",function(n){a={x:n.x,y:n.y}}),t.on("legend-track:drag",function(n){if(a){var o=i.getValueByCanvasPoint(a.x,a.y),s=i.getValueByCanvasPoint(n.x,n.y),l=i.getCurrentValue(),f=l[1]-l[0],u=i.getRange(),h=s-o;h<0?l[0]+h>u.min?i.setValue([l[0]+h,l[1]+h]):i.setValue([u.min,u.min+f]):h>0&&(h>0&&l[1]+h<u.max?i.setValue([l[0]+h,l[1]+h]):i.setValue([u.max-f,u.max])),a={x:n.x,y:n.y}}}),t.on("legend-track:dragend",function(n){a=null})},e.prototype.drawLabels=function(t){this.drawLabel("min",t),this.drawLabel("max",t)},e.prototype.drawLabel=function(t,i){var a=this.get("label"),n=a.style,o=a.align,s=a.formatter,l=this.get(t),f=this.getLabelAlignAttrs(t,o),u="label-"+t;this.addShape(i,{type:"text",id:this.getElementId(u),name:"legend-label-"+t,attrs:d(d({x:0,y:0,text:D(s)?s(l):l},n),f)})},e.prototype.getLabelAlignAttrs=function(t,i){var a=this.isVertical(),n="center",o="middle";return a?(n="start",i!=="rail"?t==="min"?o="top":o="bottom":o="top"):i!=="rail"?(o="top",t==="min"?n="start":n="end"):(n="start",o="middle"),{textAlign:n,textBaseline:o}},e.prototype.getRailPath=function(t,i,a,n){var o=this.get("rail"),s=o.size,l=o.defaultLength,f=o.type,u=this.isVertical(),h=l,c=a,p=n;c||(c=u?s:h),p||(p=u?h:s);var v=[];return f==="color"?(v.push(["M",t,i]),v.push(["L",t+c,i]),v.push(["L",t+c,i+p]),v.push(["L",t,i+p]),v.push(["Z"])):(v.push(["M",t+c,i]),v.push(["L",t+c,i+p]),v.push(["L",t,i+p]),v.push(["Z"])),v},e.prototype.drawRail=function(t){var i=this.get("rail"),a=i.style;this.addShape(t,{type:"path",id:this.getElementId("rail"),name:"legend-rail",attrs:d({path:this.getRailPath(0,0)},a)})},e.prototype.getTrackColor=function(t){var i=t.length;if(!i)return null;if(i===1)return t[0];var a;this.isVertical()?a="l(90)":a="l(0)";for(var n=0;n<i;n++){var o=n/(i-1);a+=" "+o+":"+t[n]}return a},e.prototype.getTrackPath=function(t){var i=this.getRailShape(t),a=i.attr("path");return zt(a)},e.prototype.getClipTrackAttrs=function(t){var i=this.getCurrentValue(),a=i[0],n=i[1],o=this.getRailBBox(t),s=this.getPointByValue(a,t),l=this.getPointByValue(n,t),f=this.isVertical(),u,h,c,p;return f?(u=o.minX,h=s.y,c=o.width,p=l.y-s.y):(u=s.x,h=o.minY,c=l.x-s.x,p=o.height),{x:u,y:h,width:c,height:p}},e.prototype.getTrackAttrs=function(t){var i=this.get("track"),a=this.get("colors"),n=this.getTrackPath(t);return J({path:n,fill:this.getTrackColor(a)},i.style)},e.prototype.resetTrackClip=function(t){var i=t||this.get("group"),a=this.getElementId("track"),n=i.findById(a),o=n.getClip(),s=this.getClipTrackAttrs(t);o?o.attr(s):n.setClip({type:"rect",attrs:s})},e.prototype.resetTrack=function(t){var i=this.getElementId("track"),a=t.findById(i),n=this.getTrackAttrs(t);a?a.attr(n):this.addShape(t,{type:"path",id:i,draggable:this.get("slidable"),name:"legend-track",attrs:n})},e.prototype.getPointByValue=function(t,i){var a=this.getRange(),n=a.min,o=a.max,s=(t-n)/(o-n),l=this.getRailBBox(i),f=this.isVertical(),u={x:0,y:0};return f?(u.x=l.minX+l.width/2,u.y=Er(l.minY,l.maxY,s)):(u.x=Er(l.minX,l.maxX,s),u.y=l.minY+l.height/2),u},e.prototype.getRailShape=function(t){var i=t||this.get("group");return i.findById(this.getElementId("rail"))},e.prototype.getRailBBox=function(t){var i=this.getRailShape(t),a=i.getBBox();return a},e.prototype.getRailCanvasBBox=function(){var t=this.get("group"),i=t.findById(this.getElementId("rail")),a=i.getCanvasBBox();return a},e.prototype.isVertical=function(){return this.get("layout")==="vertical"},e.prototype.getValueByCanvasPoint=function(t,i){var a=this.getRange(),n=a.min,o=a.max,s=this.getRailCanvasBBox(),l=this.isVertical(),f=this.get("step"),u;l?u=(i-s.minY)/s.height:u=(t-s.minX)/s.width;var h=Er(n,o,u);if(f){var c=Math.round((h-n)/f);h=n+c*f}return h>o&&(h=o),h<n&&(h=n),h},e.prototype.getCurrentValue=function(){var t=this.get("value");if(!t){var i=this.get("values");return i?[Math.max(Math.min.apply(Math,dr(i,[this.get("max")])),this.get("min")),Math.min(Math.max.apply(Math,dr(i,[this.get("min")])),this.get("max"))]:[this.get("min"),this.get("max")]}return t},e.prototype.resetHandlers=function(t){var i=this.getCurrentValue(),a=i[0],n=i[1];this.resetHandler(t,"min",a),this.resetHandler(t,"max",n)},e.prototype.getHandlerPath=function(t,i){var a=this.isVertical(),n=[],o=t.size,s=i.x,l=i.y,f=o*PT,u=o/2,h=o/6;if(a){var c=s+f*Pd;n.push(["M",s,l]),n.push(["L",c,l+u]),n.push(["L",s+f,l+u]),n.push(["L",s+f,l-u]),n.push(["L",c,l-u]),n.push(["Z"]),n.push(["M",c,l+h]),n.push(["L",s+f-2,l+h]),n.push(["M",c,l-h]),n.push(["L",s+f-2,l-h])}else{var p=l+f*Pd;n.push(["M",s,l]),n.push(["L",s-u,p]),n.push(["L",s-u,l+f]),n.push(["L",s+u,l+f]),n.push(["L",s+u,p]),n.push(["Z"]),n.push(["M",s-h,p]),n.push(["L",s-h,l+f-2]),n.push(["M",s+h,p]),n.push(["L",s+h,l+f-2])}return n},e.prototype.resetHandler=function(t,i,a){var n=this.getPointByValue(a,t),o=this.get("handler"),s=this.getHandlerPath(o,n),l=this.getElementId("handler-"+i),f=t.findById(l),u=this.isVertical();f?f.attr("path",s):this.addShape(t,{type:"path",name:"legend-handler-"+i,draggable:!0,id:l,attrs:d(d({path:s},o.style),{cursor:u?"ns-resize":"ew-resize"})})},e.prototype.fixedElements=function(t){var i=t.findById(this.getElementId("rail")),a=t.findById(this.getElementId("label-min")),n=t.findById(this.getElementId("label-max")),o=this.getDrawPoint();this.isVertical()?this.fixedVertail(a,n,i,o):this.fixedHorizontal(a,n,i,o)},e.prototype.fitRailLength=function(t,i,a,n){var o=this.isVertical(),s=o?"height":"width",l=this.get("label"),f=l.align,u=l.spacing,h=this.get("max"+ue(s));if(h){var c=f==="rail"?a[s]+t[s]+i[s]+u*2:a[s],p=c-h;p>0&&this.changeRailLength(n,s,a[s]-p)}},e.prototype.changeRailLength=function(t,i,a){var n=t.getBBox(),o;i==="height"?o=this.getRailPath(n.x,n.y,n.width,a):o=this.getRailPath(n.x,n.y,a,n.height),t.attr("path",o)},e.prototype.changeRailPosition=function(t,i,a){var n=t.getBBox(),o=this.getRailPath(i,a,n.width,n.height);t.attr("path",o)},e.prototype.fixedHorizontal=function(t,i,a,n){var o=this.get("label"),s=o.align,l=o.spacing,f=a.getBBox(),u=t.getBBox(),h=i.getBBox(),c=f.height;this.fitRailLength(u,h,f,a),f=a.getBBox(),s==="rail"?(t.attr({x:n.x,y:n.y+c/2}),this.changeRailPosition(a,n.x+u.width+l,n.y),i.attr({x:n.x+u.width+f.width+l*2,y:n.y+c/2})):s==="top"?(t.attr({x:n.x,y:n.y}),i.attr({x:n.x+f.width,y:n.y}),this.changeRailPosition(a,n.x,n.y+u.height+l)):(this.changeRailPosition(a,n.x,n.y),t.attr({x:n.x,y:n.y+f.height+l}),i.attr({x:n.x+f.width,y:n.y+f.height+l}))},e.prototype.fixedVertail=function(t,i,a,n){var o=this.get("label"),s=o.align,l=o.spacing,f=a.getBBox(),u=t.getBBox(),h=i.getBBox();if(this.fitRailLength(u,h,f,a),f=a.getBBox(),s==="rail")t.attr({x:n.x,y:n.y}),this.changeRailPosition(a,n.x,n.y+u.height+l),i.attr({x:n.x,y:n.y+u.height+f.height+l*2});else if(s==="right")t.attr({x:n.x+f.width+l,y:n.y}),this.changeRailPosition(a,n.x,n.y),i.attr({x:n.x+f.width+l,y:n.y+f.height});else{var c=Math.max(u.width,h.width);t.attr({x:n.x,y:n.y}),this.changeRailPosition(a,n.x+c+l,n.y),i.attr({x:n.x,y:n.y+f.height})}},e}(_a),Bd=BT;var Gs={};Bt(Gs,{Html:()=>Fd});var Ot={};Bt(Ot,{CONTAINER_CLASS:()=>Ra,CROSSHAIR_X:()=>uo,CROSSHAIR_Y:()=>ho,LIST_CLASS:()=>Na,LIST_ITEM_CLASS:()=>so,MARKER_CLASS:()=>lo,NAME_CLASS:()=>xh,TITLE_CLASS:()=>Da,VALUE_CLASS:()=>fo});var Ra="g2-tooltip",Da="g2-tooltip-title",Na="g2-tooltip-list",so="g2-tooltip-list-item",lo="g2-tooltip-marker",fo="g2-tooltip-value",xh="g2-tooltip-name",uo="g2-tooltip-crosshair-x",ho="g2-tooltip-crosshair-y";var nr,kd=(nr={},nr[""+Ra]={position:"absolute",visibility:"visible",zIndex:8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)",backgroundColor:"rgba(255, 255, 255, 0.9)",boxShadow:"0px 0px 10px #aeaeae",borderRadius:"3px",color:"rgb(87, 87, 87)",fontSize:"12px",fontFamily:W.fontFamily,lineHeight:"20px",padding:"10px 10px 6px 10px"},nr[""+Da]={marginBottom:"4px"},nr[""+Na]={margin:"0px",listStyleType:"none",padding:"0px"},nr[""+so]={listStyleType:"none",marginBottom:"4px"},nr[""+lo]={width:"8px",height:"8px",borderRadius:"50%",display:"inline-block",marginRight:"8px"},nr[""+fo]={display:"inline-block",float:"right",marginLeft:"30px"},nr[""+uo]={position:"absolute",width:"1px",backgroundColor:"rgba(0, 0, 0, 0.25)"},nr[""+ho]={position:"absolute",height:"1px",backgroundColor:"rgba(0, 0, 0, 0.25)"},nr);function kT(r,e,t,i,a){var n={left:r<a.x,right:r+t>a.x+a.width,top:e<a.y,bottom:e+i>a.y+a.height};return n}function OT(r,e,t,i,a,n){var o=r,s=e;switch(n){case"left":o=r-i-t,s=e-a/2;break;case"right":o=r+t,s=e-a/2;break;case"top":o=r-i/2,s=e-a-t;break;case"bottom":o=r-i/2,s=e+t;break;default:o=r+t,s=e-a-t;break}return{x:o,y:s}}function Od(r,e,t,i,a,n,o){var s=OT(r,e,t,i,a,n);if(o){var l=kT(s.x,s.y,i,a,o);n==="auto"?(l.right&&(s.x=Math.max(0,r-i-t)),l.top&&(s.y=Math.max(0,e-a-t))):n==="top"||n==="bottom"?(l.left&&(s.x=o.x),l.right&&(s.x=o.x+o.width-i),n==="top"&&l.top&&(s.y=e+t),n==="bottom"&&l.bottom&&(s.y=e-a-t)):(l.top&&(s.y=o.y),l.bottom&&(s.y=o.y+o.height-a),n==="left"&&l.left&&(s.x=r+t),n==="right"&&l.right&&(s.x=r-i-t))}return s}function FT(r,e){var t=!1;return M(e,function(i){if(De(r,i))return t=!0,!1}),t}var _T=function(r){S(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return d(d({},t),{name:"tooltip",type:"html",x:0,y:0,items:[],customContent:null,containerTpl:'<div class="'+Ra+'"><div class="'+Da+'"></div><ul class="'+Na+'"></ul></div>',itemTpl:'<li class="'+so+`" data-index={index}>
          <span class="`+lo+`" style="background:{color}"></span>
          <span class="`+xh+`">{name}</span>:
          <span class="`+fo+`">{value}</span>
        </li>`,xCrosshairTpl:'<div class="'+uo+'"></div>',yCrosshairTpl:'<div class="'+ho+'"></div>',title:null,showTitle:!0,region:null,crosshairsRegion:null,containerClassName:Ra,crosshairs:null,offset:10,position:"right",domStyles:null,defaultStyles:kd})},e.prototype.render=function(){this.get("customContent")?this.renderCustomContent():(this.resetTitle(),this.renderItems()),this.resetPosition()},e.prototype.clear=function(){this.clearCrosshairs(),this.setTitle(""),this.clearItemDoms()},e.prototype.show=function(){var t=this.getContainer();!t||this.destroyed||(this.set("visible",!0),Et(t,{visibility:"visible"}),this.setCrossHairsVisible(!0))},e.prototype.hide=function(){var t=this.getContainer();!t||this.destroyed||(this.set("visible",!1),Et(t,{visibility:"hidden"}),this.setCrossHairsVisible(!1))},e.prototype.getLocation=function(){return{x:this.get("x"),y:this.get("y")}},e.prototype.setLocation=function(t){this.set("x",t.x),this.set("y",t.y),this.resetPosition()},e.prototype.setCrossHairsVisible=function(t){var i=t?"":"none",a=this.get("xCrosshairDom"),n=this.get("yCrosshairDom");a&&Et(a,{display:i}),n&&Et(n,{display:i})},e.prototype.initContainer=function(){if(r.prototype.initContainer.call(this),this.get("customContent")){this.get("container")&&this.get("container").remove();var t=this.getHtmlContentNode();this.get("parent").appendChild(t),this.set("container",t),this.resetStyles(),this.applyStyles()}},e.prototype.updateInner=function(t){this.get("customContent")?this.renderCustomContent():(FT(t,["title","showTitle"])&&this.resetTitle(),De(t,"items")&&this.renderItems()),r.prototype.updateInner.call(this,t)},e.prototype.initDom=function(){this.cacheDoms()},e.prototype.removeDom=function(){r.prototype.removeDom.call(this),this.clearCrosshairs()},e.prototype.resetPosition=function(){var t=this.get("x"),i=this.get("y"),a=this.get("offset"),n=this.getOffset(),o=n.offsetX,s=n.offsetY,l=this.get("position"),f=this.get("region"),u=this.getContainer(),h=this.getBBox(),c=h.width,p=h.height,v;f&&(v=Lr(f));var m=Od(t,i,a,c,p,l,v);Et(u,{left:ie(m.x+o),top:ie(m.y+s)}),this.resetCrosshairs()},e.prototype.renderCustomContent=function(){var t=this.getHtmlContentNode(),i=this.get("parent"),a=this.get("container");a&&a.parentNode===i?i.replaceChild(t,a):i.appendChild(t),this.set("container",t),this.resetStyles(),this.applyStyles()},e.prototype.getHtmlContentNode=function(){var t,i=this.get("customContent");if(i){var a=i(this.get("title"),this.get("items"));Cn(a)?t=a:t=re(a)}return t},e.prototype.cacheDoms=function(){var t=this.getContainer(),i=t.getElementsByClassName(Da)[0],a=t.getElementsByClassName(Na)[0];this.set("titleDom",i),this.set("listDom",a)},e.prototype.resetTitle=function(){var t=this.get("title"),i=this.get("showTitle");i&&t?this.setTitle(t):this.setTitle("")},e.prototype.setTitle=function(t){var i=this.get("titleDom");i&&(i.innerText=t)},e.prototype.resetCrosshairs=function(){var t=this.get("crosshairsRegion"),i=this.get("crosshairs");if(!t||!i)this.clearCrosshairs();else{var a=Lr(t),n=this.get("xCrosshairDom"),o=this.get("yCrosshairDom");i==="x"?(this.resetCrosshair("x",a),o&&(o.remove(),this.set("yCrosshairDom",null))):i==="y"?(this.resetCrosshair("y",a),n&&(n.remove(),this.set("xCrosshairDom",null))):(this.resetCrosshair("x",a),this.resetCrosshair("y",a)),this.setCrossHairsVisible(this.get("visible"))}},e.prototype.resetCrosshair=function(t,i){var a=this.checkCrosshair(t),n=this.get(t);t==="x"?Et(a,{left:ie(n),top:ie(i.y),height:ie(i.height)}):Et(a,{top:ie(n),left:ie(i.x),width:ie(i.width)})},e.prototype.checkCrosshair=function(t){var i=t+"CrosshairDom",a=t+"CrosshairTpl",n="CROSSHAIR_"+t.toUpperCase(),o=Ot[n],s=this.get(i),l=this.get("parent");return s||(s=re(this.get(a)),this.applyStyle(o,s),l.appendChild(s),this.set(i,s)),s},e.prototype.renderItems=function(){this.clearItemDoms();var t=this.get("items"),i=this.get("itemTpl"),a=this.get("listDom");a&&(M(t,function(n){var o=Ar.toCSSGradient(n.color),s=d(d({},n),{color:o}),l=yn(i,s),f=re(l);a.appendChild(f)}),this.applyChildrenStyles(a,this.get("domStyles")))},e.prototype.clearItemDoms=function(){this.get("listDom")&&Ia(this.get("listDom"))},e.prototype.clearCrosshairs=function(){var t=this.get("xCrosshairDom"),i=this.get("yCrosshairDom");t&&t.remove(),i&&i.remove(),this.set("xCrosshairDom",null),this.set("yCrosshairDom",null)},e}(vi),Fd=_T;var _d={opacity:0},Rd={stroke:"#C5C5C5",strokeOpacity:.85},Dd={fill:"#CACED4",opacity:.85};function RT(r){return Mt(r,function(e,t){var i=t===0?"M":"L",a=e[0],n=e[1];return[i,a,n]})}function Nd(r){return RT(r)}function DT(r){if(r.length<=2)return Nd(r);var e=[];M(r,function(o){ot(o,e.slice(e.length-2))||e.push(o[0],o[1])});var t=Ru(e,!1),i=wt(r),a=i[0],n=i[1];return t.unshift(["M",a,n]),t}function Gd(r,e,t,i){i===void 0&&(i=!0);var a=new qi({values:r}),n=new Wi({values:Mt(r,function(s,l){return l})}),o=Mt(r,function(s,l){return[n.scale(l)*e,t-a.scale(s)*t]});return i?DT(o):Nd(o)}function NT(r,e){var t=new qi({values:r}),i=t.max<0?t.max:Math.max(0,t.min);return e-t.scale(i)*e}function Yd(r,e,t,i){var a=dr(r),n=NT(i,t);return a.push(["L",e,n]),a.push(["L",0,n]),a.push(["Z"]),a}var Hd=function(r){S(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return d(d({},t),{name:"trend",x:0,y:0,width:200,height:16,smooth:!0,isArea:!1,data:[],backgroundStyle:_d,lineStyle:Rd,areaStyle:Dd})},e.prototype.renderInner=function(t){var i=this.cfg,a=i.width,n=i.height,o=i.data,s=i.smooth,l=i.isArea,f=i.backgroundStyle,u=i.lineStyle,h=i.areaStyle;this.addShape(t,{id:this.getElementId("background"),type:"rect",attrs:d({x:0,y:0,width:a,height:n},f)});var c=Gd(o,a,n,s);if(this.addShape(t,{id:this.getElementId("line"),type:"path",attrs:d({path:c},u)}),l){var p=Yd(c,a,n,o);this.addShape(t,{id:this.getElementId("area"),type:"path",attrs:d({path:p},h)})}},e.prototype.applyOffset=function(){var t=this.cfg,i=t.x,a=t.y;this.moveElementTo(this.get("group"),{x:i,y:a})},e}(at);var Ch={fill:"#F7F7F7",stroke:"#BFBFBF",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#FFF"},wh=function(r){S(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return d(d({},t),{name:"handler",x:0,y:0,width:10,height:24,style:Ch})},e.prototype.renderInner=function(t){var i=this.cfg,a=i.width,n=i.height,o=i.style,s=o.fill,l=o.stroke,f=o.radius,u=o.opacity,h=o.cursor;this.addShape(t,{type:"rect",id:this.getElementId("background"),attrs:{x:0,y:0,width:a,height:n,fill:s,stroke:l,radius:f,opacity:u,cursor:h}});var c=1/3*a,p=2/3*a,v=1/4*n,m=3/4*n;this.addShape(t,{id:this.getElementId("line-left"),type:"line",attrs:{x1:c,y1:v,x2:c,y2:m,stroke:l,cursor:h}}),this.addShape(t,{id:this.getElementId("line-right"),type:"line",attrs:{x1:p,y1:v,x2:p,y2:m,stroke:l,cursor:h}})},e.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},e.prototype.initEvent=function(){this.bindEvents()},e.prototype.bindEvents=function(){var t=this;this.get("group").on("mouseenter",function(){var i=t.get("style").highLightFill;t.getElementByLocalId("background").attr("fill",i),t.draw()}),this.get("group").on("mouseleave",function(){var i=t.get("style").fill;t.getElementByLocalId("background").attr("fill",i),t.draw()})},e.prototype.draw=function(){var t=this.get("container").get("canvas");t&&t.draw()},e}(at);var Vd={fill:"#416180",opacity:.05},zd={fill:"#5B8FF9",opacity:.15,cursor:"move"},co=10,Xd={width:co,height:24},Wd={textBaseline:"middle",fill:"#000",opacity:.45},qd="sliderchange";var po=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.onMouseDown=function(i){return function(a){t.currentTarget=i;var n=a.originalEvent;n.stopPropagation(),n.preventDefault(),t.prevX=b(n,"touches.0.pageX",n.pageX),t.prevY=b(n,"touches.0.pageY",n.pageY);var o=t.getContainerDOM();o.addEventListener("mousemove",t.onMouseMove),o.addEventListener("mouseup",t.onMouseUp),o.addEventListener("mouseleave",t.onMouseUp),o.addEventListener("touchmove",t.onMouseMove),o.addEventListener("touchend",t.onMouseUp),o.addEventListener("touchcancel",t.onMouseUp)}},t.onMouseMove=function(i){var a=t.cfg.width,n=[t.get("start"),t.get("end")];i.stopPropagation(),i.preventDefault();var o=b(i,"touches.0.pageX",i.pageX),s=b(i,"touches.0.pageY",i.pageY),l=o-t.prevX,f=t.adjustOffsetRange(l/a);t.updateStartEnd(f),t.updateUI(t.getElementByLocalId("foreground"),t.getElementByLocalId("minText"),t.getElementByLocalId("maxText")),t.prevX=o,t.prevY=s,t.draw(),t.emit(qd,[t.get("start"),t.get("end")].sort()),t.delegateEmit("valuechanged",{originValue:n,value:[t.get("start"),t.get("end")]})},t.onMouseUp=function(){t.currentTarget&&(t.currentTarget=void 0);var i=t.getContainerDOM();i&&(i.removeEventListener("mousemove",t.onMouseMove),i.removeEventListener("mouseup",t.onMouseUp),i.removeEventListener("mouseleave",t.onMouseUp),i.removeEventListener("touchmove",t.onMouseMove),i.removeEventListener("touchend",t.onMouseUp),i.removeEventListener("touchcancel",t.onMouseUp))},t}return e.prototype.setRange=function(t,i){this.set("minLimit",t),this.set("maxLimit",i);var a=this.get("start"),n=this.get("end"),o=ft(a,t,i),s=ft(n,t,i);!this.get("isInit")&&(a!==o||n!==s)&&this.setValue([o,s])},e.prototype.getRange=function(){return{min:this.get("minLimit")||0,max:this.get("maxLimit")||1}},e.prototype.setValue=function(t){var i=this.getRange();if(B(t)&&t.length===2){var a=[this.get("start"),this.get("end")];this.update({start:ft(t[0],i.min,i.max),end:ft(t[1],i.min,i.max)}),this.get("updateAutoRender")||this.render(),this.delegateEmit("valuechanged",{originValue:a,value:t})}},e.prototype.getValue=function(){return[this.get("start"),this.get("end")]},e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return d(d({},t),{name:"slider",x:0,y:0,width:100,height:16,backgroundStyle:{},foregroundStyle:{},handlerStyle:{},textStyle:{},defaultCfg:{backgroundStyle:Vd,foregroundStyle:zd,handlerStyle:Xd,textStyle:Wd}})},e.prototype.update=function(t){var i=t.start,a=t.end,n=d({},t);I(i)||(n.start=ft(i,0,1)),I(a)||(n.end=ft(a,0,1)),r.prototype.update.call(this,n),this.minHandler=this.getChildComponentById(this.getElementId("minHandler")),this.maxHandler=this.getChildComponentById(this.getElementId("maxHandler")),this.trend=this.getChildComponentById(this.getElementId("trend"))},e.prototype.init=function(){this.set("start",ft(this.get("start"),0,1)),this.set("end",ft(this.get("end"),0,1)),r.prototype.init.call(this)},e.prototype.render=function(){r.prototype.render.call(this),this.updateUI(this.getElementByLocalId("foreground"),this.getElementByLocalId("minText"),this.getElementByLocalId("maxText"))},e.prototype.renderInner=function(t){var i=this.cfg,a=i.start,n=i.end,o=i.width,s=i.height,l=i.trendCfg,f=l===void 0?{}:l,u=i.minText,h=i.maxText,c=i.backgroundStyle,p=c===void 0?{}:c,v=i.foregroundStyle,m=v===void 0?{}:v,g=i.textStyle,y=g===void 0?{}:g,w=O({},Ch,this.cfg.handlerStyle),x=a*o,C=n*o;Tt(b(f,"data"))&&(this.trend=this.addComponent(t,d({component:Hd,id:this.getElementId("trend"),x:0,y:0,width:o,height:s},f))),this.addShape(t,{id:this.getElementId("background"),type:"rect",attrs:d({x:0,y:0,width:o,height:s},p)});var A=this.addShape(t,{id:this.getElementId("minText"),type:"text",attrs:d({y:s/2,textAlign:"right",text:u,silent:!1},y)}),T=this.addShape(t,{id:this.getElementId("maxText"),type:"text",attrs:d({y:s/2,textAlign:"left",text:h,silent:!1},y)}),E=this.addShape(t,{id:this.getElementId("foreground"),name:"foreground",type:"rect",attrs:d({y:0,height:s},m)}),k=b(w,"width",co),P=b(w,"height",24);this.minHandler=this.addComponent(t,{component:wh,id:this.getElementId("minHandler"),name:"handler-min",x:0,y:(s-P)/2,width:k,height:P,cursor:"ew-resize",style:w}),this.maxHandler=this.addComponent(t,{component:wh,id:this.getElementId("maxHandler"),name:"handler-max",x:0,y:(s-P)/2,width:k,height:P,cursor:"ew-resize",style:w})},e.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},e.prototype.initEvent=function(){this.bindEvents()},e.prototype.updateUI=function(t,i,a){var n=this.cfg,o=n.start,s=n.end,l=n.width,f=n.minText,u=n.maxText,h=n.handlerStyle,c=n.height,p=o*l,v=s*l;this.trend&&(this.trend.update({width:l,height:c}),this.get("updateAutoRender")||this.trend.render()),t.attr("x",p),t.attr("width",v-p);var m=b(h,"width",co);i.attr("text",f),a.attr("text",u);var g=this._dodgeText([p,v],i,a),y=g[0],w=g[1];this.minHandler&&(this.minHandler.update({x:p-m/2}),this.get("updateAutoRender")||this.minHandler.render()),M(y,function(x,C){return i.attr(C,x)}),this.maxHandler&&(this.maxHandler.update({x:v-m/2}),this.get("updateAutoRender")||this.maxHandler.render()),M(w,function(x,C){return a.attr(C,x)})},e.prototype.bindEvents=function(){var t=this.get("group");t.on("handler-min:mousedown",this.onMouseDown("minHandler")),t.on("handler-min:touchstart",this.onMouseDown("minHandler")),t.on("handler-max:mousedown",this.onMouseDown("maxHandler")),t.on("handler-max:touchstart",this.onMouseDown("maxHandler"));var i=t.findById(this.getElementId("foreground"));i.on("mousedown",this.onMouseDown("foreground")),i.on("touchstart",this.onMouseDown("foreground"))},e.prototype.adjustOffsetRange=function(t){var i=this.cfg,a=i.start,n=i.end;switch(this.currentTarget){case"minHandler":{var o=0-a,s=1-a;return Math.min(s,Math.max(o,t))}case"maxHandler":{var o=0-n,s=1-n;return Math.min(s,Math.max(o,t))}case"foreground":{var o=0-a,s=1-n;return Math.min(s,Math.max(o,t))}}},e.prototype.updateStartEnd=function(t){var i=this.cfg,a=i.start,n=i.end;switch(this.currentTarget){case"minHandler":a+=t;break;case"maxHandler":n+=t;break;case"foreground":a+=t,n+=t;break}this.set("start",a),this.set("end",n)},e.prototype._dodgeText=function(t,i,a){var n,o,s=this.cfg,l=s.handlerStyle,f=s.width,u=2,h=b(l,"width",co),c=t[0],p=t[1],v=!1;c>p&&(n=[p,c],c=n[0],p=n[1],o=[a,i],i=o[0],a=o[1],v=!0);var m=i.getBBox(),g=a.getBBox(),y=m.width>c-u?{x:c+h/2+u,textAlign:"left"}:{x:c-h/2-u,textAlign:"right"},w=g.width>f-p-u?{x:p-h/2-u,textAlign:"right"}:{x:p+h/2+u,textAlign:"left"};return v?[w,y]:[y,w]},e.prototype.draw=function(){var t=this.get("container"),i=t&&t.get("canvas");i&&i.draw()},e.prototype.getContainerDOM=function(){var t=this.get("container"),i=t&&t.get("canvas");return i&&i.get("container")},e}(at);var GT={trackColor:"rgba(0,0,0,0)",thumbColor:"rgba(0,0,0,0.15)",size:8,lineCap:"round"},Mh={default:GT,hover:{thumbColor:"rgba(0,0,0,0.2)"}},Ys=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.clearEvents=he,t.onStartEvent=function(i){return function(a){t.isMobile=i,a.originalEvent.preventDefault();var n=i?b(a.originalEvent,"touches.0.clientX"):a.clientX,o=i?b(a.originalEvent,"touches.0.clientY"):a.clientY;t.startPos=t.cfg.isHorizontal?n:o,t.bindLaterEvent()}},t.bindLaterEvent=function(){var i=t.getContainerDOM(),a=[];t.isMobile?a=[Cr(i,"touchmove",t.onMouseMove),Cr(i,"touchend",t.onMouseUp),Cr(i,"touchcancel",t.onMouseUp)]:a=[Cr(i,"mousemove",t.onMouseMove),Cr(i,"mouseup",t.onMouseUp),Cr(i,"mouseleave",t.onMouseUp)],t.clearEvents=function(){a.forEach(function(n){n.remove()})}},t.onMouseMove=function(i){var a=t.cfg,n=a.isHorizontal,o=a.thumbOffset;i.preventDefault();var s=t.isMobile?b(i,"touches.0.clientX"):i.clientX,l=t.isMobile?b(i,"touches.0.clientY"):i.clientY,f=n?s:l,u=f-t.startPos;t.startPos=f,t.updateThumbOffset(o+u)},t.onMouseUp=function(i){i.preventDefault(),t.clearEvents()},t.onTrackClick=function(i){var a=t.cfg,n=a.isHorizontal,o=a.x,s=a.y,l=a.thumbLen,f=t.getContainerDOM(),u=f.getBoundingClientRect(),h=i.clientX,c=i.clientY,p=n?h-u.left-o-l/2:c-u.top-s-l/2,v=t.validateRange(p);t.updateThumbOffset(v)},t.onThumbMouseOver=function(){var i=t.cfg.theme.hover.thumbColor;t.getElementByLocalId("thumb").attr("stroke",i),t.draw()},t.onThumbMouseOut=function(){var i=t.cfg.theme.default.thumbColor;t.getElementByLocalId("thumb").attr("stroke",i),t.draw()},t}return e.prototype.setRange=function(t,i){this.set("minLimit",t),this.set("maxLimit",i);var a=this.getValue(),n=ft(a,t,i);a!==n&&!this.get("isInit")&&this.setValue(n)},e.prototype.getRange=function(){var t=this.get("minLimit")||0,i=this.get("maxLimit")||1;return{min:t,max:i}},e.prototype.setValue=function(t){var i=this.getRange(),a=this.getValue();this.update({thumbOffset:(this.get("trackLen")-this.get("thumbLen"))*ft(t,i.min,i.max)}),this.delegateEmit("valuechange",{originalValue:a,value:this.getValue()})},e.prototype.getValue=function(){return ft(this.get("thumbOffset")/(this.get("trackLen")-this.get("thumbLen")),0,1)},e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return d(d({},t),{name:"scrollbar",isHorizontal:!0,minThumbLen:20,thumbOffset:0,theme:Mh})},e.prototype.renderInner=function(t){this.renderTrackShape(t),this.renderThumbShape(t)},e.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},e.prototype.initEvent=function(){this.bindEvents()},e.prototype.renderTrackShape=function(t){var i=this.cfg,a=i.trackLen,n=i.theme,o=n===void 0?{default:{}}:n,s=O({},Mh,o).default,l=s.lineCap,f=s.trackColor,u=s.size,h=b(this.cfg,"size",u),c=this.get("isHorizontal")?{x1:0+h/2,y1:h/2,x2:a-h/2,y2:h/2,lineWidth:h,stroke:f,lineCap:l}:{x1:h/2,y1:0+h/2,x2:h/2,y2:a-h/2,lineWidth:h,stroke:f,lineCap:l};return this.addShape(t,{id:this.getElementId("track"),name:"track",type:"line",attrs:c})},e.prototype.renderThumbShape=function(t){var i=this.cfg,a=i.thumbOffset,n=i.thumbLen,o=i.theme,s=O({},Mh,o).default,l=s.size,f=s.lineCap,u=s.thumbColor,h=b(this.cfg,"size",l),c=this.get("isHorizontal")?{x1:a+h/2,y1:h/2,x2:a+n-h/2,y2:h/2,lineWidth:h,stroke:u,lineCap:f,cursor:"default"}:{x1:h/2,y1:a+h/2,x2:h/2,y2:a+n-h/2,lineWidth:h,stroke:u,lineCap:f,cursor:"default"};return this.addShape(t,{id:this.getElementId("thumb"),name:"thumb",type:"line",attrs:c})},e.prototype.bindEvents=function(){var t=this.get("group");t.on("mousedown",this.onStartEvent(!1)),t.on("mouseup",this.onMouseUp),t.on("touchstart",this.onStartEvent(!0)),t.on("touchend",this.onMouseUp);var i=t.findById(this.getElementId("track"));i.on("click",this.onTrackClick);var a=t.findById(this.getElementId("thumb"));a.on("mouseover",this.onThumbMouseOver),a.on("mouseout",this.onThumbMouseOut)},e.prototype.getContainerDOM=function(){var t=this.get("container"),i=t&&t.get("canvas");return i&&i.get("container")},e.prototype.validateRange=function(t){var i=this.cfg,a=i.thumbLen,n=i.trackLen,o=t;return t+a>n?o=n-a:t+a<a&&(o=0),o},e.prototype.draw=function(){var t=this.get("container"),i=t&&t.get("canvas");i&&i.draw()},e.prototype.updateThumbOffset=function(t){var i=this.cfg,a=i.thumbOffset,n=i.isHorizontal,o=i.thumbLen,s=i.size,l=this.validateRange(t);if(l!==a){var f=this.getElementByLocalId("thumb");n?f.attr({x1:l+s/2,x2:l+o-s/2}):f.attr({y1:l+s/2,y2:l+o-s/2}),this.emitOffsetChange(l)}},e.prototype.emitOffsetChange=function(t){var i=this.cfg,a=i.thumbOffset,n=i.trackLen,o=i.thumbLen;this.cfg.thumbOffset=t,this.emit("scrollchange",{thumbOffset:t,ratio:ft(t/(n-o),0,1)}),this.delegateEmit("valuechange",{originalValue:a,value:t})},e}(at);var Ud=eo.Line,jd=eo.Circle;var Zd=no.Line,Qd=no.Circle;var Sh=oo.Category,$d=oo.Continuous;var mi=Gs.Html;function YT(r){if(Gt(r))return null;var e=r[0].x,t=r[0].x,i=r[0].y,a=r[0].y;return M(r,function(n){e=e>n.x?n.x:e,t=t<n.x?n.x:t,i=i>n.y?n.y:i,a=a<n.y?n.y:a}),{minX:e,maxX:t,minY:i,maxY:a,centerX:(e+t)/2,centerY:(i+a)/2}}function Kd(r){return Array.from(new Set(r)).length===1}function Jd(r){return(Vt(r)+Dt(r))/2}function dt(r,e,t,i){return{x:r+t*Math.cos(i),y:e+t*Math.sin(i)}}function Oe(r,e,t,i,a,n){n===void 0&&(n=0);var o=dt(r,e,t,i),s=dt(r,e,t,a),l=dt(r,e,n,i),f=dt(r,e,n,a);if(a-i===Math.PI*2){var u=dt(r,e,t,i+Math.PI),h=dt(r,e,n,i+Math.PI),c=[["M",o.x,o.y],["A",t,t,0,1,1,u.x,u.y],["A",t,t,0,1,1,s.x,s.y],["M",l.x,l.y]];return n&&(c.push(["A",n,n,0,1,0,h.x,h.y]),c.push(["A",n,n,0,1,0,f.x,f.y])),c.push(["M",o.x,o.y]),c.push(["Z"]),c}var p=a-i<=Math.PI?0:1,v=[["M",o.x,o.y],["A",t,t,0,p,1,s.x,s.y],["L",f.x,f.y]];return n&&v.push(["A",n,n,0,p,0,l.x,l.y]),v.push(["L",o.x,o.y]),v.push(["Z"]),v}function Hs(r,e,t,i,a){var n=dt(r,e,t,i),o=dt(r,e,t,a);if(pt(a-i,Math.PI*2)){var s=dt(r,e,t,i+Math.PI);return[["M",n.x,n.y],["A",t,t,0,1,1,s.x,s.y],["A",t,t,0,1,1,n.x,n.y],["A",t,t,0,1,0,s.x,s.y],["A",t,t,0,1,0,n.x,n.y],["Z"]]}var l=a-i<=Math.PI?0:1;return[["M",n.x,n.y],["A",t,t,0,l,1,o.x,o.y]]}function di(r,e){var t=r.points,i=YT(t),a,n,o=e.startAngle,s=e.endAngle,l=s-o;return e.isTransposed?(a=i.maxY*l,n=i.minY*l):(a=i.maxX*l,n=i.minX*l),a+=o,n+=o,{startAngle:n,endAngle:a}}function tg(r,e){if(z(r)&&z(e))return[r,e];if(r=r,e=e,Kd(r)||Kd(e))return[Jd(r),Jd(e)];for(var t=-1,i=0,a=0,n,o=r.length-1,s,l=0;++t<r.length;)n=o,o=t,l+=s=r[n]*e[o]-r[o]*e[n],i+=(r[n]+r[o])*s,a+=(e[n]+e[o])*s;return l*=3,[i/l,a/l]}function Vs(r,e){var t=r.attr(),i=e.attr();return M(t,function(a,n){i[n]===void 0&&(i[n]=void 0)}),i}function Ir(r,e,t){var i=Math.min(e,t),a=Math.max(e,t);return r>=i&&r<=a}function eg(r,e,t){if(G(r))return r.padEnd(e,t);if(B(r)){var i=r.length;if(i<e)for(var a=e-i,n=0;n<a;n++)r.push(t)}return r}function Xt(r,e){return typeof r=="object"&&e.forEach(function(t){delete r[t]}),r}function or(r,e,t){var i,a;e===void 0&&(e=[]),t===void 0&&(t=new Map);try{for(var n=j(r),o=n.next();!o.done;o=n.next()){var s=o.value;t.has(s)||(e.push(s),t.set(s,!0))}}catch(l){i={error:l}}finally{try{o&&!o.done&&(a=n.return)&&a.call(n)}finally{if(i)throw i.error}}return e}var It=function(){function r(e,t,i,a){e===void 0&&(e=0),t===void 0&&(t=0),i===void 0&&(i=0),a===void 0&&(a=0),this.x=e,this.y=t,this.height=a,this.width=i}return r.fromRange=function(e,t,i,a){return new r(e,t,i-e,a-t)},r.fromObject=function(e){return new r(e.minX,e.minY,e.width,e.height)},Object.defineProperty(r.prototype,"minX",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"maxX",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"minY",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"maxY",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tl",{get:function(){return{x:this.x,y:this.y}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tr",{get:function(){return{x:this.maxX,y:this.y}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"bl",{get:function(){return{x:this.x,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"br",{get:function(){return{x:this.maxX,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"top",{get:function(){return{x:this.x+this.width/2,y:this.minY}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"right",{get:function(){return{x:this.maxX,y:this.y+this.height/2}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"bottom",{get:function(){return{x:this.x+this.width/2,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"left",{get:function(){return{x:this.minX,y:this.y+this.height/2}},enumerable:!1,configurable:!0}),r.prototype.isEqual=function(e){return this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height},r.prototype.contains=function(e){return e.minX>=this.minX&&e.maxX<=this.maxX&&e.minY>=this.minY&&e.maxY<=this.maxY},r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height)},r.prototype.add=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=this.clone();return M(e,function(a){i.x=Math.min(a.x,i.x),i.y=Math.min(a.y,i.y),i.width=Math.max(a.maxX,i.maxX)-i.x,i.height=Math.max(a.maxY,i.maxY)-i.y}),i},r.prototype.merge=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=this.clone();return M(e,function(a){i.x=Math.max(a.x,i.x),i.y=Math.max(a.y,i.y),i.width=Math.min(a.maxX,i.maxX)-i.x,i.height=Math.min(a.maxY,i.maxY)-i.y}),i},r.prototype.cut=function(e,t){var i=e.width,a=e.height;switch(t){case F.TOP:case F.TOP_LEFT:case F.TOP_RIGHT:return r.fromRange(this.minX,this.minY+a,this.maxX,this.maxY);case F.RIGHT:case F.RIGHT_TOP:case F.RIGHT_BOTTOM:return r.fromRange(this.minX,this.minY,this.maxX-i,this.maxY);case F.BOTTOM:case F.BOTTOM_LEFT:case F.BOTTOM_RIGHT:return r.fromRange(this.minX,this.minY,this.maxX,this.maxY-a);case F.LEFT:case F.LEFT_TOP:case F.LEFT_BOTTOM:return r.fromRange(this.minX+i,this.minY,this.maxX,this.maxY);default:return this}},r.prototype.shrink=function(e){var t=_(e,4),i=t[0],a=t[1],n=t[2],o=t[3];return new r(this.x+o,this.y+i,this.width-o-a,this.height-i-n)},r.prototype.expand=function(e){var t=_(e,4),i=t[0],a=t[1],n=t[2],o=t[3];return new r(this.x-o,this.y-i,this.width+o+a,this.height+i+n)},r.prototype.exceed=function(e){return[Math.max(-this.minY+e.minY,0),Math.max(this.maxX-e.maxX,0),Math.max(this.maxY-e.maxY,0),Math.max(-this.minX+e.minX,0)]},r.prototype.collide=function(e){return this.minX<e.maxX&&this.maxX>e.minX&&this.minY<e.maxY&&this.maxY>e.minY},r.prototype.size=function(){return this.width*this.height},r.prototype.isPointIn=function(e){return e.x>=this.minX&&e.x<=this.maxX&&e.y>=this.minY&&e.y<=this.maxY},r}();function rg(r){return[[r.minX,r.minY],[r.maxX,r.minY],[r.maxX,r.maxY],[r.minX,r.maxY]]}function sr(r){if(r.isPolar&&!r.isTransposed)return(r.endAngle-r.startAngle)*r.getRadius();var e=r.convert({x:0,y:0}),t=r.convert({x:1,y:0});return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function ig(r){if(r.isPolar){var e=r.startAngle,t=r.endAngle;return t-e===Math.PI*2}return!1}function gi(r,e){var t=r.getCenter();return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function ag(r,e){var t=!1;if(r)if(r.type==="theta"){var i=r.start,a=r.end;t=Ir(e.x,i.x,a.x)&&Ir(e.y,i.y,a.y)}else{var n=r.invert(e);t=Ir(n.x,0,1)&&Ir(n.y,0,1)}return t}function lr(r,e){var t=r.getCenter();return Math.atan2(e.y-t.y,e.x-t.x)}function Ga(r,e){e===void 0&&(e=0);var t=r.start,i=r.end,a=r.getWidth(),n=r.getHeight();if(r.isPolar){var o=r.startAngle,s=r.endAngle,l=r.getCenter(),f=r.getRadius();return{type:"path",startState:{path:Oe(l.x,l.y,f+e,o,o)},endState:function(h){var c=(s-o)*h+o,p=Oe(l.x,l.y,f+e,o,c);return{path:p}},attrs:{path:Oe(l.x,l.y,f+e,o,s)}}}var u;return r.isTransposed?u={height:n+e*2}:u={width:a+e*2},{type:"rect",startState:{x:t.x-e,y:i.y-e,width:r.isTransposed?a+e*2:0,height:r.isTransposed?0:n+e*2},endState:u,attrs:{x:t.x-e,y:i.y-e,width:a+e*2,height:n+e*2}}}function ng(r,e){e===void 0&&(e=0);var t=r.start,i=r.end,a=r.getWidth(),n=r.getHeight(),o=Math.min(t.x,i.x),s=Math.min(t.y,i.y);return It.fromRange(o-e,s-e,o+a+e,s+n+e)}var HT=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]+)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/;function VT(r){var e="linear";return HT.test(r)?e="timeCat":G(r)&&(e="cat"),e}function zs(r,e,t,i){return e===void 0&&(e={}),e.type?e.type:r.type!=="identity"&&xr.includes(t)&&["interval"].includes(i)||r.isCategory?"cat":r.type}function og(r,e,t){var i=e||[];if(z(r)||I(cf(i,r))&&Gt(t)){var a=ba("identity");return new a({field:r.toString(),values:[r]})}var n=Ut(i,r),o=b(t,"type",VT(n[0])),s=ba(o);return new s(d({field:r,values:n},t))}function sg(r,e){if(r.type!=="identity"&&e.type!=="identity"){var t={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);r.change(t)}}function yi(r){return r.alias||r.field}function Xs(r,e,t){var i=r.values,a=i.length,n;if(a===1)n=[.5,1];else{var o=1,s=0;ig(e)?e.isTransposed?(o=b(t,"widthRatio.multiplePie",1/1.3),s=1/a*o,n=[s/2,1-s/2]):n=[0,1-1/a]:(s=1/a/2,n=[s,1-s])}return n}function lg(r){var e=r.values.filter(function(t){return!I(t)&&!isNaN(t)});return Math.max.apply(Math,U(U([],_(e),!1),[I(r.max)?-1/0:r.max],!1))}function zT(r){var e,t;switch(r){case F.TOP:e={x:0,y:1},t={x:1,y:1};break;case F.RIGHT:e={x:1,y:0},t={x:1,y:1};break;case F.BOTTOM:e={x:0,y:0},t={x:1,y:0};break;case F.LEFT:e={x:0,y:0},t={x:0,y:1};break;default:e=t={x:0,y:0}}return{start:e,end:t}}function XT(r){var e,t;return r.isTransposed?(e={x:0,y:0},t={x:1,y:0}):(e={x:0,y:0},t={x:0,y:1}),{start:e,end:t}}function vo(r,e){var t={start:{x:0,y:0},end:{x:0,y:0}};r.isRect?t=zT(e):r.isPolar&&(t=XT(r));var i=t.start,a=t.end;return{start:r.convert(i),end:r.convert(a)}}function Ah(r){var e=r.start,t=r.end;return e.x===t.x}function bh(r,e){var t=r.start,i=r.end,a=Ah(r);return a?(t.y-i.y)*(e.x-t.x)>0?1:-1:(i.x-t.x)*(t.y-e.y)>0?-1:1}function mo(r,e){var t=b(r,["components","axis"],{});return O({},b(t,["common"],{}),O({},b(t,[e],{})))}function Th(r,e,t){var i=b(r,["components","axis"],{});return O({},b(i,["common","title"],{}),O({},b(i,[e,"title"],{})),t)}function Ws(r){var e=r.x,t=r.y,i=r.circleCenter,a=t.start>t.end,n=r.isTransposed?r.convert({x:a?0:1,y:0}):r.convert({x:0,y:a?0:1}),o=[n.x-i.x,n.y-i.y],s=[1,0],l=n.y>i.y?Y.angle(o,s):Y.angle(o,s)*-1,f=l+(e.end-e.start),u=Math.sqrt(Math.pow(n.x-i.x,2)+Math.pow(n.y-i.y,2));return{center:i,radius:u,startAngle:l,endAngle:f}}function Ya(r,e){return Ke(r)?r===!1?!1:{}:b(r,[e])}function Eh(r,e){return b(r,"position",e)}function Lh(r,e){return b(e,["title","text"],yi(r))}var ge=function(){function r(e,t){this.destroyed=!1,this.facets=[],this.view=e,this.cfg=O({},this.getDefaultCfg(),t)}return r.prototype.init=function(){this.container||(this.container=this.createContainer());var e=this.view.getData();this.facets=this.generateFacets(e)},r.prototype.render=function(){this.renderViews()},r.prototype.update=function(){},r.prototype.clear=function(){this.clearFacetViews()},r.prototype.destroy=function(){this.clear(),this.container&&(this.container.remove(!0),this.container=void 0),this.destroyed=!0,this.view=void 0,this.facets=[]},r.prototype.facetToView=function(e){var t=e.region,i=e.data,a=e.padding,n=a===void 0?this.cfg.padding:a,o=this.view.createView({region:t,padding:n});o.data(i||[]),e.view=o,this.beforeEachView(o,e);var s=this.cfg.eachView;return s&&s(o,e),this.afterEachView(o,e),o},r.prototype.createContainer=function(){var e=this.view.getLayer(ht.FORE);return e.addGroup()},r.prototype.renderViews=function(){this.createFacetViews()},r.prototype.createFacetViews=function(){var e=this;return this.facets.map(function(t){return e.facetToView(t)})},r.prototype.clearFacetViews=function(){var e=this;M(this.facets,function(t){t.view&&(e.view.removeView(t.view),t.view=void 0)})},r.prototype.parseSpacing=function(){var e=this.view.viewBBox,t=e.width,i=e.height,a=this.cfg.spacing;return a.map(function(n,o){return z(n)?n/(o===0?t:i):parseFloat(n)/100})},r.prototype.getFieldValues=function(e,t){var i=[],a={};return M(e,function(n){var o=n[t];!I(o)&&!a[o]&&(i.push(o),a[o]=!0)}),i},r.prototype.getRegion=function(e,t,i,a){var n=_(this.parseSpacing(),2),o=n[0],s=n[1],l=(1+o)/(t===0?1:t)-o,f=(1+s)/(e===0?1:e)-s,u={x:(l+o)*i,y:(f+s)*a},h={x:u.x+l,y:u.y+f};return{start:u,end:h}},r.prototype.getDefaultCfg=function(){return{eachView:void 0,showTitle:!0,spacing:[0,0],padding:10,fields:[]}},r.prototype.getDefaultTitleCfg=function(){var e=this.view.getTheme().fontFamily;return{style:{fontSize:14,fill:"#666",fontFamily:e}}},r.prototype.processAxis=function(e,t){var i=e.getOptions(),a=i.coordinate,n=e.geometries,o=b(a,"type","rect");if(o==="rect"&&n.length){I(i.axes)&&(i.axes={});var s=i.axes,l=_(n[0].getXYFields(),2),f=l[0],u=l[1],h=Ya(s,f),c=Ya(s,u);h!==!1&&(i.axes[f]=this.getXAxisOption(f,s,h,t)),c!==!1&&(i.axes[u]=this.getYAxisOption(u,s,c,t))}},r.prototype.getFacetDataFilter=function(e){return function(t){return df(e,function(i){var a=i.field,n=i.value;return!I(n)&&a?t[a]===n:!0})}},r}();var fg={},Ih=function(r){return fg[$e(r)]},xi=function(r,e){fg[$e(r)]=e};var WT=function(){function r(e,t){this.context=e,this.cfg=t,e.addAction(this)}return r.prototype.applyCfg=function(e){J(this,e)},r.prototype.init=function(){this.applyCfg(this.cfg)},r.prototype.destroy=function(){this.context.removeAction(this),this.context=null},r}(),et=WT;var qT=function(r){S(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.execute=function(){this.callback&&this.callback(this.context)},e.prototype.destroy=function(){r.prototype.destroy.call(this),this.callback=null},e}(et),ug=qT;var hg={};function Ph(r,e){var t=hg[r],i=null;if(t){var a=t.ActionClass,n=t.cfg;i=new a(e,n),i.name=r,i.init()}return i}function X(r,e,t){hg[r]={ActionClass:e,cfg:t}}function cg(r,e){var t=new ug(e);return t.callback=r,t.name="callback",t}function UT(r,e){var t=[];if(r.length){t.push(["M",r[0].x,r[0].y]);for(var i=1,a=r.length;i<a;i+=1){var n=r[i];t.push(["L",n.x,n.y])}e&&t.push(["Z"])}return t}function Bh(r,e){for(var t=[r[0]],i=1,a=r.length;i<a;i=i+2){var n=e.convert({x:r[i],y:r[i+1]});t.push(n.x,n.y)}return t}function pg(r,e){var t=e.isTransposed,i=r[1],a=r[6],n=r[7],o=e.convert({x:a,y:n}),s=t?0:1;return["A",i,i,0,0,s,o.x,o.y]}function jT(r,e,t){var i=t.isTransposed,a=t.startAngle,n=t.endAngle,o=r[0].toLowerCase()==="a"?{x:r[6],y:r[7]}:{x:r[1],y:r[2]},s={x:e[1],y:e[2]},l=[],f=i?"y":"x",u=Math.abs(s[f]-o[f])*(n-a),h=s[f]>=o[f]?1:0,c=u>Math.PI?1:0,p=t.convert(s),v=gi(t,p);if(v>=.5)if(u===Math.PI*2){var m={x:(s.x+o.x)/2,y:(s.y+o.y)/2},g=t.convert(m);l.push(["A",v,v,0,c,h,g.x,g.y]),l.push(["A",v,v,0,c,h,p.x,p.y])}else l.push(["A",v,v,0,c,h,p.x,p.y]);return l}function ZT(r){M(r,function(e,t){var i=e;if(i[0].toLowerCase()==="a"){var a=r[t-1],n=r[t+1];n&&n[0].toLowerCase()==="a"?a&&a[0].toLowerCase()==="l"&&(a[0]="M"):a&&a[0].toLowerCase()==="a"&&n&&n[0].toLowerCase()==="l"&&(n[0]="M")}})}var QT=function(r,e,t,i){var a,n=[],o=!!i,s,l,f,u,h,c,p;if(o){a=_(i,2),f=a[0],u=a[1];for(var v=0,m=r.length;v<m;v++){var g=r[v];f=Y.min([0,0],f,g),u=Y.max([0,0],u,g)}}for(var v=0,y=r.length;v<y;v++){var g=r[v];if(v===0&&!t)p=g;else if(v===y-1&&!t)c=g,n.push(p),n.push(c);else{s=r[t?v?v-1:y-1:v-1],l=r[t?(v+1)%y:v+1];var w=[0,0];w=Y.sub(w,l,s),w=Y.scale(w,w,e);var x=Y.distance(g,s),C=Y.distance(g,l),A=x+C;A!==0&&(x/=A,C/=A);var T=Y.scale([0,0],w,-x),E=Y.scale([0,0],w,C);c=Y.add([0,0],g,T),h=Y.add([0,0],g,E),h=Y.min([0,0],h,Y.max([0,0],l,g)),h=Y.max([0,0],h,Y.min([0,0],l,g)),T=Y.sub([0,0],h,g),T=Y.scale([0,0],T,-x/C),c=Y.add([0,0],g,T),c=Y.min([0,0],c,Y.max([0,0],s,g)),c=Y.max([0,0],c,Y.min([0,0],s,g)),E=Y.sub([0,0],g,c),E=Y.scale([0,0],E,C/x),h=Y.add([0,0],g,E),o&&(c=Y.max([0,0],c,f),c=Y.min([0,0],c,u),h=Y.max([0,0],h,f),h=Y.min([0,0],h,u)),n.push(p),n.push(c),p=h}}return t&&n.push(n.shift()),n};function kh(r,e,t){for(var i=!!e,a=[],n=0,o=r.length;n<o;n+=2)a.push([r[n],r[n+1]]);for(var s=QT(a,.4,i,t),l=a.length,f=[],u,h,c,n=0;n<l-1;n++)u=s[n*2],h=s[n*2+1],c=a[n+1],f.push(["C",u[0],u[1],h[0],h[1],c[0],c[1]]);return i&&(u=s[l],h=s[l+1],c=a[0],f.push(["C",u[0],u[1],h[0],h[1],c[0],c[1]])),f}function Pr(r,e){return UT(r,e)}function ea(r,e,t){var i=[],a=r[0],n=null;if(r.length<=2)return Pr(r,e);for(var o=0,s=r.length;o<s;o++){var l=r[o];(!n||!(n.x===l.x&&n.y===l.y))&&(i.push(l.x),i.push(l.y),n=l)}var f=t||[[0,0],[1,1]],u=kh(i,e,f);return u.unshift(["M",a.x,a.y]),u}function vg(r,e){var t=[];return M(e,function(i){var a=i[0];switch(a.toLowerCase()){case"m":case"l":case"c":t.push(Bh(i,r));break;case"a":t.push(pg(i,r));break;case"z":default:t.push(i);break}}),t}function mg(r,e){var t=[],i,a,n,o;return M(e,function(s,l){var f=s[0];switch(f.toLowerCase()){case"m":case"c":case"q":t.push(Bh(s,r));break;case"l":i=e[l-1],a=s,n=r.isTransposed,o=n?i[i.length-2]===a[1]:i[i.length-1]===a[2],o?t=t.concat(jT(i,a,r)):t.push(Bh(s,r));break;case"a":t.push(pg(s,r));break;case"z":default:t.push(s);break}}),ZT(t),t}function gg(r,e){var t=r.event,i=t.target;return xg(i,e)}function yg(r,e){var t=r.getCanvasBBox(),i=t.width,a=t.height;return i>0&&a>0&&(i>=e||a>=e)}function xg(r,e){var t=r.getCanvasBBox();return yg(r,e)?t:null}function Cg(r,e){var t=r.event.maskShapes;return t.map(function(i){return xg(i,e)}).filter(function(i){return!!i})}function $T(r,e){var t=r.event,i=t.target;return wg(i,e)}function wg(r,e){return yg(r,e)?r.attr("path"):null}function KT(r,e){var t=r.event.maskShapes;return t.map(function(i){return wg(i,e)})}function Me(r){var e=r.event,t,i=e.target;return i&&(t=i.get("element")),t}function Fe(r){var e=r.event,t=e.target,i;return t&&(i=t.get("delegateObject")),i}function Us(r){var e=r.event.gEvent;return!(e&&e.fromShape&&e.toShape&&e.fromShape.get("element")===e.toShape.get("element"))}function Br(r){return r&&r.component&&r.component.isList()}function js(r){return r&&r.component&&r.component.isSlider()}function kr(r){var e=r.event,t=e.target;return t&&t?.get("name")==="mask"||go(r)}function go(r){var e;return((e=r.event.target)===null||e===void 0?void 0:e.get("name"))==="multi-mask"}function Ha(r,e){var t=r.event.target;if(go(r))return JT(r,e);if(t.get("type")==="path"){var i=$T(r,e);return i?Ag(r.view,i):void 0}var a=gg(r,e);return a?xo(r.view,a):null}function JT(r,e){var t=r.event.target;if(t.get("type")==="path"){var i=KT(r,e);return i.length>0?i.flatMap(function(n){return Ag(r.view,n)}):null}var a=Cg(r,e);return a.length>0?a.flatMap(function(n){return xo(r.view,n)}):null}function Zs(r,e,t){if(go(r))return tE(r,e,t);var i=gg(r,t);return i?Mg(i,r,e):null}function Mg(r,e,t){var i=e.view,a=qs(i,t,{x:r.x,y:r.y}),n=qs(i,t,{x:r.maxX,y:r.maxY}),o={minX:a.x,minY:a.y,maxX:n.x,maxY:n.y};return xo(t,o)}function tE(r,e,t){var i=Cg(r,t);return i.length>0?i.flatMap(function(a){return Mg(a,r,e)}):null}function xt(r){var e=r.geometries,t=[];return M(e,function(i){var a=i.elements;t=t.concat(a)}),r.views&&r.views.length&&M(r.views,function(i){t=t.concat(xt(i))}),t}function Sg(r,e,t){var i=xt(r);return i.filter(function(a){return $t(a,e)===t})}function yo(r,e){var t=r.geometries,i=[];return M(t,function(a){var n=a.getElementsBy(function(o){return o.hasState(e)});i=i.concat(n)}),r.views&&r.views.length&&M(r.views,function(a){i.push.apply(i,U([],_(yo(a,e)),!1))}),i}function $t(r,e){var t=r.getModel(),i=t.data,a;return B(i)?a=i[0][e]:a=i[e],a}function eE(r,e){return!(e.minX>r.maxX||e.maxX<r.minX||e.minY>r.maxY||e.maxY<r.minY)}function xo(r,e){var t=xt(r),i=[];return M(t,function(a){var n=a.shape,o=n.getCanvasBBox();eE(e,o)&&i.push(a)}),i}function dg(r){var e=[];return M(r,function(t){var i=t[0];if(i!=="A")for(var a=1;a<t.length;a=a+2)e.push([t[a],t[a+1]]);else{var n=t.length;e.push([t[n-2],t[n-1]])}}),e}function Ag(r,e){var t=xt(r),i=dg(e),a=t.filter(function(n){var o=n.shape,s;if(o.get("type")==="path")s=dg(o.attr("path"));else{var l=o.getCanvasBBox();s=rg(l)}return Ss(i,s)});return a}function Qs(r){return r.getComponents().map(function(e){return e.component})}function Va(r,e){var t=e.x-r.x,i=e.y-r.y;return Math.sqrt(t*t+i*i)}function bg(r,e){if(r.length<=2)return Pr(r,!1);var t=r[0],i=[];M(r,function(n){i.push(n.x),i.push(n.y)});var a=kh(i,e,null);return a.unshift(["M",t.x,t.y]),a}function Oh(r,e){return r.x<=e.x&&r.maxX>=e.x&&r.y<=e.y&&r.maxY>e.y}function ye(r){var e=r.parent,t=null;return e&&(t=e.views.filter(function(i){return i!==r})),t}function rE(r,e){var t=r.getCoordinate();return t.invert(e)}function qs(r,e,t){var i=rE(r,t);return e.getCoordinate().convert(i)}function $s(r,e,t,i){var a=!1;return M(r,function(n){if(n[t]===e[t]&&n[i]===e[i])return a=!0,!1}),a}function fr(r,e){var t=r.getScaleByField(e);return!t&&r.views&&M(r.views,function(i){if(t=fr(i,e),t)return!1}),t}var iE=function(){function r(e){this.actions=[],this.event=null,this.cacheMap={},this.view=e}return r.prototype.cache=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(e.length===1)return this.cacheMap[e[0]];e.length===2&&(this.cacheMap[e[0]]=e[1])},r.prototype.getAction=function(e){return this.actions.find(function(t){return t.name===e})},r.prototype.addAction=function(e){this.actions.push(e)},r.prototype.removeAction=function(e){var t=this.actions,i=this.actions.indexOf(e);i>=0&&t.splice(i,1)},r.prototype.getCurrentPoint=function(){var e=this.event;if(e)if(e.target instanceof HTMLElement){var t=this.view.getCanvas(),i=t.getPointByClient(e.clientX,e.clientY);return i}else return{x:e.x,y:e.y};return null},r.prototype.getCurrentShape=function(){return b(this.event,["gEvent","shape"])},r.prototype.isInPlot=function(){var e=this.getCurrentPoint();return e?this.view.isPointInPlot(e):!1},r.prototype.isInShape=function(e){var t=this.getCurrentShape();return t?t.get("name")===e:!1},r.prototype.isInComponent=function(e){var t=Qs(this.view),i=this.getCurrentPoint();return i?!!t.find(function(a){var n=a.getBBox();return e?a.get("name")===e&&Oh(n,i):Oh(n,i)}):!1},r.prototype.destroy=function(){M(this.actions.slice(),function(e){e.destroy()}),this.view=null,this.event=null,this.actions=null,this.cacheMap=null},r}(),Tg=iE;var aE=function(){function r(e,t){this.view=e,this.cfg=t}return r.prototype.init=function(){this.initEvents()},r.prototype.initEvents=function(){},r.prototype.clearEvents=function(){},r.prototype.destroy=function(){this.clearEvents()},r}(),Ks=aE;function Eg(r,e,t){var i=r.split(":"),a=i[0],n=e.getAction(a)||Ph(a,e);if(!n)throw new Error("There is no action named ".concat(a));var o=i[1];return{action:n,methodName:o,arg:t}}function Lg(r){var e=r.action,t=r.methodName,i=r.arg;if(e[t])e[t](i);else throw new Error("Action(".concat(e.name,") doesn't have a method called ").concat(t))}var Se={START:"start",SHOW_ENABLE:"showEnable",END:"end",ROLLBACK:"rollback",PROCESSING:"processing"},nE=function(r){S(e,r);function e(t,i){var a=r.call(this,t,i)||this;return a.callbackCaches={},a.emitCaches={},a.steps=i,a}return e.prototype.init=function(){this.initContext(),r.prototype.init.call(this)},e.prototype.destroy=function(){r.prototype.destroy.call(this),this.steps=null,this.context&&(this.context.destroy(),this.context=null),this.callbackCaches=null,this.view=null},e.prototype.initEvents=function(){var t=this;M(this.steps,function(i,a){M(i,function(n){var o=t.getActionCallback(a,n);o&&t.bindEvent(n.trigger,o)})})},e.prototype.clearEvents=function(){var t=this;M(this.steps,function(i,a){M(i,function(n){var o=t.getActionCallback(a,n);o&&t.offEvent(n.trigger,o)})})},e.prototype.initContext=function(){var t=this.view,i=new Tg(t);this.context=i;var a=this.steps;M(a,function(n){M(n,function(o){if(D(o.action))o.actionObject={action:cg(o.action,i),methodName:"execute"};else if(G(o.action))o.actionObject=Eg(o.action,i,o.arg);else if(B(o.action)){var s=o.action,l=B(o.arg)?o.arg:[o.arg];o.actionObject=[],M(s,function(f,u){o.actionObject.push(Eg(f,i,l[u]))})}})})},e.prototype.isAllowStep=function(t){var i=this.currentStepName,a=this.steps;if(i===t||t===Se.SHOW_ENABLE)return!0;if(t===Se.PROCESSING)return i===Se.START;if(t===Se.START)return i!==Se.PROCESSING;if(t===Se.END)return i===Se.PROCESSING||i===Se.START;if(t===Se.ROLLBACK){if(a[Se.END])return i===Se.END;if(i===Se.START)return!0}return!1},e.prototype.isAllowExecute=function(t,i){if(this.isAllowStep(t)){var a=this.getKey(t,i);return i.once&&this.emitCaches[a]?!1:i.isEnable?i.isEnable(this.context):!0}return!1},e.prototype.enterStep=function(t){this.currentStepName=t,this.emitCaches={}},e.prototype.afterExecute=function(t,i){t!==Se.SHOW_ENABLE&&this.currentStepName!==t&&this.enterStep(t);var a=this.getKey(t,i);this.emitCaches[a]=!0},e.prototype.getKey=function(t,i){return t+i.trigger+i.action},e.prototype.getActionCallback=function(t,i){var a=this,n=this.context,o=this.callbackCaches,s=i.actionObject;if(i.action&&s){var l=this.getKey(t,i);if(!o[l]){var f=function(u){n.event=u,a.isAllowExecute(t,i)?(B(s)?M(s,function(h){n.event=u,Lg(h)}):(n.event=u,Lg(s)),a.afterExecute(t,i),i.callback&&(n.event=u,i.callback(n))):n.event=null};i.debounce?o[l]=Sn(f,i.debounce.wait,i.debounce.immediate):i.throttle?o[l]=Pi(f,i.throttle.wait,{leading:i.throttle.leading,trailing:i.throttle.trailing}):o[l]=f}return o[l]}return null},e.prototype.bindEvent=function(t,i){var a=t.split(":");a[0]==="window"?window.addEventListener(a[1],i):a[0]==="document"?document.addEventListener(a[1],i):this.view.on(t,i)},e.prototype.offEvent=function(t,i){var a=t.split(":");a[0]==="window"?window.removeEventListener(a[1],i):a[0]==="document"?document.removeEventListener(a[1],i):this.view.off(t,i)},e}(Ks),Ig=nE;var Bg={};function kg(r){return Bg[$e(r)]}function vt(r,e){Bg[$e(r)]=e}function Og(r,e,t){var i=kg(r);if(!i)return null;if(qt(i)){var a=J(zt(i),t);return new Ig(e,a)}else{var n=i;return new n(e,t)}}function oE(r){return{title:{autoRotate:!0,position:"center",spacing:r.axisTitleSpacing,style:{fill:r.axisTitleTextFillColor,fontSize:r.axisTitleTextFontSize,lineHeight:r.axisTitleTextLineHeight,textBaseline:"middle",fontFamily:r.fontFamily},iconStyle:{fill:r.axisDescriptionIconFillColor}},label:{autoRotate:!1,autoEllipsis:!1,autoHide:{type:"equidistance",cfg:{minGap:6}},offset:r.axisLabelOffset,style:{fill:r.axisLabelFillColor,fontSize:r.axisLabelFontSize,lineHeight:r.axisLabelLineHeight,fontFamily:r.fontFamily}},line:{style:{lineWidth:r.axisLineBorder,stroke:r.axisLineBorderColor}},grid:{line:{type:"line",style:{stroke:r.axisGridBorderColor,lineWidth:r.axisGridBorder,lineDash:r.axisGridLineDash}},alignTick:!0,animate:!0},tickLine:{style:{lineWidth:r.axisTickLineBorder,stroke:r.axisTickLineBorderColor},alignTick:!0,length:r.axisTickLineLength},subTickLine:null,animate:!0}}function sE(r){return{title:null,marker:{symbol:"circle",spacing:r.legendMarkerSpacing,style:{r:r.legendCircleMarkerSize,fill:r.legendMarkerColor}},itemName:{spacing:5,style:{fill:r.legendItemNameFillColor,fontFamily:r.fontFamily,fontSize:r.legendItemNameFontSize,lineHeight:r.legendItemNameLineHeight,fontWeight:r.legendItemNameFontWeight,textAlign:"start",textBaseline:"middle"}},itemStates:{active:{nameStyle:{opacity:.8}},unchecked:{nameStyle:{fill:"#D8D8D8"},markerStyle:{fill:"#D8D8D8",stroke:"#D8D8D8"}},inactive:{nameStyle:{fill:"#D8D8D8"},markerStyle:{opacity:.2}}},flipPage:!0,pageNavigator:{marker:{style:{size:r.legendPageNavigatorMarkerSize,inactiveFill:r.legendPageNavigatorMarkerInactiveFillColor,inactiveOpacity:r.legendPageNavigatorMarkerInactiveFillOpacity,fill:r.legendPageNavigatorMarkerFillColor,opacity:r.legendPageNavigatorMarkerFillOpacity}},text:{style:{fill:r.legendPageNavigatorTextFillColor,fontSize:r.legendPageNavigatorTextFontSize}}},animate:!1,maxItemWidth:200,itemSpacing:r.legendItemSpacing,itemMarginBottom:r.legendItemMarginBottom,padding:r.legendPadding}}function Js(r){var e,t={point:{default:{fill:r.pointFillColor,r:r.pointSize,stroke:r.pointBorderColor,lineWidth:r.pointBorder,fillOpacity:r.pointFillOpacity},active:{stroke:r.pointActiveBorderColor,lineWidth:r.pointActiveBorder},selected:{stroke:r.pointSelectedBorderColor,lineWidth:r.pointSelectedBorder},inactive:{fillOpacity:r.pointInactiveFillOpacity,strokeOpacity:r.pointInactiveBorderOpacity}},hollowPoint:{default:{fill:r.hollowPointFillColor,lineWidth:r.hollowPointBorder,stroke:r.hollowPointBorderColor,strokeOpacity:r.hollowPointBorderOpacity,r:r.hollowPointSize},active:{stroke:r.hollowPointActiveBorderColor,strokeOpacity:r.hollowPointActiveBorderOpacity},selected:{lineWidth:r.hollowPointSelectedBorder,stroke:r.hollowPointSelectedBorderColor,strokeOpacity:r.hollowPointSelectedBorderOpacity},inactive:{strokeOpacity:r.hollowPointInactiveBorderOpacity}},area:{default:{fill:r.areaFillColor,fillOpacity:r.areaFillOpacity,stroke:null},active:{fillOpacity:r.areaActiveFillOpacity},selected:{fillOpacity:r.areaSelectedFillOpacity},inactive:{fillOpacity:r.areaInactiveFillOpacity}},hollowArea:{default:{fill:null,stroke:r.hollowAreaBorderColor,lineWidth:r.hollowAreaBorder,strokeOpacity:r.hollowAreaBorderOpacity},active:{fill:null,lineWidth:r.hollowAreaActiveBorder},selected:{fill:null,lineWidth:r.hollowAreaSelectedBorder},inactive:{strokeOpacity:r.hollowAreaInactiveBorderOpacity}},interval:{default:{fill:r.intervalFillColor,fillOpacity:r.intervalFillOpacity},active:{stroke:r.intervalActiveBorderColor,lineWidth:r.intervalActiveBorder},selected:{stroke:r.intervalSelectedBorderColor,lineWidth:r.intervalSelectedBorder},inactive:{fillOpacity:r.intervalInactiveFillOpacity,strokeOpacity:r.intervalInactiveBorderOpacity}},hollowInterval:{default:{fill:r.hollowIntervalFillColor,stroke:r.hollowIntervalBorderColor,lineWidth:r.hollowIntervalBorder,strokeOpacity:r.hollowIntervalBorderOpacity},active:{stroke:r.hollowIntervalActiveBorderColor,lineWidth:r.hollowIntervalActiveBorder,strokeOpacity:r.hollowIntervalActiveBorderOpacity},selected:{stroke:r.hollowIntervalSelectedBorderColor,lineWidth:r.hollowIntervalSelectedBorder,strokeOpacity:r.hollowIntervalSelectedBorderOpacity},inactive:{stroke:r.hollowIntervalInactiveBorderColor,lineWidth:r.hollowIntervalInactiveBorder,strokeOpacity:r.hollowIntervalInactiveBorderOpacity}},line:{default:{stroke:r.lineBorderColor,lineWidth:r.lineBorder,strokeOpacity:r.lineBorderOpacity,fill:null,lineAppendWidth:10,lineCap:"round",lineJoin:"round"},active:{lineWidth:r.lineActiveBorder},selected:{lineWidth:r.lineSelectedBorder},inactive:{strokeOpacity:r.lineInactiveBorderOpacity}}},i=oE(r),a=sE(r);return{background:r.backgroundColor,defaultColor:r.brandColor,subColor:r.subColor,semanticRed:r.paletteSemanticRed,semanticGreen:r.paletteSemanticGreen,padding:"auto",fontFamily:r.fontFamily,columnWidthRatio:1/2,maxColumnWidth:null,minColumnWidth:null,roseWidthRatio:.9999999,multiplePieWidthRatio:1/1.3,colors10:r.paletteQualitative10,colors20:r.paletteQualitative20,sequenceColors:r.paletteSequence,shapes:{point:["hollow-circle","hollow-square","hollow-bowtie","hollow-diamond","hollow-hexagon","hollow-triangle","hollow-triangle-down","circle","square","bowtie","diamond","hexagon","triangle","triangle-down","cross","tick","plus","hyphen","line"],line:["line","dash","dot","smooth"],area:["area","smooth","line","smooth-line"],interval:["rect","hollow-rect","line","tick"]},sizes:[1,10],geometries:{interval:{rect:{default:{style:t.interval.default},active:{style:t.interval.active},inactive:{style:t.interval.inactive},selected:{style:function(n){var o=n.geometry.coordinate;if(o.isPolar&&o.isTransposed){var s=di(n.getModel(),o),l=s.startAngle,f=s.endAngle,u=(l+f)/2,h=7.5,c=h*Math.cos(u),p=h*Math.sin(u);return{matrix:$.transform(null,[["t",c,p]])}}return t.interval.selected}}},"hollow-rect":{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}},line:{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}},tick:{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}},funnel:{default:{style:t.interval.default},active:{style:t.interval.active},inactive:{style:t.interval.inactive},selected:{style:t.interval.selected}},pyramid:{default:{style:t.interval.default},active:{style:t.interval.active},inactive:{style:t.interval.inactive},selected:{style:t.interval.selected}}},line:{line:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},dot:{default:{style:d(d({},t.line.default),{lineCap:null,lineDash:[1,1]})},active:{style:d(d({},t.line.active),{lineCap:null,lineDash:[1,1]})},inactive:{style:d(d({},t.line.inactive),{lineCap:null,lineDash:[1,1]})},selected:{style:d(d({},t.line.selected),{lineCap:null,lineDash:[1,1]})}},dash:{default:{style:d(d({},t.line.default),{lineCap:null,lineDash:[5.5,1]})},active:{style:d(d({},t.line.active),{lineCap:null,lineDash:[5.5,1]})},inactive:{style:d(d({},t.line.inactive),{lineCap:null,lineDash:[5.5,1]})},selected:{style:d(d({},t.line.selected),{lineCap:null,lineDash:[5.5,1]})}},smooth:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},hv:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},vh:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},hvh:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},vhv:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}}},polygon:{polygon:{default:{style:t.interval.default},active:{style:t.interval.active},inactive:{style:t.interval.inactive},selected:{style:t.interval.selected}}},point:{circle:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},square:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},bowtie:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},diamond:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},hexagon:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},triangle:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},"triangle-down":{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},"hollow-circle":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-square":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-bowtie":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-diamond":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-hexagon":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-triangle":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-triangle-down":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},cross:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},tick:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},plus:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},hyphen:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},line:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}}},area:{area:{default:{style:t.area.default},active:{style:t.area.active},inactive:{style:t.area.inactive},selected:{style:t.area.selected}},smooth:{default:{style:t.area.default},active:{style:t.area.active},inactive:{style:t.area.inactive},selected:{style:t.area.selected}},line:{default:{style:t.hollowArea.default},active:{style:t.hollowArea.active},inactive:{style:t.hollowArea.inactive},selected:{style:t.hollowArea.selected}},"smooth-line":{default:{style:t.hollowArea.default},active:{style:t.hollowArea.active},inactive:{style:t.hollowArea.inactive},selected:{style:t.hollowArea.selected}}},schema:{candle:{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}},box:{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}}},edge:{line:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},vhv:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},smooth:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},arc:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}}},violin:{violin:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},smooth:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},hollow:{default:{style:t.hollowArea.default},active:{style:t.hollowArea.active},inactive:{style:t.hollowArea.inactive},selected:{style:t.hollowArea.selected}},"hollow-smooth":{default:{style:t.hollowArea.default},active:{style:t.hollowArea.active},inactive:{style:t.hollowArea.inactive},selected:{style:t.hollowArea.selected}}}},components:{axis:{common:i,top:{position:"top",grid:null,title:null,verticalLimitLength:1/2},bottom:{position:"bottom",grid:null,title:null,verticalLimitLength:1/2},left:{position:"left",title:null,line:null,tickLine:null,verticalLimitLength:1/3},right:{position:"right",title:null,line:null,tickLine:null,verticalLimitLength:1/3},circle:{title:null,grid:O({},i.grid,{line:{type:"line"}})},radius:{title:null,grid:O({},i.grid,{line:{type:"circle"}})}},legend:{common:a,right:{layout:"vertical",padding:r.legendVerticalPadding},left:{layout:"vertical",padding:r.legendVerticalPadding},top:{layout:"horizontal",padding:r.legendHorizontalPadding},bottom:{layout:"horizontal",padding:r.legendHorizontalPadding},continuous:{title:null,background:null,track:{},rail:{type:"color",size:r.sliderRailHeight,defaultLength:r.sliderRailWidth,style:{fill:r.sliderRailFillColor,stroke:r.sliderRailBorderColor,lineWidth:r.sliderRailBorder}},label:{align:"rail",spacing:4,formatter:null,style:{fill:r.sliderLabelTextFillColor,fontSize:r.sliderLabelTextFontSize,lineHeight:r.sliderLabelTextLineHeight,textBaseline:"middle",fontFamily:r.fontFamily}},handler:{size:r.sliderHandlerWidth,style:{fill:r.sliderHandlerFillColor,stroke:r.sliderHandlerBorderColor}},slidable:!0,padding:a.padding}},tooltip:{showContent:!0,follow:!0,showCrosshairs:!1,showMarkers:!0,shared:!1,enterable:!1,position:"auto",marker:{symbol:"circle",stroke:"#fff",shadowBlur:10,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"rgba(0,0,0,0.09)",lineWidth:2,r:4},crosshairs:{line:{style:{stroke:r.tooltipCrosshairsBorderColor,lineWidth:r.tooltipCrosshairsBorder}},text:null,textBackground:{padding:2,style:{fill:"rgba(0, 0, 0, 0.25)",lineWidth:0,stroke:null}},follow:!1},domStyles:(e={},e["".concat(Ot.CONTAINER_CLASS)]={position:"absolute",visibility:"hidden",zIndex:8,transition:"left 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s, top 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s",backgroundColor:r.tooltipContainerFillColor,opacity:r.tooltipContainerFillOpacity,boxShadow:r.tooltipContainerShadow,borderRadius:"".concat(r.tooltipContainerBorderRadius,"px"),color:r.tooltipTextFillColor,fontSize:"".concat(r.tooltipTextFontSize,"px"),fontFamily:r.fontFamily,lineHeight:"".concat(r.tooltipTextLineHeight,"px"),padding:"0 12px 0 12px"},e["".concat(Ot.TITLE_CLASS)]={marginBottom:"12px",marginTop:"12px"},e["".concat(Ot.LIST_CLASS)]={margin:0,listStyleType:"none",padding:0},e["".concat(Ot.LIST_ITEM_CLASS)]={listStyleType:"none",padding:0,marginBottom:"12px",marginTop:"12px",marginLeft:0,marginRight:0},e["".concat(Ot.MARKER_CLASS)]={width:"8px",height:"8px",borderRadius:"50%",display:"inline-block",marginRight:"8px"},e["".concat(Ot.VALUE_CLASS)]={display:"inline-block",float:"right",marginLeft:"30px"},e)},annotation:{arc:{style:{stroke:r.annotationArcBorderColor,lineWidth:r.annotationArcBorder},animate:!0},line:{style:{stroke:r.annotationLineBorderColor,lineDash:r.annotationLineDash,lineWidth:r.annotationLineBorder},text:{position:"start",autoRotate:!0,style:{fill:r.annotationTextFillColor,stroke:r.annotationTextBorderColor,lineWidth:r.annotationTextBorder,fontSize:r.annotationTextFontSize,textAlign:"start",fontFamily:r.fontFamily,textBaseline:"bottom"}},animate:!0},text:{style:{fill:r.annotationTextFillColor,stroke:r.annotationTextBorderColor,lineWidth:r.annotationTextBorder,fontSize:r.annotationTextFontSize,textBaseline:"middle",textAlign:"start",fontFamily:r.fontFamily},animate:!0},region:{top:!1,style:{lineWidth:r.annotationRegionBorder,stroke:r.annotationRegionBorderColor,fill:r.annotationRegionFillColor,fillOpacity:r.annotationRegionFillOpacity},animate:!0},image:{top:!1,animate:!0},dataMarker:{top:!0,point:{style:{r:3,stroke:r.brandColor,lineWidth:2}},line:{style:{stroke:r.annotationLineBorderColor,lineWidth:r.annotationLineBorder},length:r.annotationDataMarkerLineLength},text:{style:{textAlign:"start",fill:r.annotationTextFillColor,stroke:r.annotationTextBorderColor,lineWidth:r.annotationTextBorder,fontSize:r.annotationTextFontSize,fontFamily:r.fontFamily}},direction:"upward",autoAdjust:!0,animate:!0},dataRegion:{style:{region:{fill:r.annotationRegionFillColor,fillOpacity:r.annotationRegionFillOpacity},text:{textAlign:"center",textBaseline:"bottom",fill:r.annotationTextFillColor,stroke:r.annotationTextBorderColor,lineWidth:r.annotationTextBorder,fontSize:r.annotationTextFontSize,fontFamily:r.fontFamily}},animate:!0}},slider:{common:{padding:[8,8,8,8],backgroundStyle:{fill:r.cSliderBackgroundFillColor,opacity:r.cSliderBackgroundFillOpacity},foregroundStyle:{fill:r.cSliderForegroundFillColor,opacity:r.cSliderForegroundFillOpacity},handlerStyle:{width:r.cSliderHandlerWidth,height:r.cSliderHandlerHeight,fill:r.cSliderHandlerFillColor,opacity:r.cSliderHandlerFillOpacity,stroke:r.cSliderHandlerBorderColor,lineWidth:r.cSliderHandlerBorder,radius:r.cSliderHandlerBorderRadius,highLightFill:r.cSliderHandlerHighlightFillColor},textStyle:{fill:r.cSliderTextFillColor,opacity:r.cSliderTextFillOpacity,fontSize:r.cSliderTextFontSize,lineHeight:r.cSliderTextLineHeight,fontWeight:r.cSliderTextFontWeight,stroke:r.cSliderTextBorderColor,lineWidth:r.cSliderTextBorder}}},scrollbar:{common:{padding:[8,8,8,8]},default:{style:{trackColor:r.scrollbarTrackFillColor,thumbColor:r.scrollbarThumbFillColor}},hover:{style:{thumbColor:r.scrollbarThumbHighlightFillColor}}}},labels:{offset:12,style:{fill:r.labelFillColor,fontSize:r.labelFontSize,fontFamily:r.fontFamily,stroke:r.labelBorderColor,lineWidth:r.labelBorder},fillColorDark:r.labelFillColorDark,fillColorLight:r.labelFillColorLight,autoRotate:!0},innerLabels:{style:{fill:r.innerLabelFillColor,fontSize:r.innerLabelFontSize,fontFamily:r.fontFamily,stroke:r.innerLabelBorderColor,lineWidth:r.innerLabelBorder},autoRotate:!0},overflowLabels:{style:{fill:r.overflowLabelFillColor,fontSize:r.overflowLabelFontSize,fontFamily:r.fontFamily,stroke:r.overflowLabelBorderColor,lineWidth:r.overflowLabelBorder}},pieLabels:{labelHeight:14,offset:10,labelLine:{style:{lineWidth:r.labelLineBorder}},autoRotate:!0}}}var lt={100:"#000",95:"#0D0D0D",85:"#262626",65:"#595959",45:"#8C8C8C",25:"#BFBFBF",15:"#D9D9D9",6:"#F0F0F0"},za={100:"#FFFFFF",95:"#F2F2F2",85:"#D9D9D9",65:"#A6A6A6",45:"#737373",25:"#404040",15:"#262626",6:"#0F0F0F"},lE=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#6F5EF9","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"],fE=["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#6F5EF9","#D3CEFD","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"],uE=["#B8E1FF","#9AC5FF","#7DAAFF","#5B8FF9","#3D76DD","#085EC0","#0047A5","#00318A","#001D70"],Fh=function(r){r===void 0&&(r={});var e=r.paletteQualitative10,t=e===void 0?lE:e,i=r.paletteQualitative20,a=i===void 0?fE:i,n=r.brandColor,o=n===void 0?t[0]:n,s={backgroundColor:"transparent",brandColor:o,subColor:"rgba(0,0,0,0.05)",paletteQualitative10:t,paletteQualitative20:a,paletteSemanticRed:"#F4664A",paletteSemanticGreen:"#30BF78",paletteSemanticYellow:"#FAAD14",paletteSequence:uE,fontFamily:`"Segoe UI", Roboto, "Helvetica Neue", Arial,
    "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",
    "Noto Color Emoji"`,axisLineBorderColor:lt[25],axisLineBorder:1,axisLineDash:null,axisTitleTextFillColor:lt[65],axisTitleTextFontSize:12,axisTitleTextLineHeight:12,axisTitleTextFontWeight:"normal",axisTitleSpacing:12,axisDescriptionIconFillColor:za[85],axisTickLineBorderColor:lt[25],axisTickLineLength:4,axisTickLineBorder:1,axisSubTickLineBorderColor:lt[15],axisSubTickLineLength:2,axisSubTickLineBorder:1,axisLabelFillColor:lt[45],axisLabelFontSize:12,axisLabelLineHeight:12,axisLabelFontWeight:"normal",axisLabelOffset:8,axisGridBorderColor:lt[15],axisGridBorder:1,axisGridLineDash:null,legendTitleTextFillColor:lt[45],legendTitleTextFontSize:12,legendTitleTextLineHeight:21,legendTitleTextFontWeight:"normal",legendMarkerColor:o,legendMarkerSpacing:8,legendMarkerSize:4,legendCircleMarkerSize:4,legendSquareMarkerSize:4,legendLineMarkerSize:5,legendItemNameFillColor:lt[65],legendItemNameFontSize:12,legendItemNameLineHeight:12,legendItemNameFontWeight:"normal",legendItemSpacing:24,legendItemMarginBottom:12,legendPadding:[8,8,8,8],legendHorizontalPadding:[8,0,8,0],legendVerticalPadding:[0,8,0,8],legendPageNavigatorMarkerSize:12,legendPageNavigatorMarkerInactiveFillColor:lt[100],legendPageNavigatorMarkerInactiveFillOpacity:.45,legendPageNavigatorMarkerFillColor:lt[100],legendPageNavigatorMarkerFillOpacity:1,legendPageNavigatorTextFillColor:lt[45],legendPageNavigatorTextFontSize:12,sliderRailFillColor:lt[15],sliderRailBorder:0,sliderRailBorderColor:null,sliderRailWidth:100,sliderRailHeight:12,sliderLabelTextFillColor:lt[45],sliderLabelTextFontSize:12,sliderLabelTextLineHeight:12,sliderLabelTextFontWeight:"normal",sliderHandlerFillColor:lt[6],sliderHandlerWidth:10,sliderHandlerHeight:14,sliderHandlerBorder:1,sliderHandlerBorderColor:lt[25],annotationArcBorderColor:lt[15],annotationArcBorder:1,annotationLineBorderColor:lt[25],annotationLineBorder:1,annotationLineDash:null,annotationTextFillColor:lt[65],annotationTextFontSize:12,annotationTextLineHeight:12,annotationTextFontWeight:"normal",annotationTextBorderColor:null,annotationTextBorder:0,annotationRegionFillColor:lt[100],annotationRegionFillOpacity:.06,annotationRegionBorder:0,annotationRegionBorderColor:null,annotationDataMarkerLineLength:16,tooltipCrosshairsBorderColor:lt[25],tooltipCrosshairsBorder:1,tooltipCrosshairsLineDash:null,tooltipContainerFillColor:"rgb(255, 255, 255)",tooltipContainerFillOpacity:.95,tooltipContainerShadow:"0px 0px 10px #aeaeae",tooltipContainerBorderRadius:3,tooltipTextFillColor:lt[65],tooltipTextFontSize:12,tooltipTextLineHeight:12,tooltipTextFontWeight:"bold",labelFillColor:lt[65],labelFillColorDark:"#2c3542",labelFillColorLight:"#ffffff",labelFontSize:12,labelLineHeight:12,labelFontWeight:"normal",labelBorderColor:null,labelBorder:0,innerLabelFillColor:za[100],innerLabelFontSize:12,innerLabelLineHeight:12,innerLabelFontWeight:"normal",innerLabelBorderColor:null,innerLabelBorder:0,overflowLabelFillColor:lt[65],overflowLabelFontSize:12,overflowLabelLineHeight:12,overflowLabelFontWeight:"normal",overflowLabelBorderColor:za[100],overflowLabelBorder:1,labelLineBorder:1,labelLineBorderColor:lt[25],cSliderRailHieght:16,cSliderBackgroundFillColor:"#416180",cSliderBackgroundFillOpacity:.05,cSliderForegroundFillColor:"#5B8FF9",cSliderForegroundFillOpacity:.15,cSliderHandlerHeight:24,cSliderHandlerWidth:10,cSliderHandlerFillColor:"#F7F7F7",cSliderHandlerFillOpacity:1,cSliderHandlerHighlightFillColor:"#FFF",cSliderHandlerBorderColor:"#BFBFBF",cSliderHandlerBorder:1,cSliderHandlerBorderRadius:2,cSliderTextFillColor:"#000",cSliderTextFillOpacity:.45,cSliderTextFontSize:12,cSliderTextLineHeight:12,cSliderTextFontWeight:"normal",cSliderTextBorderColor:null,cSliderTextBorder:0,scrollbarTrackFillColor:"rgba(0,0,0,0)",scrollbarThumbFillColor:"rgba(0,0,0,0.15)",scrollbarThumbHighlightFillColor:"rgba(0,0,0,0.2)",pointFillColor:o,pointFillOpacity:.95,pointSize:4,pointBorder:1,pointBorderColor:za[100],pointBorderOpacity:1,pointActiveBorderColor:lt[100],pointSelectedBorder:2,pointSelectedBorderColor:lt[100],pointInactiveFillOpacity:.3,pointInactiveBorderOpacity:.3,hollowPointSize:4,hollowPointBorder:1,hollowPointBorderColor:o,hollowPointBorderOpacity:.95,hollowPointFillColor:za[100],hollowPointActiveBorder:1,hollowPointActiveBorderColor:lt[100],hollowPointActiveBorderOpacity:1,hollowPointSelectedBorder:2,hollowPointSelectedBorderColor:lt[100],hollowPointSelectedBorderOpacity:1,hollowPointInactiveBorderOpacity:.3,lineBorder:2,lineBorderColor:o,lineBorderOpacity:1,lineActiveBorder:3,lineSelectedBorder:3,lineInactiveBorderOpacity:.3,areaFillColor:o,areaFillOpacity:.25,areaActiveFillColor:o,areaActiveFillOpacity:.5,areaSelectedFillColor:o,areaSelectedFillOpacity:.5,areaInactiveFillOpacity:.3,hollowAreaBorderColor:o,hollowAreaBorder:2,hollowAreaBorderOpacity:1,hollowAreaActiveBorder:3,hollowAreaActiveBorderColor:lt[100],hollowAreaSelectedBorder:3,hollowAreaSelectedBorderColor:lt[100],hollowAreaInactiveBorderOpacity:.3,intervalFillColor:o,intervalFillOpacity:.95,intervalActiveBorder:1,intervalActiveBorderColor:lt[100],intervalActiveBorderOpacity:1,intervalSelectedBorder:2,intervalSelectedBorderColor:lt[100],intervalSelectedBorderOpacity:1,intervalInactiveBorderOpacity:.3,intervalInactiveFillOpacity:.3,hollowIntervalBorder:2,hollowIntervalBorderColor:o,hollowIntervalBorderOpacity:1,hollowIntervalFillColor:za[100],hollowIntervalActiveBorder:2,hollowIntervalActiveBorderColor:lt[100],hollowIntervalSelectedBorder:3,hollowIntervalSelectedBorderColor:lt[100],hollowIntervalSelectedBorderOpacity:1,hollowIntervalInactiveBorderOpacity:.3};return d(d({},s),r)},n7=Fh();function ra(r){var e=r.styleSheet,t=e===void 0?{}:e,i=gt(r,["styleSheet"]),a=Fh(t);return O({},Js(a),i)}var hE=ra({}),_h={default:hE};function Co(r){return b(_h,$e(r),_h.default)}function Rh(r,e){_h[$e(r)]=ra(e)}function Fg(r,e,t){var i=t.translate(r),a=t.translate(e);return pt(i,a)}function cE(r,e){var t=e.coordinate,i=e.getXScale(),a=i.range,n=a[a.length-1],o=a[0],s=t.invert(r),l=s.x;return t.isPolar&&l>(1+n)/2&&(l=o),i.translate(i.invert(l))}function _g(r,e,t){var i=t.coordinate,a=t.getYScale(),n=a.field,o=i.invert(e),s=a.invert(o.y),l=ee(r,function(f){var u=f[rt];return u[n][0]<=s&&u[n][1]>=s});return l||r[r.length-1]}var pE=yr(function(r){if(r.isCategory)return 1;for(var e=r.values,t=e.length,i=r.translate(e[0]),a=i,n=0;n<t;n++){var o=e[n],s=r.translate(o);s<i&&(i=s),s>a&&(a=s)}return(a-i)/(t-1)});function vE(r,e,t){var i=e.getAttribute("position"),a=i.getFields(),n=e.scales,o=D(t)||!t?a[0]:t,s=n[o],l=s?s.getText(r[o]):r[o]||o;return D(t)?t(l,r):l}function mE(r){var e=Ur(r.attributes);return St(e,function(t){return fe(xr,t.type)})}function Ng(r){var e,t,i=mE(r),a;try{for(var n=j(i),o=n.next();!o.done;o=n.next()){var s=o.value,l=s.getScale(s.type);if(l&&l.isLinear){var f=b(r.scaleDefs,l.field),u=zs(l,f,s.type,r.type);if(u!=="cat"){a=l;break}}}}catch(p){e={error:p}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}var h=r.getXScale(),c=r.getYScale();return a||c||h}function dE(r,e){var t=e.field,i=r[t];if(B(i)){var a=i.map(function(n){return e.getText(n)});return a.join("-")}return e.getText(i)}function gE(r,e){var t,i=e.getGroupScales();if(i.length&&(t=i[0]),t){var a=t.field;return t.getText(r[a])}var n=Ng(e);return yi(n)}function Dh(r,e,t){if(e.length===0)return null;var i=t.type,a=t.getXScale(),n=t.getYScale(),o=a.field,s=n.field,l=null;if(i==="heatmap"||i==="point"){for(var f=t.coordinate,u=f.invert(r),h=a.invert(u.x),c=n.invert(u.y),p=1/0,v=0;v<e.length;v++){var m=e[v],g=m[rt],y=Math.pow(g[o]-h,2)+Math.pow(g[s]-c,2);y<p&&(p=y,l=m)}return l}var w=e[0],x=e[e.length-1],C=cE(r,t),A=w[rt][o],T=w[rt][s],E=x[rt][o],k=n.isLinear&&B(T);if(B(A)){for(var v=0;v<e.length;v++){var P=e[v],g=P[rt];if(a.translate(g[o][0])<=C&&a.translate(g[o][1])>=C)if(k)B(l)||(l=[]),l.push(P);else{l=P;break}}B(l)&&(l=_g(l,r,t))}else{var L=void 0;if(!a.isLinear&&a.type!=="timeCat"){for(var v=0;v<e.length;v++){var P=e[v],g=P[rt];if(Fg(g[o],C,a))if(k)B(l)||(l=[]),l.push(P);else{l=P;break}else a.translate(g[o])<=C&&(x=P,L=e[v+1])}B(l)&&(l=_g(l,r,t))}else{if((C>a.translate(E)||C<a.translate(A))&&(C>a.max||C<a.min))return null;for(var R=0,N=e.length-1,H=void 0;R<=N;){H=Math.floor((R+N)/2);var V=e[H][rt][o];if(Fg(V,C,a))return e[H];a.translate(V)<=a.translate(C)?(R=H+1,x=e[H],L=e[H+1]):(N===0&&(x=e[0]),N=H-1)}}x&&L&&Math.abs(a.translate(x[rt][o])-C)>Math.abs(a.translate(L[rt][o])-C)&&(x=L)}var Q=pE(t.getXScale());return!l&&Math.abs(a.translate(x[rt][o])-C)<=Q/2&&(l=x),l}function Nh(r,e,t,i){var a,n;t===void 0&&(t=""),i===void 0&&(i=!1);var o=r[rt],s=vE(o,e,t),l=e.tooltipOption,f=e.theme.defaultColor,u=[],h,c;function p(P,L){if(i||!I(L)&&L!==""){var R={title:s,data:o,mappingData:r,name:P,value:L,color:r.color||f,marker:!0};u.push(R)}}if(K(l)){var v=l.fields,m=l.callback;if(m){var g=v.map(function(P){return r[rt][P]}),y=m.apply(void 0,U([],_(g),!1)),w=d({data:r[rt],mappingData:r,title:s,color:r.color||f,marker:!0},y);u.push(w)}else{var x=e.scales;try{for(var C=j(v),A=C.next();!A.done;A=C.next()){var T=A.value;if(!I(o[T])){var E=x[T];h=yi(E),c=E.getText(o[T]),p(h,c)}}}catch(P){a={error:P}}finally{try{A&&!A.done&&(n=C.return)&&n.call(C)}finally{if(a)throw a.error}}}}else{var k=Ng(e);c=dE(o,k),h=gE(o,e),p(h,c)}return u}function Rg(r,e,t,i){var a,n,o=i.showNil,s=[],l=r.dataArray;if(!Gt(l)){r.sort(l);try{for(var f=j(l),u=f.next();!u.done;u=f.next()){var h=u.value,c=Dh(e,h,r);if(c){var p=r.getElementId(c),v=r.elementsMap[p];if(r.type==="heatmap"||v.visible){var m=Nh(c,r,t,o);m.length&&s.push(m)}}}}catch(g){a={error:g}}finally{try{u&&!u.done&&(n=f.return)&&n.call(f)}finally{if(a)throw a.error}}}return s}function Dg(r,e,t,i){var a=i.showNil,n=[],o=r.container,s=o.getShape(e.x,e.y);if(s&&s.get("visible")&&s.get("origin")){var l=s.get("origin").mappingData,f=Nh(l,r,t,a);f.length&&n.push(f)}return n}function tl(r,e,t){var i,a,n=[],o=r.geometries,s=t.shared,l=t.title,f=t.reversed;try{for(var u=j(o),h=u.next();!h.done;h=u.next()){var c=h.value;if(c.visible&&c.tooltipOption!==!1){var p=c.type,v=void 0;["point","edge","polygon"].includes(p)?v=Dg(c,e,l,t):["area","line","path","heatmap"].includes(p)||s!==!1?v=Rg(c,e,l,t):v=Dg(c,e,l,t),v.length&&(f&&v.reverse(),n.push(v))}}}catch(m){i={error:m}}finally{try{h&&!h.done&&(a=u.return)&&a.call(u)}finally{if(i)throw i.error}}return n}function Gg(r,e,t){var i,a,n=tl(r,e,t);try{for(var o=j(r.views),s=o.next();!s.done;s=o.next()){var l=s.value;n=n.concat(tl(l,e,t))}}catch(f){i={error:f}}finally{try{s&&!s.done&&(a=o.return)&&a.call(o)}finally{if(i)throw i.error}}return n}function Yg(r){return!z(r)&&!B(r)}function Xa(r){r===void 0&&(r=0);var e=B(r)?r:[r];switch(e.length){case 0:e=[0,0,0,0];break;case 1:e=new Array(4).fill(e[0]);break;case 2:e=U(U([],_(e),!1),_(e),!1);break;case 3:e=U(U([],_(e),!1),[e[1]],!1);break;default:e=e.slice(0,4);break}return e}var Gh={};function Or(r,e){Gh[r]=e}function Hg(){return Object.keys(Gh)}function Vg(r){return Gh[r]}var yE=function(){function r(e){this.option=this.wrapperOption(e)}return r.prototype.update=function(e){return this.option=this.wrapperOption(e),this},r.prototype.hasAction=function(e){var t=this.option.actions;return gr(t,function(i){return i[0]===e})},r.prototype.create=function(e,t){var i=this.option,a=i.type,n=i.cfg,o=a==="theta",s=d({start:e,end:t},n),l=Fs(o?"polar":a);return this.coordinate=new l(s),this.coordinate.type=a,o&&(this.hasAction("transpose")||this.transpose()),this.execActions(),this.coordinate},r.prototype.adjust=function(e,t){return this.coordinate.update({start:e,end:t}),this.coordinate.resetMatrix(),this.execActions(["scale","rotate","translate"]),this.coordinate},r.prototype.rotate=function(e){return this.option.actions.push(["rotate",e]),this},r.prototype.reflect=function(e){return this.option.actions.push(["reflect",e]),this},r.prototype.scale=function(e,t){return this.option.actions.push(["scale",e,t]),this},r.prototype.transpose=function(){return this.option.actions.push(["transpose"]),this},r.prototype.getOption=function(){return this.option},r.prototype.getCoordinate=function(){return this.coordinate},r.prototype.wrapperOption=function(e){return d({type:"rect",actions:[],cfg:{}},e)},r.prototype.execActions=function(e){var t=this,i=this.option.actions;M(i,function(a){var n,o=_(a),s=o[0],l=o.slice(1),f=I(e)?!0:e.includes(s);f&&(n=t.coordinate)[s].apply(n,U([],_(l),!1))})},r}(),zg=yE;var xE=function(){function r(e,t,i){this.view=e,this.gEvent=t,this.data=i,this.type=t.type}return r.fromData=function(e,t,i){return new r(e,new tr(t,{}),i)},Object.defineProperty(r.prototype,"target",{get:function(){return this.gEvent.target},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"event",{get:function(){return this.gEvent.originalEvent},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"x",{get:function(){return this.gEvent.x},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"y",{get:function(){return this.gEvent.y},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"clientX",{get:function(){return this.gEvent.clientX},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"clientY",{get:function(){return this.gEvent.clientY},enumerable:!1,configurable:!0}),r.prototype.toString=function(){return"[Event (type=".concat(this.type,")]")},r.prototype.clone=function(){return new r(this.view,this.gEvent,this.data)},r}(),_t=xE;function Yh(r){var e=r.getController("axis"),t=r.getController("legend"),i=r.getController("annotation"),a=r.getController("slider"),n=r.getController("scrollbar");[e,a,n,t,i].forEach(function(o){o&&o.layout()})}var Xg=function(){function r(){this.scales=new Map,this.syncScales=new Map}return r.prototype.createScale=function(e,t,i,a){var n=i,o=this.getScaleMeta(a);if(t.length===0&&o){var s=o.scale,l={type:s.type};s.isCategory&&(l.values=s.values),n=O(l,o.scaleDef,i)}var f=og(e,t,n);return this.cacheScale(f,i,a),f},r.prototype.sync=function(e,t){var i=this;this.syncScales.forEach(function(a,n){var o=Number.MAX_SAFE_INTEGER,s=Number.MIN_SAFE_INTEGER,l=[];M(a,function(f){var u=i.getScale(f);s=z(u.max)?Math.max(s,u.max):s,o=z(u.min)?Math.min(o,u.min):o,M(u.values,function(h){l.includes(h)||l.push(h)})}),M(a,function(f){var u=i.getScale(f);if(u.isContinuous)u.change({min:o,max:s,values:l});else if(u.isCategory){var h=u.range,c=i.getScaleMeta(f);l&&!b(c,["scaleDef","range"])&&(h=Xs(O({},u,{values:l}),e,t)),u.change({values:l,range:h})}})})},r.prototype.cacheScale=function(e,t,i){var a=this.getScaleMeta(i);a&&a.scale.type===e.type?(sg(a.scale,e),a.scaleDef=t):(a={key:i,scale:e,scaleDef:t},this.scales.set(i,a));var n=this.getSyncKey(a);if(a.syncKey=n,this.removeFromSyncScales(i),n){var o=this.syncScales.get(n);o||(o=[],this.syncScales.set(n,o)),o.push(i)}},r.prototype.getScale=function(e){var t=this.getScaleMeta(e);if(!t){var i=nt(e.split("-")),a=this.syncScales.get(i);a&&a.length&&(t=this.getScaleMeta(a[0]))}return t&&t.scale},r.prototype.deleteScale=function(e){var t=this.getScaleMeta(e);if(t){var i=t.syncKey,a=this.syncScales.get(i);if(a&&a.length){var n=a.indexOf(e);n!==-1&&a.splice(n,1)}}this.scales.delete(e)},r.prototype.clear=function(){this.scales.clear(),this.syncScales.clear()},r.prototype.removeFromSyncScales=function(e){var t=this;this.syncScales.forEach(function(i,a){var n=i.indexOf(e);if(n!==-1)return i.splice(n,1),i.length===0&&t.syncScales.delete(a),!1})},r.prototype.getSyncKey=function(e){var t=e.scale,i=e.scaleDef,a=t.field,n=b(i,["sync"]);return n===!0?a:n===!1?void 0:n},r.prototype.getScaleMeta=function(e){return this.scales.get(e)},r}();var Wa=function(){function r(e,t,i,a){e===void 0&&(e=0),t===void 0&&(t=0),i===void 0&&(i=0),a===void 0&&(a=0),this.top=e,this.right=t,this.bottom=i,this.left=a}return r.instance=function(e,t,i,a){return e===void 0&&(e=0),t===void 0&&(t=0),i===void 0&&(i=0),a===void 0&&(a=0),new r(e,t,i,a)},r.prototype.max=function(e){var t=_(e,4),i=t[0],a=t[1],n=t[2],o=t[3];return this.top=Math.max(this.top,i),this.right=Math.max(this.right,a),this.bottom=Math.max(this.bottom,n),this.left=Math.max(this.left,o),this},r.prototype.shrink=function(e){var t=_(e,4),i=t[0],a=t[1],n=t[2],o=t[3];return this.top+=i,this.right+=a,this.bottom+=n,this.left+=o,this},r.prototype.inc=function(e,t){var i=e.width,a=e.height;switch(t){case F.TOP:case F.TOP_LEFT:case F.TOP_RIGHT:this.top+=a;break;case F.RIGHT:case F.RIGHT_TOP:case F.RIGHT_BOTTOM:this.right+=i;break;case F.BOTTOM:case F.BOTTOM_LEFT:case F.BOTTOM_RIGHT:this.bottom+=a;break;case F.LEFT:case F.LEFT_TOP:case F.LEFT_BOTTOM:this.left+=i;break;default:break}return this},r.prototype.getPadding=function(){return[this.top,this.right,this.bottom,this.left]},r.prototype.clone=function(){return new(r.bind.apply(r,U([void 0],_(this.getPadding()),!1)))},r}();function Wg(r){var e=r.padding;if(!Yg(e))return new(Wa.bind.apply(Wa,U([void 0],_(Xa(e)),!1)));var t=r.viewBBox,i=new Wa,a=[],n=[],o=[];return M(r.getComponents(),function(s){var l=s.type;l===At.AXIS?a.push(s):[At.LEGEND,At.SLIDER,At.SCROLLBAR].includes(l)?n.push(s):l!==At.GRID&&l!==At.TOOLTIP&&o.push(s)}),M(a,function(s){var l=s.component,f=l.getLayoutBBox(),u=new It(f.x,f.y,f.width,f.height),h=u.exceed(t);i.max(h)}),M(n,function(s){var l=s.component,f=s.direction,u=l.getLayoutBBox(),h=l.get("padding"),c=new It(u.x,u.y,u.width,u.height).expand(h);i.inc(c,f)}),M(o,function(s){var l=s.component,f=s.direction,u=l.getLayoutBBox(),h=new It(u.x,u.y,u.width,u.height);i.inc(h,f)}),i}function qg(r,e,t){var i=t.instance();e.forEach(function(a){a.autoPadding=i.max(a.autoPadding.getPadding())})}var Ug=function(r){S(e,r);function e(t){var i=r.call(this,{visible:t.visible})||this;i.views=[],i.geometries=[],i.controllers=[],i.interactions={},i.limitInPlot=!1,i.options={data:[],animate:!0},i.usedControllers=Hg(),i.scalePool=new Xg,i.layoutFunc=Yh,i.isPreMouseInPlot=!1,i.isDataChanged=!1,i.isCoordinateChanged=!1,i.createdScaleKeys=new Map,i.onCanvasEvent=function(x){var C=x.name;if(!C.includes(":")){var A=i.createViewEvent(x);i.doPlotEvent(A),i.emit(C,A)}},i.onDelegateEvents=function(x){var C=x.name;if(C.includes(":")){var A=i.createViewEvent(x);i.emit(C,A)}};var a=t.id,n=a===void 0?Zt("view"):a,o=t.parent,s=t.canvas,l=t.backgroundGroup,f=t.middleGroup,u=t.foregroundGroup,h=t.region,c=h===void 0?{start:{x:0,y:0},end:{x:1,y:1}}:h,p=t.padding,v=t.appendPadding,m=t.theme,g=t.options,y=t.limitInPlot,w=t.syncViewPadding;return i.parent=o,i.canvas=s,i.backgroundGroup=l,i.middleGroup=f,i.foregroundGroup=u,i.region=c,i.padding=p,i.appendPadding=v,i.options=d(d({},i.options),g),i.limitInPlot=y,i.id=n,i.syncViewPadding=w,i.themeObject=K(m)?O({},Co("default"),ra(m)):Co(m),i.init(),i}return e.prototype.setLayout=function(t){this.layoutFunc=t},e.prototype.init=function(){this.calculateViewBBox(),this.initEvents(),this.initComponentController(),this.initOptions()},e.prototype.render=function(t,i){t===void 0&&(t=!1),this.emit(st.BEFORE_RENDER,_t.fromData(this,st.BEFORE_RENDER,i)),this.paint(t),this.emit(st.AFTER_RENDER,_t.fromData(this,st.AFTER_RENDER,i)),this.visible===!1&&this.changeVisible(!1)},e.prototype.clear=function(){var t=this;this.emit(st.BEFORE_CLEAR),this.filteredData=[],this.coordinateInstance=void 0,this.isDataChanged=!1,this.isCoordinateChanged=!1;for(var i=this.geometries,a=0;a<i.length;a++)i[a].clear(),i[a].container.remove(!0),i[a].labelsContainer.remove(!0);this.geometries=[];for(var n=this.controllers,a=0;a<n.length;a++)n[a].name==="annotation"?n[a].clear(!0):n[a].clear();this.createdScaleKeys.forEach(function(s,l){t.getRootView().scalePool.deleteScale(l)}),this.createdScaleKeys.clear();for(var o=this.views,a=0;a<o.length;a++)o[a].clear();this.emit(st.AFTER_CLEAR)},e.prototype.destroy=function(){this.emit(st.BEFORE_DESTROY);var t=this.interactions;M(t,function(s){s&&s.destroy()}),this.clear();for(var i=this.controllers,a=0,n=i.length;a<n;a++){var o=i[a];o.destroy()}this.backgroundGroup.remove(!0),this.middleGroup.remove(!0),this.foregroundGroup.remove(!0),r.prototype.destroy.call(this)},e.prototype.changeVisible=function(t){r.prototype.changeVisible.call(this,t);for(var i=this.geometries,a=0,n=i.length;a<n;a++){var o=i[a];o.changeVisible(t)}for(var s=this.controllers,a=0,n=s.length;a<n;a++){var l=s[a];l.changeVisible(t)}return this.foregroundGroup.set("visible",t),this.middleGroup.set("visible",t),this.backgroundGroup.set("visible",t),this.getCanvas().draw(),this},e.prototype.data=function(t){return kt(this.options,"data",t),this.isDataChanged=!0,this},e.prototype.source=function(t){return console.warn("This method will be removed at G2 V4.1. Please use chart.data() instead."),this.data(t)},e.prototype.filter=function(t,i){return D(i)?(kt(this.options,["filters",t],i),this):(!i&&b(this.options,["filters",t])&&delete this.options.filters[t],this)},e.prototype.axis=function(t,i){return Ke(t)?kt(this.options,["axes"],t):kt(this.options,["axes",t],i),this},e.prototype.legend=function(t,i){return Ke(t)?kt(this.options,["legends"],t):G(t)?(kt(this.options,["legends",t],i),qt(i)&&i?.selected&&kt(this.options,["filters",t],function(a){var n;return(n=i?.selected[a])!==null&&n!==void 0?n:!0})):kt(this.options,["legends"],t),this},e.prototype.scale=function(t,i){var a=this;return G(t)?kt(this.options,["scales",t],i):K(t)&&M(t,function(n,o){kt(a.options,["scales",o],n)}),this},e.prototype.tooltip=function(t){return kt(this.options,"tooltip",t),this},e.prototype.annotation=function(){return this.getController("annotation")},e.prototype.guide=function(){return console.warn("This method will be removed at G2 V4.1. Please use chart.annotation() instead."),this.annotation()},e.prototype.coordinate=function(t,i){return G(t)?kt(this.options,"coordinate",{type:t,cfg:i}):kt(this.options,"coordinate",t),this.coordinateController.update(this.options.coordinate),this.coordinateController},e.prototype.coord=function(t,i){return console.warn("This method will be removed at G2 V4.1. Please use chart.coordinate() instead."),this.coordinate(t,i)},e.prototype.facet=function(t,i){this.facetInstance&&this.facetInstance.destroy();var a=Ih(t);if(!a)throw new Error("facet '".concat(t,"' is not exist!"));return this.facetInstance=new a(this,d(d({},i),{type:t})),this},e.prototype.animate=function(t){return kt(this.options,"animate",t),this},e.prototype.updateOptions=function(t){return this.clear(),J(this.options,t),this.views.forEach(function(i){return i.destroy()}),this.views=[],this.initOptions(),this.coordinateBBox=this.viewBBox,this},e.prototype.option=function(t,i){if(e.prototype[t])throw new Error(`Can't use built in variable name "`.concat(t,'", please change another one.'));return kt(this.options,t,i),this},e.prototype.theme=function(t){return this.themeObject=K(t)?O({},this.themeObject,ra(t)):Co(t),this},e.prototype.interaction=function(t,i){var a=this.interactions[t];a&&a.destroy();var n=Og(t,this,i);return n&&(n.init(),this.interactions[t]=n),this},e.prototype.removeInteraction=function(t){var i=this.interactions[t];i&&(i.destroy(),this.interactions[t]=void 0)},e.prototype.changeData=function(t){this.isDataChanged=!0,this.emit(st.BEFORE_CHANGE_DATA,_t.fromData(this,st.BEFORE_CHANGE_DATA,null)),this.data(t),this.paint(!0);for(var i=this.views,a=0,n=i.length;a<n;a++){var o=i[a];o.changeData(t)}this.emit(st.AFTER_CHANGE_DATA,_t.fromData(this,st.AFTER_CHANGE_DATA,null))},e.prototype.createView=function(t){this.parent&&this.parent.parent&&console.warn("The view nesting recursive feature will be removed at G2 V4.1. Please avoid to use it.");var i={data:this.options.data,scales:zt(this.options.scales),axes:zt(this.options.axes),coordinate:zt(this.coordinateController.getOption()),tooltip:zt(this.options.tooltip),legends:zt(this.options.legends),animate:this.options.animate,visible:this.visible},a=new e(d(d({parent:this,canvas:this.canvas,backgroundGroup:this.backgroundGroup.addGroup({zIndex:jr.BG}),middleGroup:this.middleGroup.addGroup({zIndex:jr.MID}),foregroundGroup:this.foregroundGroup.addGroup({zIndex:jr.FORE}),theme:this.themeObject,padding:this.padding},t),{options:d(d({},i),b(t,"options",{}))}));return this.views.push(a),a},e.prototype.view=function(t){return console.warn("This method will be removed at G2 V4.1. Please use chart.createView() instead."),this.createView(t)},e.prototype.removeView=function(t){var i=mf(this.views,function(a){return a===t})[0];return i&&i.destroy(),i},e.prototype.getCoordinate=function(){return this.coordinateInstance},e.prototype.getTheme=function(){return this.themeObject},e.prototype.getXScale=function(){var t=this.geometries[0];return t?t.getXScale():null},e.prototype.getYScales=function(){var t={},i=[];return this.geometries.forEach(function(a){var n=a.getYScale(),o=n.field;t[o]||(t[o]=!0,i.push(n))}),i},e.prototype.getScalesByDim=function(t){for(var i=this.geometries,a={},n=0,o=i.length;n<o;n++){var s=i[n],l=t==="x"?s.getXScale():s.getYScale();l&&!a[l.field]&&(a[l.field]=l)}return a},e.prototype.getScale=function(t,i){var a=i||this.getScaleKey(t);return this.getRootView().scalePool.getScale(a)},e.prototype.getScaleByField=function(t,i){return this.getScale(t,i)},e.prototype.getOptions=function(){return this.options},e.prototype.getData=function(){return this.filteredData},e.prototype.getOriginalData=function(){return this.options.data},e.prototype.getPadding=function(){return this.autoPadding.getPadding()},e.prototype.getGeometries=function(){return this.geometries},e.prototype.getElements=function(){return la(this.geometries,function(t,i){return t.concat(i.getElements())},[])},e.prototype.getElementsBy=function(t){return this.getElements().filter(function(i){return t(i)})},e.prototype.getLayer=function(t){return t===ht.BG?this.backgroundGroup:t===ht.MID?this.middleGroup:t===ht.FORE?this.foregroundGroup:this.foregroundGroup},e.prototype.isPointInPlot=function(t){return ag(this.getCoordinate(),t)},e.prototype.getLegendAttributes=function(){return Ft(this.geometries.map(function(t){return t.getGroupAttributes()}))},e.prototype.getGroupScales=function(){var t=this.geometries.map(function(i){return i.getGroupScales()});return or(Ft(t))},e.prototype.getCanvas=function(){return this.getRootView().canvas},e.prototype.getRootView=function(){for(var t=this;;){if(t.parent){t=t.parent;continue}break}return t},e.prototype.getXY=function(t){var i=this.getCoordinate(),a=this.getScalesByDim("x"),n=this.getScalesByDim("y"),o,s;if(M(t,function(l,f){a[f]&&(o=a[f].scale(l)),n[f]&&(s=n[f].scale(l))}),!I(o)&&!I(s))return i.convert({x:o,y:s})},e.prototype.getController=function(t){return ee(this.controllers,function(i){return i.name===t})},e.prototype.showTooltip=function(t){var i=this.getController("tooltip");return i&&i.showTooltip(t),this},e.prototype.hideTooltip=function(){var t=this.getController("tooltip");return t&&t.hideTooltip(),this},e.prototype.lockTooltip=function(){var t=this.getController("tooltip");return t&&t.lockTooltip(),this},e.prototype.unlockTooltip=function(){var t=this.getController("tooltip");return t&&t.unlockTooltip(),this},e.prototype.isTooltipLocked=function(){var t=this.getController("tooltip");return t&&t.isTooltipLocked()},e.prototype.getTooltipItems=function(t){var i=this.getController("tooltip");return i?i.getTooltipItems(t):[]},e.prototype.getSnapRecords=function(t){for(var i=this.geometries,a=[],n=0,o=i.length;n<o;n++){var s=i[n],l=s.dataArray;s.sort(l);for(var f=void 0,u=0,h=l.length;u<h;u++){var c=l[u];f=Dh(t,c,s),f&&a.push(f)}}for(var p=this.views,n=0,o=p.length;n<o;n++){var v=p[n],m=v.getSnapRecords(t);a=a.concat(m)}return a},e.prototype.getComponents=function(){for(var t=[],i=this.controllers,a=0,n=i.length;a<n;a++){var o=i[a];t=t.concat(o.getComponents())}return t},e.prototype.filterData=function(t){var i=this.options.filters;return Tt(i)===0?t:St(t,function(a,n){var o=Object.keys(i);return o.every(function(s){var l=i[s];return l(a[s],a,n)})})},e.prototype.filterFieldData=function(t,i){var a=this.options.filters,n=b(a,t);return Je(n)?i:i.filter(function(o,s){return n(o[t],o,s)})},e.prototype.adjustCoordinate=function(){var t=this.getCoordinate(),i=t.start,a=t.end,n=this.coordinateBBox.bl,o=this.coordinateBBox.tr;if(ot(i,n)&&ot(a,o)){this.isCoordinateChanged=!1;return}this.isCoordinateChanged=!0,this.coordinateInstance=this.coordinateController.adjust(n,o)},e.prototype.paint=function(t){this.renderDataRecursive(t),this.syncScale(),this.emit(st.BEFORE_PAINT),this.renderPaddingRecursive(t),this.renderLayoutRecursive(t),this.renderBackgroundStyleShape(),this.renderPaintRecursive(t),this.emit(st.AFTER_PAINT),this.isDataChanged=!1},e.prototype.renderBackgroundStyleShape=function(){if(!this.parent){var t=b(this.themeObject,"background");if(t){this.backgroundStyleRectShape||(this.backgroundStyleRectShape=this.backgroundGroup.addShape("rect",{attrs:{},zIndex:-1,capture:!1}),this.backgroundStyleRectShape.toBack());var i=this.viewBBox,a=i.x,n=i.y,o=i.width,s=i.height;this.backgroundStyleRectShape.attr({fill:t,x:a,y:n,width:o,height:s})}else this.backgroundStyleRectShape&&(this.backgroundStyleRectShape.remove(!0),this.backgroundStyleRectShape=void 0)}},e.prototype.renderPaddingRecursive=function(t){this.calculateViewBBox(),this.adjustCoordinate(),this.initComponents(t),this.autoPadding=Wg(this).shrink(Xa(this.appendPadding)),this.coordinateBBox=this.viewBBox.shrink(this.autoPadding.getPadding()),this.adjustCoordinate();var i=this.controllers.find(function(l){return l.name==="tooltip"});i.update();for(var a=this.views,n=0,o=a.length;n<o;n++){var s=a[n];s.renderPaddingRecursive(t)}},e.prototype.renderLayoutRecursive=function(t){var i=this.syncViewPadding===!0?qg:D(this.syncViewPadding)?this.syncViewPadding:void 0;i&&(i(this,this.views,Wa),this.views.forEach(function(l){l.coordinateBBox=l.viewBBox.shrink(l.autoPadding.getPadding()),l.adjustCoordinate()})),this.doLayout();for(var a=this.views,n=0,o=a.length;n<o;n++){var s=a[n];s.renderLayoutRecursive(t)}},e.prototype.renderPaintRecursive=function(t){var i=this.middleGroup;if(this.limitInPlot){var a=Ga(this.coordinateInstance),n=a.type,o=a.attrs;i.setClip({type:n,attrs:o})}else i.setClip(void 0);this.paintGeometries(t),this.renderComponents(t);for(var s=this.views,l=0,f=s.length;l<f;l++){var u=s[l];u.renderPaintRecursive(t)}},e.prototype.createScale=function(t,i,a,n){var o=b(this.options.scales,[t]),s=d(d({},o),a);return this.parent?this.parent.createScale(t,i,s,n):this.scalePool.createScale(t,i,s,n)},e.prototype.renderDataRecursive=function(t){this.doFilterData(),this.createCoordinate(),this.initGeometries(t),this.renderFacet(t);for(var i=this.views,a=0,n=i.length;a<n;a++){var o=i[a];o.renderDataRecursive(t)}},e.prototype.calculateViewBBox=function(){var t,i,a,n;if(this.parent){var o=this.parent.coordinateBBox;t=o.x,i=o.y,a=o.width,n=o.height}else t=0,i=0,a=this.canvas.get("width"),n=this.canvas.get("height");var s=this.region,l=s.start,f=s.end,u=new It(t+a*l.x,i+n*l.y,a*(f.x-l.x),n*(f.y-l.y));(!this.viewBBox||!this.viewBBox.isEqual(u))&&(this.viewBBox=new It(t+a*l.x,i+n*l.y,a*(f.x-l.x),n*(f.y-l.y))),this.coordinateBBox=this.viewBBox},e.prototype.initEvents=function(){this.foregroundGroup.on("*",this.onDelegateEvents),this.middleGroup.on("*",this.onDelegateEvents),this.backgroundGroup.on("*",this.onDelegateEvents),this.canvas.on("*",this.onCanvasEvent)},e.prototype.initComponentController=function(){for(var t=this.usedControllers,i=0,a=t.length;i<a;i++){var n=t[i],o=Vg(n);o&&this.controllers.push(new o(this))}},e.prototype.createViewEvent=function(t){var i=t.shape,a=t.name,n=i?i.get("origin"):null,o=new _t(this,t,n);return o.type=a,o},e.prototype.doPlotEvent=function(t){var i=t.type,a=t.x,n=t.y,o={x:a,y:n},s=["mousedown","mouseup","mousemove","mouseleave","mousewheel","touchstart","touchmove","touchend","touchcancel","click","dblclick","contextmenu"];if(s.includes(i)){var l=this.isPointInPlot(o),f=t.clone();if(l){var u="plot:".concat(i);f.type=u,this.emit(u,f),(i==="mouseleave"||i==="touchend")&&(this.isPreMouseInPlot=!1)}i==="mousemove"||i==="touchmove"?(this.isPreMouseInPlot&&!l?(i==="mousemove"&&(f.type=ne.MOUSE_LEAVE,this.emit(ne.MOUSE_LEAVE,f)),f.type=ne.LEAVE,this.emit(ne.LEAVE,f)):!this.isPreMouseInPlot&&l&&(i==="mousemove"&&(f.type=ne.MOUSE_ENTER,this.emit(ne.MOUSE_ENTER,f)),f.type=ne.ENTER,this.emit(ne.ENTER,f)),this.isPreMouseInPlot=l):(i==="mouseleave"||i==="touchend")&&this.isPreMouseInPlot&&(i==="mouseleave"&&(f.type=ne.MOUSE_LEAVE,this.emit(ne.MOUSE_LEAVE,f)),f.type=ne.LEAVE,this.emit(ne.LEAVE,f),this.isPreMouseInPlot=!1)}},e.prototype.doFilterData=function(){var t=this.options.data;this.filteredData=this.filterData(t)},e.prototype.initGeometries=function(t){this.createOrUpdateScales();for(var i=this.getCoordinate(),a=b(this.options,"scales",{}),n=this.geometries,o=0,s=n.length;o<s;o++){var l=n[o];l.scales=this.getGeometryScales();var f={coordinate:i,scaleDefs:a,data:this.filteredData,theme:this.themeObject,isDataChanged:this.isDataChanged,isCoordinateChanged:this.isCoordinateChanged};t?l.update(f):l.init(f)}this.adjustScales()},e.prototype.createOrUpdateScales=function(){for(var t=this.getScaleFields(),i=this.getGroupedFields(),a=this.getOptions(),n=a.data,o=a.scales,s=o===void 0?{}:o,l=this.filteredData,f=0,u=t.length;f<u;f++){var h=t[f],c=s[h],p=this.getScaleKey(h);this.createScale(h,i.includes(h)?n:l,c,p),this.createdScaleKeys.set(p,!0)}},e.prototype.syncScale=function(){this.getRootView().scalePool.sync(this.getCoordinate(),this.theme)},e.prototype.getGeometryScales=function(){for(var t=this.getScaleFields(),i={},a=0;a<t.length;a++){var n=t[a];i[n]=this.getScaleByField(n)}return i},e.prototype.getScaleFields=function(){for(var t=[],i=new Map,a=this.geometries,n=0;n<a.length;n++){var o=a[n],s=o.getScaleFields();or(s,t,i)}return t},e.prototype.getGroupedFields=function(){for(var t=[],i=new Map,a=this.geometries,n=0;n<a.length;n++){var o=a[n],s=o.getGroupFields();or(s,t,i)}return t},e.prototype.adjustScales=function(){this.adjustCategoryScaleRange()},e.prototype.adjustCategoryScaleRange=function(){var t=this,i=U([this.getXScale()],_(this.getYScales()),!1).filter(function(o){return!!o}),a=this.getCoordinate(),n=this.options.scales;M(i,function(o){var s=o.field,l=o.values,f=o.isCategory,u=o.isIdentity;(f||u)&&l&&!b(n,[s,"range"])&&(o.range=Xs(o,a,t.theme))})},e.prototype.initComponents=function(t){for(var i=this.controllers,a=0;a<i.length;a++){var n=i[a];t?n.update():(n.clear(),n.render())}},e.prototype.doLayout=function(){this.layoutFunc(this)},e.prototype.createCoordinate=function(){var t=this.coordinateBBox.bl,i=this.coordinateBBox.tr;this.coordinateInstance=this.coordinateController.create(t,i)},e.prototype.paintGeometries=function(t){for(var i=this.options.animate,a=this.getCoordinate(),n={x:this.viewBBox.x,y:this.viewBBox.y,minX:this.viewBBox.minX,minY:this.viewBBox.minY,maxX:this.viewBBox.maxX,maxY:this.viewBBox.maxY,width:this.viewBBox.width,height:this.viewBBox.height},o=this.geometries,s=0;s<o.length;s++){var l=o[s];l.coordinate=a,l.canvasRegion=n,i||l.animate(!1),l.paint(t)}},e.prototype.renderComponents=function(t){for(var i=this.getComponents(),a=0;a<i.length;a++){var n=i[a];n.component.render()}},e.prototype.renderFacet=function(t){this.facetInstance&&(t?this.facetInstance.update():(this.facetInstance.clear(),this.facetInstance.init(),this.facetInstance.render()))},e.prototype.initOptions=function(){var t=this,i=this.options,a=i.geometries,n=a===void 0?[]:a,o=i.interactions,s=o===void 0?[]:o,l=i.views,f=l===void 0?[]:l,u=i.annotations,h=u===void 0?[]:u,c=i.coordinate,p=i.events,v=i.facets;this.coordinateController?c&&this.coordinateController.update(c):this.coordinateController=new zg(c);for(var m=0;m<n.length;m++){var g=n[m];this.createGeometry(g)}for(var y=0;y<s.length;y++){var w=s[y],x=w.type,C=w.cfg;this.interaction(x,C)}for(var A=0;A<f.length;A++){var T=f[A];this.createView(T)}for(var E=this.getController("annotation"),k=0;k<h.length;k++){var P=h[k];E.annotation(P)}p&&M(p,function(L,R){t.on(R,L)}),v&&M(v,function(L){var R=L.type,N=gt(L,["type"]);t.facet(R,N)})},e.prototype.createGeometry=function(t){var i=t.type,a=t.cfg,n=a===void 0?{}:a;if(this[i]){var o=this[i](n);M(t,function(s,l){D(o[l])&&o[l](s)})}},e.prototype.getScaleKey=function(t){return"".concat(this.id,"-").concat(t)},e}(ha);function Ae(r,e){Ug.prototype[r.toLowerCase()]=function(t){t===void 0&&(t={});var i=d({container:this.middleGroup.addGroup(),labelsContainer:this.foregroundGroup.addGroup()},t),a=new e(i);return this.geometries.push(a),a}}var el=Ug;var CE=function(r){S(e,r);function e(t){var i=this,a=t.container,n=t.width,o=t.height,s=t.autoFit,l=s===void 0?!1:s,f=t.padding,u=t.appendPadding,h=t.renderer,c=h===void 0?"canvas":h,p=t.pixelRatio,v=t.localRefresh,m=v===void 0?!0:v,g=t.visible,y=g===void 0?!0:g,w=t.supportCSSTransform,x=w===void 0?!1:w,C=t.defaultInteractions,A=C===void 0?["tooltip","legend-filter","legend-active","continuous-filter","ellipsis-text","axis-description"]:C,T=t.options,E=t.limitInPlot,k=t.theme,P=t.syncViewPadding,L=G(a)?document.getElementById(a):a,R=re('<div style="position:relative;"></div>');L.appendChild(R);var N=_f(L,l,n,o),H=kf(c),V=new H.Canvas(d({container:R,pixelRatio:p,localRefresh:m,supportCSSTransform:x},N));return i=r.call(this,{parent:null,canvas:V,backgroundGroup:V.addGroup({zIndex:jr.BG}),middleGroup:V.addGroup({zIndex:jr.MID}),foregroundGroup:V.addGroup({zIndex:jr.FORE}),padding:f,appendPadding:u,visible:y,options:T,limitInPlot:E,theme:k,syncViewPadding:P})||this,i.onResize=Sn(function(){i.forceFit()},300),i.ele=L,i.canvas=V,i.width=N.width,i.height=N.height,i.autoFit=l,i.localRefresh=m,i.renderer=c,i.wrapperElement=R,i.updateCanvasStyle(),i.bindAutoFit(),i.initDefaultInteractions(A),i}return e.prototype.initDefaultInteractions=function(t){var i=this;M(t,function(a){i.interaction(a)})},e.prototype.aria=function(t){var i="aria-label";t===!1?this.ele.removeAttribute(i):this.ele.setAttribute(i,t.label)},e.prototype.changeSize=function(t,i){return this.width===t&&this.height===i?this:(this.emit(st.BEFORE_CHANGE_SIZE),this.width=t,this.height=i,this.canvas.changeSize(t,i),this.render(!0),this.emit(st.AFTER_CHANGE_SIZE),this)},e.prototype.clear=function(){r.prototype.clear.call(this),this.aria(!1)},e.prototype.destroy=function(){r.prototype.destroy.call(this),this.unbindAutoFit(),this.canvas.destroy(),Nc(this.wrapperElement),this.wrapperElement=null},e.prototype.changeVisible=function(t){return r.prototype.changeVisible.call(this,t),this.wrapperElement.style.display=t?"":"none",this},e.prototype.forceFit=function(){if(!this.destroyed){var t=_f(this.ele,!0,this.width,this.height),i=t.width,a=t.height;this.changeSize(i,a)}},e.prototype.updateCanvasStyle=function(){Et(this.canvas.get("el"),{display:"inline-block",verticalAlign:"middle"})},e.prototype.bindAutoFit=function(){this.autoFit&&window.addEventListener("resize",this.onResize)},e.prototype.unbindAutoFit=function(){this.autoFit&&window.removeEventListener("resize",this.onResize)},e}(el),wo=CE;var be=function(){function r(e){this.visible=!0,this.components=[],this.view=e}return r.prototype.clear=function(e){M(this.components,function(t){t.component.destroy()}),this.components=[]},r.prototype.destroy=function(){this.clear()},r.prototype.getComponents=function(){return this.components},r.prototype.changeVisible=function(e){this.visible!==e&&(this.components.forEach(function(t){e?t.component.show():t.component.hide()}),this.visible=e)},r}();function wE(r){for(var e=[],t=function(a){var n=r[a],o=ee(e,function(s){return s.color===n.color&&s.name===n.name&&s.value===n.value&&s.title===n.title});o||e.push(n)},i=0;i<r.length;i++)t(i);return e}var ME=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.isLocked=!1,t}return Object.defineProperty(e.prototype,"name",{get:function(){return"tooltip"},enumerable:!1,configurable:!0}),e.prototype.init=function(){},e.prototype.isVisible=function(){var t=this.view.getOptions().tooltip;return t!==!1},e.prototype.render=function(){},e.prototype.showTooltip=function(t){if(this.point=t,!!this.isVisible()){var i=this.view,a=this.getTooltipItems(t);if(!a.length){this.hideTooltip();return}var n=this.getTitle(a),o={x:a[0].x,y:a[0].y};i.emit("tooltip:show",_t.fromData(i,"tooltip:show",d({items:a,title:n},t)));var s=this.getTooltipCfg(),l=s.follow,f=s.showMarkers,u=s.showCrosshairs,h=s.showContent,c=s.marker,p=this.items,v=this.title;if(!ot(v,n)||!ot(p,a)?(i.emit("tooltip:change",_t.fromData(i,"tooltip:change",d({items:a,title:n},t))),(D(h)?h(a):h)&&(this.tooltip||this.renderTooltip(),this.tooltip.update(J({},s,{items:this.getItemsAfterProcess(a),title:n},l?t:{})),this.tooltip.show()),f&&this.renderTooltipMarkers(a,c)):(this.tooltip&&l&&(this.tooltip.update(t),this.tooltip.show()),this.tooltipMarkersGroup&&this.tooltipMarkersGroup.show()),this.items=a,this.title=n,u){var m=b(s,["crosshairs","follow"],!1);this.renderCrosshairs(m?t:o,s)}}},e.prototype.hideTooltip=function(){var t=this.getTooltipCfg().follow;if(!t){this.point=null;return}var i=this.tooltipMarkersGroup;i&&i.hide();var a=this.xCrosshair,n=this.yCrosshair;a&&a.hide(),n&&n.hide();var o=this.tooltip;o&&o.hide(),this.view.emit("tooltip:hide",_t.fromData(this.view,"tooltip:hide",{})),this.point=null},e.prototype.lockTooltip=function(){this.isLocked=!0,this.tooltip&&this.tooltip.setCapture(!0)},e.prototype.unlockTooltip=function(){this.isLocked=!1;var t=this.getTooltipCfg();this.tooltip&&this.tooltip.setCapture(t.capture)},e.prototype.isTooltipLocked=function(){return this.isLocked},e.prototype.clear=function(){var t=this,i=t.tooltip,a=t.xCrosshair,n=t.yCrosshair,o=t.tooltipMarkersGroup;i&&(i.hide(),i.clear()),a&&a.clear(),n&&n.clear(),o&&o.clear(),i?.get("customContent")&&(this.tooltip.destroy(),this.tooltip=null),this.title=null,this.items=null},e.prototype.destroy=function(){this.tooltip&&this.tooltip.destroy(),this.xCrosshair&&this.xCrosshair.destroy(),this.yCrosshair&&this.yCrosshair.destroy(),this.guideGroup&&this.guideGroup.remove(!0),this.reset()},e.prototype.reset=function(){this.items=null,this.title=null,this.tooltipMarkersGroup=null,this.tooltipCrosshairsGroup=null,this.xCrosshair=null,this.yCrosshair=null,this.tooltip=null,this.guideGroup=null,this.isLocked=!1,this.point=null},e.prototype.changeVisible=function(t){if(this.visible!==t){var i=this,a=i.tooltip,n=i.tooltipMarkersGroup,o=i.xCrosshair,s=i.yCrosshair;t?(a&&a.show(),n&&n.show(),o&&o.show(),s&&s.show()):(a&&a.hide(),n&&n.hide(),o&&o.hide(),s&&s.hide()),this.visible=t}},e.prototype.getTooltipItems=function(t){var i,a,n,o,s,l,f=this.findItemsFromView(this.view,t);if(f.length){f=Ft(f);try{for(var u=j(f),h=u.next();!h.done;h=u.next()){var c=h.value;try{for(var p=(n=void 0,j(c)),v=p.next();!v.done;v=p.next()){var m=v.value,g=m.mappingData,y=g.x,w=g.y;m.x=B(y)?y[y.length-1]:y,m.y=B(w)?w[w.length-1]:w}}catch(L){n={error:L}}finally{try{v&&!v.done&&(o=p.return)&&o.call(p)}finally{if(n)throw n.error}}}}catch(L){i={error:L}}finally{try{h&&!h.done&&(a=u.return)&&a.call(u)}finally{if(i)throw i.error}}var x=this.getTooltipCfg().shared;if(x===!1&&f.length>1){var C=f[0],A=Math.abs(t.y-C[0].y);try{for(var T=j(f),E=T.next();!E.done;E=T.next()){var k=E.value,P=Math.abs(t.y-k[0].y);P<=A&&(C=k,A=P)}}catch(L){s={error:L}}finally{try{E&&!E.done&&(l=T.return)&&l.call(T)}finally{if(s)throw s.error}}f=[C]}return wE(Ft(f))}return[]},e.prototype.layout=function(){},e.prototype.update=function(){if(this.point&&this.showTooltip(this.point),this.tooltip){var t=this.view.getCanvas();this.tooltip.set("region",{start:{x:0,y:0},end:{x:t.get("width"),y:t.get("height")}})}},e.prototype.isCursorEntered=function(t){if(this.tooltip){var i=this.tooltip.getContainer(),a=this.tooltip.get("capture");if(i&&a){var n=i.getBoundingClientRect(),o=n.x,s=n.y,l=n.width,f=n.height;return new It(o,s,l,f).isPointIn(t)}}return!1},e.prototype.getTooltipCfg=function(){var t=this.view,i=t.getOptions().tooltip,a=this.processCustomContent(i),n=t.getTheme(),o=b(n,["components","tooltip"],{}),s=b(a,"enterable",o.enterable);return O({},o,a,{capture:!!(s||this.isLocked)})},e.prototype.processCustomContent=function(t){if(Ke(t)||!b(t,"customContent"))return t;var i=t.customContent,a=function(n,o){var s=i(n,o)||"";return G(s)?'<div class="g2-tooltip">'+s+"</div>":s};return d(d({},t),{customContent:a})},e.prototype.getTitle=function(t){var i=t[0].title||t[0].name;return this.title=i,i},e.prototype.renderTooltip=function(){var t=this.view.getCanvas(),i={start:{x:0,y:0},end:{x:t.get("width"),y:t.get("height")}},a=this.getTooltipCfg(),n=new mi(d(d({parent:t.get("el").parentNode,region:i},a),{visible:!1,crosshairs:null}));n.init(),this.tooltip=n},e.prototype.renderTooltipMarkers=function(t,i){var a,n,o=this.getTooltipMarkersGroup(),s=this.view.getRootView(),l=s.limitInPlot;try{for(var f=j(t),u=f.next();!u.done;u=f.next()){var h=u.value,c=h.x,p=h.y;if(l||o?.getClip()){var v=Ga(s.getCoordinate()),m=v.type,g=v.attrs;o?.setClip({type:m,attrs:g})}else o?.setClip(void 0);var y=this.view.getTheme(),w=b(y,["components","tooltip","marker"],{}),x=d(d({fill:h.color,symbol:"circle",shadowColor:h.color},D(i)?d(d({},w),i(h)):i),{x:c,y:p});o.addShape("marker",{attrs:x})}}catch(C){a={error:C}}finally{try{u&&!u.done&&(n=f.return)&&n.call(f)}finally{if(a)throw a.error}}},e.prototype.renderCrosshairs=function(t,i){var a=b(i,["crosshairs","type"],"x");a==="x"?(this.yCrosshair&&this.yCrosshair.hide(),this.renderXCrosshairs(t,i)):a==="y"?(this.xCrosshair&&this.xCrosshair.hide(),this.renderYCrosshairs(t,i)):a==="xy"&&(this.renderXCrosshairs(t,i),this.renderYCrosshairs(t,i))},e.prototype.renderXCrosshairs=function(t,i){var a=this.getViewWithGeometry(this.view).getCoordinate(),n,o;if(a.isRect)a.isTransposed?(n={x:a.start.x,y:t.y},o={x:a.end.x,y:t.y}):(n={x:t.x,y:a.end.y},o={x:t.x,y:a.start.y});else{var s=lr(a,t),l=a.getCenter(),f=a.getRadius();o=dt(l.x,l.y,f,s),n=l}var u=O({start:n,end:o,container:this.getTooltipCrosshairsGroup()},b(i,"crosshairs",{}),this.getCrosshairsText("x",t,i));delete u.type;var h=this.xCrosshair;h?h.update(u):(h=new ta.Line(u),h.init()),h.render(),h.show(),this.xCrosshair=h},e.prototype.renderYCrosshairs=function(t,i){var a=this.getViewWithGeometry(this.view).getCoordinate(),n,o;if(a.isRect){var s=void 0,l=void 0;a.isTransposed?(s={x:t.x,y:a.end.y},l={x:t.x,y:a.start.y}):(s={x:a.start.x,y:t.y},l={x:a.end.x,y:t.y}),n={start:s,end:l},o="Line"}else n={center:a.getCenter(),radius:gi(a,t),startAngle:a.startAngle,endAngle:a.endAngle},o="Circle";n=O({container:this.getTooltipCrosshairsGroup()},n,b(i,"crosshairs",{}),this.getCrosshairsText("y",t,i)),delete n.type;var f=this.yCrosshair;f?a.isRect&&f.get("type")==="circle"||!a.isRect&&f.get("type")==="line"?(f=new ta[o](n),f.init()):f.update(n):(f=new ta[o](n),f.init()),f.render(),f.show(),this.yCrosshair=f},e.prototype.getCrosshairsText=function(t,i,a){var n=b(a,["crosshairs","text"]),o=b(a,["crosshairs","follow"]),s=this.items;if(n){var l=this.getViewWithGeometry(this.view),f=s[0],u=l.getXScale(),h=l.getYScales()[0],c=void 0,p=void 0;if(o){var v=this.view.getCoordinate().invert(i);c=u.invert(v.x),p=h.invert(v.y)}else c=f.data[u.field],p=f.data[h.field];var m=t==="x"?c:p;return D(n)?n=n(t,m,s,i):n.content=m,{text:n}}},e.prototype.getGuideGroup=function(){if(!this.guideGroup){var t=this.view.foregroundGroup;this.guideGroup=t.addGroup({name:"tooltipGuide",capture:!1})}return this.guideGroup},e.prototype.getTooltipMarkersGroup=function(){var t=this.tooltipMarkersGroup;return t&&!t.destroyed?(t.clear(),t.show()):(t=this.getGuideGroup().addGroup({name:"tooltipMarkersGroup"}),t.toFront(),this.tooltipMarkersGroup=t),t},e.prototype.getTooltipCrosshairsGroup=function(){var t=this.tooltipCrosshairsGroup;return t||(t=this.getGuideGroup().addGroup({name:"tooltipCrosshairsGroup",capture:!1}),t.toBack(),this.tooltipCrosshairsGroup=t),t},e.prototype.findItemsFromView=function(t,i){var a,n;if(t.getOptions().tooltip===!1)return[];var o=this.getTooltipCfg(),s=tl(t,i,o);try{for(var l=j(t.views),f=l.next();!f.done;f=l.next()){var u=f.value;s=s.concat(this.findItemsFromView(u,i))}}catch(h){a={error:h}}finally{try{f&&!f.done&&(n=l.return)&&n.call(l)}finally{if(a)throw a.error}}return s},e.prototype.getViewWithGeometry=function(t){var i=this;return t.geometries.length?t:ee(t.views,function(a){return i.getViewWithGeometry(a)})},e.prototype.getItemsAfterProcess=function(t){var i=this.getTooltipCfg().customItems,a=i||function(n){return n};return a(t)},e}(be),Hh=ME;var jg={};function rl(r){return jg[r.toLowerCase()]}function se(r,e){jg[r.toLowerCase()]=e}var Fr={appear:{duration:450,easing:"easeQuadOut"},update:{duration:400,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut"},leave:{duration:350,easing:"easeQuadIn"}},SE={interval:function(r){return{enter:{animation:r.isRect?r.isTransposed?"scale-in-x":"scale-in-y":"fade-in"},update:{animation:r.isPolar&&r.isTransposed?"sector-path-update":null},leave:{animation:"fade-out"}}},line:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},path:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},point:{appear:{animation:"zoom-in"},enter:{animation:"zoom-in"},leave:{animation:"zoom-out"}},area:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},polygon:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},schema:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},edge:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},label:{appear:{animation:"fade-in",delay:450},enter:{animation:"fade-in"},update:{animation:"position-update"},leave:{animation:"fade-out"}}},Zg={line:function(){return{animation:"wave-in"}},area:function(){return{animation:"wave-in"}},path:function(){return{animation:"fade-in"}},interval:function(r){var e;return r.isRect?e=r.isTransposed?"grow-in-x":"grow-in-y":(e="grow-in-xy",r.isPolar&&r.isTransposed&&(e="wave-in")),{animation:e}},schema:function(r){var e;return r.isRect?e=r.isTransposed?"grow-in-x":"grow-in-y":e="grow-in-xy",{animation:e}},polygon:function(){return{animation:"fade-in",duration:500}},edge:function(){return{animation:"fade-in"}}};function AE(r,e){return{delay:D(r.delay)?r.delay(e):r.delay,easing:D(r.easing)?r.easing(e):r.easing,duration:D(r.duration)?r.duration(e):r.duration,callback:r.callback,repeat:r.repeat}}function il(r,e,t){var i=SE[r];return i&&(D(i)&&(i=i(e)),i=O({},Fr,i),t)?i[t]:i}function _r(r,e,t){var i=b(r.get("origin"),"data",rt),a=e.animation,n=AE(e,i);if(a){var o=rl(a);o&&o(r,n,t)}else r.animate(t.toAttrs,n)}function Qg(r,e,t,i,a){if(Zg[t]){var n=Zg[t](i),o=rl(b(n,"animation",""));if(o){var s=d(d(d({},Fr.appear),n),e);r.stopAnimate(),o(r,s,{coordinate:i,minYPoint:a,toAttrs:null})}}}var qa="element-background";var bE=function(r){S(e,r);function e(t){var i=r.call(this,t)||this;i.labelShape=[],i.states=[];var a=t.shapeFactory,n=t.container,o=t.offscreenGroup,s=t.elementIndex,l=t.visible,f=l===void 0?!0:l;return i.shapeFactory=a,i.container=n,i.offscreenGroup=o,i.visible=f,i.elementIndex=s,i}return e.prototype.draw=function(t,i){i===void 0&&(i=!1),this.model=t,this.data=t.data,this.shapeType=this.getShapeType(t),this.drawShape(t,i),this.visible===!1&&this.changeVisible(!1)},e.prototype.update=function(t){var i=this,a=i.shapeFactory,n=i.shape;if(n){this.model=t,this.data=t.data,this.shapeType=this.getShapeType(t),this.setShapeInfo(n,t);var o=this.getOffscreenGroup(),s=a.drawShape(this.shapeType,t,o);s.cfg.data=this.data,s.cfg.origin=t,s.cfg.element=this,this.syncShapeStyle(n,s,this.getStates(),this.getAnimateCfg("update"))}},e.prototype.destroy=function(){var t=this,i=t.shapeFactory,a=t.shape;if(a){var n=this.getAnimateCfg("leave");n?_r(a,n,{coordinate:i.coordinate,toAttrs:d({},a.attr())}):a.remove(!0)}this.states=[],this.shapeFactory=void 0,this.container=void 0,this.shape=void 0,this.animate=void 0,this.geometry=void 0,this.labelShape=[],this.model=void 0,this.data=void 0,this.offscreenGroup=void 0,this.statesStyle=void 0,r.prototype.destroy.call(this)},e.prototype.changeVisible=function(t){r.prototype.changeVisible.call(this,t),t?(this.shape&&this.shape.show(),this.labelShape&&this.labelShape.forEach(function(i){i.show()})):(this.shape&&this.shape.hide(),this.labelShape&&this.labelShape.forEach(function(i){i.hide()}))},e.prototype.setState=function(t,i){var a=this,n=a.states,o=a.shapeFactory,s=a.model,l=a.shape,f=a.shapeType,u=n.indexOf(t);if(i){if(u>-1)return;n.push(t),(t==="active"||t==="selected")&&l?.toFront()}else{if(u===-1)return;if(n.splice(u,1),t==="active"||t==="selected"){var h=this.geometry,c=h.sortZIndex,p=h.zIndexReversed,v=p?this.geometry.elements.length-this.elementIndex:this.elementIndex;c?l.setZIndex(v):l.set("zIndex",v)}}var m=o.drawShape(f,s,this.getOffscreenGroup());n.length?this.syncShapeStyle(l,m,n,null):this.syncShapeStyle(l,m,["reset"],null),m.remove(!0);var g={state:t,stateStatus:i,element:this,target:this.container};this.container.emit("statechange",g),jn(this.shape,"statechange",g)},e.prototype.clearStates=function(){var t=this,i=this.states;M(i,function(a){t.setState(a,!1)}),this.states=[]},e.prototype.hasState=function(t){return this.states.includes(t)},e.prototype.getStates=function(){return this.states},e.prototype.getData=function(){return this.data},e.prototype.getModel=function(){return this.model},e.prototype.getBBox=function(){var t=this,i=t.shape,a=t.labelShape,n={x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0};return i&&(n=i.getCanvasBBox()),a&&a.forEach(function(o){var s=o.getCanvasBBox();n.x=Math.min(s.x,n.x),n.y=Math.min(s.y,n.y),n.minX=Math.min(s.minX,n.minX),n.minY=Math.min(s.minY,n.minY),n.maxX=Math.max(s.maxX,n.maxX),n.maxY=Math.max(s.maxY,n.maxY)}),n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n},e.prototype.getStatesStyle=function(){if(!this.statesStyle){var t=this,i=t.shapeType,a=t.geometry,n=t.shapeFactory,o=a.stateOption,s=n.defaultShapeType,l=n.theme[i]||n.theme[s];this.statesStyle=O({},l,o)}return this.statesStyle},e.prototype.getStateStyle=function(t,i){var a=this.getStatesStyle(),n=b(a,[t,"style"],{}),o=n[i]||n;return D(o)?o(this):o},e.prototype.getAnimateCfg=function(t){var i=this,a=this.animate;if(a){var n=a[t];return n&&d(d({},n),{callback:function(){var o;D(n.callback)&&n.callback(),(o=i.geometry)===null||o===void 0||o.emit(Ge.AFTER_DRAW_ANIMATE)}})}return null},e.prototype.drawShape=function(t,i){var a;i===void 0&&(i=!1);var n=this,o=n.shapeFactory,s=n.container,l=n.shapeType;if(this.shape=o.drawShape(l,t,s),this.shape){this.setShapeInfo(this.shape,t);var f=this.shape.cfg.name;f?G(f)&&(this.shape.cfg.name=["element",f]):this.shape.cfg.name=["element",this.shapeFactory.geometryType];var u=i?"enter":"appear",h=this.getAnimateCfg(u);h&&((a=this.geometry)===null||a===void 0||a.emit(Ge.BEFORE_DRAW_ANIMATE),_r(this.shape,h,{coordinate:o.coordinate,toAttrs:d({},this.shape.attr())}))}},e.prototype.getOffscreenGroup=function(){if(!this.offscreenGroup){var t=this.container.getGroupBase();this.offscreenGroup=new t({})}return this.offscreenGroup},e.prototype.setShapeInfo=function(t,i){var a=this;if(t.cfg.origin=i,t.cfg.element=this,t.isGroup()){var n=t.get("children");n.forEach(function(o){a.setShapeInfo(o,i)})}},e.prototype.syncShapeStyle=function(t,i,a,n,o){var s=this,l;if(a===void 0&&(a=[]),o===void 0&&(o=0),!(!t||!i)){var f=t.get("clipShape"),u=i.get("clipShape");if(this.syncShapeStyle(f,u,a,n),t.isGroup())for(var h=t.get("children"),c=i.get("children"),p=0;p<h.length;p++)this.syncShapeStyle(h[p],c[p],a,n,o+p);else{if(!Gt(a)&&!ot(a,["reset"])){var v=t.get("name");B(v)&&(v=v[1]),M(a,function(g){if(i.get("name")!==qa){var y=s.getStateStyle(g,v||o);i.attr(y)}})}var m=Vs(t,i);this.animate?n?((l=this.geometry)===null||l===void 0||l.emit(Ge.BEFORE_DRAW_ANIMATE),_r(t,n,{coordinate:this.shapeFactory.coordinate,toAttrs:m,shapeModel:this.model})):Gt(a)?t.attr(m):(t.stopAnimate(),t.animate(m,{duration:300})):t.attr(m)}}},e.prototype.getShapeType=function(t){var i=b(t,"shape");return B(i)?i[0]:i},e}(ha),Mo=bE;var $g={},Kg={};function Vh(r){return $g[r.toLowerCase()]}function Ua(r,e){$g[r.toLowerCase()]=e}function zh(r){return Kg[r.toLowerCase()]}function ae(r,e){Kg[r.toLowerCase()]=e}var TE={coordinate:null,defaultShapeType:null,theme:null,getShapePoints:function(r,e){var t=this.getShape(r);return t.getPoints?t.getPoints(e):this.getDefaultPoints(e)},getShape:function(r){var e=this[r]||this[this.defaultShapeType];return e.coordinate=this.coordinate,e},getDefaultPoints:function(){return[]},getDefaultStyle:function(r){return b(r,[this.defaultShapeType,"default","style"],{})},getMarker:function(r,e){var t=this.getShape(r);if(!t.getMarker){var i=this.defaultShapeType;t=this.getShape(i)}var a=this.theme,n=b(a,[r,"default"],{}),o=t.getMarker(e);return O({},n,o)},drawShape:function(r,e,t){var i=this.getShape(r);return i.draw(e,t)}},EE={coordinate:null,parsePath:function(r){var e=this.coordinate,t=Ca(r);return e.isPolar?t=mg(e,t):t=vg(e,t),t},parsePoint:function(r){var e=this.coordinate;return e.convert(r)},parsePoints:function(r){var e=this.coordinate;return r.map(function(t){return e.convert(t)})},draw:function(r,e){}},Xh={};function Kt(r,e){var t=ue(r),i=d(d(d({},TE),e),{geometryType:r});return Xh[t]=i,i}function q(r,e,t){var i=ue(r),a=Xh[i],n=d(d({},EE),t);return a[e]=n,n}function al(r){var e=ue(r);return Xh[e]}function Jg(r,e,t){var i,a;if(t===void 0&&(t={}),!e)return[r];var n=fa(r,e),o=[];if(e.length===1&&t[e[0]]){var s=t[e[0]];try{for(var l=j(s),f=l.next();!f.done;f=l.next()){var u=f.value,h=n["_".concat(u)];h&&o.push(h)}}catch(v){i={error:v}}finally{try{f&&!f.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}}else for(var c in n)if(n.hasOwnProperty(c)){var p=n[c];o.push(p)}return o}function nl(r,e){return gr(["color","shape","size","x","y","isInCircle","data","style","defaultStyle","points","mappingData"],function(t){return!ot(r[t],e[t])})}function ja(r){return B(r)?r:r.split("*")}function ol(r,e){for(var t=[],i=[],a=[],n=new Map,o=0;o<e.length;o++){var s=e[o];r[s]?i.push(s):t.push(s),n.set(s,!0)}return Object.keys(r).forEach(function(l){n.has(l)||a.push(l)}),{added:t,updated:i,removed:a}}var LE=function(r){S(e,r);function e(t){var i=r.call(this,t)||this;i.type="base",i.attributes={},i.elements=[],i.elementsMap={},i.animateOption=!0,i.attributeOption={},i.lastElementsMap={},i.generatePoints=!1,i.beforeMappingData=null,i.adjusts={},i.idFields=[],i.hasSorted=!1,i.isCoordinateChanged=!1;var a=t.container,n=t.labelsContainer,o=t.coordinate,s=t.data,l=t.sortable,f=l===void 0?!1:l,u=t.visible,h=u===void 0?!0:u,c=t.theme,p=t.scales,v=p===void 0?{}:p,m=t.scaleDefs,g=m===void 0?{}:m,y=t.intervalPadding,w=t.dodgePadding,x=t.maxColumnWidth,C=t.minColumnWidth,A=t.columnWidthRatio,T=t.roseWidthRatio,E=t.multiplePieWidthRatio,k=t.zIndexReversed,P=t.sortZIndex,L=t.useDeferredLabel;return i.container=a,i.labelsContainer=n,i.coordinate=o,i.data=s,i.sortable=f,i.visible=h,i.userTheme=c,i.scales=v,i.scaleDefs=g,i.intervalPadding=y,i.dodgePadding=w,i.maxColumnWidth=x,i.minColumnWidth=C,i.columnWidthRatio=A,i.roseWidthRatio=T,i.multiplePieWidthRatio=E,i.zIndexReversed=k,i.sortZIndex=P,i.useDeferredLabel=L?typeof L=="number"?L:1/0:null,i}return e.prototype.position=function(t){var i=t;qt(t)||(i={fields:ja(t)});var a=b(i,"fields");return a.length===1&&(a.unshift("1"),kt(i,"fields",a)),kt(this.attributeOption,"position",i),this},e.prototype.color=function(t,i){return this.createAttrOption("color",t,i),this},e.prototype.shape=function(t,i){return this.createAttrOption("shape",t,i),this},e.prototype.size=function(t,i){return this.createAttrOption("size",t,i),this},e.prototype.adjust=function(t){var i=t;return(G(t)||qt(t))&&(i=[t]),M(i,function(a,n){K(a)||(i[n]={type:a})}),this.adjustOption=i,this},e.prototype.style=function(t,i){if(G(t)){var a=ja(t);this.styleOption={fields:a,callback:i}}else{var n=t,a=n.fields,o=n.callback,s=n.cfg;a||o||s?this.styleOption=t:this.styleOption={cfg:t}}return this},e.prototype.tooltip=function(t,i){if(G(t)){var a=ja(t);this.tooltipOption={fields:a,callback:i}}else this.tooltipOption=t;return this},e.prototype.animate=function(t){return this.animateOption=t,this},e.prototype.label=function(t,i,a){if(G(t)){var n={},o=ja(t);n.fields=o,D(i)?n.callback=i:qt(i)&&(n.cfg=i),a&&(n.cfg=a),this.labelOption=n}else this.labelOption=t;return this},e.prototype.state=function(t){return this.stateOption=t,this},e.prototype.customInfo=function(t){return this.customOption=t,this},e.prototype.init=function(t){t===void 0&&(t={}),this.setCfg(t),this.initAttributes(),this.processData(this.data),this.adjustScale()},e.prototype.update=function(t){t===void 0&&(t={});var i=t.data,a=t.isDataChanged,n=t.isCoordinateChanged,o=this,s=o.attributeOption,l=o.lastAttributeOption;ot(s,l)?i&&(a||!ot(i,this.data))?(this.setCfg(t),this.initAttributes(),this.processData(i)):this.setCfg(t):this.init(t),this.adjustScale(),this.isCoordinateChanged=n},e.prototype.paint=function(t){var i=this;t===void 0&&(t=!1),this.animateOption&&(this.animateOption=O({},il(this.type,this.coordinate),this.animateOption)),this.defaultSize=void 0,this.elementsMap={},this.elements=[];var a=this.getOffscreenGroup();a.clear();var n=this.beforeMappingData,o=this.beforeMapping(n);this.dataArray=new Array(o.length);for(var s=0;s<o.length;s++){var l=o[s];this.dataArray[s]=this.mapping(l)}if(this.updateElements(this.dataArray,t),this.lastElementsMap=this.elementsMap,this.canDoGroupAnimation(t)){var f=this.container,u=this.type,h=this.coordinate,c=b(this.animateOption,"appear"),p=this.getYScale(),v=h.convert({x:0,y:p.scale(this.getYMinValue())});Qg(f,c,u,h,v)}if(this.labelOption){var m=this.useDeferredLabel,g=function(){return i.renderLabels(Ft(i.dataArray),t)}.bind(this);if(typeof m=="number"){var y=typeof m=="number"&&m!==1/0?m:0;if(!window.requestIdleCallback)setTimeout(g,y);else{var w=y&&y!==1/0?{timeout:y}:void 0;window.requestIdleCallback(g,w)}}else g()}this.lastAttributeOption=d({},this.attributeOption),this.visible===!1&&this.changeVisible(!1)},e.prototype.clear=function(){var t=this,i=t.container,a=t.geometryLabel,n=t.offscreenGroup;i&&i.clear(),a&&a.clear(),n&&n.clear(),this.scaleDefs=void 0,this.attributes={},this.scales={},this.elementsMap={},this.lastElementsMap={},this.elements=[],this.adjusts={},this.dataArray=null,this.beforeMappingData=null,this.lastAttributeOption=void 0,this.defaultSize=void 0,this.idFields=[],this.groupScales=void 0,this.hasSorted=!1,this.isCoordinateChanged=!1},e.prototype.destroy=function(){this.clear();var t=this.container;t.remove(!0),this.offscreenGroup&&(this.offscreenGroup.remove(!0),this.offscreenGroup=null),this.geometryLabel&&(this.geometryLabel.destroy(),this.geometryLabel=null),this.theme=void 0,this.shapeFactory=void 0,r.prototype.destroy.call(this)},e.prototype.getGroupScales=function(){return this.groupScales},e.prototype.getAttribute=function(t){return this.attributes[t]},e.prototype.getXScale=function(){return this.getAttribute("position").scales[0]},e.prototype.getYScale=function(){return this.getAttribute("position").scales[1]},e.prototype.getGroupAttributes=function(){var t=[];return M(this.attributes,function(i){xr.includes(i.type)&&t.push(i)}),t},e.prototype.getDefaultValue=function(t){var i,a=this.getAttribute(t);return a&&Gt(a.scales)&&(i=a.values[0]),i},e.prototype.getAttributeValues=function(t,i){for(var a=[],n=t.scales,o=0,s=n.length;o<s;o++){var l=n[o],f=l.field;l.isIdentity?a.push(l.values):a.push(i[f])}return t.mapping.apply(t,U([],_(a),!1))},e.prototype.getAdjust=function(t){return this.adjusts[t]},e.prototype.getCoordinate=function(){return this.coordinate},e.prototype.getData=function(){return this.data},e.prototype.getShapeMarker=function(t,i){var a=this.getShapeFactory();return a.getMarker(t,i)},e.prototype.getElementsBy=function(t){return this.elements.filter(function(i){return t(i)})},e.prototype.getElements=function(){return this.elements},e.prototype.getElementId=function(t){t=B(t)?t[0]:t;var i=t[rt];if(this.idFields.length){for(var a=i[this.idFields[0]],n=1;n<this.idFields.length;n++)a+="-"+i[this.idFields[n]];return a}var o=this.type,s=this.getXScale(),l=this.getYScale(),f=s.field||"x",u=l.field||"y",h=i[u],c;s.type==="identity"?c=s.values[0]:c=i[f];var p;o==="interval"||o==="schema"?p="".concat(c):o==="line"||o==="area"||o==="path"?p=o:p="".concat(c,"-").concat(h);for(var v=this.groupScales,n=0,m=v.length;n<m;n++){var g=v[n],y=g.field;p="".concat(p,"-").concat(i[y])}var w=this.getAdjust("dodge");if(w){var x=w.dodgeBy;x&&(p="".concat(p,"-").concat(i[x]))}return this.getAdjust("jitter")&&(p="".concat(p,"-").concat(t.x,"-").concat(t.y)),p},e.prototype.getScaleFields=function(){var t=[],i=new Map,a=this,n=a.attributeOption,o=a.labelOption,s=a.tooltipOption;for(var l in n)if(n.hasOwnProperty(l)){var f=n[l];f.fields?or(f.fields,t,i):f.values&&or(f.values,t,i)}return o&&o.fields&&or(o.fields,t,i),K(s)&&s.fields&&or(s.fields,t,i),t},e.prototype.changeVisible=function(t){r.prototype.changeVisible.call(this,t);for(var i=this.elements,a=0,n=i.length;a<n;a++){var o=i[a];o.changeVisible(t)}t?(this.container&&this.container.show(),this.labelsContainer&&this.labelsContainer.show()):(this.container&&this.container.hide(),this.labelsContainer&&this.labelsContainer.hide())},e.prototype.getFields=function(){var t=new Map,i=[];return Object.values(this.attributeOption).forEach(function(a){var n=a?.fields||[];n.forEach(function(o){t.has(o)||i.push(o),t.set(o,!0)})},[]),i},e.prototype.getGroupFields=function(){for(var t=[],i=new Map,a=0,n=xr.length;a<n;a++){var o=xr[a],s=this.attributeOption[o];s&&s.fields&&or(s.fields,t,i)}return t},e.prototype.getXYFields=function(){var t=_(this.attributeOption.position.fields,2),i=t[0],a=t[1];return[i,a]},e.prototype.getXField=function(){return b(this.getXYFields(),[0])},e.prototype.getYField=function(){return b(this.getXYFields(),[1])},e.prototype.getShapes=function(){return this.elements.map(function(t){return t.shape})},e.prototype.getOffscreenGroup=function(){if(!this.offscreenGroup){var t=this.container.getGroupBase();this.offscreenGroup=new t({})}return this.offscreenGroup},e.prototype.sort=function(t){if(!this.hasSorted)for(var i=this.getXScale(),a=i.field,n=0;n<t.length;n++){var o=t[n];o.sort(function(s,l){return i.translate(s[rt][a])-i.translate(l[rt][a])})}this.hasSorted=!0},e.prototype.adjustScale=function(){var t=this.getYScale();t&&this.getAdjust("stack")&&this.updateStackRange(t,this.beforeMappingData)},e.prototype.getShapeFactory=function(){var t=this.shapeType;if(al(t))return this.shapeFactory||(this.shapeFactory=zt(al(t))),this.shapeFactory.coordinate=this.coordinate,this.shapeFactory.theme=this.theme.geometries[t]||{},this.shapeFactory},e.prototype.createShapePointsCfg=function(t){var i=this.getXScale(),a=this.getYScale(),n=this.normalizeValues(t[i.field],i),o;return a?o=this.normalizeValues(t[a.field],a):o=t.y?t.y:.1,{x:n,y:o,y0:a?a.scale(this.getYMinValue()):void 0}},e.prototype.createElement=function(t,i,a){a===void 0&&(a=!1);var n=this.container,o=this.getDrawCfg(t),s=this.getShapeFactory(),l=new Mo({shapeFactory:s,container:n,offscreenGroup:this.getOffscreenGroup(),elementIndex:i});return l.animate=this.animateOption,l.geometry=this,l.draw(o,a),l},e.prototype.getDrawCfg=function(t){var i=t[rt],a={mappingData:t,data:i,x:t.x,y:t.y,color:t.color,size:t.size,isInCircle:this.coordinate.isPolar,customInfo:this.customOption},n=t.shape;!n&&this.getShapeFactory()&&(n=this.getShapeFactory().defaultShapeType),a.shape=n;var o=this.theme.geometries[this.shapeType];a.defaultStyle=b(o,[n,"default"],{}).style,!a.defaultStyle&&this.getShapeFactory()&&(a.defaultStyle=this.getShapeFactory().getDefaultStyle(o));var s=this.styleOption;return s&&(a.style=this.getStyleCfg(s,i)),this.generatePoints&&(a.points=t.points,a.nextPoints=t.nextPoints),a},e.prototype.updateElements=function(t,i){var a,n,o,s,l,f;i===void 0&&(i=!1);for(var u=new Map,h=[],c=new Map,p=0,v=0;v<t.length;v++)for(var m=t[v],g=0;g<m.length;g++){var y=m[g],w=this.getElementId(y),x=u.has(w)?"".concat(w,"-").concat(v,"-").concat(g):w;h.push(x),u.set(x,y),c.set(x,p),p++}this.elements=new Array(p);var C=ol(this.lastElementsMap,h),A=C.added,T=C.updated,E=C.removed;try{for(var k=j(A),P=k.next();!P.done;P=k.next()){var w=P.value,y=u.get(w),v=c.get(w),L=this.createElement(y,v,i);this.elements[v]=L,this.elementsMap[w]=L,L.shape&&L.shape.set("zIndex",this.zIndexReversed?this.elements.length-v:v)}}catch(ct){a={error:ct}}finally{try{P&&!P.done&&(n=k.return)&&n.call(k)}finally{if(a)throw a.error}}try{for(var R=j(T),N=R.next();!N.done;N=R.next()){var w=N.value,L=this.lastElementsMap[w],y=u.get(w),H=this.getDrawCfg(y),V=L.getModel(),v=c.get(w);(this.isCoordinateChanged||nl(H,V))&&(L.animate=this.animateOption,L.update(H)),this.elements[v]=L,this.elementsMap[w]=L,L.shape&&L.shape.set("zIndex",this.zIndexReversed?this.elements.length-v:v)}}catch(ct){o={error:ct}}finally{try{N&&!N.done&&(s=R.return)&&s.call(R)}finally{if(o)throw o.error}}this.container&&this.container.sort();try{for(var Q=j(E),mt=Q.next();!mt.done;mt=Q.next()){var w=mt.value,L=this.lastElementsMap[w];L.animate=this.animateOption,L.destroy()}}catch(ct){l={error:ct}}finally{try{mt&&!mt.done&&(f=Q.return)&&f.call(Q)}finally{if(l)throw l.error}}},e.prototype.getLabelType=function(){var t=this,i=t.labelOption,a=t.coordinate,n=t.type,o=a.type,s=a.isTransposed,l=b(i,["cfg","type"]);return l||(o==="polar"?l=s?"pie":"polar":o==="theta"?l="pie":n==="interval"||n==="polygon"?l="interval":l="base"),l},e.prototype.getYMinValue=function(){var t=this.getYScale(),i=t.min,a=t.max,n;return i>=0?n=i:a<=0?n=a:n=0,n},e.prototype.createAttrOption=function(t,i,a){if(I(i)||K(i))K(i)&&ot(Object.keys(i),["values"])?kt(this.attributeOption,t,{fields:i.values}):kt(this.attributeOption,t,i);else{var n={};z(i)?n.values=[i]:n.fields=ja(i),a&&(D(a)?n.callback=a:n.values=a),kt(this.attributeOption,t,n)}},e.prototype.initAttributes=function(){var t=this,i=this,a=i.attributes,n=i.attributeOption,o=i.theme,s=i.shapeType;this.groupScales=[];var l={},f=function(c){if(n.hasOwnProperty(c)){var p=n[c];if(!p)return{value:void 0};var v=d({},p),m=v.callback,g=v.values,y=v.fields,w=y===void 0?[]:y,x=w.map(function(A){var T=t.scales[A];if(!l[A]&&xr.includes(c)){var E=zs(T,b(t.scaleDefs,A),c,t.type);E==="cat"&&(t.groupScales.push(T),l[A]=!0)}return T});v.scales=x,c!=="position"&&x.length===1&&x[0].type==="identity"?v.values=x[0].values:!m&&!g&&(c==="size"?v.values=o.sizes:c==="shape"?v.values=o.shapes[s]||[]:c==="color"&&(x.length?v.values=x[0].values.length<=10?o.colors10:o.colors20:v.values=o.colors10));var C=Un(c);a[c]=new C(v)}};for(var u in n){var h=f(u);if(typeof h=="object")return h.value}},e.prototype.processData=function(t){var i,a;this.hasSorted=!1;for(var n=this.getAttribute("position").scales,o=n.filter(function(E){return E.isCategory}),s=this.groupData(t),l=[],f=0,u=s.length;f<u;f++){for(var h=s[f],c=[],p=0,v=h.length;p<v;p++){var m=h[p],g={};for(var y in m)g[y]=m[y];g[rt]=m;try{for(var w=(i=void 0,j(o)),x=w.next();!x.done;x=w.next()){var C=x.value,A=C.field;g[A]=C.translate(g[A])}}catch(E){i={error:E}}finally{try{x&&!x.done&&(a=w.return)&&a.call(w)}finally{if(i)throw i.error}}c.push(g)}l.push(c)}var T=this.adjustData(l);return this.beforeMappingData=T,T},e.prototype.adjustData=function(t){var i=this.adjustOption,a=this,n=a.intervalPadding,o=a.dodgePadding,s=a.theme,l=this.maxColumnWidth||s.maxColumnWidth,f=this.minColumnWidth||s.minColumnWidth,u=this.columnWidthRatio||s.columnWidthRatio,h=t;if(i){var c=this.getXScale(),p=this.getYScale(),v=c.field,m=p?p.field:null,g=sr(this.coordinate),y=c.values.length,w=this.getAttribute("size"),x=void 0;w&&(x=w.values[0]);for(var C=0,A=i.length;C<A;C++){var T=i[C],E=d({xField:v,yField:m,intervalPadding:n,dodgePadding:o,xDimensionLength:g,groupNum:y,defaultSize:x,maxColumnWidth:l,minColumnWidth:f,columnWidthRatio:u},T),k=T.type;if(k==="dodge"){var P=[];if(c.isCategory||c.type==="identity")P.push("x");else if(!p)P.push("y");else throw new Error("dodge is not support linear attribute, please use category attribute!");E.adjustNames=P,E.dodgeRatio=u}else if(k==="stack"){var L=this.coordinate;if(!p){E.height=L.getHeight();var R=this.getDefaultValue("size")||3;E.size=R}!L.isTransposed&&I(E.reverseOrder)&&(E.reverseOrder=!0)}var N=Vn(k);E.dimValuesMap={},c&&c.values&&(E.dimValuesMap[c.field]=c.values.map(function(V){return c.translate(V)}));var H=new N(E);h=H.process(h),this.adjusts[k]=H}}return h},e.prototype.groupData=function(t){for(var i=this.getGroupScales(),a=this.scaleDefs,n={},o=[],s=0;s<i.length;s++){var l=i[s],f=l.field;o.push(f),b(a,[f,"values"])&&(n[f]=a[f].values)}return Jg(t,o,n)},e.prototype.updateStackRange=function(t,i){for(var a=Ft(i),n=t.field,o=t.min,s=t.max,l=0;l<a.length;l++){var f=a[l],u=Math.min.apply(null,f[n]),h=Math.max.apply(null,f[n]);u<o&&(o=u),h>s&&(s=h)}var c=this.scaleDefs,p={};o<t.min&&!b(c,[n,"min"])&&(p.min=o),s>t.max&&!b(c,[n,"max"])&&(p.max=s),t.change(p)},e.prototype.beforeMapping=function(t){var i=t;if(this.sortable&&this.sort(i),this.generatePoints)for(var a=0,n=i.length;a<n;a++){var o=i[a];this.generateShapePoints(o);var s=i[a+1];s&&(this.generateShapePoints(s),o[0].nextPoints=s[0].points)}return i},e.prototype.generateShapePoints=function(t){for(var i=this.getShapeFactory(),a=this.getAttribute("shape"),n=0;n<t.length;n++){var o=t[n],s=this.createShapePointsCfg(o),l=a?this.getAttributeValues(a,o):null,f=i.getShapePoints(l,s);o.points=f}},e.prototype.normalizeValues=function(t,i){var a=[];if(B(t))for(var n=0;n<t.length;n++){var o=t[n];a.push(i.scale(o))}else a=i.scale(t);return a},e.prototype.mapping=function(t){for(var i=this.attributes,a=[],n=0;n<t.length;n++){var o=t[n],s={_origin:o[rt],points:o.points,nextPoints:o.nextPoints};for(var l in i)if(i.hasOwnProperty(l)){var f=i[l],u=f.names,h=this.getAttributeValues(f,o);if(u.length>1)for(var c=0;c<h.length;c+=1){var p=h[c],v=u[c];s[v]=B(p)&&p.length===1?p[0]:p}else s[u[0]]=h.length===1?h[0]:h}this.convertPoint(s),a.push(s)}return a},e.prototype.convertPoint=function(t){var i=t.x,a=t.y,n,o,s,l=this.coordinate;if(B(i)&&B(a)){n=[],o=[];for(var f=0,u=0,h=i.length,c=a.length;f<h&&u<c;f+=1,u+=1)s=l.convert({x:i[f],y:a[u]}),n.push(s.x),o.push(s.y)}else if(B(a)){o=[];for(var p=0;p<a.length;p++){var v=a[p];s=l.convert({x:i,y:v}),n&&n!==s.x?(B(n)||(n=[n]),n.push(s.x)):n=s.x,o.push(s.y)}}else if(B(i)){n=[];for(var p=0;p<i.length;p++){var m=i[p];s=l.convert({x:m,y:a}),o&&o!==s.y?(B(o)||(o=[o]),o.push(s.y)):o=s.y,n.push(s.x)}}else{var g=l.convert({x:i,y:a});n=g.x,o=g.y}t.x=n,t.y=o},e.prototype.getStyleCfg=function(t,i){var a=t.fields,n=a===void 0?[]:a,o=t.callback,s=t.cfg;if(s)return s;var l=n.map(function(f){return i[f]});return o.apply(void 0,U([],_(l),!1))},e.prototype.setCfg=function(t){var i=this,a=t.coordinate,n=t.data,o=t.theme,s=t.scaleDefs;a&&(this.coordinate=a),n&&(this.data=n),s&&(this.scaleDefs=s,this.idFields=[],M(s,function(l,f){l&&l.key&&i.idFields.push(f)})),o&&(this.theme=this.userTheme?O({},o,this.userTheme):o)},e.prototype.renderLabels=function(t,i){return i===void 0&&(i=!1),vr(this,void 0,void 0,function(){var a,n,o,s,l,f,u,h,c,p,v,m,g=this;return mr(this,function(y){switch(y.label){case 0:return a=this.geometryLabel,this.emit(Ge.BEFORE_RENDER_LABEL),a||(n=this.getLabelType(),o=Vh(n),a=new o(this),this.geometryLabel=a),[4,a.render(t,i)];case 1:y.sent(),s=a.labelsRenderer.shapesMap,l=new Map,M(s,function(w,x){for(var C=w.getChildren()||[],A=0;A<C.length;A++){var T=C[A],E=g.elementsMap[T.get("elementId")||x.split(" ")[0]];if(E){T.cfg.name=["element","label"],T.cfg.element=E;var k=l.get(E)||new Set;k.add(w),l.set(E,k)}}});try{for(f=j(l.entries()),u=f.next();!u.done;u=f.next())h=_(u.value,2),c=h[0],p=h[1],c.labelShape=U([],_(p),!1)}catch(w){v={error:w}}finally{try{u&&!u.done&&(m=f.return)&&m.call(f)}finally{if(v)throw v.error}}return this.emit(Ge.AFTER_RENDER_LABEL),[2]}})})},e.prototype.canDoGroupAnimation=function(t){return!t&&this.animateOption&&(b(this.animateOption,"appear")===void 0||b(this.animateOption,"appear")&&b(this.animateOption,["appear","animation"])===void 0)},e}(ha),Jt=LE;var Wh=$.transform;function Rr(r,e,t){var i=Wh(r.getMatrix(),[["t",e,t]]);r.setMatrix(i)}function IE(r,e){var t=r.attr(),i=t.x,a=t.y,n=Wh(r.getMatrix(),[["t",-i,-a],["r",e],["t",i,a]]);return n}function So(r,e){var t=IE(r,e);r.setMatrix(t)}function Xe(r){return r.find(function(e){return e.get("type")==="text"})}function sl(r,e,t){t===void 0&&(t=[0,0,0,0]);var i=r&&r.getChildren()[0];if(i){var a=i.clone();e?.rotate&&So(a,-e.rotate);var n=a.getCanvasBBox(),o=n.x,s=n.y,l=n.width,f=n.height;a.destroy();var u=t;return I(u)?u=[2,2,2,2]:z(u)&&(u=new Array(4).fill(u)),{x:o-u[3],y:s-u[0],width:l+u[1]+u[3],height:f+u[0]+u[2],rotation:e?.rotate||0}}return{x:0,y:0,width:0,height:0,rotation:0}}function PE(r,e,t){t===void 0&&(t=0);var i=Math.max(0,Math.min(r.x+r.width+t,e.x+e.width+t)-Math.max(r.x-t,e.x-t)),a=Math.max(0,Math.min(r.y+r.height+t,e.y+e.height+t)-Math.max(r.y-t,e.y-t));return i*a}function ty(r,e){var t=r.getBBox();return gr(e,function(i){var a=i.getBBox();return PE(t,a,2)>0})}function qh(r,e,t){var i=t.data,a=t.origin,n=t.animateCfg,o=t.coordinate,s=b(n,"update");r.set("data",i),r.set("origin",a),r.set("animateCfg",n),r.set("coordinate",o),r.set("visible",e.get("visible")),(r.getChildren()||[]).forEach(function(l,f){var u=e.getChildByIndex(f);if(!u)r.removeChild(l),l.remove(!0);else{l.set("data",i),l.set("origin",a),l.set("animateCfg",n),l.set("coordinate",o);var h=Vs(l,u);s?_r(l,s,{toAttrs:h,coordinate:o}):l.attr(h),u.isGroup()&&qh(l,u,t)}}),M(e.getChildren(),function(l,f){B(r.getChildren())&&f>=r.getCount()&&(l.destroyed||r.add(l))})}var BE=function(){function r(e){this.shapesMap={};var t=e.layout,i=e.container;this.layout=t,this.container=i}return r.prototype.render=function(e,t,i){return i===void 0&&(i=!1),vr(this,void 0,void 0,function(){var a,n,o,s,l,f,u,h,c=this;return mr(this,function(p){switch(p.label){case 0:if(a={},n=this.createOffscreenGroup(),!e.length)return[3,2];try{for(o=j(e),s=o.next();!s.done;s=o.next())l=s.value,l&&(a[l.id]=this.renderLabel(l,n))}catch(v){u={error:v}}finally{try{s&&!s.done&&(h=o.return)&&h.call(o)}finally{if(u)throw u.error}}return[4,this.doLayout(e,t,a)];case 1:p.sent(),this.renderLabelLine(e,a),this.renderLabelBackground(e,a),this.adjustLabel(e,a),p.label=2;case 2:return f=this.shapesMap,M(a,function(v,m){if(v.destroyed)delete a[m];else{if(f[m]){var g=v.get("data"),y=v.get("origin"),w=v.get("coordinate"),x=v.get("animateCfg"),C=f[m];qh(C,a[m],{data:g,origin:y,animateCfg:x,coordinate:w}),a[m]=C}else{if(c.container.destroyed)return;c.container.add(v);var A=b(v.get("animateCfg"),i?"enter":"appear");A&&_r(v,A,{toAttrs:d({},v.attr()),coordinate:v.get("coordinate")})}delete f[m]}}),M(f,function(v){var m=b(v.get("animateCfg"),"leave");m?_r(v,m,{toAttrs:null,coordinate:v.get("coordinate")}):v.remove(!0)}),this.shapesMap=a,n.destroy(),[2]}})})},r.prototype.clear=function(){this.container.clear(),this.shapesMap={}},r.prototype.destroy=function(){this.container.destroy(),this.shapesMap=null},r.prototype.renderLabel=function(e,t){var i=e.id,a=e.elementId,n=e.data,o=e.mappingData,s=e.coordinate,l=e.animate,f=e.content,u=e.capture,h={id:i,elementId:a,capture:u,data:n,origin:d(d({},o),{data:o[rt]}),coordinate:s},c=t.addGroup(d({name:"label",animateCfg:this.animate===!1||l===null||l===!1?!1:O({},this.animate,l)},h)),p;if(f.isGroup&&f.isGroup()||f.isShape&&f.isShape()){var v=f.getCanvasBBox(),m=v.width,g=v.height,y=b(e,"textAlign","left"),w=e.x,x=e.y-g/2;y==="center"?w=w-m/2:(y==="right"||y==="end")&&(w=w-m),Rr(f,w,x),p=f,c.add(f)}else{var C=b(e,["style","fill"]);p=c.addShape("text",d({attrs:d(d({x:e.x,y:e.y,textAlign:e.textAlign,textBaseline:b(e,"textBaseline","middle"),text:e.content},e.style),{fill:Cf(C)?e.color:C})},h))}return e.rotate&&So(p,e.rotate),c},r.prototype.doLayout=function(e,t,i){return vr(this,void 0,void 0,function(){var a,n=this;return mr(this,function(o){switch(o.label){case 0:return this.layout?(a=B(this.layout)?this.layout:[this.layout],[4,Promise.all(a.map(function(s){var l=zh(b(s,"type",""));if(l){var f=[],u=[];return M(i,function(h,c){f.push(h),u.push(t[h.get("elementId")])}),l(e,f,u,n.region,s.cfg)}}))]):[3,2];case 1:o.sent(),o.label=2;case 2:return[2]}})})},r.prototype.renderLabelLine=function(e,t){M(e,function(i){var a=b(i,"coordinate");if(!(!i||!a)){var n=a.getCenter(),o=a.getRadius();if(i.labelLine){var s=b(i,"labelLine",{}),l=i.id,f=s.path;if(!f){var u=dt(n.x,n.y,o,i.angle);f=[["M",u.x,u.y],["L",i.x,i.y]]}var h=t[l];h.destroyed||h.addShape("path",{capture:!1,attrs:d({path:f,stroke:i.color?i.color:b(i,["style","fill"],"#000"),fill:null},s.style),id:l,origin:i.mappingData,data:i.data,coordinate:i.coordinate})}}})},r.prototype.renderLabelBackground=function(e,t){M(e,function(i){var a=b(i,"coordinate"),n=b(i,"background");if(!(!n||!a)){var o=i.id,s=t[o];if(!s.destroyed){var l=s.getChildren()[0];if(l){var f=sl(s,i,n.padding),u=f.rotation,h=gt(f,["rotation"]),c=s.addShape("rect",{attrs:d(d({},h),n.style||{}),id:o,origin:i.mappingData,data:i.data,coordinate:i.coordinate});if(c.setZIndex(-1),u){var p=l.getMatrix();c.setMatrix(p)}}}}})},r.prototype.createOffscreenGroup=function(){var e=this.container,t=e.getGroupBase(),i=new t({});return i},r.prototype.adjustLabel=function(e,t){M(e,function(i){if(i){var a=i.id,n=t[a];if(!n.destroyed){var o=n.findAll(function(s){return s.get("type")!=="path"});M(o,function(s){s&&(i.offsetX&&s.attr("x",s.attr("x")+i.offsetX),i.offsetY&&s.attr("y",s.attr("y")+i.offsetY))})}}})},r}(),ey=BE;function ry(r){var e=0;return M(r,function(t){e+=t}),e/r.length}var kE=function(){function r(e){this.geometry=e}return r.prototype.getLabelItems=function(e){var t=this,i=[],a=this.getLabelCfgs(e);return M(e,function(n,o){var s=a[o];if(!s||I(n.x)||I(n.y)){i.push(null);return}var l=B(s.content)?s.content:[s.content];s.content=l;var f=l.length;M(l,function(u,h){if(I(u)||u===""){i.push(null);return}var c=d(d({},s),t.getLabelPoint(s,n,h));c.textAlign||(c.textAlign=t.getLabelAlign(c,h,f)),c.offset<=0&&(c.labelLine=null),i.push(c)})}),i},r.prototype.render=function(e,t){return t===void 0&&(t=!1),vr(this,void 0,void 0,function(){var i,a,n;return mr(this,function(o){switch(o.label){case 0:return i=this.getLabelItems(e),a=this.getLabelsRenderer(),n=this.getGeometryShapes(),[4,a.render(i,n,t)];case 1:return o.sent(),[2]}})})},r.prototype.clear=function(){var e=this.labelsRenderer;e&&e.clear()},r.prototype.destroy=function(){var e=this.labelsRenderer;e&&e.destroy(),this.labelsRenderer=null},r.prototype.getCoordinate=function(){return this.geometry.coordinate},r.prototype.getDefaultLabelCfg=function(e,t){var i=this.geometry,a=i.type,n=i.theme;return a==="polygon"||a==="interval"&&t==="middle"||e<0&&!["line","point","path"].includes(a)?b(n,"innerLabels",{}):b(n,"labels",{})},r.prototype.getThemedLabelCfg=function(e){var t=this.geometry,i=this.getDefaultLabelCfg(),a=t.type,n=t.theme,o;return a==="polygon"||e.offset<0&&!["line","point","path"].includes(a)?o=O({},i,n.innerLabels,e):o=O({},i,n.labels,e),o},r.prototype.setLabelPosition=function(e,t,i,a){},r.prototype.getLabelOffset=function(e){var t=this.getCoordinate(),i=this.getOffsetVector(e);return t.isTransposed?i[0]:i[1]},r.prototype.getLabelOffsetPoint=function(e,t,i){var a=e.offset,n=this.getCoordinate(),o=n.isTransposed,s=o?"x":"y",l=o?1:-1,f={x:0,y:0};return t>0||i===1?f[s]=a*l:f[s]=a*l*-1,f},r.prototype.getLabelPoint=function(e,t,i){var a=this.getCoordinate(),n=e.content.length;function o(g,y,w){w===void 0&&(w=!1);var x=g;return B(x)&&(e.content.length===1?w?x=ry(x):x.length<=2?x=x[g.length-1]:x=ry(x):x=x[y]),x}var s={content:e.content[i],x:0,y:0,start:{x:0,y:0},color:"#fff"},l=B(t.shape)?t.shape[0]:t.shape,f=l==="funnel"||l==="pyramid";if(this.geometry.type==="polygon"){var u=tg(t.x,t.y);s.x=u[0],s.y=u[1]}else this.geometry.type==="interval"&&!f?(s.x=o(t.x,i,!0),s.y=o(t.y,i)):(s.x=o(t.x,i),s.y=o(t.y,i));if(f){var h=b(t,"nextPoints"),c=b(t,"points");if(h){var p=a.convert(c[1]),v=a.convert(h[1]);s.x=(p.x+v.x)/2,s.y=(p.y+v.y)/2}else if(l==="pyramid"){var p=a.convert(c[1]),v=a.convert(c[2]);s.x=(p.x+v.x)/2,s.y=(p.y+v.y)/2}}e.position&&this.setLabelPosition(s,t,i,e.position);var m=this.getLabelOffsetPoint(e,i,n);return s.start={x:s.x,y:s.y},s.x+=m.x,s.y+=m.y,s.color=t.color,s},r.prototype.getLabelAlign=function(e,t,i){var a="center",n=this.getCoordinate();if(n.isTransposed){var o=e.offset;o<0?a="right":o===0?a="center":a="left",i>1&&t===0&&(a==="right"?a="left":a==="left"&&(a="right"))}return a},r.prototype.getLabelId=function(e){var t=this.geometry,i=t.type,a=t.getXScale(),n=t.getYScale(),o=e[rt],s=t.getElementId(e);return i==="line"||i==="area"?s+=" ".concat(o[a.field]):i==="path"&&(s+=" ".concat(o[a.field],"-").concat(o[n.field])),s},r.prototype.getLabelsRenderer=function(){var e=this.geometry,t=e.labelsContainer,i=e.labelOption,a=e.canvasRegion,n=e.animateOption,o=this.geometry.coordinate,s=this.labelsRenderer;return s||(s=new ey({container:t,layout:b(i,["cfg","layout"],{type:this.defaultLayout})}),this.labelsRenderer=s),s.region=a,s.animate=n?il("label",o):!1,s},r.prototype.getLabelCfgs=function(e){var t=this,i=this.geometry,a=i.labelOption,n=i.scales,o=i.coordinate,s=a,l=s.fields,f=s.callback,u=s.cfg,h=l.map(function(p){return n[p]}),c=[];return M(e,function(p,v){var m=p[rt],g=t.getLabelText(m,h),y;if(f){var w=l.map(function(E){return m[E]});if(y=f.apply(void 0,U([],_(w),!1)),I(y)){c.push(null);return}}var x=d(d({id:t.getLabelId(p),elementId:t.geometry.getElementId(p),data:m,mappingData:p,coordinate:o},u),y);D(x.position)&&(x.position=x.position(m,p,v));var C=t.getLabelOffset(x.offset||0),A=t.getDefaultLabelCfg(C,x.position);x=O({},A,x),x.offset=t.getLabelOffset(x.offset||0);var T=x.content;D(T)?x.content=T(m,p,v):Je(T)&&(x.content=g[0]),c.push(x)}),c},r.prototype.getLabelText=function(e,t){var i=[];return M(t,function(a){var n=e[a.field];B(n)?n=n.map(function(o){return a.getText(o)}):n=a.getText(n),I(n)||n===""?i.push(null):i.push(n)}),i},r.prototype.getOffsetVector=function(e){e===void 0&&(e=0);var t=this.getCoordinate(),i=0;return z(e)&&(i=e),t.isTransposed?t.applyMatrix(i,0):t.applyMatrix(0,i)},r.prototype.getGeometryShapes=function(){var e=this.geometry,t={};return M(e.elementsMap,function(i,a){t[a]=i.shape}),M(e.getOffscreenGroup().getChildren(),function(i){var a=e.getElementId(i.get("origin").mappingData);t[a]=i}),t},r}(),ia=kE;function ll(r,e,t){if(!r)return t;var i;if(r.callback&&r.callback.length>1){var a=Array(r.callback.length-1).fill("");i=r.mapping.apply(r,U([e],_(a),!1)).join("")}else i=r.mapping(e).join("");return i||t}var _e={hexagon:function(r,e,t){var i=t/2*Math.sqrt(3);return[["M",r,e-t],["L",r+i,e-t/2],["L",r+i,e+t/2],["L",r,e+t],["L",r-i,e+t/2],["L",r-i,e-t/2],["Z"]]},bowtie:function(r,e,t){var i=t-1.5;return[["M",r-t,e-i],["L",r+t,e+i],["L",r+t,e-i],["L",r-t,e+i],["Z"]]},cross:function(r,e,t){return[["M",r-t,e-t],["L",r+t,e+t],["M",r+t,e-t],["L",r-t,e+t]]},tick:function(r,e,t){return[["M",r-t/2,e-t],["L",r+t/2,e-t],["M",r,e-t],["L",r,e+t],["M",r-t/2,e+t],["L",r+t/2,e+t]]},plus:function(r,e,t){return[["M",r-t,e],["L",r+t,e],["M",r,e-t],["L",r,e+t]]},hyphen:function(r,e,t){return[["M",r-t,e],["L",r+t,e]]},line:function(r,e,t){return[["M",r,e-t],["L",r,e+t]]}};var OE=["line","cross","tick","plus","hyphen"];function FE(r,e){return D(e)?e(r):O({},r,e)}function _E(r,e){var t=r.symbol;if(G(t)&&OE.indexOf(t)!==-1){var i=b(r,"style",{}),a=b(i,"lineWidth",1),n=i.stroke||i.fill||e;r.style=O({},r.style,{lineWidth:a,stroke:n,fill:null})}}function iy(r){var e=r.symbol;G(e)&&_e[e]&&(r.symbol=_e[e])}function fl(r){return r.startsWith(F.LEFT)||r.startsWith(F.RIGHT)?"vertical":"horizontal"}function Uh(r,e,t,i,a){var n=t.getScale(t.type);if(n.isCategory){var o=n.field,s=e.getAttribute("color"),l=e.getAttribute("shape"),f=r.getTheme().defaultColor,u=e.coordinate.isPolar;return n.getTicks().map(function(h,c){var p,v=h.text,m=h.value,g=v,y=n.invert(m),w=r.filterFieldData(o,[(p={},p[o]=y,p)]).length===0;M(r.views,function(E){var k;E.filterFieldData(o,[(k={},k[o]=y,k)]).length||(w=!0)});var x=ll(s,y,f),C=ll(l,y,"point"),A=e.getShapeMarker(C,{color:x,isInPolar:u}),T=a;return D(T)&&(T=T(g,c,d({name:g,value:y},O({},i,A)))),A=O({},i,A,Xt(d({},T),["style"])),_E(A,x),T&&T.style&&(A.style=FE(A.style,T.style)),iy(A),{id:y,name:g,value:y,marker:A,unchecked:w}})}return[]}function ay(r,e,t){return t.map(function(i,a){var n=e;D(n)&&(n=n(i.name,a,O({},r,i)));var o=D(i.marker)?i.marker(i.name,a,O({},r,i)):i.marker,s=O({},r,n,o);return iy(s),i.marker=s,i})}function jh(r,e){var t=b(r,["components","legend"],{});return O({},b(t,["common"],{}),O({},b(t,[e],{})))}function Zh(r){return r?!1:r==null||isNaN(r)}function ny(r){if(B(r))return Zh(r[1].y);var e=r.y;return B(e)?Zh(e[0]):Zh(e)}function aa(r,e,t){if(e===void 0&&(e=!1),t===void 0&&(t=!0),!r.length||r.length===1&&!t)return[];if(e){for(var i=[],a=0,n=r.length;a<n;a++){var o=r[a];ny(o)||i.push(o)}return[i]}for(var s=[],l=[],a=0,n=r.length;a<n;a++){var o=r[a];ny(o)?l.length&&(l.length===1&&!t||s.push(l),l=[]):l.push(o)}return l.length&&s.push(l),s}function ul(r){for(var e=[],t=0;t<r.length;t++){var i=r[t];if(i){var a=t===0?"M":"L";e.push([a,i.x,i.y])}}var n=r[0];return n&&(e.push(["L",n.x,n.y]),e.push(["z"])),e}function hl(r){for(var e=r.length/2,t=[],i=[],a=0;a<r.length;a++)a<e?t.push(r[a]):i.push(r[a]);var n=ea(t,!1),o=ea(i,!1);i.length&&n.push(["L",i[0].x,i[0].y]),o.shift();var s=n.concat(o);return t.length&&s.push(["L",t[0].x,t[0].y]),s.push(["z"]),s}function tt(r,e,t,i){i===void 0&&(i="");var a=r.style,n=a===void 0?{}:a,o=r.defaultStyle,s=r.color,l=r.size,f=d(d({},o),n);return s&&(e&&(n.stroke||(f.stroke=s)),t&&(n.fill||(f.fill=s))),i&&I(n[i])&&!I(l)&&(f[i]=l),f}function cl(r){return O({},{fill:"#CCD6EC",fillOpacity:.3},b(r,["background","style"]))}function Za(r){var e=r.x,t=B(r.y)?r.y:[r.y];return t.map(function(i,a){return{x:B(e)?e[a]:e,y:i}})}var RE={line:function(r,e,t){return[["M",r-t,e],["L",r+t,e]]},dot:function(r,e,t){return[["M",r-t,e],["L",r+t,e]]},dash:function(r,e,t){return[["M",r-t,e],["L",r+t,e]]},smooth:function(r,e,t){return[["M",r-t,e],["A",t/2,t/2,0,1,1,r,e],["A",t/2,t/2,0,1,0,r+t,e]]},hv:function(r,e,t){return[["M",r-t-1,e-2.5],["L",r,e-2.5],["L",r,e+2.5],["L",r+t+1,e+2.5]]},vh:function(r,e,t){return[["M",r-t-1,e+2.5],["L",r,e+2.5],["L",r,e-2.5],["L",r+t+1,e-2.5]]},hvh:function(r,e,t){return[["M",r-(t+1),e+2.5],["L",r-t/2,e+2.5],["L",r-t/2,e-2.5],["L",r+t/2,e-2.5],["L",r+t/2,e+2.5],["L",r+t+1,e+2.5]]},vhv:function(r,e){return[["M",r-5,e+2.5],["L",r-5,e],["L",r,e],["L",r,e-3],["L",r,e+3],["L",r+6.5,e+3]]}};function pl(r,e){var t=r.color;return{symbol:RE[e],style:{lineWidth:2,r:6,stroke:t}}}function DE(r,e,t){for(var i=r.isStack,a=r.connectNulls,n=r.isInCircle,o=r.showSinglePoint,s=tt(r,!0,!1,"lineWidth"),l=aa(r.points,a,o),f=[],u=0,h=l.length;u<h;u++){var c=l[u];f=f.concat(oy(c,n,i,e,t,s))}return s.path=f,s}function Qh(r,e,t,i,a){if(r.length===1)return[["M",r[0].x,r[0].y-a.lineWidth/2],["L",r[0].x,r[0].y],["L",r[0].x,r[0].y+a.lineWidth/2]];var n;return t?(e&&r.length&&r.push({x:r[0].x,y:r[0].y}),n=ea(r,!1,i)):(n=Pr(r,!1),e&&n.push(["Z"])),n}function NE(r,e,t,i,a,n){var o=[],s=[];M(r,function(u){var h=Za(u);o.push(h[1]),s.push(h[0])});var l=Qh(o,e,i,a,n),f=Qh(s,e,i,a,n);return t?l:l.concat(f)}function oy(r,e,t,i,a,n){if(r.length){var o=r[0];return B(o.y)?NE(r,e,t,i,a,n):Qh(r,e,i,a,n)}return[]}var kZ=Kt("line",{defaultShapeType:"line"});M(["line","dot","dash","smooth"],function(r){q("line",r,{draw:function(e,t){var i=r==="smooth",a;if(i){var n=this.coordinate,o=n.start,s=n.end;a=[[o.x,s.y],[s.x,o.y]]}var l=DE(e,i,a),f=t.addShape({type:"path",attrs:l,name:"line",capture:!i});return f},getMarker:function(e){return pl(e,r)}})});var Ci={100:"#000",95:"#0D0D0D",85:"#262626",65:"#595959",45:"#8C8C8C",25:"#BFBFBF",15:"#D9D9D9",6:"#F0F0F0"},ut={100:"#FFFFFF",95:"#F2F2F2",85:"#D9D9D9",65:"#A6A6A6",45:"#737373",25:"#404040",15:"#262626",6:"#0F0F0F"},We=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#E86452","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"],GE=["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#E86452","#F8D0CB","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"],YE=["#B8E1FF","#9AC5FF","#7DAAFF","#5B8FF9","#3D76DD","#085EC0","#0047A5","#00318A","#001D70"],HE=function(r){r===void 0&&(r={});var e=r.paletteQualitative10,t=e===void 0?We:e,i=r.paletteQualitative20,a=i===void 0?GE:i,n=r.brandColor,o=n===void 0?t[0]:n,s={backgroundColor:"#141414",brandColor:o,subColor:"rgba(255,255,255,0.05)",paletteQualitative10:t,paletteQualitative20:a,paletteSemanticRed:"#F4664A",paletteSemanticGreen:"#30BF78",paletteSemanticYellow:"#FAAD14",paletteSequence:YE,fontFamily:`"Segoe UI", Roboto, "Helvetica Neue", Arial,
    "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",
    "Noto Color Emoji"`,axisLineBorderColor:ut[25],axisLineBorder:1,axisLineDash:null,axisTitleTextFillColor:ut[65],axisTitleTextFontSize:12,axisTitleTextLineHeight:12,axisTitleTextFontWeight:"normal",axisTitleSpacing:12,axisDescriptionIconFillColor:Ci[85],axisTickLineBorderColor:ut[25],axisTickLineLength:4,axisTickLineBorder:1,axisSubTickLineBorderColor:ut[15],axisSubTickLineLength:2,axisSubTickLineBorder:1,axisLabelFillColor:ut[45],axisLabelFontSize:12,axisLabelLineHeight:12,axisLabelFontWeight:"normal",axisLabelOffset:8,axisGridBorderColor:ut[15],axisGridBorder:1,axisGridLineDash:null,legendTitleTextFillColor:ut[45],legendTitleTextFontSize:12,legendTitleTextLineHeight:21,legendTitleTextFontWeight:"normal",legendMarkerColor:We[0],legendMarkerSpacing:8,legendMarkerSize:4,legendCircleMarkerSize:4,legendSquareMarkerSize:4,legendLineMarkerSize:5,legendItemNameFillColor:ut[65],legendItemNameFontSize:12,legendItemNameLineHeight:12,legendItemNameFontWeight:"normal",legendItemSpacing:24,legendItemMarginBottom:12,legendSpacing:16,legendPadding:[8,8,8,8],legendHorizontalPadding:[8,0,8,0],legendVerticalPadding:[0,8,0,8],legendPageNavigatorMarkerSize:12,legendPageNavigatorMarkerInactiveFillColor:ut[45],legendPageNavigatorMarkerInactiveFillOpacity:.45,legendPageNavigatorMarkerFillColor:ut[45],legendPageNavigatorMarkerFillOpacity:1,legendPageNavigatorTextFillColor:ut[65],legendPageNavigatorTextFontSize:12,sliderRailFillColor:ut[15],sliderRailBorder:0,sliderRailBorderColor:null,sliderRailWidth:100,sliderRailHeight:12,sliderLabelTextFillColor:ut[45],sliderLabelTextFontSize:12,sliderLabelTextLineHeight:12,sliderLabelTextFontWeight:"normal",sliderHandlerFillColor:Ci[6],sliderHandlerWidth:10,sliderHandlerHeight:14,sliderHandlerBorder:1,sliderHandlerBorderColor:Ci[25],annotationArcBorderColor:ut[15],annotationArcBorder:1,annotationLineBorderColor:ut[25],annotationLineBorder:1,annotationLineDash:null,annotationTextFillColor:ut[65],annotationTextFontSize:12,annotationTextLineHeight:12,annotationTextFontWeight:"normal",annotationTextBorderColor:null,annotationTextBorder:0,annotationRegionFillColor:ut[100],annotationRegionFillOpacity:.06,annotationRegionBorder:0,annotationRegionBorderColor:null,annotationDataMarkerLineLength:16,tooltipCrosshairsBorderColor:ut[25],tooltipCrosshairsBorder:1,tooltipCrosshairsLineDash:null,tooltipContainerFillColor:"#1f1f1f",tooltipContainerFillOpacity:.95,tooltipContainerShadow:"0px 2px 4px rgba(0,0,0,.5)",tooltipContainerBorderRadius:3,tooltipTextFillColor:ut[65],tooltipTextFontSize:12,tooltipTextLineHeight:12,tooltipTextFontWeight:"bold",labelFillColor:ut[65],labelFillColorDark:"#2c3542",labelFillColorLight:"#ffffff",labelFontSize:12,labelLineHeight:12,labelFontWeight:"normal",labelBorderColor:null,labelBorder:0,innerLabelFillColor:Ci[100],innerLabelFontSize:12,innerLabelLineHeight:12,innerLabelFontWeight:"normal",innerLabelBorderColor:null,innerLabelBorder:0,overflowLabelFillColor:ut[65],overflowLabelFillColorDark:"#2c3542",overflowLabelFillColorLight:"#ffffff",overflowLabelFontSize:12,overflowLabelLineHeight:12,overflowLabelFontWeight:"normal",overflowLabelBorderColor:Ci[100],overflowLabelBorder:1,labelLineBorder:1,labelLineBorderColor:ut[25],cSliderRailHieght:16,cSliderBackgroundFillColor:"#416180",cSliderBackgroundFillOpacity:.05,cSliderForegroundFillColor:"#5B8FF9",cSliderForegroundFillOpacity:.15,cSliderHandlerHeight:24,cSliderHandlerWidth:10,cSliderHandlerFillColor:"#F7F7F7",cSliderHandlerFillOpacity:1,cSliderHandlerHighlightFillColor:"#FFF",cSliderHandlerBorderColor:"#BFBFBF",cSliderHandlerBorder:1,cSliderHandlerBorderRadius:2,cSliderTextFillColor:"#fff",cSliderTextFillOpacity:.45,cSliderTextFontSize:12,cSliderTextLineHeight:12,cSliderTextFontWeight:"normal",cSliderTextBorderColor:null,cSliderTextBorder:0,scrollbarTrackFillColor:"rgba(255,255,255,0.65)",scrollbarThumbFillColor:"rgba(0,0,0,0.35)",scrollbarThumbHighlightFillColor:"rgba(0,0,0,0.45)",pointFillColor:We[0],pointFillOpacity:.95,pointSize:4,pointBorder:1,pointBorderColor:Ci[100],pointBorderOpacity:1,pointActiveBorderColor:ut[100],pointSelectedBorder:2,pointSelectedBorderColor:ut[100],pointInactiveFillOpacity:.3,pointInactiveBorderOpacity:.3,hollowPointSize:4,hollowPointBorder:1,hollowPointBorderColor:We[0],hollowPointBorderOpacity:.95,hollowPointFillColor:Ci[100],hollowPointActiveBorder:1,hollowPointActiveBorderColor:ut[100],hollowPointActiveBorderOpacity:1,hollowPointSelectedBorder:2,hollowPointSelectedBorderColor:ut[100],hollowPointSelectedBorderOpacity:1,hollowPointInactiveBorderOpacity:.3,lineBorder:2,lineBorderColor:We[0],lineBorderOpacity:1,lineActiveBorder:3,lineSelectedBorder:3,lineInactiveBorderOpacity:.3,areaFillColor:We[0],areaFillOpacity:.25,areaActiveFillColor:We[0],areaActiveFillOpacity:.5,areaSelectedFillColor:We[0],areaSelectedFillOpacity:.5,areaInactiveFillOpacity:.3,hollowAreaBorderColor:We[0],hollowAreaBorder:2,hollowAreaBorderOpacity:1,hollowAreaActiveBorder:3,hollowAreaActiveBorderColor:ut[100],hollowAreaSelectedBorder:3,hollowAreaSelectedBorderColor:ut[100],hollowAreaInactiveBorderOpacity:.3,intervalFillColor:We[0],intervalFillOpacity:.95,intervalActiveBorder:1,intervalActiveBorderColor:ut[100],intervalActiveBorderOpacity:1,intervalSelectedBorder:2,intervalSelectedBorderColor:ut[100],intervalSelectedBorderOpacity:1,intervalInactiveBorderOpacity:.3,intervalInactiveFillOpacity:.3,hollowIntervalBorder:2,hollowIntervalBorderColor:We[0],hollowIntervalBorderOpacity:1,hollowIntervalFillColor:Ci[100],hollowIntervalActiveBorder:2,hollowIntervalActiveBorderColor:ut[100],hollowIntervalSelectedBorder:3,hollowIntervalSelectedBorderColor:ut[100],hollowIntervalSelectedBorderOpacity:1,hollowIntervalInactiveBorderOpacity:.3};return d(d({},s),r)},sy=HE();var sc={};Bt(sc,{AbstractCanvas:()=>Gi,AbstractGroup:()=>Jr,AbstractShape:()=>ti,Base:()=>Oi,Canvas:()=>Fy,Event:()=>tr,Group:()=>Ka,PathUtil:()=>ki,Shape:()=>Nr,assembleFont:()=>zi,getArcParams:()=>Mi,getBBoxMethod:()=>ei,getOffScreenContext:()=>Hi,getTextHeight:()=>Vi,invert:()=>_i,isAllowCapture:()=>Qr,multiplyVec2:()=>Ce,registerBBox:()=>ve,registerEasing:()=>Su,version:()=>gL});var Nr={};Bt(Nr,{Base:()=>Rt,Circle:()=>wy,Ellipse:()=>My,Image:()=>Ay,Line:()=>by,Marker:()=>Ty,Path:()=>Ao,Polygon:()=>Ly,Polyline:()=>Iy,Rect:()=>Py,Text:()=>By});function ly(){return window?window.devicePixelRatio:1}function vl(r,e,t,i){var a=r-t,n=e-i;return Math.sqrt(a*a+n*n)}function ur(r,e,t,i,a,n){return a>=r&&a<=r+t&&n>=e&&n<=e+i}function wi(r,e){return!(e.minX>r.maxX||e.maxX<r.minX||e.minY>r.maxY||e.maxY<r.minY)}function fy(r,e){return!r||!e?r||e:{minX:Math.min(r.minX,e.minX),minY:Math.min(r.minY,e.minY),maxX:Math.max(r.maxX,e.maxX),maxY:Math.max(r.maxY,e.maxY)}}function $h(r,e){return r[0]===e[0]&&r[1]===e[1]}var VE=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,zE=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,XE=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,uy=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function hy(r,e){var t=r.match(uy);M(t,function(i){var a=i.split(":");e.addColorStop(a[0],a[1])})}function WE(r,e,t){var i=VE.exec(t),a=parseFloat(i[1])%360*(Math.PI/180),n=i[2],o=e.getBBox(),s,l;a>=0&&a<1/2*Math.PI?(s={x:o.minX,y:o.minY},l={x:o.maxX,y:o.maxY}):1/2*Math.PI<=a&&a<Math.PI?(s={x:o.maxX,y:o.minY},l={x:o.minX,y:o.maxY}):Math.PI<=a&&a<3/2*Math.PI?(s={x:o.maxX,y:o.maxY},l={x:o.minX,y:o.minY}):(s={x:o.minX,y:o.maxY},l={x:o.maxX,y:o.minY});var f=Math.tan(a),u=f*f,h=(l.x-s.x+f*(l.y-s.y))/(u+1)+s.x,c=f*(l.x-s.x+f*(l.y-s.y))/(u+1)+s.y,p=r.createLinearGradient(s.x,s.y,h,c);return hy(n,p),p}function qE(r,e,t){var i=zE.exec(t),a=parseFloat(i[1]),n=parseFloat(i[2]),o=parseFloat(i[3]),s=i[4];if(o===0){var l=s.match(uy);return l[l.length-1].split(":")[1]}var f=e.getBBox(),u=f.maxX-f.minX,h=f.maxY-f.minY,c=Math.sqrt(u*u+h*h)/2,p=r.createRadialGradient(f.minX+u*a,f.minY+h*n,0,f.minX+u/2,f.minY+h/2,o*c);return hy(s,p),p}function UE(r,e,t){if(e.get("patternSource")&&e.get("patternSource")===t)return e.get("pattern");var i,a,n=XE.exec(t),o=n[1],s=n[2];function l(){i=r.createPattern(a,o),e.set("pattern",i),e.set("patternSource",t)}switch(o){case"a":o="repeat";break;case"x":o="repeat-x";break;case"y":o="repeat-y";break;case"n":o="no-repeat";break;default:o="no-repeat"}return a=new Image,s.match(/^data:/i)||(a.crossOrigin="Anonymous"),a.src=s,a.complete?l():(a.onload=l,a.src=a.src),i}function cy(r,e,t){var i=e.getBBox();if(isNaN(i.x)||isNaN(i.y)||isNaN(i.width)||isNaN(i.height))return t;if(G(t)){if(t[1]==="("||t[2]==="("){if(t[0]==="l")return WE(r,e,t);if(t[0]==="r")return qE(r,e,t);if(t[0]==="p")return UE(r,e,t)}return t}if(t instanceof CanvasPattern)return t}function py(r){var e=0,t=0,i=0,a=0;return B(r)?r.length===1?e=t=i=a=r[0]:r.length===2?(e=i=r[0],t=a=r[1]):r.length===3?(e=r[0],t=a=r[1],i=r[2]):(e=r[0],t=r[1],i=r[2],a=r[3]):e=t=i=a=r,[e,t,i,a]}function ml(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1])}function Kh(r,e){return ml(r)*ml(e)?(r[0]*e[0]+r[1]*e[1])/(ml(r)*ml(e)):1}function vy(r,e){return(r[0]*e[1]<r[1]*e[0]?-1:1)*Math.acos(Kh(r,e))}function Mi(r,e){var t=e[1],i=e[2],a=Wr(qr(e[3]),Math.PI*2),n=e[4],o=e[5],s=r[0],l=r[1],f=e[6],u=e[7],h=Math.cos(a)*(s-f)/2+Math.sin(a)*(l-u)/2,c=-1*Math.sin(a)*(s-f)/2+Math.cos(a)*(l-u)/2,p=h*h/(t*t)+c*c/(i*i);p>1&&(t*=Math.sqrt(p),i*=Math.sqrt(p));var v=t*t*(c*c)+i*i*(h*h),m=v?Math.sqrt((t*t*(i*i)-v)/v):1;n===o&&(m*=-1),isNaN(m)&&(m=0);var g=i?m*t*c/i:0,y=t?m*-i*h/t:0,w=(s+f)/2+Math.cos(a)*g-Math.sin(a)*y,x=(l+u)/2+Math.sin(a)*g+Math.cos(a)*y,C=[(h-g)/t,(c-y)/i],A=[(-1*h-g)/t,(-1*c-y)/i],T=vy([1,0],C),E=vy(C,A);return Kh(C,A)<=-1&&(E=Math.PI),Kh(C,A)>=1&&(E=0),o===0&&E>0&&(E=E-2*Math.PI),o===1&&E<0&&(E=E+2*Math.PI),{cx:w,cy:x,rx:$h(r,[f,u])?0:t,ry:$h(r,[f,u])?0:i,startAngle:T,endAngle:T+E,xRotation:a,arcFlag:n,sweepFlag:o}}var gl=Math.sin,yl=Math.cos,Jh=Math.atan2,dl=Math.PI;function my(r,e,t,i,a,n,o){var s=e.stroke,l=e.lineWidth,f=t-a,u=i-n,h=Jh(u,f),c=new Ao({type:"path",canvas:r.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*yl(dl/6)+","+10*gl(dl/6)+" L0,0 L"+10*yl(dl/6)+",-"+10*gl(dl/6),stroke:s,lineWidth:l}});c.translate(a,n),c.rotateAtPoint(a,n,h),r.set(o?"startArrowShape":"endArrowShape",c)}function dy(r,e,t,i,a,n,o){var s=e.startArrow,l=e.endArrow,f=e.stroke,u=e.lineWidth,h=o?s:l,c=h.d,p=h.fill,v=h.stroke,m=h.lineWidth,g=gt(h,["d","fill","stroke","lineWidth"]),y=t-a,w=i-n,x=Jh(w,y);c&&(a=a-yl(x)*c,n=n-gl(x)*c);var C=new Ao({type:"path",canvas:r.get("canvas"),isArrowShape:!0,attrs:d(d({},g),{stroke:v||f,lineWidth:m||u,fill:p})});C.translate(a,n),C.rotateAtPoint(a,n,x),r.set(o?"startArrowShape":"endArrowShape",C)}function hr(r,e,t,i,a){var n=Jh(i-e,t-r);return{dx:yl(n)*a,dy:gl(n)*a}}function Qa(r,e,t,i,a,n){typeof e.startArrow=="object"?dy(r,e,t,i,a,n,!0):e.startArrow?my(r,e,t,i,a,n,!0):r.set("startArrowShape",null)}function $a(r,e,t,i,a,n){typeof e.endArrow=="object"?dy(r,e,t,i,a,n,!1):e.endArrow?my(r,e,t,i,a,n,!1):r.set("startArrowShape",null)}var gy={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function Dr(r,e){var t=e.attr();for(var i in t){var a=t[i],n=gy[i]?gy[i]:i;n==="matrix"&&a?r.transform(a[0],a[1],a[3],a[4],a[6],a[7]):n==="lineDash"&&r.setLineDash?B(a)&&r.setLineDash(a):(n==="strokeStyle"||n==="fillStyle"?a=cy(r,e,a):n==="globalAlpha"&&(a=a*r.globalAlpha),r[n]=a)}}function bo(r,e,t){for(var i=0;i<e.length;i++){var a=e[i];a.cfg.visible?a.draw(r,t):a.skipDraw()}}function yy(r,e,t){var i=r.get("refreshElements");M(i,function(a){if(a!==r)for(var n=a.cfg.parent;n&&n!==r&&!n.cfg.refresh;)n.cfg.refresh=!0,n=n.cfg.parent}),i[0]===r?rc(e,t):tc(e,t)}function tc(r,e){for(var t=0;t<r.length;t++){var i=r[t];if(i.cfg.visible)if(i.cfg.hasChanged)i.cfg.refresh=!0,i.isGroup()&&rc(i.cfg.children,e);else if(i.cfg.refresh)i.isGroup()&&tc(i.cfg.children,e);else{var a=jE(i,e);i.cfg.refresh=a,a&&i.isGroup()&&tc(i.cfg.children,e)}}}function ec(r){for(var e=0;e<r.length;e++){var t=r[e];t.cfg.hasChanged=!1,t.isGroup()&&!t.destroyed&&ec(t.cfg.children)}}function rc(r,e){for(var t=0;t<r.length;t++){var i=r[t];i.cfg.visible&&(i.cfg.refresh=!0,i.isGroup()&&rc(i.get("children"),e))}}function jE(r,e){var t=r.cfg.cacheCanvasBBox,i=r.cfg.isInView&&t&&wi(t,e);return i}function Cl(r,e,t,i){var a=t.path,n=t.startArrow,o=t.endArrow;if(a){var s=[0,0],l=[0,0],f={dx:0,dy:0};e.beginPath();for(var u=0;u<a.length;u++){var h=a[u],c=h[0];if(u===0&&n&&n.d){var p=r.getStartTangent();f=hr(p[0][0],p[0][1],p[1][0],p[1][1],n.d)}else if(u===a.length-2&&a[u+1][0]==="Z"&&o&&o.d){var v=a[u+1];if(v[0]==="Z"){var p=r.getEndTangent();f=hr(p[0][0],p[0][1],p[1][0],p[1][1],o.d)}}else if(u===a.length-1&&o&&o.d&&a[0]!=="Z"){var p=r.getEndTangent();f=hr(p[0][0],p[0][1],p[1][0],p[1][1],o.d)}var m=f.dx,g=f.dy;switch(c){case"M":e.moveTo(h[1]-m,h[2]-g),l=[h[1],h[2]];break;case"L":e.lineTo(h[1]-m,h[2]-g);break;case"Q":e.quadraticCurveTo(h[1],h[2],h[3]-m,h[4]-g);break;case"C":e.bezierCurveTo(h[1],h[2],h[3],h[4],h[5]-m,h[6]-g);break;case"A":{var y=void 0;i?(y=i[u],y||(y=Mi(s,h),i[u]=y)):y=Mi(s,h);var w=y.cx,x=y.cy,C=y.rx,A=y.ry,T=y.startAngle,E=y.endAngle,k=y.xRotation,P=y.sweepFlag;if(e.ellipse)e.ellipse(w,x,C,A,k,T,E,1-P);else{var L=C>A?C:A,R=C>A?1:C/A,N=C>A?A/C:1;e.translate(w,x),e.rotate(k),e.scale(R,N),e.arc(0,0,L,T,E,1-P),e.scale(1/R,1/N),e.rotate(-k),e.translate(-w,-x)}break}case"Z":e.closePath();break;default:break}if(c==="Z")s=l;else{var H=h.length;s=[h[H-2],h[H-1]]}}}}function wl(r,e){var t=r.get("canvas");t&&(e==="remove"&&(r._cacheCanvasBBox=r.get("cacheCanvasBBox")),r.get("hasChanged")||(r.set("hasChanged",!0),r.cfg.parent&&r.cfg.parent.get("hasChanged")||(t.refreshElement(r,e,t),t.get("autoDraw")&&t.draw())))}function ZE(r){var e;if(r.destroyed)e=r._cacheCanvasBBox;else{var t=r.get("cacheCanvasBBox"),i=t&&!!(t.width&&t.height),a=r.getCanvasBBox(),n=a&&!!(a.width&&a.height);i&&n?e=fy(t,a):i?e=t:n&&(e=a)}return e}function xy(r){if(!r.length)return null;var e=[],t=[],i=[],a=[];return M(r,function(n){var o=ZE(n);o&&(e.push(o.minX),t.push(o.minY),i.push(o.maxX),a.push(o.maxY))}),{minX:Vt(e),minY:Vt(t),maxX:Dt(i),maxY:Dt(a)}}function Cy(r,e){return!r||!e||!wi(r,e)?null:{minX:Math.max(r.minX,e.minX),minY:Math.max(r.minY,e.minY),maxX:Math.min(r.maxX,e.maxX),maxY:Math.min(r.maxY,e.maxY)}}var QE=function(r){S(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.onCanvasChange=function(t){wl(this,t)},e.prototype.getShapeBase=function(){return Nr},e.prototype.getGroupBase=function(){return e},e.prototype._applyClip=function(t,i){i&&(t.save(),Dr(t,i),i.createPath(t),t.restore(),t.clip(),i._afterDraw())},e.prototype.cacheCanvasBBox=function(){var t=this.cfg.children,i=[],a=[];M(t,function(c){var p=c.cfg.cacheCanvasBBox;p&&c.cfg.isInView&&(i.push(p.minX,p.maxX),a.push(p.minY,p.maxY))});var n=null;if(i.length){var o=Vt(i),s=Dt(i),l=Vt(a),f=Dt(a);n={minX:o,minY:l,x:o,y:l,maxX:s,maxY:f,width:s-o,height:f-l};var u=this.cfg.canvas;if(u){var h=u.getViewRange();this.set("isInView",wi(n,h))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",n)},e.prototype.draw=function(t,i){var a=this.cfg.children,n=i?this.cfg.refresh:!0;a.length&&n&&(t.save(),Dr(t,this),this._applyClip(t,this.getClip()),bo(t,a,i),t.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},e}(Jr),Ka=QE;var $E=function(r){S(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return d(d({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},e.prototype.getShapeBase=function(){return Nr},e.prototype.getGroupBase=function(){return Ka},e.prototype.onCanvasChange=function(t){wl(this,t)},e.prototype.calculateBBox=function(){var t=this.get("type"),i=this.getHitLineWidth(),a=ei(t),n=a(this),o=i/2,s=n.x-o,l=n.y-o,f=n.x+n.width+o,u=n.y+n.height+o;return{x:s,minX:s,y:l,minY:l,width:n.width+i,height:n.height+i,maxX:f,maxY:u}},e.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},e.prototype.isStroke=function(){return!!this.attrs.stroke},e.prototype._applyClip=function(t,i){i&&(t.save(),Dr(t,i),i.createPath(t),t.restore(),t.clip(),i._afterDraw())},e.prototype.draw=function(t,i){var a=this.cfg.clipShape;if(i){if(this.cfg.refresh===!1){this.set("hasChanged",!1);return}var n=this.getCanvasBBox();if(!wi(i,n)){this.set("hasChanged",!1),this.cfg.isInView&&this._afterDraw();return}}t.save(),Dr(t,this),this._applyClip(t,a),this.drawPath(t),t.restore(),this._afterDraw()},e.prototype.getCanvasViewBox=function(){var t=this.cfg.canvas;return t?t.getViewRange():null},e.prototype.cacheCanvasBBox=function(){var t=this.getCanvasViewBox();if(t){var i=this.getCanvasBBox(),a=wi(i,t);this.set("isInView",a),a?this.set("cacheCanvasBBox",i):this.set("cacheCanvasBBox",null)}},e.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},e.prototype.drawPath=function(t){this.createPath(t),this.strokeAndFill(t),this.afterDrawPath(t)},e.prototype.fill=function(t){t.fill()},e.prototype.stroke=function(t){t.stroke()},e.prototype.strokeAndFill=function(t){var i=this.attrs,a=i.lineWidth,n=i.opacity,o=i.strokeOpacity,s=i.fillOpacity;this.isFill()&&(!I(s)&&s!==1?(t.globalAlpha=s,this.fill(t),t.globalAlpha=n):this.fill(t)),this.isStroke()&&a>0&&(!I(o)&&o!==1&&(t.globalAlpha=o),this.stroke(t)),this.afterDrawPath(t)},e.prototype.createPath=function(t){},e.prototype.afterDrawPath=function(t){},e.prototype.isInShape=function(t,i){var a=this.isStroke(),n=this.isFill(),o=this.getHitLineWidth();return this.isInStrokeOrPath(t,i,a,n,o)},e.prototype.isInStrokeOrPath=function(t,i,a,n,o){return!1},e.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var t=this.attrs;return t.lineWidth+t.lineAppendWidth},e}(ti),Rt=$E;var KE=function(r){S(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return d(d({},t),{x:0,y:0,r:0})},e.prototype.isInStrokeOrPath=function(t,i,a,n,o){var s=this.attr(),l=s.x,f=s.y,u=s.r,h=o/2,c=vl(l,f,t,i);return n&&a?c<=u+h:n?c<=u:a?c>=u-h&&c<=u+h:!1},e.prototype.createPath=function(t){var i=this.attr(),a=i.x,n=i.y,o=i.r;t.beginPath(),t.arc(a,n,o,0,Math.PI*2,!1),t.closePath()},e}(Rt),wy=KE;function Ml(r,e,t,i){return r/(t*t)+e/(i*i)}var JE=function(r){S(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return d(d({},t),{x:0,y:0,rx:0,ry:0})},e.prototype.isInStrokeOrPath=function(t,i,a,n,o){var s=this.attr(),l=o/2,f=s.x,u=s.y,h=s.rx,c=s.ry,p=(t-f)*(t-f),v=(i-u)*(i-u);return n&&a?Ml(p,v,h+l,c+l)<=1:n?Ml(p,v,h,c)<=1:a?Ml(p,v,h-l,c-l)>=1&&Ml(p,v,h+l,c+l)<=1:!1},e.prototype.createPath=function(t){var i=this.attr(),a=i.x,n=i.y,o=i.rx,s=i.ry;if(t.beginPath(),t.ellipse)t.ellipse(a,n,o,s,0,0,Math.PI*2,!1);else{var l=o>s?o:s,f=o>s?1:o/s,u=o>s?s/o:1;t.save(),t.translate(a,n),t.scale(f,u),t.arc(0,0,l,0,Math.PI*2),t.restore(),t.closePath()}},e}(Rt),My=JE;function Sy(r){return r instanceof HTMLElement&&G(r.nodeName)&&r.nodeName.toUpperCase()==="CANVAS"}var tL=function(r){S(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return d(d({},t),{x:0,y:0,width:0,height:0})},e.prototype.initAttrs=function(t){this._setImage(t.img)},e.prototype.isStroke=function(){return!1},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._afterLoading=function(){if(this.get("toDraw")===!0){var t=this.get("canvas");t?t.draw():this.createPath(this.get("context"))}},e.prototype._setImage=function(t){var i=this,a=this.attrs;if(G(t)){var n=new Image;n.onload=function(){if(i.destroyed)return!1;i.attr("img",n),i.set("loading",!1),i._afterLoading();var o=i.get("callback");o&&o.call(i)},n.crossOrigin="Anonymous",n.src=t,this.set("loading",!0)}else t instanceof Image?(a.width||(a.width=t.width),a.height||(a.height=t.height)):Sy(t)&&(a.width||(a.width=Number(t.getAttribute("width"))),a.height||(a.height,Number(t.getAttribute("height"))))},e.prototype.onAttrChange=function(t,i,a){r.prototype.onAttrChange.call(this,t,i,a),t==="img"&&this._setImage(i)},e.prototype.createPath=function(t){if(this.get("loading")){this.set("toDraw",!0),this.set("context",t);return}var i=this.attr(),a=i.x,n=i.y,o=i.width,s=i.height,l=i.sx,f=i.sy,u=i.swidth,h=i.sheight,c=i.img;(c instanceof Image||Sy(c))&&(!I(l)&&!I(f)&&!I(u)&&!I(h)?t.drawImage(c,l,f,u,h,a,n,o,s):t.drawImage(c,a,n,o,s))},e}(Rt),Ay=tL;function Te(r,e,t,i,a,n,o){var s=Math.min(r,t),l=Math.max(r,t),f=Math.min(e,i),u=Math.max(e,i),h=a/2;return n>=s-h&&n<=l+h&&o>=f-h&&o<=u+h?yt.pointToLine(r,e,t,i,n,o)<=a/2:!1}var eL=function(r){S(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return d(d({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this.setArrow()},e.prototype.onAttrChange=function(t,i,a){r.prototype.onAttrChange.call(this,t,i,a),this.setArrow()},e.prototype.setArrow=function(){var t=this.attr(),i=t.x1,a=t.y1,n=t.x2,o=t.y2,s=t.startArrow,l=t.endArrow;s&&Qa(this,t,n,o,i,a),l&&$a(this,t,i,a,n,o)},e.prototype.isInStrokeOrPath=function(t,i,a,n,o){if(!a||!o)return!1;var s=this.attr(),l=s.x1,f=s.y1,u=s.x2,h=s.y2;return Te(l,f,u,h,o,t,i)},e.prototype.createPath=function(t){var i=this.attr(),a=i.x1,n=i.y1,o=i.x2,s=i.y2,l=i.startArrow,f=i.endArrow,u={dx:0,dy:0},h={dx:0,dy:0};l&&l.d&&(u=hr(a,n,o,s,i.startArrow.d)),f&&f.d&&(h=hr(a,n,o,s,i.endArrow.d)),t.beginPath(),t.moveTo(a+u.dx,n+u.dy),t.lineTo(o-h.dx,s-h.dy)},e.prototype.afterDrawPath=function(t){var i=this.get("startArrowShape"),a=this.get("endArrowShape");i&&i.draw(t),a&&a.draw(t)},e.prototype.getTotalLength=function(){var t=this.attr(),i=t.x1,a=t.y1,n=t.x2,o=t.y2;return yt.length(i,a,n,o)},e.prototype.getPoint=function(t){var i=this.attr(),a=i.x1,n=i.y1,o=i.x2,s=i.y2;return yt.pointAt(a,n,o,s,t)},e}(Rt),by=eL;var rL={circle:function(r,e,t){return[["M",r-t,e],["A",t,t,0,1,0,r+t,e],["A",t,t,0,1,0,r-t,e]]},square:function(r,e,t){return[["M",r-t,e-t],["L",r+t,e-t],["L",r+t,e+t],["L",r-t,e+t],["Z"]]},diamond:function(r,e,t){return[["M",r-t,e],["L",r,e-t],["L",r+t,e],["L",r,e+t],["Z"]]},triangle:function(r,e,t){var i=t*Math.sin(.3333333333333333*Math.PI);return[["M",r-t,e+i],["L",r,e-i],["L",r+t,e+i],["Z"]]},"triangle-down":function(r,e,t){var i=t*Math.sin(.3333333333333333*Math.PI);return[["M",r-t,e-i],["L",r+t,e-i],["L",r,e+i],["Z"]]}},iL=function(r){S(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.initAttrs=function(t){this._resetParamsCache()},e.prototype._resetParamsCache=function(){this.set("paramsCache",{})},e.prototype.onAttrChange=function(t,i,a){r.prototype.onAttrChange.call(this,t,i,a),["symbol","x","y","r","radius"].indexOf(t)!==-1&&this._resetParamsCache()},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._getR=function(t){return I(t.r)?t.radius:t.r},e.prototype._getPath=function(){var t=this.attr(),i=t.x,a=t.y,n=t.symbol||"circle",o=this._getR(t),s,l;if(D(n))s=n,l=s(i,a,o),l=Xi(l);else{if(s=e.Symbols[n],!s)return console.warn(n+" marker is not supported."),null;l=s(i,a,o)}return l},e.prototype.createPath=function(t){var i=this._getPath(),a=this.get("paramsCache");Cl(this,t,{path:i},a)},e.Symbols=rL,e}(Rt),Ty=iL;function To(r,e,t){var i=Hi();return r.createPath(i),i.isPointInPath(e,t)}var aL=1e-6;function ic(r){return Math.abs(r)<aL?0:r<0?-1:1}function nL(r,e,t){return(t[0]-r[0])*(e[1]-r[1])===(e[0]-r[0])*(t[1]-r[1])&&Math.min(r[0],e[0])<=t[0]&&t[0]<=Math.max(r[0],e[0])&&Math.min(r[1],e[1])<=t[1]&&t[1]<=Math.max(r[1],e[1])}function Eo(r,e,t){var i=!1,a=r.length;if(a<=2)return!1;for(var n=0;n<a;n++){var o=r[n],s=r[(n+1)%a];if(nL(o,s,[e,t]))return!0;ic(o[1]-t)>0!=ic(s[1]-t)>0&&ic(e-(t-o[1])*(o[0]-s[0])/(o[1]-s[1])-o[0])<0&&(i=!i)}return i}function Si(r,e,t,i,a,n,o,s){var l=(Math.atan2(s-e,o-r)+Math.PI*2)%(Math.PI*2);if(l<i||l>a)return!1;var f={x:r+t*Math.cos(l),y:e+t*Math.sin(l)};return vl(f.x,f.y,o,s)<=n/2}var oL=$.transform;function sL(r){for(var e=!1,t=r.length,i=0;i<t;i++){var a=r[i],n=a[0];if(n==="C"||n==="A"||n==="Q"){e=!0;break}}return e}function lL(r,e,t,i,a){for(var n=!1,o=e/2,s=0;s<r.length;s++){var l=r[s],f=l.currentPoint,u=l.params,h=l.prePoint,c=l.box;if(!(c&&!ur(c.x-o,c.y-o,c.width+e,c.height+e,t,i))){switch(l.command){case"L":case"Z":n=Te(h[0],h[1],f[0],f[1],e,t,i);break;case"Q":var p=Gn.pointDistance(h[0],h[1],u[1],u[2],u[3],u[4],t,i);n=p<=e/2;break;case"C":var v=Sr.pointDistance(h[0],h[1],u[1],u[2],u[3],u[4],u[5],u[6],t,i,a);n=v<=e/2;break;case"A":var m=l.arcParams,g=m.cx,y=m.cy,w=m.rx,x=m.ry,C=m.startAngle,A=m.endAngle,T=m.xRotation,E=[t,i,1],k=w>x?w:x,P=w>x?1:w/x,L=w>x?x/w:1,R=oL(null,[["t",-g,-y],["r",-T],["s",1/P,1/L]]);Wf(E,E,R),n=Si(0,0,k,C,A,e,E[0],E[1]);break;default:break}if(n)break}}return n}function fL(r){for(var e=r.length,t=[],i=[],a=[],n=0;n<e;n++){var o=r[n],s=o[0];s==="M"?(a.length&&(i.push(a),a=[]),a.push([o[1],o[2]])):s==="Z"?a.length&&(t.push(a),a=[]):a.push([o[1],o[2]])}return a.length>0&&i.push(a),{polygons:t,polylines:i}}var Lo=d({hasArc:sL,extractPolygons:fL,isPointInStroke:lL},ki);function Ey(r,e,t){for(var i=!1,a=0;a<r.length;a++){var n=r[a];if(i=Eo(n,e,t),i)break}return i}var uL=function(r){S(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return d(d({},t),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this._setPathArr(t.path),this.setArrow()},e.prototype.onAttrChange=function(t,i,a){r.prototype.onAttrChange.call(this,t,i,a),t==="path"&&this._setPathArr(i),this.setArrow()},e.prototype._setPathArr=function(t){this.attrs.path=Xi(t);var i=Lo.hasArc(t);this.set("hasArc",i),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},e.prototype.getSegments=function(){var t=this.get("segements");return t||(t=wa(this.attr("path")),this.set("segments",t)),t},e.prototype.setArrow=function(){var t=this.attr(),i=t.startArrow,a=t.endArrow;if(i){var n=this.getStartTangent();Qa(this,t,n[0][0],n[0][1],n[1][0],n[1][1])}if(a){var n=this.getEndTangent();$a(this,t,n[0][0],n[0][1],n[1][0],n[1][1])}},e.prototype.isInStrokeOrPath=function(t,i,a,n,o){var s=this.getSegments(),l=this.get("hasArc"),f=!1;if(a){var u=this.getTotalLength();f=Lo.isPointInStroke(s,o,t,i,u)}if(!f&&n)if(l)f=To(this,t,i);else{var h=this.attr("path"),c=Lo.extractPolygons(h);f=Ey(c.polygons,t,i)||Ey(c.polylines,t,i)}return f},e.prototype.createPath=function(t){var i=this.attr(),a=this.get("paramsCache");Cl(this,t,i,a)},e.prototype.afterDrawPath=function(t){var i=this.get("startArrowShape"),a=this.get("endArrowShape");i&&i.draw(t),a&&a.draw(t)},e.prototype.getTotalLength=function(){var t=this.get("totalLength");return I(t)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):t},e.prototype.getPoint=function(t){var i=this.get("tCache");i||(this._calculateCurve(),this._setTcache(),i=this.get("tCache"));var a,n,o=this.get("curve");if(!i||i.length===0)return o?{x:o[0][1],y:o[0][2]}:null;M(i,function(u,h){t>=u[0]&&t<=u[1]&&(a=(t-u[0])/(u[1]-u[0]),n=h)});var s=o[n];if(I(s)||I(n))return null;var l=s.length,f=o[n+1];return Sr.pointAt(s[l-2],s[l-1],f[1],f[2],f[3],f[4],f[5],f[6],a)},e.prototype._calculateCurve=function(){var t=this.attr().path;this.set("curve",Lo.pathToCurve(t))},e.prototype._setTcache=function(){var t=0,i=0,a=[],n,o,s,l,f=this.get("curve");if(f){if(M(f,function(u,h){s=f[h+1],l=u.length,s&&(t+=Sr.length(u[l-2],u[l-1],s[1],s[2],s[3],s[4],s[5],s[6])||0)}),this.set("totalLength",t),t===0){this.set("tCache",[]);return}M(f,function(u,h){s=f[h+1],l=u.length,s&&(n=[],n[0]=i/t,o=Sr.length(u[l-2],u[l-1],s[1],s[2],s[3],s[4],s[5],s[6]),i+=o||0,n[1]=i/t,a.push(n))}),this.set("tCache",a)}},e.prototype.getStartTangent=function(){var t=this.getSegments(),i;if(t.length>1){var a=t[0].currentPoint,n=t[1].currentPoint,o=t[1].startTangent;i=[],o?(i.push([a[0]-o[0],a[1]-o[1]]),i.push([a[0],a[1]])):(i.push([n[0],n[1]]),i.push([a[0],a[1]]))}return i},e.prototype.getEndTangent=function(){var t=this.getSegments(),i=t.length,a;if(i>1){var n=t[i-2].currentPoint,o=t[i-1].currentPoint,s=t[i-1].endTangent;a=[],s?(a.push([o[0]-s[0],o[1]-s[1]]),a.push([o[0],o[1]])):(a.push([n[0],n[1]]),a.push([o[0],o[1]]))}return a},e}(Rt),Ao=uL;function Io(r,e,t,i,a){var n=r.length;if(n<2)return!1;for(var o=0;o<n-1;o++){var s=r[o][0],l=r[o][1],f=r[o+1][0],u=r[o+1][1];if(Te(s,l,f,u,e,t,i))return!0}if(a){var h=r[0],c=r[n-1];if(Te(h[0],h[1],c[0],c[1],e,t,i))return!0}return!1}var hL=function(r){S(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.isInStrokeOrPath=function(t,i,a,n,o){var s=this.attr().points,l=!1;return a&&(l=Io(s,o,t,i,!0)),!l&&n&&(l=Eo(s,t,i)),l},e.prototype.createPath=function(t){var i=this.attr(),a=i.points;if(!(a.length<2)){t.beginPath();for(var n=0;n<a.length;n++){var o=a[n];n===0?t.moveTo(o[0],o[1]):t.lineTo(o[0],o[1])}t.closePath()}},e}(Rt),Ly=hL;var cL=function(r){S(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return d(d({},t),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this.setArrow()},e.prototype.onAttrChange=function(t,i,a){r.prototype.onAttrChange.call(this,t,i,a),this.setArrow(),["points"].indexOf(t)!==-1&&this._resetCache()},e.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},e.prototype.setArrow=function(){var t=this.attr(),i=this.attrs,a=i.points,n=i.startArrow,o=i.endArrow,s=a.length,l=a[0][0],f=a[0][1],u=a[s-1][0],h=a[s-1][1];n&&Qa(this,t,a[1][0],a[1][1],l,f),o&&$a(this,t,a[s-2][0],a[s-2][1],u,h)},e.prototype.isFill=function(){return!1},e.prototype.isInStrokeOrPath=function(t,i,a,n,o){if(!a||!o)return!1;var s=this.attr().points;return Io(s,o,t,i,!1)},e.prototype.isStroke=function(){return!0},e.prototype.createPath=function(t){var i=this.attr(),a=i.points,n=i.startArrow,o=i.endArrow,s=a.length;if(!(a.length<2)){var l=a[0][0],f=a[0][1],u=a[s-1][0],h=a[s-1][1];if(n&&n.d){var c=hr(l,f,a[1][0],a[1][1],n.d);l+=c.dx,f+=c.dy}if(o&&o.d){var c=hr(a[s-2][0],a[s-2][1],u,h,o.d);u-=c.dx,h-=c.dy}t.beginPath(),t.moveTo(l,f);for(var p=0;p<s-1;p++){var v=a[p];t.lineTo(v[0],v[1])}t.lineTo(u,h)}},e.prototype.afterDrawPath=function(t){var i=this.get("startArrowShape"),a=this.get("endArrowShape");i&&i.draw(t),a&&a.draw(t)},e.prototype.getTotalLength=function(){var t=this.attr().points,i=this.get("totalLength");return I(i)?(this.set("totalLength",ya.length(t)),this.get("totalLength")):i},e.prototype.getPoint=function(t){var i=this.attr().points,a=this.get("tCache");a||(this._setTcache(),a=this.get("tCache"));var n,o;return M(a,function(s,l){t>=s[0]&&t<=s[1]&&(n=(t-s[0])/(s[1]-s[0]),o=l)}),yt.pointAt(i[o][0],i[o][1],i[o+1][0],i[o+1][1],n)},e.prototype._setTcache=function(){var t=this.attr().points;if(!(!t||t.length===0)){var i=this.getTotalLength();if(!(i<=0)){var a=0,n=[],o,s;M(t,function(l,f){t[f+1]&&(o=[],o[0]=a/i,s=yt.length(l[0],l[1],t[f+1][0],t[f+1][1]),a+=s,o[1]=a/i,n.push(o))}),this.set("tCache",n)}}},e.prototype.getStartTangent=function(){var t=this.attr().points,i=[];return i.push([t[1][0],t[1][1]]),i.push([t[0][0],t[0][1]]),i},e.prototype.getEndTangent=function(){var t=this.attr().points,i=t.length-1,a=[];return a.push([t[i-1][0],t[i-1][1]]),a.push([t[i][0],t[i][1]]),a},e}(Rt),Iy=cL;function ac(r,e,t,i,a,n,o){var s=a/2;return ur(r-s,e-s,t,a,n,o)||ur(r+t-s,e-s,a,i,n,o)||ur(r+s,e+i-s,t,a,n,o)||ur(r-s,e+s,a,i,n,o)}function nc(r,e,t,i,a,n,o,s){var l=n/2;return Te(r+a,e,r+t-a,e,n,o,s)||Te(r+t,e+a,r+t,e+i-a,n,o,s)||Te(r+t-a,e+i,r+a,e+i,n,o,s)||Te(r,e+i-a,r,e+a,n,o,s)||Si(r+t-a,e+a,a,1.5*Math.PI,2*Math.PI,n,o,s)||Si(r+t-a,e+i-a,a,0,.5*Math.PI,n,o,s)||Si(r+a,e+i-a,a,.5*Math.PI,Math.PI,n,o,s)||Si(r+a,e+a,a,Math.PI,1.5*Math.PI,n,o,s)}var pL=function(r){S(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return d(d({},t),{x:0,y:0,width:0,height:0,radius:0})},e.prototype.isInStrokeOrPath=function(t,i,a,n,o){var s=this.attr(),l=s.x,f=s.y,u=s.width,h=s.height,c=s.radius;if(c){var v=!1;return a&&(v=nc(l,f,u,h,c,o,t,i)),!v&&n&&(v=To(this,t,i)),v}else{var p=o/2;if(n&&a)return ur(l-p,f-p,u+p,h+p,t,i);if(n)return ur(l,f,u,h,t,i);if(a)return ac(l,f,u,h,o,t,i)}},e.prototype.createPath=function(t){var i=this.attr(),a=i.x,n=i.y,o=i.width,s=i.height,l=i.radius;if(t.beginPath(),l===0)t.rect(a,n,o,s);else{var f=py(l),u=f[0],h=f[1],c=f[2],p=f[3];t.moveTo(a+u,n),t.lineTo(a+o-h,n),h!==0&&t.arc(a+o-h,n+h,h,-Math.PI/2,0),t.lineTo(a+o,n+s-c),c!==0&&t.arc(a+o-c,n+s-c,c,0,Math.PI/2),t.lineTo(a+p,n+s),p!==0&&t.arc(a+p,n+s-p,p,Math.PI/2,Math.PI),t.lineTo(a,n+u),u!==0&&t.arc(a+u,n+u,u,Math.PI,Math.PI*1.5),t.closePath()}},e}(Rt),Py=pL;var vL=function(r){S(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return d(d({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},e.prototype.isOnlyHitBox=function(){return!0},e.prototype.initAttrs=function(t){this._assembleFont(),t.text&&this._setText(t.text)},e.prototype._assembleFont=function(){var t=this.attrs;t.font=zi(t)},e.prototype._setText=function(t){var i=null;G(t)&&t.indexOf(`
`)!==-1&&(i=t.split(`
`)),this.set("textArr",i)},e.prototype.onAttrChange=function(t,i,a){r.prototype.onAttrChange.call(this,t,i,a),t.startsWith("font")&&this._assembleFont(),t==="text"&&this._setText(i)},e.prototype._getSpaceingY=function(){var t=this.attrs,i=t.lineHeight,a=t.fontSize*1;return i?i-a:a*.14},e.prototype._drawTextArr=function(t,i,a){var n=this.attrs,o=n.textBaseline,s=n.x,l=n.y,f=n.fontSize*1,u=this._getSpaceingY(),h=Vi(n.text,n.fontSize,n.lineHeight),c;M(i,function(p,v){c=l+v*(u+f)-h+f,o==="middle"&&(c+=h-f-(h-f)/2),o==="top"&&(c+=h-f),I(p)||(a?t.fillText(p,s,c):t.strokeText(p,s,c))})},e.prototype._drawText=function(t,i){var a=this.attr(),n=a.x,o=a.y,s=this.get("textArr");if(s)this._drawTextArr(t,s,i);else{var l=a.text;I(l)||(i?t.fillText(l,n,o):t.strokeText(l,n,o))}},e.prototype.strokeAndFill=function(t){var i=this.attrs,a=i.lineWidth,n=i.opacity,o=i.strokeOpacity,s=i.fillOpacity;this.isStroke()&&a>0&&(!I(o)&&o!==1&&(t.globalAlpha=n),this.stroke(t)),this.isFill()&&(!I(s)&&s!==1?(t.globalAlpha=s,this.fill(t),t.globalAlpha=n):this.fill(t)),this.afterDrawPath(t)},e.prototype.fill=function(t){this._drawText(t,!0)},e.prototype.stroke=function(t){this._drawText(t,!1)},e}(Rt),By=vL;function mL(r,e){if(e){var t=_i(e);return Ce(t,r)}return r}function Oy(r,e,t){var i=r.getTotalMatrix();if(i){var a=mL([e,t,1],i),n=a[0],o=a[1];return[n,o]}return[e,t]}function ky(r,e,t){if(r.isCanvas&&r.isCanvas())return!0;if(!Qr(r)||r.cfg.isInView===!1)return!1;if(r.cfg.clipShape){var i=Oy(r,e,t),a=i[0],n=i[1];if(r.isClipped(a,n))return!1}var o=r.cfg.cacheCanvasBBox||r.getCanvasBBox();return e>=o.minX&&e<=o.maxX&&t>=o.minY&&t<=o.maxY}function oc(r,e,t){if(!ky(r,e,t))return null;for(var i=null,a=r.getChildren(),n=a.length,o=n-1;o>=0;o--){var s=a[o];if(s.isGroup())i=oc(s,e,t);else if(ky(s,e,t)){var l=s,f=Oy(s,e,t),u=f[0],h=f[1];l.isInShape(u,h)&&(i=s)}if(i)break}return i}var dL=function(r){S(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return t.renderer="canvas",t.autoDraw=!0,t.localRefresh=!0,t.refreshElements=[],t.clipView=!0,t.quickHit=!1,t},e.prototype.onCanvasChange=function(t){(t==="attr"||t==="sort"||t==="changeSize")&&(this.set("refreshElements",[this]),this.draw())},e.prototype.getShapeBase=function(){return Nr},e.prototype.getGroupBase=function(){return Ka},e.prototype.getPixelRatio=function(){var t=this.get("pixelRatio")||ly();return t>=1?Math.ceil(t):1},e.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},e.prototype.createDom=function(){var t=document.createElement("canvas"),i=t.getContext("2d");return this.set("context",i),t},e.prototype.setDOMSize=function(t,i){r.prototype.setDOMSize.call(this,t,i);var a=this.get("context"),n=this.get("el"),o=this.getPixelRatio();n.width=o*t,n.height=o*i,o>1&&a.scale(o,o)},e.prototype.clear=function(){r.prototype.clear.call(this),this._clearFrame();var t=this.get("context"),i=this.get("el");t.clearRect(0,0,i.width,i.height)},e.prototype.getShape=function(t,i){var a;return this.get("quickHit")?a=oc(this,t,i):a=r.prototype.getShape.call(this,t,i,null),a},e.prototype._getRefreshRegion=function(){var t=this.get("refreshElements"),i=this.getViewRange(),a;if(t.length&&t[0]===this)a=i;else if(a=xy(t),a){a.minX=Math.floor(a.minX),a.minY=Math.floor(a.minY),a.maxX=Math.ceil(a.maxX),a.maxY=Math.ceil(a.maxY),a.maxY+=1;var n=this.get("clipView");n&&(a=Cy(a,i))}return a},e.prototype.refreshElement=function(t){var i=this.get("refreshElements");i.push(t)},e.prototype._clearFrame=function(){var t=this.get("drawFrame");t&&(Mn(t),this.set("drawFrame",null),this.set("refreshElements",[]))},e.prototype.draw=function(){var t=this.get("drawFrame");this.get("autoDraw")&&t||this._startDraw()},e.prototype._drawAll=function(){var t=this.get("context"),i=this.get("el"),a=this.getChildren();t.clearRect(0,0,i.width,i.height),Dr(t,this),bo(t,a),this.set("refreshElements",[])},e.prototype._drawRegion=function(){var t=this.get("context"),i=this.get("refreshElements"),a=this.getChildren(),n=this._getRefreshRegion();n?(t.clearRect(n.minX,n.minY,n.maxX-n.minX,n.maxY-n.minY),t.save(),t.beginPath(),t.rect(n.minX,n.minY,n.maxX-n.minX,n.maxY-n.minY),t.clip(),Dr(t,this),yy(this,a,n),bo(t,a,n),t.restore()):i.length&&ec(i),M(i,function(o){o.get("hasChanged")&&o.set("hasChanged",!1)}),this.set("refreshElements",[])},e.prototype._startDraw=function(){var t=this,i=this.get("drawFrame"),a=this.get("drawFrameCallback");i||(i=wn(function(){t.get("localRefresh")?t._drawRegion():t._drawAll(),t.set("drawFrame",null),a&&a()}),this.set("drawFrame",i))},e.prototype.skipDraw=function(){},e.prototype.removeDom=function(){var t=this.get("el");t.width=0,t.height=0,t.parentNode.removeChild(t)},e}(Gi),Fy=dL;var gL="0.5.12";var uc={};Bt(uc,{AbstractCanvas:()=>Gi,AbstractGroup:()=>Jr,AbstractShape:()=>ti,Base:()=>Oi,Canvas:()=>rx,Event:()=>tr,Group:()=>Ja,PathUtil:()=>ki,Shape:()=>Yr,assembleFont:()=>zi,getBBoxMethod:()=>ei,getOffScreenContext:()=>Hi,getTextHeight:()=>Vi,invert:()=>_i,isAllowCapture:()=>Qr,multiplyVec2:()=>Ce,registerBBox:()=>ve,registerEasing:()=>Su,version:()=>ZL});var Yr={};Bt(Yr,{Base:()=>Pt,Circle:()=>Dy,Dom:()=>Ny,Ellipse:()=>Gy,Image:()=>Yy,Line:()=>Hy,Marker:()=>Vy,Path:()=>zy,Polygon:()=>Xy,Polyline:()=>Wy,Rect:()=>Uy,Text:()=>Zy});var Po={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},Z={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"};function Ht(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function Sl(r){var e=Po[r.type],t=r.getParent();if(!e)throw new Error("the type "+r.type+" is not supported by svg");var i=Ht(e);if(r.get("id")&&(i.id=r.get("id")),r.set("el",i),r.set("attrs",{}),t){var a=t.get("el");a||(a=t.createDom(),t.set("el",a)),a.appendChild(i)}return i}function Al(r,e){var t=r.get("el"),i=Tf(t.children).sort(e),a=document.createDocumentFragment();i.forEach(function(n){a.appendChild(n)}),t.appendChild(a)}function _y(r,e){var t=r.parentNode,i=Array.from(t.childNodes).filter(function(s){return s.nodeType===1&&s.nodeName.toLowerCase()!=="defs"}),a=i[e],n=i.indexOf(r);if(a){if(n>e)t.insertBefore(r,a);else if(n<e){var o=i[e+1];o?t.insertBefore(r,o):t.appendChild(r)}}else t.appendChild(r)}function Ry(r,e){var t=r.cfg.el,i=r.attr(),a={dx:i.shadowOffsetX,dy:i.shadowOffsetY,blur:i.shadowBlur,color:i.shadowColor};if(!a.dx&&!a.dy&&!a.blur&&!a.color)t.removeAttribute("filter");else{var n=e.find("filter",a);n||(n=e.addShadow(a)),t.setAttribute("filter","url(#"+n+")")}}function cr(r){var e=r.attr().matrix;if(e){for(var t=r.cfg.el,i=[],a=0;a<9;a+=3)i.push(e[a]+","+e[a+1]);i=i.join(","),i.indexOf("NaN")===-1?t.setAttribute("transform","matrix("+i+")"):console.warn("invalid matrix:",e)}}function Gr(r,e){var t=r.getClip(),i=r.get("el");if(!t)i.removeAttribute("clip-path");else if(t&&!i.hasAttribute("clip-path")){Sl(t),t.createPath(e);var a=e.addClip(t);i.setAttribute("clip-path","url(#"+a+")")}}function bl(r,e){e.forEach(function(t){t.draw(r)})}function Tl(r,e){var t=r.get("canvas");if(t&&t.get("autoDraw")){var i=t.get("context"),a=r.getParent(),n=a?a.getChildren():[t],o=r.get("el");if(e==="remove"){var s=r.get("isClipShape");if(s){var l=o&&o.parentNode,f=l&&l.parentNode;l&&f&&f.removeChild(l)}else o&&o.parentNode&&o.parentNode.removeChild(o)}else if(e==="show")o.setAttribute("visibility","visible");else if(e==="hide")o.setAttribute("visibility","hidden");else if(e==="zIndex")_y(o,n.indexOf(r));else if(e==="sort"){var u=r.get("children");u&&u.length&&Al(r,function(h,c){return u.indexOf(h)-u.indexOf(c)?1:0})}else e==="clear"?o&&(o.innerHTML=""):e==="matrix"?cr(r):e==="clip"?Gr(r,i):e==="attr"||e==="add"&&r.draw(i)}}var yL=function(r){S(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.isEntityGroup=function(){return!0},e.prototype.createDom=function(){var t=Ht("g");this.set("el",t);var i=this.getParent();if(i){var a=i.get("el");a||(a=i.createDom(),i.set("el",a)),a.appendChild(t)}return t},e.prototype.afterAttrsChange=function(t){r.prototype.afterAttrsChange.call(this,t);var i=this.get("canvas");if(i&&i.get("autoDraw")){var a=i.get("context");this.createPath(a,t)}},e.prototype.onCanvasChange=function(t){Tl(this,t)},e.prototype.getShapeBase=function(){return Yr},e.prototype.getGroupBase=function(){return e},e.prototype.draw=function(t){var i=this.getChildren(),a=this.get("el");this.get("destroyed")?a&&a.parentNode.removeChild(a):(a||this.createDom(),Gr(this,t),this.createPath(t),i.length&&bl(t,i))},e.prototype.createPath=function(t,i){var a=this.attr(),n=this.get("el");M(i||a,function(o,s){Z[s]&&n.setAttribute(Z[s],o)}),cr(this)},e}(Jr),Ja=yL;var xL=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="svg",t.canFill=!1,t.canStroke=!1,t}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return d(d({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},e.prototype.afterAttrsChange=function(t){r.prototype.afterAttrsChange.call(this,t);var i=this.get("canvas");if(i&&i.get("autoDraw")){var a=i.get("context");this.draw(a,t)}},e.prototype.getShapeBase=function(){return Yr},e.prototype.getGroupBase=function(){return Ja},e.prototype.onCanvasChange=function(t){Tl(this,t)},e.prototype.calculateBBox=function(){var t=this.get("el"),i=null;if(t)i=t.getBBox();else{var a=ei(this.get("type"));a&&(i=a(this))}if(i){var n=i.x,o=i.y,s=i.width,l=i.height,f=this.getHitLineWidth(),u=f/2,h=n-u,c=o-u,p=n+s+u,v=o+l+u;return{x:h,y:c,minX:h,minY:c,maxX:p,maxY:v,width:s+f,height:l+f}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},e.prototype.isFill=function(){var t=this.attr(),i=t.fill,a=t.fillStyle;return(i||a||this.isClipShape())&&this.canFill},e.prototype.isStroke=function(){var t=this.attr(),i=t.stroke,a=t.strokeStyle;return(i||a)&&this.canStroke},e.prototype.draw=function(t,i){var a=this.get("el");this.get("destroyed")?a&&a.parentNode.removeChild(a):(a||Sl(this),Gr(this,t),this.createPath(t,i),this.shadow(t,i),this.strokeAndFill(t,i),this.transform(i))},e.prototype.createPath=function(t,i){},e.prototype.strokeAndFill=function(t,i){var a=i||this.attr(),n=a.fill,o=a.fillStyle,s=a.stroke,l=a.strokeStyle,f=a.fillOpacity,u=a.strokeOpacity,h=a.lineWidth,c=this.get("el");this.canFill&&(i?"fill"in a?this._setColor(t,"fill",n):"fillStyle"in a&&this._setColor(t,"fill",o):this._setColor(t,"fill",n||o),f&&c.setAttribute(Z.fillOpacity,f)),this.canStroke&&h>0&&(i?"stroke"in a?this._setColor(t,"stroke",s):"strokeStyle"in a&&this._setColor(t,"stroke",l):this._setColor(t,"stroke",s||l),u&&c.setAttribute(Z.strokeOpacity,u),h&&c.setAttribute(Z.lineWidth,h))},e.prototype._setColor=function(t,i,a){var n=this.get("el");if(!a){n.setAttribute(Z[i],"none");return}if(a=a.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(a)){var o=t.find("gradient",a);o||(o=t.addGradient(a)),n.setAttribute(Z[i],"url(#"+o+")")}else if(/^[p,P]{1}[\s]*\(/.test(a)){var o=t.find("pattern",a);o||(o=t.addPattern(a)),n.setAttribute(Z[i],"url(#"+o+")")}else n.setAttribute(Z[i],a)},e.prototype.shadow=function(t,i){var a=this.attr(),n=i||a,o=n.shadowOffsetX,s=n.shadowOffsetY,l=n.shadowBlur,f=n.shadowColor;(o||s||l||f)&&Ry(this,t)},e.prototype.transform=function(t){var i=this.attr(),a=(t||i).matrix;a&&cr(this)},e.prototype.isInShape=function(t,i){return this.isPointInPath(t,i)},e.prototype.isPointInPath=function(t,i){var a=this.get("el"),n=this.get("canvas"),o=n.get("el").getBoundingClientRect(),s=t+o.left,l=i+o.top,f=document.elementFromPoint(s,l);return!!(f&&f.isEqualNode(a))},e.prototype.getHitLineWidth=function(){var t=this.attrs,i=t.lineWidth,a=t.lineAppendWidth;return this.isStroke()?i+a:0},e}(ti),Pt=xL;var CL=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="circle",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return d(d({},t),{x:0,y:0,r:0})},e.prototype.createPath=function(t,i){var a=this.attr(),n=this.get("el");M(i||a,function(o,s){s==="x"||s==="y"?n.setAttribute("c"+s,o):Z[s]&&n.setAttribute(Z[s],o)})},e}(Pt),Dy=CL;var wL=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="dom",t.canFill=!1,t.canStroke=!1,t}return e.prototype.createPath=function(t,i){var a=this.attr(),n=this.get("el");if(M(i||a,function(f,u){Z[u]&&n.setAttribute(Z[u],f)}),typeof a.html=="function"){var o=a.html.call(this,a);if(o instanceof Element||o instanceof HTMLDocument){for(var s=n.childNodes,l=s.length-1;l>=0;l--)n.removeChild(s[l]);n.appendChild(o)}else n.innerHTML=o}else n.innerHTML=a.html},e}(Pt),Ny=wL;var ML=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="ellipse",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return d(d({},t),{x:0,y:0,rx:0,ry:0})},e.prototype.createPath=function(t,i){var a=this.attr(),n=this.get("el");M(i||a,function(o,s){s==="x"||s==="y"?n.setAttribute("c"+s,o):Z[s]&&n.setAttribute(Z[s],o)})},e}(Pt),Gy=ML;var SL=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="image",t.canFill=!1,t.canStroke=!1,t}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return d(d({},t),{x:0,y:0,width:0,height:0})},e.prototype.createPath=function(t,i){var a=this,n=this.attr(),o=this.get("el");M(i||n,function(s,l){l==="img"?a._setImage(n.img):Z[l]&&o.setAttribute(Z[l],s)})},e.prototype.setAttr=function(t,i){this.attrs[t]=i,t==="img"&&this._setImage(i)},e.prototype._setImage=function(t){var i=this.attr(),a=this.get("el");if(G(t))a.setAttribute("href",t);else if(t instanceof window.Image)i.width||(a.setAttribute("width",t.width),this.attr("width",t.width)),i.height||(a.setAttribute("height",t.height),this.attr("height",t.height)),a.setAttribute("href",t.src);else if(t instanceof HTMLElement&&G(t.nodeName)&&t.nodeName.toUpperCase()==="CANVAS")a.setAttribute("href",t.toDataURL());else if(t instanceof ImageData){var n=document.createElement("canvas");n.setAttribute("width",""+t.width),n.setAttribute("height",""+t.height),n.getContext("2d").putImageData(t,0,0),i.width||(a.setAttribute("width",""+t.width),this.attr("width",t.width)),i.height||(a.setAttribute("height",""+t.height),this.attr("height",t.height)),a.setAttribute("href",n.toDataURL())}},e}(Pt),Yy=SL;var AL=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="line",t.canFill=!1,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return d(d({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},e.prototype.createPath=function(t,i){var a=this.attr(),n=this.get("el");M(i||a,function(o,s){if(s==="startArrow"||s==="endArrow")if(o){var l=K(o)?t.addArrow(a,Z[s]):t.getDefaultArrow(a,Z[s]);n.setAttribute(Z[s],"url(#"+l+")")}else n.removeAttribute(Z[s]);else Z[s]&&n.setAttribute(Z[s],o)})},e.prototype.getTotalLength=function(){var t=this.attr(),i=t.x1,a=t.y1,n=t.x2,o=t.y2;return yt.length(i,a,n,o)},e.prototype.getPoint=function(t){var i=this.attr(),a=i.x1,n=i.y1,o=i.x2,s=i.y2;return yt.pointAt(a,n,o,s,t)},e}(Pt),Hy=AL;var El={circle:function(r,e,t){return[["M",r,e],["m",-t,0],["a",t,t,0,1,0,t*2,0],["a",t,t,0,1,0,-t*2,0]]},square:function(r,e,t){return[["M",r-t,e-t],["L",r+t,e-t],["L",r+t,e+t],["L",r-t,e+t],["Z"]]},diamond:function(r,e,t){return[["M",r-t,e],["L",r,e-t],["L",r+t,e],["L",r,e+t],["Z"]]},triangle:function(r,e,t){var i=t*Math.sin(.3333333333333333*Math.PI);return[["M",r-t,e+i],["L",r,e-i],["L",r+t,e+i],["z"]]},triangleDown:function(r,e,t){var i=t*Math.sin(.3333333333333333*Math.PI);return[["M",r-t,e-i],["L",r+t,e-i],["L",r,e+i],["Z"]]}},lc={get:function(r){return El[r]},register:function(r,e){El[r]=e},remove:function(r){delete El[r]},getAll:function(){return El}};var bL=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="marker",t.canFill=!0,t.canStroke=!0,t}return e.prototype.createPath=function(t){var i=this.get("el");i.setAttribute("d",this._assembleMarker())},e.prototype._assembleMarker=function(){var t=this._getPath();return B(t)?t.map(function(i){return i.join(" ")}).join(""):t},e.prototype._getPath=function(){var t=this.attr(),i=t.x,a=t.y,n=t.r||t.radius,o=t.symbol||"circle",s;return D(o)?s=o:s=lc.get(o),s?s(i,a,n):(console.warn(s+" symbol is not exist."),null)},e.symbolsFactory=lc,e}(Pt),Vy=bL;var TL=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="path",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return d(d({},t),{startArrow:!1,endArrow:!1})},e.prototype.createPath=function(t,i){var a=this,n=this.attr(),o=this.get("el");M(i||n,function(s,l){if(l==="path"&&B(s))o.setAttribute("d",a._formatPath(s));else if(l==="startArrow"||l==="endArrow")if(s){var f=K(s)?t.addArrow(n,Z[l]):t.getDefaultArrow(n,Z[l]);o.setAttribute(Z[l],"url(#"+f+")")}else o.removeAttribute(Z[l]);else Z[l]&&o.setAttribute(Z[l],s)})},e.prototype._formatPath=function(t){var i=t.map(function(a){return a.join(" ")}).join("");return~i.indexOf("NaN")?"":i},e.prototype.getTotalLength=function(){var t=this.get("el");return t?t.getTotalLength():null},e.prototype.getPoint=function(t){var i=this.get("el"),a=this.getTotalLength();if(a===0)return null;var n=i?i.getPointAtLength(t*a):null;return n?{x:n.x,y:n.y}:null},e}(Pt),zy=TL;var EL=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="polygon",t.canFill=!0,t.canStroke=!0,t}return e.prototype.createPath=function(t,i){var a=this.attr(),n=this.get("el");M(i||a,function(o,s){s==="points"&&B(o)&&o.length>=2?n.setAttribute("points",o.map(function(l){return l[0]+","+l[1]}).join(" ")):Z[s]&&n.setAttribute(Z[s],o)})},e}(Pt),Xy=EL;var LL=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="polyline",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return d(d({},t),{startArrow:!1,endArrow:!1})},e.prototype.onAttrChange=function(t,i,a){r.prototype.onAttrChange.call(this,t,i,a),["points"].indexOf(t)!==-1&&this._resetCache()},e.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},e.prototype.createPath=function(t,i){var a=this.attr(),n=this.get("el");M(i||a,function(o,s){s==="points"&&B(o)&&o.length>=2?n.setAttribute("points",o.map(function(l){return l[0]+","+l[1]}).join(" ")):Z[s]&&n.setAttribute(Z[s],o)})},e.prototype.getTotalLength=function(){var t=this.attr().points,i=this.get("totalLength");return I(i)?(this.set("totalLength",ya.length(t)),this.get("totalLength")):i},e.prototype.getPoint=function(t){var i=this.attr().points,a=this.get("tCache");a||(this._setTcache(),a=this.get("tCache"));var n,o;return M(a,function(s,l){t>=s[0]&&t<=s[1]&&(n=(t-s[0])/(s[1]-s[0]),o=l)}),yt.pointAt(i[o][0],i[o][1],i[o+1][0],i[o+1][1],n)},e.prototype._setTcache=function(){var t=this.attr().points;if(!(!t||t.length===0)){var i=this.getTotalLength();if(!(i<=0)){var a=0,n=[],o,s;M(t,function(l,f){t[f+1]&&(o=[],o[0]=a/i,s=yt.length(l[0],l[1],t[f+1][0],t[f+1][1]),a+=s,o[1]=a/i,n.push(o))}),this.set("tCache",n)}}},e.prototype.getStartTangent=function(){var t=this.attr().points,i=[];return i.push([t[1][0],t[1][1]]),i.push([t[0][0],t[0][1]]),i},e.prototype.getEndTangent=function(){var t=this.attr().points,i=t.length-1,a=[];return a.push([t[i-1][0],t[i-1][1]]),a.push([t[i][0],t[i][1]]),a},e}(Pt),Wy=LL;function qy(r){var e=0,t=0,i=0,a=0;return B(r)?r.length===1?e=t=i=a=r[0]:r.length===2?(e=i=r[0],t=a=r[1]):r.length===3?(e=r[0],t=a=r[1],i=r[2]):(e=r[0],t=r[1],i=r[2],a=r[3]):e=t=i=a=r,{r1:e,r2:t,r3:i,r4:a}}var IL=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="rect",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return d(d({},t),{x:0,y:0,width:0,height:0,radius:0})},e.prototype.createPath=function(t,i){var a=this,n=this.attr(),o=this.get("el"),s=!1,l=["x","y","width","height","radius"];M(i||n,function(f,u){l.indexOf(u)!==-1&&!s?(o.setAttribute("d",a._assembleRect(n)),s=!0):l.indexOf(u)===-1&&Z[u]&&o.setAttribute(Z[u],f)})},e.prototype._assembleRect=function(t){var i=t.x,a=t.y,n=t.width,o=t.height,s=t.radius;if(!s)return"M "+i+","+a+" l "+n+",0 l 0,"+o+" l"+-n+" 0 z";var l=qy(s);B(s)?s.length===1?l.r1=l.r2=l.r3=l.r4=s[0]:s.length===2?(l.r1=l.r3=s[0],l.r2=l.r4=s[1]):s.length===3?(l.r1=s[0],l.r2=l.r4=s[1],l.r3=s[2]):(l.r1=s[0],l.r2=s[1],l.r3=s[2],l.r4=s[3]):l.r1=l.r2=l.r3=l.r4=s;var f=[["M "+(i+l.r1)+","+a],["l "+(n-l.r1-l.r2)+",0"],["a "+l.r2+","+l.r2+",0,0,1,"+l.r2+","+l.r2],["l 0,"+(o-l.r2-l.r3)],["a "+l.r3+","+l.r3+",0,0,1,"+-l.r3+","+l.r3],["l "+(l.r3+l.r4-n)+",0"],["a "+l.r4+","+l.r4+",0,0,1,"+-l.r4+","+-l.r4],["l 0,"+(l.r4+l.r1-o)],["a "+l.r1+","+l.r1+",0,0,1,"+l.r1+","+-l.r1],["z"]];return f.join(" ")},e}(Pt),Uy=IL;var jy=.3,PL={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},BL={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},kL={left:"left",start:"left",center:"middle",right:"end",end:"end"},OL=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="text",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return d(d({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},e.prototype.createPath=function(t,i){var a=this,n=this.attr(),o=this.get("el");this._setFont(),M(i||n,function(s,l){l==="text"?a._setText(""+s):l==="matrix"&&s?cr(a):Z[l]&&o.setAttribute(Z[l],s)}),o.setAttribute("paint-order","stroke"),o.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},e.prototype._setFont=function(){var t=this.get("el"),i=this.attr(),a=i.textBaseline,n=i.textAlign,o=rs();o&&o.name==="firefox"?t.setAttribute("dominant-baseline",BL[a]||"alphabetic"):t.setAttribute("alignment-baseline",PL[a]||"baseline"),t.setAttribute("text-anchor",kL[n]||"left")},e.prototype._setText=function(t){var i=this.get("el"),a=this.attr(),n=a.x,o=a.textBaseline,s=o===void 0?"bottom":o;if(!t)i.innerHTML="";else if(~t.indexOf(`
`)){var l=t.split(`
`),f=l.length-1,u="";M(l,function(h,c){c===0?s==="alphabetic"?u+='<tspan x="'+n+'" dy="'+-f+'em">'+h+"</tspan>":s==="top"?u+='<tspan x="'+n+'" dy="0.9em">'+h+"</tspan>":s==="middle"?u+='<tspan x="'+n+'" dy="'+-(f-1)/2+'em">'+h+"</tspan>":s==="bottom"?u+='<tspan x="'+n+'" dy="-'+(f+jy)+'em">'+h+"</tspan>":s==="hanging"&&(u+='<tspan x="'+n+'" dy="'+(-(f-1)-jy)+'em">'+h+"</tspan>"):u+='<tspan x="'+n+'" dy="1em">'+h+"</tspan>"}),i.innerHTML=u}else i.innerHTML=t},e}(Pt),Zy=OL;var FL=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,_L=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,RL=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function Qy(r){var e=r.match(RL);if(!e)return"";var t="";return e.sort(function(i,a){return i=i.split(":"),a=a.split(":"),Number(i[0])-Number(a[0])}),M(e,function(i){i=i.split(":"),t+='<stop offset="'+i[0]+'" stop-color="'+i[1]+'"></stop>'}),t}function DL(r,e){var t=FL.exec(r),i=Wr(qr(parseFloat(t[1])),Math.PI*2),a=t[2],n,o;i>=0&&i<.5*Math.PI?(n={x:0,y:0},o={x:1,y:1}):.5*Math.PI<=i&&i<Math.PI?(n={x:1,y:0},o={x:0,y:1}):Math.PI<=i&&i<1.5*Math.PI?(n={x:1,y:1},o={x:0,y:0}):(n={x:0,y:1},o={x:1,y:0});var s=Math.tan(i),l=s*s,f=(o.x-n.x+s*(o.y-n.y))/(l+1)+n.x,u=s*(o.x-n.x+s*(o.y-n.y))/(l+1)+n.y;e.setAttribute("x1",n.x),e.setAttribute("y1",n.y),e.setAttribute("x2",f),e.setAttribute("y2",u),e.innerHTML=Qy(a)}function NL(r,e){var t=_L.exec(r),i=parseFloat(t[1]),a=parseFloat(t[2]),n=parseFloat(t[3]),o=t[4];e.setAttribute("cx",i),e.setAttribute("cy",a),e.setAttribute("r",n),e.innerHTML=Qy(o)}var GL=function(){function r(e){this.cfg={};var t=null,i=Zt("gradient_");return e.toLowerCase()[0]==="l"?(t=Ht("linearGradient"),DL(e,t)):(t=Ht("radialGradient"),NL(e,t)),t.setAttribute("id",i),this.el=t,this.id=i,this.cfg=e,this}return r.prototype.match=function(e,t){return this.cfg===t},r}(),$y=GL;var YL={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},HL={x:"-40%",y:"-40%",width:"200%",height:"200%"},VL=function(){function r(e){this.type="filter",this.cfg={},this.type="filter";var t=Ht("filter");return M(HL,function(i,a){t.setAttribute(a,i)}),this.el=t,this.id=Zt("filter_"),this.el.id=this.id,this.cfg=e,this._parseShadow(e,t),this}return r.prototype.match=function(e,t){if(this.type!==e)return!1;var i=!0,a=this.cfg;return M(Object.keys(a),function(n){if(a[n]!==t[n])return i=!1,!1}),i},r.prototype.update=function(e,t){var i=this.cfg;return i[YL[e]]=t,this._parseShadow(i,this.el),this},r.prototype._parseShadow=function(e,t){var i=`<feDropShadow
      dx="`+(e.dx||0)+`"
      dy="`+(e.dy||0)+`"
      stdDeviation="`+(e.blur?e.blur/10:0)+`"
      flood-color="`+(e.color?e.color:"#000")+`"
      flood-opacity="`+(e.opacity?e.opacity:1)+`"
      />`;t.innerHTML=i},r}(),Ky=VL;var zL=function(){function r(e,t){this.cfg={};var i=Ht("marker"),a=Zt("marker_");i.setAttribute("id",a);var n=Ht("path");n.setAttribute("stroke",e.stroke||"none"),n.setAttribute("fill",e.fill||"none"),i.appendChild(n),i.setAttribute("overflow","visible"),i.setAttribute("orient","auto-start-reverse"),this.el=i,this.child=n,this.id=a;var o=e[t==="marker-start"?"startArrow":"endArrow"];return this.stroke=e.stroke||"#000",o===!0?this._setDefaultPath(t,n):(this.cfg=o,this._setMarker(e.lineWidth,n)),this}return r.prototype.match=function(){return!1},r.prototype._setDefaultPath=function(e,t){var i=this.el;t.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),i.setAttribute("refX",""+10*Math.cos(Math.PI/6)),i.setAttribute("refY","5")},r.prototype._setMarker=function(e,t){var i=this.el,a=this.cfg.path,n=this.cfg.d;B(a)&&(a=a.map(function(o){return o.join(" ")}).join("")),t.setAttribute("d",a),i.appendChild(t),n&&i.setAttribute("refX",""+n/e)},r.prototype.update=function(e){var t=this.child;t.attr?t.attr("fill",e):t.setAttribute("fill",e)},r}(),fc=zL;var XL=function(){function r(e){this.type="clip",this.cfg={};var t=Ht("clipPath");this.el=t,this.id=Zt("clip_"),t.id=this.id;var i=e.cfg.el;return t.appendChild(i),this.cfg=e,this}return r.prototype.match=function(){return!1},r.prototype.remove=function(){var e=this.el;e.parentNode.removeChild(e)},r}(),Jy=XL;var WL=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,qL=function(){function r(e){this.cfg={};var t=Ht("pattern");t.setAttribute("patternUnits","userSpaceOnUse");var i=Ht("image");t.appendChild(i);var a=Zt("pattern_");t.id=a,this.el=t,this.id=a,this.cfg=e;var n=WL.exec(e),o=n[2];i.setAttribute("href",o);var s=new Image;o.match(/^data:/i)||(s.crossOrigin="Anonymous"),s.src=o;function l(){t.setAttribute("width",""+s.width),t.setAttribute("height",""+s.height)}return s.complete?l():(s.onload=l,s.src=s.src),this}return r.prototype.match=function(e,t){return this.cfg===t},r}(),tx=qL;var UL=function(){function r(e){var t=Ht("defs"),i=Zt("defs_");t.id=i,e.appendChild(t),this.children=[],this.defaultArrow={},this.el=t,this.canvas=e}return r.prototype.find=function(e,t){for(var i=this.children,a=null,n=0;n<i.length;n++)if(i[n].match(e,t)){a=i[n].id;break}return a},r.prototype.findById=function(e){for(var t=this.children,i=null,a=0;a<t.length;a++)if(t[a].id===e){i=t[a];break}return i},r.prototype.add=function(e){this.children.push(e),e.canvas=this.canvas,e.parent=this},r.prototype.getDefaultArrow=function(e,t){var i=e.stroke||e.strokeStyle;if(this.defaultArrow[i])return this.defaultArrow[i].id;var a=new fc(e,t);return this.defaultArrow[i]=a,this.el.appendChild(a.el),this.add(a),a.id},r.prototype.addGradient=function(e){var t=new $y(e);return this.el.appendChild(t.el),this.add(t),t.id},r.prototype.addArrow=function(e,t){var i=new fc(e,t);return this.el.appendChild(i.el),this.add(i),i.id},r.prototype.addShadow=function(e){var t=new Ky(e);return this.el.appendChild(t.el),this.add(t),t.id},r.prototype.addPattern=function(e){var t=new tx(e);return this.el.appendChild(t.el),this.add(t),t.id},r.prototype.addClip=function(e){var t=new Jy(e);return this.el.appendChild(t.el),this.add(t),t.id},r}(),ex=UL;var jL=function(r){S(e,r);function e(t){return r.call(this,d(d({},t),{autoDraw:!0,renderer:"svg"}))||this}return e.prototype.getShapeBase=function(){return Yr},e.prototype.getGroupBase=function(){return Ja},e.prototype.getShape=function(t,i,a){var n=a.target||a.srcElement;if(!Po[n.tagName]){for(var o=n.parentNode;o&&!Po[o.tagName];)o=o.parentNode;n=o}return this.find(function(s){return s.get("el")===n})},e.prototype.createDom=function(){var t=Ht("svg"),i=new ex(t);return t.setAttribute("width",""+this.get("width")),t.setAttribute("height",""+this.get("height")),this.set("context",i),t},e.prototype.onCanvasChange=function(t){var i=this.get("context"),a=this.get("el");if(t==="sort"){var n=this.get("children");n&&n.length&&Al(this,function(s,l){return n.indexOf(s)-n.indexOf(l)?1:0})}else if(t==="clear"){if(a){a.innerHTML="";var o=i.el;o.innerHTML="",a.appendChild(o)}}else t==="matrix"?cr(this):t==="clip"?Gr(this,i):t==="changeSize"&&(a.setAttribute("width",""+this.get("width")),a.setAttribute("height",""+this.get("height")))},e.prototype.draw=function(){var t=this.get("context"),i=this.getChildren();Gr(this,t),i.length&&bl(t,i)},e}(Gi),rx=jL;var ZL="0.5.6";var QL=function(r){S(e,r);function e(t){var i=r.call(this,t)||this;i.type="path",i.shapeType="line";var a=t.connectNulls,n=a===void 0?!1:a,o=t.showSinglePoint,s=o===void 0?!0:o;return i.connectNulls=n,i.showSinglePoint=s,i}return e.prototype.updateElements=function(t,i){var a,n,o,s,l,f;i===void 0&&(i=!1);for(var u=new Map,h=new Map,c=[],p=0,v=0;v<t.length;v++){var m=t[v],g=this.getElementId(m);c.push(g),u.set(g,m),h.set(g,p),p++}this.elements=new Array(p);var y=ol(this.lastElementsMap,c),w=y.added,x=y.updated,C=y.removed;try{for(var A=j(w),T=A.next();!T.done;T=A.next()){var g=T.value,m=u.get(g),E=this.getShapeFactory(),k=this.getShapeInfo(m),v=h.get(g),P=new Mo({shapeFactory:E,container:this.container,offscreenGroup:this.getOffscreenGroup(),elementIndex:v});P.geometry=this,P.animate=this.animateOption,P.draw(k,i),this.elementsMap[g]=P,this.elements[v]=P}}catch(Q){a={error:Q}}finally{try{T&&!T.done&&(n=A.return)&&n.call(A)}finally{if(a)throw a.error}}try{for(var L=j(x),R=L.next();!R.done;R=L.next()){var g=R.value,m=u.get(g),P=this.lastElementsMap[g],v=h.get(g),k=this.getShapeInfo(m),N=P.getModel();(this.isCoordinateChanged||nl(N,k))&&(P.animate=this.animateOption,P.update(k)),this.elementsMap[g]=P,this.elements[v]=P}}catch(Q){o={error:Q}}finally{try{R&&!R.done&&(s=L.return)&&s.call(L)}finally{if(o)throw o.error}}try{for(var H=j(C),V=H.next();!V.done;V=H.next()){var g=V.value,P=this.lastElementsMap[g];P.animate=this.animateOption,P.destroy()}}catch(Q){l={error:Q}}finally{try{V&&!V.done&&(f=H.return)&&f.call(H)}finally{if(l)throw l.error}}},e.prototype.getPointsAndData=function(t){for(var i=[],a=[],n=0,o=t.length;n<o;n++){var s=t[n];i.push({x:s.x,y:s.y}),a.push(s[rt])}return{points:i,data:a}},e.prototype.getShapeInfo=function(t){var i=this.getDrawCfg(t[0]),a=this.getPointsAndData(t),n=a.points,o=a.data;return i.mappingData=t,i.data=o,i.isStack=!!this.getAdjust("stack"),i.points=n,i.connectNulls=this.connectNulls,i.showSinglePoint=this.showSinglePoint,i},e}(Jt),tn=QL;function $L(r,e,t,i,a){var n=[];if(r.length){for(var o=[],s=[],l=0,f=r.length;l<f;l++){var u=r[l];o.push(u[1]),s.push(u[0])}s=s.reverse(),M([o,s],function(h,c){var p=[],v=i.parsePoints(h),m=v[0];o.length===1&&s.length===1?p=c===0?[["M",m.x-.5,m.y],["L",m.x+.5,m.y]]:[["L",m.x+.5,m.y],["L",m.x-.5,m.y]]:(e&&v.push({x:m.x,y:m.y}),t?p=ea(v,!1,a):p=Pr(v,!1),c>0&&(p[0][0]="L")),n=n.concat(p)}),n.push(["Z"])}return n}function Ai(r,e,t,i,a){for(var n=tt(r,e,!e,"lineWidth"),o=r.connectNulls,s=r.isInCircle,l=r.points,f=r.showSinglePoint,u=aa(l,o,f),h=[],c=0,p=u.length;c<p;c++){var v=u[c];h=h.concat($L(v,s,t,i,a))}return n.path=h,n}function Ll(r){var e=r.start,t=r.end;return[[e.x,t.y],[t.x,e.y]]}var Let=Kt("area",{defaultShapeType:"area",getDefaultPoints:function(r){var e=r.x,t=r.y0,i=B(r.y)?r.y:[t,r.y];return i.map(function(a){return{x:e,y:a}})}});q("area","area",{draw:function(r,e){var t=Ai(r,!1,!1,this),i=e.addShape({type:"path",attrs:t,name:"area"});return i},getMarker:function(r){var e=r.color;return{symbol:function(t,i,a){return a===void 0&&(a=5.5),[["M",t-a,i-4],["L",t+a,i-4],["L",t+a,i+4],["L",t-a,i+4],["Z"]]},style:{r:5,fill:e,fillOpacity:1}}}});var KL=function(r){S(e,r);function e(t){var i=r.call(this,t)||this;i.type="area",i.shapeType="area",i.generatePoints=!0,i.startOnZero=!0;var a=t.startOnZero,n=a===void 0?!0:a,o=t.sortable,s=o===void 0?!1:o,l=t.showSinglePoint,f=l===void 0?!1:l;return i.startOnZero=n,i.sortable=s,i.showSinglePoint=f,i}return e.prototype.getPointsAndData=function(t){for(var i=[],a=[],n=0,o=t.length;n<o;n++){var s=t[n];i.push(s.points),a.push(s[rt])}return{points:i,data:a}},e.prototype.getYMinValue=function(){if(this.startOnZero)return r.prototype.getYMinValue.call(this);var t=this.getYScale();return t.min},e}(tn),ix=KL;var Yet=Kt("edge",{defaultShapeType:"line",getDefaultPoints:function(r){return Za(r)}});q("edge","line",{draw:function(r,e){var t=tt(r,!0,!1,"lineWidth"),i=Pr(this.parsePoints(r.points),this.coordinate.isPolar);return e.addShape("path",{attrs:d(d({},t),{path:i})})},getMarker:function(r){return{symbol:"circle",style:{r:4.5,fill:r.color}}}});var JL=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="edge",t.shapeType="edge",t.generatePoints=!0,t}return e}(Jt),ax=JL;var t2=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="heatmap",t.paletteCache={},t}return e.prototype.updateElements=function(t,i){i===void 0&&(i=!1);for(var a=0;a<t.length;a++){var n=t[a],o=this.prepareRange(n),s=this.prepareSize(),l=b(this.styleOption,["cfg","shadowBlur"]);z(l)||(l=s/2),this.prepareGreyScaleBlurredCircle(s,l),this.drawWithRange(n,o,s,l)}},e.prototype.color=function(t,i){return this.createAttrOption("color",t,typeof i!="function"?i:""),this},e.prototype.clear=function(){r.prototype.clear.call(this),this.clearShadowCanvasCtx(),this.paletteCache={}},e.prototype.prepareRange=function(t){var i=this.getAttribute("color"),a=i.getFields()[0],n=1/0,o=-1/0;return t.forEach(function(s){var l=s[rt][a];l>o&&(o=l),l<n&&(n=l)}),n===o&&(n=o-1),[n,o]},e.prototype.prepareSize=function(){var t=this.getDefaultValue("size");return z(t)||(t=this.getDefaultSize()),t},e.prototype.prepareGreyScaleBlurredCircle=function(t,i){var a=this.getGrayScaleBlurredCanvas(),n=t+i,o=a.getContext("2d");a.width=a.height=n*2,o.clearRect(0,0,a.width,a.height),o.shadowOffsetX=o.shadowOffsetY=n*2,o.shadowBlur=i,o.shadowColor="black",o.beginPath(),o.arc(-n,-n,t,0,Math.PI*2,!0),o.closePath(),o.fill()},e.prototype.drawWithRange=function(t,i,a,n){var o,s,l=this.coordinate,f=l.start,u=l.end,h=this.coordinate.getWidth(),c=this.coordinate.getHeight(),p=this.getAttribute("color"),v=p.getFields()[0];this.clearShadowCanvasCtx();var m=this.getShadowCanvasCtx();i&&(t=t.filter(function(L){return L[rt][v]<=i[1]&&L[rt][v]>=i[0]}));var g=this.scales[v];try{for(var y=j(t),w=y.next();!w.done;w=y.next()){var x=w.value,C=this.getDrawCfg(x),A=C.x,T=C.y,E=g.scale(x[rt][v]);this.drawGrayScaleBlurredCircle(A-f.x,T-u.y,a+n,E,m)}}catch(L){o={error:L}}finally{try{w&&!w.done&&(s=y.return)&&s.call(y)}finally{if(o)throw o.error}}var k=m.getImageData(0,0,h,c);this.clearShadowCanvasCtx(),this.colorize(k),m.putImageData(k,0,0);var P=this.getImageShape();P.attr("x",f.x),P.attr("y",u.y),P.attr("width",h),P.attr("height",c),P.attr("img",m.canvas),P.set("origin",this.getShapeInfo(t))},e.prototype.getDefaultSize=function(){var t=this.getAttribute("position"),i=this.coordinate;return Math.min(i.getWidth()/(t.scales[0].ticks.length*4),i.getHeight()/(t.scales[1].ticks.length*4))},e.prototype.clearShadowCanvasCtx=function(){var t=this.getShadowCanvasCtx();t.clearRect(0,0,t.canvas.width,t.canvas.height)},e.prototype.getShadowCanvasCtx=function(){var t=this.shadowCanvas;return t||(t=document.createElement("canvas"),this.shadowCanvas=t),t.width=this.coordinate.getWidth(),t.height=this.coordinate.getHeight(),t.getContext("2d")},e.prototype.getGrayScaleBlurredCanvas=function(){return this.grayScaleBlurredCanvas||(this.grayScaleBlurredCanvas=document.createElement("canvas")),this.grayScaleBlurredCanvas},e.prototype.drawGrayScaleBlurredCircle=function(t,i,a,n,o){var s=this.getGrayScaleBlurredCanvas();o.globalAlpha=n,o.drawImage(s,t-a,i-a)},e.prototype.colorize=function(t){for(var i=this.getAttribute("color"),a=t.data,n=this.paletteCache,o=3;o<a.length;o+=4){var s=a[o];if(z(s)){var l=n[s]?n[s]:Ar.rgb2arr(i.gradient(s/256));a[o-3]=l[0],a[o-2]=l[1],a[o-1]=l[2],a[o]=s}}},e.prototype.getImageShape=function(){var t=this.imageShape;if(t)return t;var i=this.container;return t=i.addShape({type:"image",attrs:{}}),this.imageShape=t,t},e.prototype.getShapeInfo=function(t){var i=this.getDrawCfg(t[0]),a=t.map(function(n){return n[rt]});return d(d({},i),{mappingData:t,data:a})},e}(Jt),nx=t2;function en(r){var e,t,i=r.x,a=r.y,n=r.y0,o=r.size,s,l;B(a)?(e=_(a,2),s=e[0],l=e[1]):(s=n,l=a);var f,u;B(i)?(t=_(i,2),f=t[0],u=t[1]):(f=i-o/2,u=i+o/2);var h=[{x:f,y:s},{x:f,y:l}];return h.push({x:u,y:l},{x:u,y:s}),h}function ko(r,e){e===void 0&&(e=!0);var t=[],i=r[0];t.push(["M",i.x,i.y]);for(var a=1,n=r.length;a<n;a++)t.push(["L",r[a].x,r[a].y]);return e&&(t.push(["L",i.x,i.y]),t.push(["z"])),t}function ox(r,e){var t=0,i=0,a=0,n=0;return B(r)?r.length===1?t=i=a=n=r[0]:r.length===2?(t=a=r[0],i=n=r[1]):r.length===3?(t=r[0],i=n=r[1],a=r[2]):(t=r[0],i=r[1],a=r[2],n=r[3]):t=i=a=n=r,t+i>e&&(t=t?e/(1+i/t):0,i=e-t),a+n>e&&(a=a?e/(1+n/a):0,n=e-a),[t||0,i||0,a||0,n||0]}function Il(r,e,t){var i=[];if(t.isRect){var a=t.isTransposed?{x:t.start.x,y:e[0].y}:{x:e[0].x,y:t.start.y},n=t.isTransposed?{x:t.end.x,y:e[2].y}:{x:e[3].x,y:t.end.y},o=b(r,["background","style","radius"]);if(o){var s=t.isTransposed?Math.abs(e[0].y-e[2].y):e[2].x-e[1].x,l=t.isTransposed?t.getWidth():t.getHeight(),f=_(ox(o,Math.min(s,l)),4),u=f[0],h=f[1],c=f[2],p=f[3],v=t.isTransposed&&t.isReflect("y"),m=v?0:1,g=function(T){return v?-T:T};i.push(["M",a.x,n.y+g(u)]),u!==0&&i.push(["A",u,u,0,0,m,a.x+u,n.y]),i.push(["L",n.x-h,n.y]),h!==0&&i.push(["A",h,h,0,0,m,n.x,n.y+g(h)]),i.push(["L",n.x,a.y-g(c)]),c!==0&&i.push(["A",c,c,0,0,m,n.x-c,a.y]),i.push(["L",a.x+p,a.y]),p!==0&&i.push(["A",p,p,0,0,m,a.x,a.y-g(p)])}else i.push(["M",a.x,a.y]),i.push(["L",n.x,a.y]),i.push(["L",n.x,n.y]),i.push(["L",a.x,n.y]),i.push(["L",a.x,a.y]);i.push(["z"])}if(t.isPolar){var y=t.getCenter(),w=di(r,t),x=w.startAngle,C=w.endAngle;if(t.type!=="theta"&&!t.isTransposed)i=Oe(y.x,y.y,t.getRadius(),x,C);else{var A=function(k){return Math.pow(k,2)},u=Math.sqrt(A(y.x-e[0].x)+A(y.y-e[0].y)),h=Math.sqrt(A(y.x-e[2].x)+A(y.y-e[2].y));i=Oe(y.x,y.y,u,t.startAngle,t.endAngle,h)}}return i}function sx(r,e,t){var i=t.getWidth(),a=t.getHeight(),n=t.type==="rect",o=[],s=(r[2].x-r[1].x)/2,l=t.isTransposed?s*a/i:s*i/a;return e==="round"?(n?(o.push(["M",r[0].x,r[0].y+l]),o.push(["L",r[1].x,r[1].y-l]),o.push(["A",s,s,0,0,1,r[2].x,r[2].y-l]),o.push(["L",r[3].x,r[3].y+l]),o.push(["A",s,s,0,0,1,r[0].x,r[0].y+l])):(o.push(["M",r[0].x,r[0].y]),o.push(["L",r[1].x,r[1].y]),o.push(["A",s,s,0,0,1,r[2].x,r[2].y]),o.push(["L",r[3].x,r[3].y]),o.push(["A",s,s,0,0,1,r[0].x,r[0].y])),o.push(["z"])):o=ko(r),o}function Pl(r,e,t){var i=[];return I(e)?t?i.push(["M",r[0].x,r[0].y],["L",r[1].x,r[1].y],["L",(r[2].x+r[3].x)/2,(r[2].y+r[3].y)/2],["Z"]):i.push(["M",r[0].x,r[0].y],["L",r[1].x,r[1].y],["L",r[2].x,r[2].y],["L",r[3].x,r[3].y],["Z"]):i.push(["M",r[0].x,r[0].y],["L",r[1].x,r[1].y],["L",e[1].x,e[1].y],["L",e[0].x,e[0].y],["Z"]),i}function Bo(r,e){return[e,r]}function lx(r,e,t){var i,a,n,o,s,l,f,u=_(U([],_(r),!1),4),h=u[0],c=u[1],p=u[2],v=u[3],m=_(typeof t=="number"?Array(4).fill(t):t,4),g=m[0],y=m[1],w=m[2],x=m[3];e.isTransposed&&(i=_(Bo(c,v),2),c=i[0],v=i[1]),e.isReflect("y")&&(a=_(Bo(h,c),2),h=a[0],c=a[1],n=_(Bo(p,v),2),p=n[0],v=n[1]),e.isReflect("x")&&(o=_(Bo(h,v),2),h=o[0],v=o[1],s=_(Bo(c,p),2),c=s[0],p=s[1]);var C=[],A=function(T){return Math.abs(T)};return l=_(ox([g,y,w,x],Math.min(A(v.x-h.x),A(c.y-h.y))).map(function(T){return A(T)}),4),g=l[0],y=l[1],w=l[2],x=l[3],e.isTransposed&&(f=_([x,g,y,w],4),g=f[0],y=f[1],w=f[2],x=f[3]),h.y<c.y?(C.push(["M",v.x,v.y+w]),w!==0&&C.push(["A",w,w,0,0,0,v.x-w,v.y]),C.push(["L",h.x+x,h.y]),x!==0&&C.push(["A",x,x,0,0,0,h.x,h.y+x]),C.push(["L",c.x,c.y-g]),g!==0&&C.push(["A",g,g,0,0,0,c.x+g,c.y]),C.push(["L",p.x-y,p.y]),y!==0&&C.push(["A",y,y,0,0,0,p.x,p.y-y]),C.push(["L",v.x,v.y+w]),C.push(["z"])):v.x<h.x?(C.push(["M",p.x+y,p.y]),y!==0&&C.push(["A",y,y,0,0,0,p.x,p.y+y]),C.push(["L",v.x,v.y-w]),w!==0&&C.push(["A",w,w,0,0,0,v.x+w,v.y]),C.push(["L",h.x-x,h.y]),x!==0&&C.push(["A",x,x,0,0,0,h.x,h.y-x]),C.push(["L",c.x,c.y+g]),g!==0&&C.push(["A",g,g,0,0,0,c.x-g,c.y]),C.push(["L",p.x+y,p.y]),C.push(["z"])):(C.push(["M",c.x,c.y+g]),g!==0&&C.push(["A",g,g,0,0,1,c.x+g,c.y]),C.push(["L",p.x-y,p.y]),y!==0&&C.push(["A",y,y,0,0,1,p.x,p.y+y]),C.push(["L",v.x,v.y-w]),w!==0&&C.push(["A",w,w,0,0,1,v.x-w,v.y]),C.push(["L",h.x+x,h.y]),x!==0&&C.push(["A",x,x,0,0,1,h.x,h.y-x]),C.push(["L",c.x,c.y+g]),C.push(["z"])),C}var srt=Kt("interval",{defaultShapeType:"rect",getDefaultPoints:function(r){return en(r)}});q("interval","rect",{draw:function(r,e){var t=tt(r,!1,!0),i=e,a=r?.background;if(a){i=e.addGroup({name:"interval-group"});var n=cl(r),o=Il(r,this.parsePoints(r.points),this.coordinate);i.addShape("path",{attrs:d(d({},n),{path:o}),capture:!1,zIndex:-1,name:qa})}var s;t.radius&&this.coordinate.isRect?s=lx(this.parsePoints(r.points),this.coordinate,t.radius):s=this.parsePath(sx(r.points,t.lineCap,this.coordinate));var l=i.addShape("path",{attrs:d(d({},t),{path:s}),name:"interval"});return a?i:l},getMarker:function(r){var e=r.color,t=r.isInPolar;return t?{symbol:"circle",style:{r:4.5,fill:e}}:{symbol:"square",style:{r:4,fill:e}}}});function e2(r,e){var t=r.length,i=r;G(i[0])&&(i=r.map(function(s){return e.translate(s)}));for(var a=i[1]-i[0],n=2;n<t;n++){var o=i[n]-i[n-1];a>o&&(a=o)}return a}function r2(r,e){if(e){var t=Ft(r),i=Ut(t,e);return i.length}return r.length}function rn(r){var e=r.theme,t=r.coordinate,i=r.getXScale(),a=i.values,n=r.beforeMappingData,o=a.length,s=sr(r.coordinate),l=r.intervalPadding,f=r.dodgePadding,u=r.maxColumnWidth||e.maxColumnWidth,h=r.minColumnWidth||e.minColumnWidth,c=r.columnWidthRatio||e.columnWidthRatio,p=r.multiplePieWidthRatio||e.multiplePieWidthRatio,v=r.roseWidthRatio||e.roseWidthRatio;if(i.isLinear&&a.length>1){a.sort();var m=e2(a,i);o=(i.max-i.min)/m,a.length>o&&(o=a.length)}var g=i.range,y=1/o,w=1;if(t.isPolar?t.isTransposed&&o>1?w=p:w=v:(i.isLinear&&(y*=g[1]-g[0]),w=c),!I(l)&&l>=0){var x=l/s;y=(1-(o-1)*x)/o}else y*=w;if(r.getAdjust("dodge")){var C=r.getAdjust("dodge"),A=C.dodgeBy,T=r2(n,A);if(!I(f)&&f>=0){var E=f/s;y=(y-E*(T-1))/T}else!I(l)&&l>=0&&(y*=w),y=y/T;y=y>=0?y:0}if(!I(u)&&u>=0){var k=u/s;y>k&&(y=k)}if(!I(h)&&h>=0){var P=h/s;y<P&&(y=P)}return y}var i2=function(r){S(e,r);function e(t){var i=r.call(this,t)||this;i.type="interval",i.shapeType="interval",i.generatePoints=!0;var a=t.background;return i.background=a,i}return e.prototype.createShapePointsCfg=function(t){var i=r.prototype.createShapePointsCfg.call(this,t),a,n=this.getAttribute("size");if(n){a=this.getAttributeValues(n,t)[0];var o=this.coordinate,s=sr(o);a=a/s}else this.defaultSize||(this.defaultSize=rn(this)),a=this.defaultSize;return i.size=a,i},e.prototype.adjustScale=function(){r.prototype.adjustScale.call(this);var t=this.getYScale();if(this.coordinate.type==="theta")t.change({nice:!1,min:0,max:lg(t)});else{var i=this.scaleDefs,a=t.field,n=t.min,o=t.max,s=t.type;s!=="time"&&(n>0&&!b(i,[a,"min"])&&t.change({min:0}),o<=0&&!b(i,[a,"max"])&&t.change({max:0}))}},e.prototype.getDrawCfg=function(t){var i=r.prototype.getDrawCfg.call(this,t);return i.background=this.background,i},e}(Jt),fx=i2;var a2=function(r){S(e,r);function e(t){var i=r.call(this,t)||this;i.type="line";var a=t.sortable,n=a===void 0?!1:a;return i.sortable=n,i}return e}(tn),ux=a2;var Bl=["circle","square","bowtie","diamond","hexagon","triangle","triangle-down"],hx=["cross","tick","plus","hyphen","line"];function an(r,e,t,i,a){var n,o,s=tt(e,a,!a,"r"),l=r.parsePoints(e.points),f=l[0];if(e.isStack)f=l[1];else if(l.length>1){var u=t.addGroup();try{for(var h=j(l),c=h.next();!c.done;c=h.next()){var p=c.value;u.addShape({type:"marker",attrs:d(d(d({},s),{symbol:_e[i]||i}),p)})}}catch(v){n={error:v}}finally{try{c&&!c.done&&(o=h.return)&&o.call(h)}finally{if(n)throw n.error}}return u}return t.addShape({type:"marker",attrs:d(d(d({},s),{symbol:_e[i]||i}),f)})}var Ort=Kt("point",{defaultShapeType:"hollow-circle",getDefaultPoints:function(r){return Za(r)}});M(Bl,function(r){q("point","hollow-".concat(r),{draw:function(e,t){return an(this,e,t,r,!0)},getMarker:function(e){var t=e.color;return{symbol:_e[r]||r,style:{r:4.5,stroke:t,fill:null}}}})});var n2=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="point",t.shapeType="point",t.generatePoints=!0,t}return e.prototype.getDrawCfg=function(t){var i=r.prototype.getDrawCfg.call(this,t);return d(d({},i),{isStack:!!this.getAdjust("stack")})},e}(Jt),cx=n2;function o2(r){for(var e=r[0],t=1,i=[["M",e.x,e.y]];t<r.length;){var a=r[t];(a.x!==r[t-1].x||a.y!==r[t-1].y)&&(i.push(["L",a.x,a.y]),a.x===e.x&&a.y===e.y&&t<r.length-1&&(e=r[t+1],i.push(["Z"]),i.push(["M",e.x,e.y]),t++)),t++}return ot(nt(i),e)||i.push(["L",e.x,e.y]),i.push(["Z"]),i}var zrt=Kt("polygon",{defaultShapeType:"polygon",getDefaultPoints:function(r){var e=[];return M(r.x,function(t,i){var a=r.y[i];e.push({x:t,y:a})}),e}});q("polygon","polygon",{draw:function(r,e){if(!Gt(r.points)){var t=tt(r,!0,!0),i=this.parsePath(o2(r.points));return e.addShape("path",{attrs:d(d({},t),{path:i}),name:"polygon"})}},getMarker:function(r){var e=r.color;return{symbol:"square",style:{r:4,fill:e}}}});var s2=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="polygon",t.shapeType="polygon",t.generatePoints=!0,t}return e.prototype.createShapePointsCfg=function(t){var i=r.prototype.createShapePointsCfg.call(this,t),a=i.x,n=i.y,o;if(!(B(a)&&B(n))){var s=this.getXScale(),l=this.getYScale(),f=s.values.length,u=l.values.length,h=.5*1/f,c=.5*1/u;s.isCategory&&l.isCategory?(a=[a-h,a-h,a+h,a+h],n=[n-c,n+c,n+c,n-c]):B(a)?(o=a,a=[o[0],o[0],o[1],o[1]],n=[n-c/2,n+c/2,n+c/2,n-c/2]):B(n)&&(o=n,n=[o[0],o[1],o[1],o[0]],a=[a-h/2,a-h/2,a+h/2,a+h/2]),i.x=a,i.y=n}return i},e}(Jt),px=s2;var $rt=Kt("schema",{defaultShapeType:""});var l2=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="schema",t.shapeType="schema",t.generatePoints=!0,t}return e.prototype.createShapePointsCfg=function(t){var i=r.prototype.createShapePointsCfg.call(this,t),a,n=this.getAttribute("size");if(n){a=this.getAttributeValues(n,t)[0];var o=this.coordinate,s=sr(o);a=a/s}else this.defaultSize||(this.defaultSize=rn(this)),a=this.defaultSize;return i.size=a,i},e}(Jt),vx=l2;function f2(r){if(!B(r))return[];var e=Dt(r);return Mt(r,function(t){return t/e})}var uit=Kt("violin",{defaultShapeType:"violin",getDefaultPoints:function(r){var e=r.size/2,t=[],i=f2(r._size);return M(r.y,function(a,n){var o=i[n]*e,s=n===0,l=n===r.y.length-1;t.push({isMin:s,isMax:l,x:r.x-o,y:a}),t.unshift({isMin:s,isMax:l,x:r.x+o,y:a})}),t}});q("violin","violin",{draw:function(r,e){var t=tt(r,!0,!0),i=this.parsePath(ul(r.points));return e.addShape("path",{attrs:d(d({},t),{path:i}),name:"violin"})},getMarker:function(r){var e=r.color;return{symbol:"circle",style:{r:4,fill:e}}}});var u2=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="violin",t.shapeType="violin",t.generatePoints=!0,t}return e.prototype.createShapePointsCfg=function(t){var i=r.prototype.createShapePointsCfg.call(this,t),a,n=this.getAttribute("size");if(n){a=this.getAttributeValues(n,t)[0];var o=this.coordinate,s=sr(o);a=a/s}else this.defaultSize||(this.defaultSize=rn(this)),a=this.defaultSize;return i.size=a,i._size=b(t[rt],[this._sizeField]),i},e.prototype.initAttributes=function(){var t=this.attributeOption,i=t.size?t.size.fields[0]:this._sizeField?this._sizeField:"size";this._sizeField=i,delete t.size,r.prototype.initAttributes.call(this)},e}(Jt),mx=u2;q("area","line",{draw:function(r,e){var t=Ai(r,!0,!1,this),i=e.addShape({type:"path",attrs:t,name:"area"});return i},getMarker:function(r){var e=r.color;return{symbol:function(t,i,a){return a===void 0&&(a=5.5),[["M",t-a,i-4],["L",t+a,i-4],["L",t+a,i+4],["L",t-a,i+4],["Z"]]},style:{r:5,stroke:e,fill:null}}}});q("area","smooth",{draw:function(r,e){var t=this.coordinate,i=Ai(r,!1,!0,this,Ll(t)),a=e.addShape({type:"path",attrs:i,name:"area"});return a},getMarker:function(r){var e=r.color;return{symbol:function(t,i,a){return a===void 0&&(a=5.5),[["M",t-a,i-4],["L",t+a,i-4],["L",t+a,i+4],["L",t-a,i+4],["Z"]]},style:{r:5,fill:e,fillOpacity:1}}}});q("area","smooth-line",{draw:function(r,e){var t=this.coordinate,i=Ai(r,!0,!0,this,Ll(t)),a=e.addShape({type:"path",attrs:i,name:"area"});return a},getMarker:function(r){var e=r.color;return{symbol:function(t,i,a){return a===void 0&&(a=5.5),[["M",t-a,i-4],["L",t+a,i-4],["L",t+a,i+4],["L",t-a,i+4],["Z"]]},style:{r:5,stroke:e,fill:null}}}});function Oo(r,e){return["C",r.x*1/2+e.x*1/2,r.y,r.x*1/2+e.x*1/2,e.y,e.x,e.y]}function kl(r,e){var t=[];t.push({x:e.x,y:e.y}),t.push(r);var i=["Q"];return M(t,function(a){i.push(a.x,a.y)}),i}function h2(r,e,t){var i=kl(e,t),a=[["M",r.x,r.y]];return a.push(i),a}function c2(r,e){var t=kl(r[1],e),i=kl(r[3],e),a=[["M",r[0].x,r[0].y]];return a.push(i),a.push(["L",r[3].x,r[3].y]),a.push(["L",r[2].x,r[2].y]),a.push(t),a.push(["L",r[1].x,r[1].y]),a.push(["L",r[0].x,r[0].y]),a.push(["Z"]),a}q("edge","arc",{draw:function(r,e){var t=tt(r,!0,!1,"lineWidth"),i=r.points,a=i.length>2?"weight":"normal",n;if(r.isInCircle){var o={x:0,y:1};return a==="normal"?n=h2(i[0],i[1],o):(t.fill=t.stroke,n=c2(i,o)),n=this.parsePath(n),e.addShape("path",{attrs:d(d({},t),{path:n})})}else{if(a==="normal")return i=this.parsePoints(i),n=Hs((i[1].x+i[0].x)/2,i[0].y,Math.abs(i[1].x-i[0].x)/2,Math.PI,Math.PI*2),e.addShape("path",{attrs:d(d({},t),{path:n})});var s=Oo(i[1],i[3]),l=Oo(i[2],i[0]);return n=[["M",i[0].x,i[0].y],["L",i[1].x,i[1].y],s,["L",i[3].x,i[3].y],["L",i[2].x,i[2].y],l,["Z"]],n=this.parsePath(n),t.fill=t.stroke,e.addShape("path",{attrs:d(d({},t),{path:n})})}},getMarker:function(r){return{symbol:"circle",style:{r:4.5,fill:r.color}}}});function p2(r,e){var t=Oo(r,e),i=[["M",r.x,r.y]];return i.push(t),i}q("edge","smooth",{draw:function(r,e){var t=tt(r,!0,!1,"lineWidth"),i=r.points,a=this.parsePath(p2(i[0],i[1]));return e.addShape("path",{attrs:d(d({},t),{path:a})})},getMarker:function(r){return{symbol:"circle",style:{r:4.5,fill:r.color}}}});var Ol=1/3;function v2(r,e){var t=[];t.push({x:r.x,y:r.y*(1-Ol)+e.y*Ol}),t.push({x:e.x,y:r.y*(1-Ol)+e.y*Ol}),t.push(e);var i=[["M",r.x,r.y]];return M(t,function(a){i.push(["L",a.x,a.y])}),i}q("edge","vhv",{draw:function(r,e){var t=tt(r,!0,!1,"lineWidth"),i=r.points,a=this.parsePath(v2(i[0],i[1]));return e.addShape("path",{attrs:d(d({},t),{path:a})})},getMarker:function(r){return{symbol:"circle",style:{r:4.5,fill:r.color}}}});q("interval","funnel",{getPoints:function(r){return r.size=r.size*2,en(r)},draw:function(r,e){var t=tt(r,!1,!0),i=this.parsePath(Pl(r.points,r.nextPoints,!1)),a=e.addShape("path",{attrs:d(d({},t),{path:i}),name:"interval"});return a},getMarker:function(r){var e=r.color;return{symbol:"square",style:{r:4,fill:e}}}});q("interval","hollow-rect",{draw:function(r,e){var t=tt(r,!0,!1),i=e,a=r?.background;if(a){i=e.addGroup();var n=cl(r),o=Il(r,this.parsePoints(r.points),this.coordinate);i.addShape("path",{attrs:d(d({},n),{path:o}),capture:!1,zIndex:-1,name:qa})}var s=this.parsePath(ko(r.points)),l=i.addShape("path",{attrs:d(d({},t),{path:s}),name:"interval"});return a?i:l},getMarker:function(r){var e=r.color,t=r.isInPolar;return t?{symbol:"circle",style:{r:4.5,stroke:e,fill:null}}:{symbol:"square",style:{r:4,stroke:e,fill:null}}}});function m2(r){var e=r.x,t=r.y,i=r.y0;return B(t)?t.map(function(a,n){return{x:B(e)?e[n]:e,y:a}}):[{x:e,y:i},{x:e,y:t}]}q("interval","line",{getPoints:function(r){return m2(r)},draw:function(r,e){var t=tt(r,!0,!1,"lineWidth"),i=Xt(d({},t),["fill"]),a=this.parsePath(ko(r.points,!1)),n=e.addShape("path",{attrs:d(d({},i),{path:a}),name:"interval"});return n},getMarker:function(r){var e=r.color;return{symbol:function(t,i,a){return[["M",t,i-a],["L",t,i+a]]},style:{r:5,stroke:e}}}});q("interval","pyramid",{getPoints:function(r){return r.size=r.size*2,en(r)},draw:function(r,e){var t=tt(r,!1,!0),i=this.parsePath(Pl(r.points,r.nextPoints,!0)),a=e.addShape("path",{attrs:d(d({},t),{path:i}),name:"interval"});return a},getMarker:function(r){var e=r.color;return{symbol:"square",style:{r:4,fill:e}}}});function d2(r){var e,t=r.x,i=r.y,a=r.y0,n=r.size,o,s;B(i)?(e=_(i,2),o=e[0],s=e[1]):(o=a,s=i);var l=t+n/2,f=t-n/2;return[{x:t,y:o},{x:t,y:s},{x:f,y:o},{x:l,y:o},{x:f,y:s},{x:l,y:s}]}function g2(r){return[["M",r[0].x,r[0].y],["L",r[1].x,r[1].y],["M",r[2].x,r[2].y],["L",r[3].x,r[3].y],["M",r[4].x,r[4].y],["L",r[5].x,r[5].y]]}q("interval","tick",{getPoints:function(r){return d2(r)},draw:function(r,e){var t=tt(r,!0,!1),i=this.parsePath(g2(r.points)),a=e.addShape("path",{attrs:d(d({},t),{path:i}),name:"interval"});return a},getMarker:function(r){var e=r.color;return{symbol:function(t,i,a){return[["M",t-a/2,i-a],["L",t+a/2,i-a],["M",t,i-a],["L",t,i+a],["M",t-a/2,i+a],["L",t+a/2,i+a]]},style:{r:5,stroke:e}}}});var y2=function(r,e,t){var i=r.x,a=r.y,n=e.x,o=e.y,s;switch(t){case"hv":s=[{x:n,y:a}];break;case"vh":s=[{x:i,y:o}];break;case"hvh":var l=(n+i)/2;s=[{x:l,y:a},{x:l,y:o}];break;case"vhv":var f=(a+o)/2;s=[{x:i,y:f},{x:n,y:f}];break;default:break}return s};function x2(r,e){var t=[];return M(r,function(i,a){var n=r[a+1];if(t.push(i),n){var o=y2(i,n,e);t=t.concat(o)}}),t}function C2(r){return r.map(function(e,t){return t===0?["M",e.x,e.y]:["L",e.x,e.y]})}function w2(r,e){var t=aa(r.points,r.connectNulls,r.showSinglePoint),i=[];return M(t,function(a){var n=x2(a,e);i=i.concat(C2(n))}),d(d({},tt(r,!0,!1,"lineWidth")),{path:i})}M(["hv","vh","hvh","vhv"],function(r){q("line",r,{draw:function(e,t){var i=w2(e,r),a=t.addShape({type:"path",attrs:i,name:"line"});return a},getMarker:function(e){return pl(e,r)}})});M(hx,function(r){q("point",r,{draw:function(e,t){return an(this,e,t,r,!0)},getMarker:function(e){var t=e.color;return{symbol:_e[r],style:{r:4.5,stroke:t,fill:null}}}})});q("point","image",{draw:function(r,e){var t,i,a=tt(r,!1,!1,"r").r,n=this.parsePoints(r.points),o=n[0];if(r.isStack)o=n[1];else if(n.length>1){var s=e.addGroup();try{for(var l=j(n),f=l.next();!f.done;f=l.next()){var u=f.value;s.addShape("image",{attrs:{x:u.x-a/2,y:u.y-a,width:a,height:a,img:r.shape[1]}})}}catch(h){t={error:h}}finally{try{f&&!f.done&&(i=l.return)&&i.call(l)}finally{if(t)throw t.error}}return s}return e.addShape("image",{attrs:{x:o.x-a/2,y:o.y-a,width:a,height:a,img:r.shape[1]}})},getMarker:function(r){var e=r.color;return{symbol:"circle",style:{r:4.5,fill:e}}}});M(Bl,function(r){q("point",r,{draw:function(e,t){return an(this,e,t,r,!1)},getMarker:function(e){var t=e.color;return{symbol:_e[r]||r,style:{r:4.5,fill:t}}}})});function dx(r){var e=B(r)?r:[r],t=e[0],i=e[e.length-1],a=e.length>1?e[1]:t,n=e.length>3?e[3]:i,o=e.length>2?e[2]:a;return{min:t,max:i,min1:a,max1:n,median:o}}function gx(r,e,t){var i=t/2,a;if(B(e)){var n=dx(e),o=n.min,s=n.max,l=n.median,f=n.min1,u=n.max1,h=r-i,c=r+i;a=[[h,s],[c,s],[r,s],[r,u],[h,f],[h,u],[c,u],[c,f],[r,f],[r,o],[h,o],[c,o],[h,l],[c,l]]}else{e=I(e)?.5:e;var p=dx(r),o=p.min,s=p.max,l=p.median,f=p.min1,u=p.max1,v=e-i,m=e+i;a=[[o,v],[o,m],[o,e],[f,e],[f,v],[f,m],[u,m],[u,v],[u,e],[s,e],[s,v],[s,m],[l,v],[l,m]]}return a.map(function(g){return{x:g[0],y:g[1]}})}function M2(r){return[["M",r[0].x,r[0].y],["L",r[1].x,r[1].y],["M",r[2].x,r[2].y],["L",r[3].x,r[3].y],["M",r[4].x,r[4].y],["L",r[5].x,r[5].y],["L",r[6].x,r[6].y],["L",r[7].x,r[7].y],["L",r[4].x,r[4].y],["Z"],["M",r[8].x,r[8].y],["L",r[9].x,r[9].y],["M",r[10].x,r[10].y],["L",r[11].x,r[11].y],["M",r[12].x,r[12].y],["L",r[13].x,r[13].y]]}q("schema","box",{getPoints:function(r){var e=r.x,t=r.y,i=r.size;return gx(e,t,i)},draw:function(r,e){var t=tt(r,!0,!1),i=this.parsePath(M2(r.points)),a=e.addShape("path",{attrs:d(d({},t),{path:i,name:"schema"})});return a},getMarker:function(r){var e=r.color;return{symbol:function(t,i,a){var n=[i-6,i-3,i,i+3,i+6],o=gx(t,n,a);return[["M",o[0].x+1,o[0].y],["L",o[1].x-1,o[1].y],["M",o[2].x,o[2].y],["L",o[3].x,o[3].y],["M",o[4].x,o[4].y],["L",o[5].x,o[5].y],["L",o[6].x,o[6].y],["L",o[7].x,o[7].y],["L",o[4].x,o[4].y],["Z"],["M",o[8].x,o[8].y],["L",o[9].x,o[9].y],["M",o[10].x+1,o[10].y],["L",o[11].x-1,o[11].y],["M",o[12].x,o[12].y],["L",o[13].x,o[13].y]]},style:{r:6,lineWidth:1,stroke:e}}}});function S2(r){var e=B(r)?r:[r],t=e.sort(function(i,a){return a-i});return eg(t,4,t[t.length-1])}function yx(r,e,t){var i=S2(e);return[{x:r,y:i[0]},{x:r,y:i[1]},{x:r-t/2,y:i[2]},{x:r-t/2,y:i[1]},{x:r+t/2,y:i[1]},{x:r+t/2,y:i[2]},{x:r,y:i[2]},{x:r,y:i[3]}]}function A2(r){return[["M",r[0].x,r[0].y],["L",r[1].x,r[1].y],["M",r[2].x,r[2].y],["L",r[3].x,r[3].y],["L",r[4].x,r[4].y],["L",r[5].x,r[5].y],["Z"],["M",r[6].x,r[6].y],["L",r[7].x,r[7].y]]}q("schema","candle",{getPoints:function(r){var e=r.x,t=r.y,i=r.size;return yx(e,t,i)},draw:function(r,e){var t=tt(r,!0,!0),i=this.parsePath(A2(r.points)),a=e.addShape("path",{attrs:d(d({},t),{path:i,name:"schema"})});return a},getMarker:function(r){var e=r.color;return{symbol:function(t,i,a){var n=[i+7.5,i+3,i-3,i-7.5],o=yx(t,n,a);return[["M",o[0].x,o[0].y],["L",o[1].x,o[1].y],["M",o[2].x,o[2].y],["L",o[3].x,o[3].y],["L",o[4].x,o[4].y],["L",o[5].x,o[5].y],["Z"],["M",o[6].x,o[6].y],["L",o[7].x,o[7].y]]},style:{lineWidth:1,stroke:e,fill:e,r:6}}}});function b2(r,e){var t=Math.abs(r[0].x-r[2].x),i=Math.abs(r[0].y-r[2].y),a=Math.min(t,i);e&&(a=ft(e,0,Math.min(t,i))),a=a/2;var n=(r[0].x+r[2].x)/2,o=(r[0].y+r[2].y)/2;return{x:n-a,y:o-a,width:a*2,height:a*2}}q("polygon","square",{draw:function(r,e){if(!Gt(r.points)){var t=tt(r,!0,!0),i=this.parsePoints(r.points);return e.addShape("rect",{attrs:d(d({},t),b2(i,r.size)),name:"polygon"})}},getMarker:function(r){var e=r.color;return{symbol:"square",style:{r:4,fill:e}}}});q("violin","smooth",{draw:function(r,e){var t=tt(r,!0,!0),i=this.parsePath(hl(r.points));return e.addShape("path",{attrs:d(d({},t),{path:i})})},getMarker:function(r){var e=r.color;return{symbol:"circle",style:{stroke:null,r:4,fill:e}}}});q("violin","hollow",{draw:function(r,e){var t=tt(r,!0,!1),i=this.parsePath(ul(r.points));return e.addShape("path",{attrs:d(d({},t),{path:i})})},getMarker:function(r){var e=r.color;return{symbol:"circle",style:{r:4,fill:null,stroke:e}}}});q("violin","hollow-smooth",{draw:function(r,e){var t=tt(r,!0,!1),i=this.parsePath(hl(r.points));return e.addShape("path",{attrs:d(d({},t),{path:i})})},getMarker:function(r){var e=r.color;return{symbol:"circle",style:{r:4,fill:null,stroke:e}}}});var T2=function(r){S(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getLabelValueDir=function(t){var i="y",a=t.points;return a[0][i]<=a[2][i]?1:-1},e.prototype.getLabelOffsetPoint=function(t,i,a,n){var o,s=r.prototype.getLabelOffsetPoint.call(this,t,i,a),l=this.getCoordinate(),f=l.isTransposed,u=f?"x":"y",h=this.getLabelValueDir(t.mappingData);return s=d(d({},s),(o={},o[u]=s[u]*h,o)),l.isReflect("x")&&(s=d(d({},s),{x:s.x*-1})),l.isReflect("y")&&(s=d(d({},s),{y:s.y*-1})),s},e.prototype.getThemedLabelCfg=function(t){var i=this.geometry,a=this.getDefaultLabelCfg(),n=i.theme;return O({},a,n.labels,t.position==="middle"?{offset:0}:{},t)},e.prototype.setLabelPosition=function(t,i,a,n){var o=this.getCoordinate(),s=o.isTransposed,l=i.points,f=o.convert(l[0]),u=o.convert(l[2]),h=this.getLabelValueDir(i),c,p,v,m,g=B(i.shape)?i.shape[0]:i.shape;if(g==="funnel"||g==="pyramid"){var y=b(i,"nextPoints"),w=b(i,"points");if(y){var x=o.convert(w[0]),C=o.convert(w[1]),A=o.convert(y[0]),T=o.convert(y[1]);s?(c=Math.min(A.y,x.y),v=Math.max(A.y,x.y),p=(C.x+T.x)/2,m=(x.x+A.x)/2):(c=Math.min((C.y+T.y)/2,(x.y+A.y)/2),v=Math.max((C.y+T.y)/2,(x.y+A.y)/2),p=T.x,m=x.x)}else c=Math.min(u.y,f.y),v=Math.max(u.y,f.y),p=u.x,m=f.x}else c=Math.min(u.y,f.y),v=Math.max(u.y,f.y),p=u.x,m=f.x;switch(n){case"right":t.x=p,t.y=(c+v)/2,t.textAlign=b(t,"textAlign",h>0?"left":"right");break;case"left":t.x=m,t.y=(c+v)/2,t.textAlign=b(t,"textAlign",h>0?"left":"right");break;case"bottom":s&&(t.x=(p+m)/2),t.y=v,t.textAlign=b(t,"textAlign","center"),t.textBaseline=b(t,"textBaseline",h>0?"bottom":"top");break;case"middle":s&&(t.x=(p+m)/2),t.y=(c+v)/2,t.textAlign=b(t,"textAlign","center"),t.textBaseline=b(t,"textBaseline","middle");break;case"top":s&&(t.x=(p+m)/2),t.y=c,t.textAlign=b(t,"textAlign","center"),t.textBaseline=b(t,"textBaseline",h>0?"bottom":"top");break;default:break}},e}(ia),xx=T2;var Fl=Math.PI/2,E2=function(r){S(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getLabelOffset=function(t){var i=this.getCoordinate(),a=0;if(z(t))a=t;else if(G(t)&&t.indexOf("%")!==-1){var n=i.getRadius();i.innerRadius>0&&(n=n*(1-i.innerRadius)),a=parseFloat(t)*.01*n}return a},e.prototype.getLabelItems=function(t){var i=r.prototype.getLabelItems.call(this,t),a=this.geometry.getYScale();return Mt(i,function(n){if(n&&a){var o=a.scale(b(n.data,a.field));return d(d({},n),{percent:o})}return n})},e.prototype.getLabelAlign=function(t){var i=this.getCoordinate(),a;if(t.labelEmit)a=t.angle<=Math.PI/2&&t.angle>=-Math.PI/2?"left":"right";else if(!i.isTransposed)a="center";else{var n=i.getCenter(),o=t.offset;Math.abs(t.x-n.x)<1?a="center":t.angle>Math.PI||t.angle<=0?a=o>0?"left":"right":a=o>0?"right":"left"}return a},e.prototype.getLabelPoint=function(t,i,a){var n=1,o,s=t.content[a];this.isToMiddle(i)?o=this.getMiddlePoint(i.points):(t.content.length===1&&a===0?a=1:a===0&&(n=-1),o=this.getArcPoint(i,a));var l=t.offset*n,f=this.getPointAngle(o),u=t.labelEmit,h=this.getCirclePoint(f,l,o,u);return h.r===0?h.content="":(h.content=s,h.angle=f,h.color=i.color),h.rotate=t.autoRotate?this.getLabelRotate(f,l,u):t.rotate,h.start={x:o.x,y:o.y},h},e.prototype.getArcPoint=function(t,i){return i===void 0&&(i=0),!B(t.x)&&!B(t.y)?{x:t.x,y:t.y}:{x:B(t.x)?t.x[i]:t.x,y:B(t.y)?t.y[i]:t.y}},e.prototype.getPointAngle=function(t){return lr(this.getCoordinate(),t)},e.prototype.getCirclePoint=function(t,i,a,n){var o=this.getCoordinate(),s=o.getCenter(),l=gi(o,a);if(l===0)return d(d({},s),{r:l});var f=t;if(o.isTransposed&&l>i&&!n){var u=Math.asin(i/(2*l));f=t+u*2}else l=l+i;return{x:s.x+l*Math.cos(f),y:s.y+l*Math.sin(f),r:l}},e.prototype.getLabelRotate=function(t,i,a){var n=t+Fl;return a&&(n-=Fl),n&&(n>Fl?n=n-Math.PI:n<-Fl&&(n=n+Math.PI)),n},e.prototype.getMiddlePoint=function(t){var i=this.getCoordinate(),a=t.length,n={x:0,y:0};return M(t,function(o){n.x+=o.x,n.y+=o.y}),n.x/=a,n.y/=a,n=i.convert(n),n},e.prototype.isToMiddle=function(t){return t.x.length>2},e}(ia),_l=E2;var L2=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.defaultLayout="distribute",t}return e.prototype.getDefaultLabelCfg=function(t,i){var a=r.prototype.getDefaultLabelCfg.call(this,t,i);return O({},a,b(this.geometry.theme,"pieLabels",{}))},e.prototype.getLabelOffset=function(t){return r.prototype.getLabelOffset.call(this,t)||0},e.prototype.getLabelRotate=function(t,i,a){var n;return i<0&&(n=t,n>Math.PI/2&&(n=n-Math.PI),n<-Math.PI/2&&(n=n+Math.PI)),n},e.prototype.getLabelAlign=function(t){var i=this.getCoordinate(),a=i.getCenter(),n;return t.angle<=Math.PI/2&&t.x>=a.x?n="left":n="right",t.offset<=0&&(n==="right"?n="left":n="right"),n},e.prototype.getArcPoint=function(t){return t},e.prototype.getPointAngle=function(t){var i=this.getCoordinate(),a={x:B(t.x)?t.x[0]:t.x,y:t.y[0]},n={x:B(t.x)?t.x[1]:t.x,y:t.y[1]},o,s=lr(i,a);if(t.points&&t.points[0].y===t.points[1].y)o=s;else{var l=lr(i,n);s>=l&&(l=l+Math.PI*2),o=s+(l-s)/2}return o},e.prototype.getCirclePoint=function(t,i){var a=this.getCoordinate(),n=a.getCenter(),o=a.getRadius()+i;return d(d({},dt(n.x,n.y,o,t)),{angle:t,r:o})},e}(_l),Cx=L2;var wx=4;function I2(r,e,t,i,a,n){var o,s,l=!0,f=i.start,u=i.end,h=Math.min(f.y,u.y),c=Math.abs(f.y-u.y),p,v=0,m=Number.MIN_VALUE,g=e.map(function(E){return E.y>v&&(v=E.y),E.y<m&&(m=E.y),{size:t,targets:[E.y-h]}});for(m-=h,v-h>c&&(c=v-h);l;)for(g.forEach(function(E){var k=(Math.min.apply(m,E.targets)+Math.max.apply(m,E.targets))/2;E.pos=Math.min(Math.max(m,k-E.size/2),c-E.size)}),l=!1,p=g.length;p--;)if(p>0){var y=g[p-1],w=g[p];y.pos+y.size>w.pos&&(y.size+=w.size,y.targets=y.targets.concat(w.targets),y.pos+y.size>c&&(y.pos=c-y.size),g.splice(p,1),l=!0)}p=0,g.forEach(function(E){var k=h+t/2;E.targets.forEach(function(){e[p].y=E.pos+k,k+=t,p++})});var x={};try{for(var C=j(r),A=C.next();!A.done;A=C.next()){var T=A.value;x[T.get("id")]=T}}catch(E){o={error:E}}finally{try{A&&!A.done&&(s=C.return)&&s.call(C)}finally{if(o)throw o.error}}e.forEach(function(E){var k=E.r*E.r,P=Math.pow(Math.abs(E.y-a.y),2);if(k<P)E.x=a.x;else{var L=Math.sqrt(k-P);n?E.x=a.x+L:E.x=a.x-L}var R=x[E.id];R.attr("x",E.x),R.attr("y",E.y);var N=ee(R.getChildren(),function(H){return H.get("type")==="text"});N&&(N.attr("y",E.y),N.attr("x",E.x))})}function Mx(r,e,t,i){if(!(!r.length||!e.length)){var a=r[0]?r[0].offset:0,n=e[0].get("coordinate"),o=n.getRadius(),s=n.getCenter();if(a>0){var l=14,f=o+a,u=f*2+l*2,h={start:n.start,end:n.end},c=[[],[]];r.forEach(function(p){p&&(p.textAlign==="right"?c[0].push(p):c[1].push(p))}),c.forEach(function(p,v){var m=u/l;p.length>m&&(p.sort(function(g,y){return y["..percent"]-g["..percent"]}),p.splice(m,p.length-m)),p.sort(function(g,y){return g.y-y.y}),I2(e,p,l,h,s,v)})}M(r,function(p){if(p&&p.labelLine){var v=p.offset,m=p.angle,g=dt(s.x,s.y,o,m),y=dt(s.x,s.y,o+v/2,m),w=p.x+b(p,"offsetX",0),x=p.y+b(p,"offsetY",0),C={x:w-Math.cos(m)*wx,y:x-Math.sin(m)*wx};K(p.labelLine)||(p.labelLine={}),p.labelLine.path=["M ".concat(g.x),"".concat(g.y," Q").concat(y.x),"".concat(y.y," ").concat(C.x),C.y].join(",")}})}}function Rl(r,e,t){var i=r.filter(function(v){return!v.invisible});i.sort(function(v,m){return v.y-m.y});var a=!0,n=t.minY,o=t.maxY,s=Math.abs(n-o),l,f=0,u=Number.MIN_VALUE,h=i.map(function(v){return v.y>f&&(f=v.y),v.y<u&&(u=v.y),{content:v.content,size:e,targets:[v.y-n],pos:null}});for(u-=n,f-n>s&&(s=f-n);a;)for(h.forEach(function(v){var m=(Math.min.apply(u,v.targets)+Math.max.apply(u,v.targets))/2;v.pos=Math.min(Math.max(u,m-v.size/2),s-v.size),v.pos=Math.max(0,v.pos)}),a=!1,l=h.length;l--;)if(l>0){var c=h[l-1],p=h[l];c.pos+c.size>p.pos&&(c.size+=p.size,c.targets=c.targets.concat(p.targets),c.pos+c.size>s&&(c.pos=s-c.size),h.splice(l,1),a=!0)}l=0,h.forEach(function(v){var m=n+e/2;v.targets.forEach(function(){i[l].y=v.pos+m,m+=e,l++})})}var Sx=4;function P2(r,e){var t=e.getCenter(),i=e.getRadius();if(r&&r.labelLine){var a=r.angle,n=r.offset,o=dt(t.x,t.y,i,a),s=r.x+b(r,"offsetX",0)*(Math.cos(a)>0?1:-1),l=r.y+b(r,"offsetY",0)*(Math.sin(a)>0?1:-1),f={x:s-Math.cos(a)*Sx,y:l-Math.sin(a)*Sx},u=r.labelLine.smooth,h=[],c=f.x-t.x,p=f.y-t.y,v=Math.atan(p/c);if(c<0&&(v+=Math.PI),u===!1){K(r.labelLine)||(r.labelLine={});var m=0;(a<0&&a>-Math.PI/2||a>Math.PI*1.5)&&f.y>o.y&&(m=1),a>=0&&a<Math.PI/2&&f.y>o.y&&(m=1),a>=Math.PI/2&&a<Math.PI&&o.y>f.y&&(m=1),(a<-Math.PI/2||a>=Math.PI&&a<Math.PI*1.5)&&o.y>f.y&&(m=1);var g=n/2>4?4:Math.max(n/2-1,0),y=dt(t.x,t.y,i+g,a),w=dt(t.x,t.y,i+n/2,v),x=0;h.push("M ".concat(o.x," ").concat(o.y)),h.push("L ".concat(y.x," ").concat(y.y)),h.push("A ".concat(t.x," ").concat(t.y," 0 ").concat(x," ").concat(m," ").concat(w.x," ").concat(w.y)),h.push("L ".concat(f.x," ").concat(f.y))}else{var y=dt(t.x,t.y,i+(n/2>4?4:Math.max(n/2-1,0)),a),C=o.x<t.x?1:-1;h.push("M ".concat(f.x," ").concat(f.y));var A=(o.y-t.y)/(o.x-t.x),T=(f.y-t.y)/(f.x-t.x);Math.abs(A-T)>Math.pow(Math.E,-16)&&h.push.apply(h,["C",f.x+C*4,f.y,2*y.x-o.x,2*y.y-o.y,o.x,o.y]),h.push("L ".concat(o.x," ").concat(o.y))}r.labelLine.path=h.join(" ")}}function Ax(r,e,t,i){var a,n,o=St(r,function(k){return!I(k)}),s=e[0]&&e[0].get("coordinate");if(s){var l=s.getCenter(),f=s.getRadius(),u={};try{for(var h=j(e),c=h.next();!c.done;c=h.next()){var p=c.value;u[p.get("id")]=p}}catch(k){a={error:k}}finally{try{c&&!c.done&&(n=h.return)&&n.call(h)}finally{if(a)throw a.error}}var v=b(o[0],"labelHeight",14),m=b(o[0],"offset",0);if(!(m<=0)){var g="left",y="right",w=jt(o,function(k){return k.x<l.x?g:y}),x=s.start,C=s.end,A=Math.min((f+m+v)*2,s.getHeight()),T=A/2,E={minX:x.x,maxX:C.x,minY:l.y-T,maxY:l.y+T};M(w,function(k,P){var L=Math.floor(A/v);k.length>L&&(k.sort(function(R,N){return N.percent-R.percent}),M(k,function(R,N){N+1>L&&(u[R.id].set("visible",!1),R.invisible=!0)})),Rl(k,v,E)}),M(w,function(k,P){M(k,function(L){var R=P===y,N=u[L.id],H=N.getChildByIndex(0);if(H){var V=f+m,Q=L.y-l.y,mt=Math.pow(V,2),ct=Math.pow(Q,2),bt=mt-ct>0?mt-ct:0,it=Math.sqrt(bt),Nt=Math.abs(Math.cos(L.angle)*V);R?L.x=l.x+Math.max(it,Nt):L.x=l.x-Math.max(it,Nt)}H&&(H.attr("y",L.y),H.attr("x",L.x)),P2(L,s)})})}}}var hc=4,B2=4,bx=4;function k2(r,e,t){var i=e.getCenter(),a=e.getRadius(),n={x:r.x-(t?bx:-bx),y:r.y},o=dt(i.x,i.y,a+hc,r.angle),s={x:n.x,y:n.y},l={x:o.x,y:o.y},f=dt(i.x,i.y,a,r.angle),u="";if(n.y!==o.y){var h=t?4:-4;s.y=n.y,r.angle<0&&r.angle>=-Math.PI/2&&(s.x=Math.max(o.x,n.x-h),n.y<o.y?l.y=s.y:(l.y=o.y,l.x=Math.max(l.x,s.x-h))),r.angle>0&&r.angle<Math.PI/2&&(s.x=Math.max(o.x,n.x-h),n.y>o.y?l.y=s.y:(l.y=o.y,l.x=Math.max(l.x,s.x-h))),r.angle>Math.PI/2&&(s.x=Math.min(o.x,n.x-h),n.y>o.y?l.y=s.y:(l.y=o.y,l.x=Math.min(l.x,s.x-h))),r.angle<-Math.PI/2&&(s.x=Math.min(o.x,n.x-h),n.y<o.y?l.y=s.y:(l.y=o.y,l.x=Math.min(l.x,s.x-h)))}u=["M ".concat(n.x,",").concat(n.y),"L ".concat(s.x,",").concat(s.y),"L ".concat(l.x,",").concat(l.y),"L ".concat(o.x,",").concat(o.y),"L ".concat(f.x,",").concat(f.y)].join(" "),r.labelLine=O({},r.labelLine,{path:u})}function Tx(r,e,t,i){var a,n,o=e[0]&&e[0].get("coordinate");if(o){var s=o.getCenter(),l=o.getRadius(),f={};try{for(var u=j(e),h=u.next();!h.done;h=u.next()){var c=h.value;f[c.get("id")]=c}}catch(k){a={error:k}}finally{try{h&&!h.done&&(n=u.return)&&n.call(u)}finally{if(a)throw a.error}}var p=b(r[0],"labelHeight",14),v=Math.max(b(r[0],"offset",0),hc);M(r,function(k){if(k){var P=b(f,[k.id]);if(P){var L=k.x>s.x||k.x===s.x&&k.y>s.y,R=I(k.offsetX)?B2:k.offsetX,N=dt(s.x,s.y,l+hc,k.angle),H=v+R;k.x=s.x+(L?1:-1)*(l+H),k.y=N.y}}});var m=o.start,g=o.end,y="left",w="right",x=jt(r,function(k){return k.x<s.x?y:w}),C=(l+v)*2+p;M(x,function(k){var P=k.length*p;P>C&&(C=Math.min(P,Math.abs(m.y-g.y)))});var A={minX:m.x,maxX:g.x,minY:s.y-C/2,maxY:s.y+C/2};M(x,function(k,P){var L=C/p;k.length>L&&(k.sort(function(R,N){return N.percent-R.percent}),M(k,function(R,N){N>L&&(f[R.id].set("visible",!1),R.invisible=!0)})),Rl(k,p,A)});var T=A.minY,E=A.maxY;M(x,function(k,P){var L=P===w;M(k,function(R){var N=b(f,R&&[R.id]);if(N){if(R.y<T||R.y>E){N.set("visible",!1);return}var H=N.getChildByIndex(0),V=H.getCanvasBBox(),Q={x:L?V.x:V.maxX,y:V.y+V.height/2};Rr(H,R.x-Q.x,R.y-Q.y),R.labelLine&&k2(R,o,L)}})})}}function Ex(r,e,t,i){M(e,function(a){var n=i.minX,o=i.minY,s=i.maxX,l=i.maxY,f=a.getCanvasBBox(),u=f.minX,h=f.minY,c=f.maxX,p=f.maxY,v=f.x,m=f.y,g=f.width,y=f.height,w=v,x=m;(u<n||c<n)&&(w=n),(h<o||p<o)&&(x=o),u>s?w=s-g:c>s&&(w=w-(c-s)),h>l?x=l-y:p>l&&(x=x-(p-l)),(w!==v||x!==m)&&Rr(a,w-v,x-m)})}function Lx(r,e,t,i){M(e,function(a,n){var o=a.getCanvasBBox(),s=t[n].getBBox();(o.minX<s.minX||o.minY<s.minY||o.maxX>s.maxX||o.maxY>s.maxY)&&a.remove(!0)})}var O2=100,Ix=function(){function r(e){e===void 0&&(e={}),this.bitmap={};var t=e.xGap,i=t===void 0?1:t,a=e.yGap,n=a===void 0?8:a;this.xGap=i,this.yGap=n}return r.prototype.hasGap=function(e){for(var t=!0,i=this.bitmap,a=Math.round(e.minX),n=Math.round(e.maxX),o=Math.round(e.minY),s=Math.round(e.maxY),l=a;l<=n;l+=1){if(!i[l]){i[l]={};continue}if(l===a||l===n){for(var f=o;f<=s;f++)if(i[l][f]){t=!1;break}}else if(i[l][o]||i[l][s]){t=!1;break}}return t},r.prototype.fillGap=function(e){for(var t=this.bitmap,i=Math.round(e.minX),a=Math.round(e.maxX),n=Math.round(e.minY),o=Math.round(e.maxY),s=i;s<=a;s+=1)t[s]||(t[s]={});for(var s=i;s<=a;s+=this.xGap){for(var l=n;l<=o;l+=this.yGap)t[s][l]=!0;t[s][o]=!0}if(this.yGap!==1)for(var s=n;s<=o;s+=1)t[i][s]=!0,t[a][s]=!0;if(this.xGap!==1)for(var s=i;s<=a;s+=1)t[s][n]=!0,t[s][o]=!0},r.prototype.destroy=function(){this.bitmap={}},r}();function F2(r,e,t){t===void 0&&(t=O2);var i=-1,a=r.attr(),n=a.x,o=a.y,s=r.getCanvasBBox(),l=Math.sqrt(s.width*s.width+s.height*s.height),f,u=-i,h=0,c=0,p=function(y){var w=y*.1;return[w*Math.cos(w),w*Math.sin(w)]};if(e.hasGap(s))return e.fillGap(s),!0;for(var v=!1,m=0,g={};Math.min(Math.abs(h),Math.abs(c))<l&&m<t;)if(f=p(u+=i),h=~~f[0],c=~~f[1],!(!h&&!c||g["".concat(h,"-").concat(c)])&&(r.attr({x:n+h,y:o+c}),h+c<0&&r.attr("textAlign","right"),m++,e.hasGap(r.getCanvasBBox()))){e.fillGap(r.getCanvasBBox()),v=!0,g["".concat(h,"-").concat(c)]=!0;break}return v}function _2(r,e,t,i){var a=r.getCanvasBBox(),n=a.width,o=a.height,s={x:e,y:t,textAlign:"center"};switch(i){case 0:s.y-=o+1,s.x+=1,s.textAlign="left";break;case 1:s.y-=o+1,s.x-=1,s.textAlign="right";break;case 2:s.y+=o+1,s.x-=1,s.textAlign="right";break;case 3:s.y+=o+1,s.x+=1,s.textAlign="left";break;case 5:s.y-=o*2+2;break;case 6:s.y+=o*2+2;break;case 7:s.x+=n+1,s.textAlign="left";break;case 8:s.x-=n+1,s.textAlign="right";break;default:break}return r.attr(s),r.getCanvasBBox()}function Px(r,e,t,i){var a=new Ix;M(e,function(n){var o=n.find(function(s){return s.get("type")==="text"});F2(o,a)||n.remove(!0)}),a.destroy()}function Bx(r,e,t,i){var a=new Ix;M(e,function(n){for(var o=n.find(function(p){return p.get("type")==="text"}),s=o.attr(),l=s.x,f=s.y,u=!1,h=0;h<=8;h++){var c=_2(o,l,f,h);if(a.hasGap(c)){a.fillGap(c),u=!0;break}}u||n.remove(!0)}),a.destroy()}function R2(r,e){return(r[0]||0)*(e[0]||0)+(r[1]||0)*(e[1]||0)+(r[2]||0)*(e[2]||0)}function kx(r){if(r.length>4)return[];var e=function(a,n){return[n.x-a.x,n.y-a.y]},t=e(r[0],r[1]),i=e(r[1],r[2]);return[t,i]}function Dl(r,e,t){e===void 0&&(e=0),t===void 0&&(t={x:0,y:0});var i=r.x,a=r.y;return{x:(i-t.x)*Math.cos(-e)+(a-t.y)*Math.sin(-e)+t.x,y:(t.x-i)*Math.sin(-e)+(a-t.y)*Math.cos(-e)+t.y}}function Ox(r){var e=[{x:r.x,y:r.y},{x:r.x+r.width,y:r.y},{x:r.x+r.width,y:r.y+r.height},{x:r.x,y:r.y+r.height}],t=r.rotation;return t?[Dl(e[0],t,e[0]),Dl(e[1],t,e[0]),Dl(e[2],t,e[0]),Dl(e[3],t,e[0])]:e}function Fx(r,e){if(r.length>4)return{min:0,max:0};var t=[];return r.forEach(function(i){t.push(R2([i.x,i.y],e))}),{min:Math.min.apply(Math,U([],_(t),!1)),max:Math.max.apply(Math,U([],_(t),!1))}}function D2(r,e){return r.max>e.min&&r.min<e.max}function N2(r){return typeof r=="number"&&!Number.isNaN(r)&&r!==1/0&&r!==-1/0}function _x(r){return["x","y","width","height"].every(function(e){return N2(r[e])})}function G2(r,e,t){return t===void 0&&(t=0),!(e.x>r.x+r.width+t||e.x+e.width<r.x-t||e.y>r.y+r.height+t||e.y+e.height<r.y-t)}function Rx(r,e,t){if(t===void 0&&(t=0),!_x(r)||!_x(e))return!1;if(!r.rotation&&!e.rotation)return G2(r,e,t);for(var i=Ox(r),a=Ox(e),n=kx(i).concat(kx(a)),o=0;o<n.length;o++){var s=n[o],l=Fx(i,s),f=Fx(a,s);if(!D2(l,f))return!1}return!0}var Y2=function(){function r(e){var t=this;this.queue=[],this.worker=new Worker(e),this.worker.onmessage=function(i){var a;(a=t.queue.shift())===null||a===void 0||a.resolve(i)},this.worker.onmessageerror=function(i){var a;console.warn("[AntV G2] Web worker is not available"),(a=t.queue.shift())===null||a===void 0||a.reject(i)}}return r.prototype.post=function(e,t){var i=this;return new Promise(function(a,n){i.queue.push({resolve:a,reject:n});try{i.worker.postMessage(e)}catch{console.warn("[AntV G2] Web worker is not available"),D(t)&&t()}})},r.prototype.destroy=function(){this.worker.terminate()},r}();function Dx(r){if(!(typeof window>"u")){var e;try{e=new Blob([r.toString()],{type:"application/javascript"})}catch{e=new window.BlobBuilder,e.append(r.toString()),e=e.getBlob()}return new Y2(URL.createObjectURL(e))}}var H2=function(r){function e(){function f(x,C){return(x[0]||0)*(C[0]||0)+(x[1]||0)*(C[1]||0)+(x[2]||0)*(C[2]||0)}function u(x){if(x.length>4)return[];var C=function(E,k){return[k.x-E.x,k.y-E.y]},A=C(x[0],x[1]),T=C(x[1],x[2]);return[A,T]}function h(x,C,A){C===void 0&&(C=0),A===void 0&&(A={x:0,y:0});var T=x.x,E=x.y;return{x:(T-A.x)*Math.cos(-C)+(E-A.y)*Math.sin(-C)+A.x,y:(A.x-T)*Math.sin(-C)+(E-A.y)*Math.cos(-C)+A.y}}function c(x){var C=[{x:x.x,y:x.y},{x:x.x+x.width,y:x.y},{x:x.x+x.width,y:x.y+x.height},{x:x.x,y:x.y+x.height}],A=x.rotation;return A?[h(C[0],A,C[0]),h(C[1],A,C[0]),h(C[2],A,C[0]),h(C[3],A,C[0])]:C}function p(x,C){if(x.length>4)return{min:0,max:0};var A=[];return x.forEach(function(T){A.push(f([T.x,T.y],C))}),{min:Math.min.apply(null,A),max:Math.max.apply(null,A)}}function v(x,C){return x.max>C.min&&x.min<C.max}function m(x){return typeof x=="number"&&!Number.isNaN(x)&&x!==1/0&&x!==-1/0}function g(x){return["x","y","width","height"].every(function(C){return m(x[C])})}function y(x,C,A){return A===void 0&&(A=0),!(C.x>x.x+x.width+A||C.x+C.width<x.x-A||C.y>x.y+x.height+A||C.y+C.height<x.y-A)}function w(x,C,A){if(A===void 0&&(A=0),!g(x)||!g(C))return!1;if(!x.rotation&&!C.rotation)return y(x,C,A);for(var T=c(x),E=c(C),k=u(T).concat(u(E)),P=0;P<k.length;P++){var L=k[P],R=p(T,L),N=p(E,L);if(!v(R,N))return!1}return!0}return{intersect:w}}var t=e().intersect;function i(f){for(var u=f.slice(),h=0;h<u.length;h++){var c=u[h];if(c.visible)for(var p=h+1;p<u.length;p++){var v=u[p];c!==v&&v.visible&&t(c,v)&&(v.visible=!1)}}return u}var a={"hide-overlap":i};try{var n=JSON.parse(r.data);if(!n||!n.type||!a[n.type])return;var o=n.type,s=n.items,l=a[o](s);self.postMessage(l)}catch(f){throw f}},Nx=`
   self.onmessage = `.concat(H2.toString(),`
`);var cc=function(r){for(var e=r.slice(),t=0;t<e.length;t++){var i=e[t];if(i.visible)for(var a=t+1;a<e.length;a++){var n=e[a];i!==n&&n.visible&&Rx(i,n)&&(n.visible=!1)}}return e},pc=new Map,Gx=Dx(Nx);function Yx(r,e,t,i){return vr(this,void 0,void 0,function(){var a,n,o,s,l,f;return mr(this,function(u){switch(u.label){case 0:return a=e.map(function(h,c){return d(d({},sl(h,r[c],b(r[c],"background.padding"))),{visible:!0})}),n=JSON.stringify(a),o=function(h){return pc.set(n,h),M(h,function(c,p){var v=c.visible,m=e[p];v?m?.show():m?.hide()}),h},pc.get(n)?(o(pc.get(n)),[3,7]):[3,1];case 1:if(!Gx)return[3,6];u.label=2;case 2:return u.trys.push([2,4,,5]),s=JSON.stringify({type:"hide-overlap",items:a}),[4,Gx.post(s,function(){return o(cc(a))})];case 3:return l=u.sent(),o(Array.isArray(l.data)?l.data:[]),[3,5];case 4:return f=u.sent(),console.error(f),o(cc(a)),[3,5];case 5:return[3,7];case 6:o(cc(a)),u.label=7;case 7:return[2]}})})}var Hx={"#5B8FF9":!0},Vx=function(r){var e=Ar.toRGB(r).toUpperCase();if(Hx[e])return Hx[e];var t=_(Ar.rgb2arr(e),3),i=t[0],a=t[1],n=t[2],o=(i*299+a*587+n*114)/1e3<128;return o};function zx(r,e,t){if(t.length!==0){var i=t[0].get("element"),a=i.geometry.theme,n=a.labels||{},o=n.fillColorLight,s=n.fillColorDark;t.forEach(function(l,f){var u=e[f],h=u.find(function(y){return y.get("type")==="text"}),c=It.fromObject(l.getBBox()),p=It.fromObject(h.getCanvasBBox()),v=!c.contains(p),m=l.attr("fill"),g=Vx(m);v?h.attr(a.overflowLabels.style):g?o&&h.attr("fill",o):s&&h.attr("fill",s)})}}function V2(r,e,t){var i=r.coordinate,a=Xe(e),n=It.fromObject(a.getCanvasBBox()),o=It.fromObject(t.getBBox());return i.isTransposed?o.height>=n.height:o.width>=n.width}function z2(r,e,t){var i=!!r.getAdjust("stack");return i||e.every(function(a,n){var o=t[n];return V2(r,a,o)})}function X2(r,e,t){var i=r.coordinate,a=It.fromObject(t.getBBox()),n=Xe(e);i.isTransposed?n.attr({x:a.minX+a.width/2,textAlign:"center"}):n.attr({y:a.minY+a.height/2,textBaseline:"middle"})}function Xx(r,e,t){var i;if(t.length!==0){var a=(i=t[0])===null||i===void 0?void 0:i.get("element"),n=a?.geometry;if(!(!n||n.type!=="interval")){var o=z2(n,e,t);o&&t.forEach(function(s,l){var f=e[l];X2(n,f,s)})}}}function W2(r){var e=500,t=[],i=Math.max(Math.floor(r.length/e),1);return M(r,function(a,n){n%i===0?t.push(a):a.set("visible",!1)}),t}function Wx(r,e,t){var i;if(t.length!==0){var a=(i=t[0])===null||i===void 0?void 0:i.get("element"),n=a?.geometry;if(!(!n||n.type!=="interval")){var o=W2(e),s=_(n.getXYFields(),1),l=s[0],f=[],u=[],h=jt(o,function(g){return g.get("data")[l]}),c=Li(Mt(o,function(g){return g.get("data")[l]})),p;o.forEach(function(g){g.set("visible",!0)});var v=function(g){g&&(g.length&&u.push(g.pop()),u.push.apply(u,U([],_(g),!1)))};for(Tt(c)>0&&(p=c.shift(),v(h[p])),Tt(c)>0&&(p=c.pop(),v(h[p])),M(c.reverse(),function(g){v(h[g])});u.length>0;){var m=u.shift();m.get("visible")&&(ty(m,f)?m.set("visible",!1):f.push(m))}}}}function q2(r,e){var t=r.getXYFields()[1],i=[],a=e.sort(function(n,o){return n.get("data")[t]-n.get("data")[t]});return a.length>0&&i.push(a.shift()),a.length>0&&i.push(a.pop()),i.push.apply(i,U([],_(a),!1)),i}function Ux(r,e,t){return r.some(function(i){return t(i,e)})}function U2(r,e,t){t===void 0&&(t=0);var i=Math.max(0,Math.min(r.x+r.width+t,e.x+e.width+t)-Math.max(r.x-t,e.x-t)),a=Math.max(0,Math.min(r.y+r.height+t,e.y+e.height+t)-Math.max(r.y-t,e.y-t));return i*a}function qx(r,e){return Ux(r,e,function(t,i){var a=Xe(t),n=Xe(i);return U2(a.getCanvasBBox(),n.getCanvasBBox(),2)>0})}function jx(r,e,t,i,a){var n,o;if(t.length!==0){var s=(n=t[0])===null||n===void 0?void 0:n.get("element"),l=s?.geometry;if(!(!l||l.type!=="point")){var f=_(l.getXYFields(),2),u=f[0],h=f[1],c=jt(e,function(m){return m.get("data")[u]}),p=[],v=a&&a.offset||((o=r[0])===null||o===void 0?void 0:o.offset)||12;Mt(Re(c).reverse(),function(m){for(var g=q2(l,c[m]);g.length;){var y=g.shift(),w=Xe(y);if(Ux(p,y,function(A,T){return A.get("data")[u]===T.get("data")[u]&&A.get("data")[h]===T.get("data")[h]})){w.set("visible",!1);continue}var x=qx(p,y),C=!1;if(x&&(w.attr("y",w.attr("y")+2*v),C=qx(p,y)),C){w.set("visible",!1);continue}p.push(y)}})}}}function j2(r,e){var t=r.getXYFields()[1],i=[],a=e.sort(function(n,o){return n.get("data")[t]-n.get("data")[t]});return a.length>0&&i.push(a.shift()),a.length>0&&i.push(a.pop()),i.push.apply(i,U([],_(a),!1)),i}function Qx(r,e,t){return r.some(function(i){return t(i,e)})}function Z2(r,e,t){t===void 0&&(t=0);var i=Math.max(0,Math.min(r.x+r.width+t,e.x+e.width+t)-Math.max(r.x-t,e.x-t)),a=Math.max(0,Math.min(r.y+r.height+t,e.y+e.height+t)-Math.max(r.y-t,e.y-t));return i*a}function Zx(r,e){return Qx(r,e,function(t,i){var a=Xe(t),n=Xe(i);return Z2(a.getCanvasBBox(),n.getCanvasBBox(),2)>0})}function $x(r,e,t,i,a){var n,o;if(t.length!==0){var s=(n=t[0])===null||n===void 0?void 0:n.get("element"),l=s?.geometry;if(!(!l||["path","line","area"].indexOf(l.type)<0)){var f=_(l.getXYFields(),2),u=f[0],h=f[1],c=jt(e,function(m){return m.get("data")[u]}),p=[],v=a&&a.offset||((o=r[0])===null||o===void 0?void 0:o.offset)||12;Mt(Re(c).reverse(),function(m){for(var g=j2(l,c[m]);g.length;){var y=g.shift(),w=Xe(y);if(Qx(p,y,function(A,T){return A.get("data")[u]===T.get("data")[u]&&A.get("data")[h]===T.get("data")[h]})){w.set("visible",!1);continue}var x=Zx(p,y),C=!1;if(x&&(w.attr("y",w.attr("y")+2*v),C=Zx(p,y)),C){w.set("visible",!1);continue}p.push(y)}})}}}var vc;function Kx(){return vc||(vc=document.createElement("canvas").getContext("2d")),vc}var Nl=yr(function(r,e){e===void 0&&(e={});var t=e.fontSize,i=e.fontFamily,a=e.fontWeight,n=e.fontStyle,o=e.fontVariant,s=Kx();return s.font=[n,o,a,"".concat(t,"px"),i].join(" "),s.measureText(G(r)?r:"").width},function(r,e){return e===void 0&&(e={}),U([r],_(Ur(e)),!1).join("")}),Jx=function(r,e,t){var i=16,a=Nl("...",t),n;G(r)?n=r:n=Ne(r);var o=e,s=[],l,f;if(Nl(r,t)<=e)return r;for(;l=n.substr(0,i),f=Nl(l,t),!(f+a>o&&f>o);)if(s.push(l),o-=f,n=n.substr(i),!n)return s.join("");for(;l=n.substr(0,1),f=Nl(l,t),!(f+a>o);)if(s.push(l),o-=f,n=n.substr(1),!n)return s.join("");return"".concat(s.join(""),"...")};function t0(r,e,t,i,a){if(!(e.length<=0)){var n=a?.direction||["top","right","bottom","left"],o=a?.action||"translate",s=a?.margin||0,l=e[0].get("coordinate");if(l){var f=ng(l,s),u=f.minX,h=f.minY,c=f.maxX,p=f.maxY;M(e,function(v){var m=v.getCanvasBBox(),g=m.minX,y=m.minY,w=m.maxX,x=m.maxY,C=m.x,A=m.y,T=m.width,E=m.height,k=C,P=A;if(n.indexOf("left")>=0&&(g<u||w<u)&&(k=u),n.indexOf("top")>=0&&(y<h||x<h)&&(P=h),n.indexOf("right")>=0&&(g>c?k=c-T:w>c&&(k=k-(w-c))),n.indexOf("bottom")>=0&&(y>p?P=p-E:x>p&&(P=P-(x-p))),k!==C||P!==A){var L=k-C;if(o==="translate")Rr(v,L,P-A);else if(o==="ellipsis"){var R=v.findAll(function(N){return N.get("type")==="text"});R.forEach(function(N){var H=Ii(N.attr(),["fontSize","fontFamily","fontWeight","fontStyle","fontVariant"]),V=N.getCanvasBBox(),Q=Jx(N.attr("text"),V.width-Math.abs(L),H);N.attr("text",Q)})}else v.hide()}})}}}function e0(r,e,t){var i={fillOpacity:I(r.attr("fillOpacity"))?1:r.attr("fillOpacity"),strokeOpacity:I(r.attr("strokeOpacity"))?1:r.attr("strokeOpacity"),opacity:I(r.attr("opacity"))?1:r.attr("opacity")};r.attr({fillOpacity:0,strokeOpacity:0,opacity:0}),r.animate(i,e)}function r0(r,e,t){var i={fillOpacity:0,strokeOpacity:0,opacity:0},a=e.easing,n=e.duration,o=e.delay;r.animate(i,n,a,function(){r.remove(!0)},o)}function Q2(r,e,t){var i,a=_(e,2),n=a[0],o=a[1];return r.applyToMatrix([n,o,1]),t==="x"?(r.setMatrix($.transform(r.getMatrix(),[["t",-n,-o],["s",.01,1],["t",n,o]])),i=$.transform(r.getMatrix(),[["t",-n,-o],["s",100,1],["t",n,o]])):t==="y"?(r.setMatrix($.transform(r.getMatrix(),[["t",-n,-o],["s",1,.01],["t",n,o]])),i=$.transform(r.getMatrix(),[["t",-n,-o],["s",1,100],["t",n,o]])):t==="xy"&&(r.setMatrix($.transform(r.getMatrix(),[["t",-n,-o],["s",.01,.01],["t",n,o]])),i=$.transform(r.getMatrix(),[["t",-n,-o],["s",100,100],["t",n,o]])),i}function Gl(r,e,t,i,a){var n=t.start,o=t.end,s=t.getWidth(),l=t.getHeight(),f,u;a==="y"?(f=n.x+s/2,u=i.y<n.y?i.y:n.y):a==="x"?(f=i.x>n.x?i.x:n.x,u=n.y+l/2):a==="xy"&&(t.isPolar?(f=t.getCenter().x,u=t.getCenter().y):(f=(n.x+o.x)/2,u=(n.y+o.y)/2));var h=Q2(r,[f,u],a);r.animate({matrix:h},e)}function i0(r,e,t){var i=t.coordinate,a=t.minYPoint;Gl(r,e,i,a,"x")}function a0(r,e,t){var i=t.coordinate,a=t.minYPoint;Gl(r,e,i,a,"y")}function n0(r,e,t){var i=t.coordinate,a=t.minYPoint;Gl(r,e,i,a,"xy")}function o0(r,e,t){var i=r.getTotalLength();r.attr("lineDash",[i]),r.animate(function(a){return{lineDashOffset:(1-a)*i}},e)}function s0(r,e,t){var i=t.toAttrs,a=i.x,n=i.y;delete i.x,delete i.y,r.attr(i),r.animate({x:a,y:n},e)}function l0(r,e,t){var i=r.getBBox(),a=r.get("origin").mappingData,n=a.points,o=n[0].y-n[1].y>0?i.maxX:i.minX,s=(i.minY+i.maxY)/2;r.applyToMatrix([o,s,1]);var l=$.transform(r.getMatrix(),[["t",-o,-s],["s",.01,1],["t",o,s]]);r.setMatrix(l),r.animate({matrix:$.transform(r.getMatrix(),[["t",-o,-s],["s",100,1],["t",o,s]])},e)}function f0(r,e,t){var i=r.getBBox(),a=r.get("origin").mappingData,n=(i.minX+i.maxX)/2,o=a.points,s=o[0].y-o[1].y<=0?i.maxY:i.minY;r.applyToMatrix([n,s,1]);var l=$.transform(r.getMatrix(),[["t",-n,-s],["s",1,.01],["t",n,s]]);r.setMatrix(l),r.animate({matrix:$.transform(r.getMatrix(),[["t",-n,-s],["s",1,100],["t",n,s]])},e)}function u0(r,e){var t,i=Mi(r,e),a=i.startAngle,n=i.endAngle;return!pt(a,-Math.PI*.5)&&a<-Math.PI*.5&&(a+=Math.PI*2),!pt(n,-Math.PI*.5)&&n<-Math.PI*.5&&(n+=Math.PI*2),e[5]===0&&(t=_([n,a],2),a=t[0],n=t[1]),pt(a,Math.PI*1.5)&&(a=Math.PI*-.5),pt(n,Math.PI*-.5)&&!pt(a,n)&&(n=Math.PI*1.5),{startAngle:a,endAngle:n}}function h0(r){var e;return r[0]==="M"||r[0]==="L"?e=[r[1],r[2]]:(r[0]==="a"||r[0]==="A"||r[0]==="C")&&(e=[r[r.length-2],r[r.length-1]]),e}function c0(r){var e,t,i,a=r.filter(function(x){return x[0]==="A"||x[0]==="a"});if(a.length===0)return{startAngle:0,endAngle:0,radius:0,innerRadius:0};var n=a[0],o=a.length>1?a[1]:a[0],s=r.indexOf(n),l=r.indexOf(o),f=h0(r[s-1]),u=h0(r[l-1]),h=u0(f,n),c=h.startAngle,p=h.endAngle,v=u0(u,o),m=v.startAngle,g=v.endAngle;pt(c,m)&&pt(p,g)?(t=c,i=p):(t=Math.min(c,m),i=Math.max(p,g));var y=n[1],w=a[a.length-1][1];return y<w?(e=_([w,y],2),y=e[0],w=e[1]):y===w&&(w=0),{startAngle:t,endAngle:i,radius:y,innerRadius:w}}function p0(r,e,t){var i=t.toAttrs,a=t.coordinate,n=i.path||[],o=n.map(function(w){return w[0]});if(!(n.length<1)){var s=c0(n),l=s.startAngle,f=s.endAngle,u=s.radius,h=s.innerRadius,c=c0(r.attr("path")),p=c.startAngle,v=c.endAngle,m=a.getCenter(),g=l-p,y=f-v;if(g===0&&y===0){r.attr(i);return}r.animate(function(w){var x=p+w*g,C=v+w*y;return d(d({},i),{path:ot(o,["M","A","A","Z"])?Hs(m.x,m.y,u,x,C):Oe(m.x,m.y,u,x,C,h)})},d(d({},e),{callback:function(){r.attr("path",n),D(e.callback)&&e.callback()}}))}}function v0(r,e,t){var i=Ga(t.coordinate,20),a=i.type,n=i.startState,o=i.endState,s=r.setClip({type:a,attrs:n});t.toAttrs&&r.attr(t.toAttrs),s.animate(o,d(d({},e),{callback:function(){r&&!r.get("destroyed")&&r.set("clipShape",null),s.remove(!0),D(e.callback)&&e.callback()}}))}function mc(r,e,t){if(r.isGroup())M(r.getChildren(),function(s){mc(s,e,t)});else{var i=r.getBBox(),a=(i.minX+i.maxX)/2,n=(i.minY+i.maxY)/2;if(r.applyToMatrix([a,n,1]),t==="zoomIn"){var o=$.transform(r.getMatrix(),[["t",-a,-n],["s",.01,.01],["t",a,n]]);r.setMatrix(o),r.animate({matrix:$.transform(r.getMatrix(),[["t",-a,-n],["s",100,100],["t",a,n]])},e)}else r.animate({matrix:$.transform(r.getMatrix(),[["t",-a,-n],["s",.01,.01],["t",a,n]])},d(d({},e),{callback:function(){r.remove(!0),D(e.callback)&&e.callback()}}))}}function m0(r,e,t){mc(r,e,"zoomIn")}function d0(r,e,t){mc(r,e,"zoomOut")}function le(r){return[F.TOP,F.BOTTOM].includes(r)?{offsetX:0,offsetY:r===F.TOP?-8:8,style:{textAlign:"center",textBaseline:r===F.TOP?"bottom":"top"}}:[F.LEFT,F.RIGHT].includes(r)?{offsetX:r===F.LEFT?-8:8,offsetY:0,style:{textAlign:r===F.LEFT?"right":"left",textBaseline:"middle",rotate:Math.PI/2}}:{}}function Yl(r,e,t){return{x:r.x+e*Math.cos(t),y:r.y+e*Math.sin(t)}}var $2=function(r){S(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){return O({},r.prototype.getDefaultCfg.call(this),{type:"circle",showTitle:!0,title:r.prototype.getDefaultTitleCfg.call(this)})},e.prototype.render=function(){r.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},e.prototype.getRegion=function(t,i){var a=.5,n={x:.5,y:.5},o=Math.PI*2/t,s=-1*Math.PI/2+o*i,l=a/(1+1/Math.sin(o/2)),f=Yl(n,a-l,s),u=Math.PI*5/4,h=Math.PI*1/4;return{start:Yl(f,l,u),end:Yl(f,l,h)}},e.prototype.afterEachView=function(t,i){this.processAxis(t,i)},e.prototype.beforeEachView=function(t,i){},e.prototype.generateFacets=function(t){var i=this,a=this.cfg,n=a.fields,o=a.type,s=_(n,1),l=s[0];if(!l)throw new Error("No `fields` specified!");var f=this.getFieldValues(t,l),u=f.length,h=[];return f.forEach(function(c,p){var v=[{field:l,value:c,values:f}],m=St(t,i.getFacetDataFilter(v)),g={type:o,data:m,region:i.getRegion(u,p),columnValue:c,columnField:l,columnIndex:p,columnValuesLength:u,rowValue:null,rowField:null,rowIndex:0,rowValuesLength:1};h.push(g)}),h},e.prototype.getXAxisOption=function(t,i,a,n){return a},e.prototype.getYAxisOption=function(t,i,a,n){return a},e.prototype.renderTitle=function(){var t=this;M(this.facets,function(i){var a=i.columnValue,n=i.view,o=b(t.cfg.title,"formatter"),s=O({position:["50%","0%"],content:o?o(a):a},le(F.TOP),t.cfg.title);n.annotation().text(s)})},e}(ge),g0=$2;var K2=function(r){S(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){return O({},r.prototype.getDefaultCfg.call(this),{type:"list",cols:null,showTitle:!0,title:r.prototype.getDefaultTitleCfg.call(this)})},e.prototype.render=function(){r.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},e.prototype.afterEachView=function(t,i){this.processAxis(t,i)},e.prototype.beforeEachView=function(t,i){},e.prototype.generateFacets=function(t){var i=this,a=this.cfg.fields,n=this.cfg.cols,o=_(a,1),s=o[0];if(!s)throw new Error("No `fields` specified!");var l=this.getFieldValues(t,s),f=l.length;n=n||f;var u=this.getPageCount(f,n),h=[];return l.forEach(function(c,p){var v=i.getRowCol(p,n),m=v.row,g=v.col,y=[{field:s,value:c,values:l}],w=St(t,i.getFacetDataFilter(y)),x={type:i.cfg.type,data:w,region:i.getRegion(u,n,g,m),columnValue:c,rowValue:c,columnField:s,rowField:null,columnIndex:g,rowIndex:m,columnValuesLength:n,rowValuesLength:u,total:f};h.push(x)}),h},e.prototype.getXAxisOption=function(t,i,a,n){return n.rowIndex!==n.rowValuesLength-1&&n.columnValuesLength*n.rowIndex+n.columnIndex+1+n.columnValuesLength<=n.total?d(d({},a),{label:null,title:null}):a},e.prototype.getYAxisOption=function(t,i,a,n){return n.columnIndex!==0?d(d({},a),{title:null,label:null}):a},e.prototype.renderTitle=function(){var t=this;M(this.facets,function(i){var a=i.columnValue,n=i.view,o=b(t.cfg.title,"formatter"),s=O({position:["50%","0%"],content:o?o(a):a},le(F.TOP),t.cfg.title);n.annotation().text(s)})},e.prototype.getPageCount=function(t,i){return Math.floor((t+i-1)/i)},e.prototype.getRowCol=function(t,i){var a=Math.floor(t/i),n=t%i;return{row:a,col:n}},e}(ge),y0=K2;var J2=function(r){S(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){return O({},r.prototype.getDefaultCfg.call(this),{type:"matrix",showTitle:!1,columnTitle:d({},r.prototype.getDefaultTitleCfg.call(this)),rowTitle:d({},r.prototype.getDefaultTitleCfg.call(this))})},e.prototype.render=function(){r.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},e.prototype.afterEachView=function(t,i){this.processAxis(t,i)},e.prototype.beforeEachView=function(t,i){},e.prototype.generateFacets=function(t){for(var i=this.cfg,a=i.fields,n=i.type,o=a.length,s=o,l=[],f=0;f<s;f++)for(var u=a[f],h=0;h<o;h++){var c=a[h],p={type:n,data:t,region:this.getRegion(o,s,f,h),columnValue:u,rowValue:c,columnField:u,rowField:c,columnIndex:f,rowIndex:h,columnValuesLength:s,rowValuesLength:o};l.push(p)}return l},e.prototype.getXAxisOption=function(t,i,a,n){return n.rowIndex!==n.rowValuesLength-1?d(d({},a),{label:null,title:null}):a},e.prototype.getYAxisOption=function(t,i,a,n){return n.columnIndex!==0?d(d({},a),{title:null,label:null}):a},e.prototype.renderTitle=function(){var t=this;M(this.facets,function(i,a){var n=i.columnIndex,o=i.rowIndex,s=i.columnValuesLength,l=i.rowValuesLength,f=i.columnValue,u=i.rowValue,h=i.view;if(o===0){var c=b(t.cfg.columnTitle,"formatter"),p=O({position:["50%","0%"],content:c?c(f):f},le(F.TOP),t.cfg.columnTitle);h.annotation().text(p)}if(n===s-1){var c=b(t.cfg.rowTitle,"formatter"),p=O({position:["100%","50%"],content:c?c(u):u},le(F.RIGHT),t.cfg.rowTitle);h.annotation().text(p)}})},e}(ge),x0=J2;var tI=function(r){S(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){return O({},r.prototype.getDefaultCfg.call(this),{type:"mirror",showTitle:!0,title:r.prototype.getDefaultTitleCfg.call(this),transpose:!1})},e.prototype.render=function(){r.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},e.prototype.beforeEachView=function(t,i){this.cfg.transpose?i.columnIndex%2===0?t.coordinate().transpose().reflect("x"):t.coordinate().transpose():i.rowIndex%2!==0&&t.coordinate().reflect("y")},e.prototype.afterEachView=function(t,i){this.processAxis(t,i)},e.prototype.generateFacets=function(t){var i=this,a=_(this.cfg.fields,1),n=a[0],o=[],s=1,l=1,f=[""],u=[""],h,c;return this.cfg.transpose?(h=n,f=this.getFieldValues(t,h).slice(0,2),s=f.length):(c=n,u=this.getFieldValues(t,c).slice(0,2),l=u.length),f.forEach(function(p,v){u.forEach(function(m,g){var y=[{field:h,value:p,values:f},{field:c,value:m,values:u}],w=St(t,i.getFacetDataFilter(y)),x={type:i.cfg.type,data:w,region:i.getRegion(l,s,v,g),columnValue:p,rowValue:m,columnField:h,rowField:c,columnIndex:v,rowIndex:g,columnValuesLength:s,rowValuesLength:l};o.push(x)})}),o},e.prototype.getXAxisOption=function(t,i,a,n){return n.columnIndex===1||n.rowIndex===1?d(d({},a),{label:null,title:null}):a},e.prototype.getYAxisOption=function(t,i,a,n){return a},e.prototype.renderTitle=function(){var t=this;M(this.facets,function(i,a){var n=i.columnValue,o=i.rowValue,s=i.view,l=b(t.cfg.title,"formatter");if(t.cfg.transpose){var f=O({position:["50%","0%"],content:l?l(n):n},le(F.TOP),t.cfg.title);s.annotation().text(f)}else{var f=O({position:["100%","50%"],content:l?l(o):o},le(F.RIGHT),t.cfg.title);s.annotation().text(f)}})},e}(ge),C0=tI;var eI=function(r){S(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.afterEachView=function(t,i){this.processAxis(t,i)},e.prototype.beforeEachView=function(t,i){},e.prototype.getDefaultCfg=function(){return O({},r.prototype.getDefaultCfg.call(this),{type:"rect",columnTitle:d({},r.prototype.getDefaultTitleCfg.call(this)),rowTitle:d({},r.prototype.getDefaultTitleCfg.call(this))})},e.prototype.render=function(){r.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},e.prototype.generateFacets=function(t){var i=this,a=_(this.cfg.fields,2),n=a[0],o=a[1],s=[],l=1,f=1,u=[""],h=[""];return n&&(u=this.getFieldValues(t,n),l=u.length),o&&(h=this.getFieldValues(t,o),f=h.length),u.forEach(function(c,p){h.forEach(function(v,m){var g=[{field:n,value:c,values:u},{field:o,value:v,values:h}],y=St(t,i.getFacetDataFilter(g)),w={type:i.cfg.type,data:y,region:i.getRegion(f,l,p,m),columnValue:c,rowValue:v,columnField:n,rowField:o,columnIndex:p,rowIndex:m,columnValuesLength:l,rowValuesLength:f};s.push(w)})}),s},e.prototype.renderTitle=function(){var t=this;M(this.facets,function(i,a){var n=i.columnIndex,o=i.rowIndex,s=i.columnValuesLength,l=i.columnValue,f=i.rowValue,u=i.view;if(o===0){var h=b(t.cfg.columnTitle,"formatter"),c=O({position:["50%","0%"],content:h?h(l):l},le(F.TOP),t.cfg.columnTitle);u.annotation().text(c)}if(n===s-1){var h=b(t.cfg.rowTitle,"formatter"),c=O({position:["100%","50%"],content:h?h(f):f},le(F.RIGHT),t.cfg.rowTitle);u.annotation().text(c)}})},e.prototype.getXAxisOption=function(t,i,a,n){return n.rowIndex!==n.rowValuesLength-1?d(d({},a),{title:null,label:null}):n.columnIndex!==Math.floor((n.columnValuesLength-1)/2)?d(d({},a),{title:null}):a},e.prototype.getYAxisOption=function(t,i,a,n){return n.columnIndex!==0?d(d({},a),{title:null,label:null}):n.rowIndex!==Math.floor((n.rowValuesLength-1)/2)?d(d({},a),{title:null}):a},e}(ge),w0=eI;var rI=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.afterChartRender=function(){t.facets&&t.cfg.line&&(t.container.clear(),t.drawLines(t.facets))},t}return e.prototype.afterEachView=function(t,i){this.processAxis(t,i)},e.prototype.beforeEachView=function(t,i){},e.prototype.init=function(){r.prototype.init.call(this),this.view.on(st.AFTER_RENDER,this.afterChartRender)},e.prototype.getDefaultCfg=function(){return O({},r.prototype.getDefaultCfg.call(this),{type:"tree",line:{style:{lineWidth:1,stroke:"#ddd"},smooth:!1},showTitle:!0,title:r.prototype.getDefaultTitleCfg.call(this)})},e.prototype.generateFacets=function(t){var i=this.cfg.fields;if(!i.length)throw new Error("Please specify for the fields for rootFacet!");var a=[],n={type:this.cfg.type,data:t,region:null,rowValuesLength:this.getRows(),columnValuesLength:1,rowIndex:0,columnIndex:0,rowField:"",columnField:"",rowValue:"",columnValue:""};return a.push(n),n.children=this.getChildFacets(t,1,a),this.setRegion(a),a},e.prototype.setRegion=function(t){var i=this;this.forceColIndex(t),t.forEach(function(a){a.region=i.getRegion(a.rowValuesLength,a.columnValuesLength,a.columnIndex,a.rowIndex)})},e.prototype.getRegion=function(t,i,a,n){var o=1/i,s=1/t,l={x:o*a,y:s*n},f={x:l.x+o,y:l.y+s*2/3};return{start:l,end:f}},e.prototype.forceColIndex=function(t){var i,a,n=this,o=[],s=0;t.forEach(function(v){n.isLeaf(v)&&(o.push(v),v.columnIndex=s,s++)}),o.forEach(function(v){v.columnValuesLength=o.length});for(var l=this.cfg.fields.length,f=l-1;f>=0;f--){var u=this.getFacetsByLevel(t,f);try{for(var h=(i=void 0,j(u)),c=h.next();!c.done;c=h.next()){var p=c.value;this.isLeaf(p)||(p.originColIndex=p.columnIndex,p.columnIndex=this.getRegionIndex(p.children),p.columnValuesLength=o.length)}}catch(v){i={error:v}}finally{try{c&&!c.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}}},e.prototype.getFacetsByLevel=function(t,i){var a=[];return t.forEach(function(n){n.rowIndex===i&&a.push(n)}),a},e.prototype.getRegionIndex=function(t){var i=t[0],a=t[t.length-1];return(a.columnIndex-i.columnIndex)/2+i.columnIndex},e.prototype.isLeaf=function(t){return!t.children||!t.children.length},e.prototype.getRows=function(){return this.cfg.fields.length+1},e.prototype.getChildFacets=function(t,i,a){var n=this,o=this.cfg.fields,s=o.length;if(!(s<i)){var l=[],f=o[i-1],u=this.getFieldValues(t,f);return u.forEach(function(h,c){var p=[{field:f,value:h,values:u}],v=t.filter(n.getFacetDataFilter(p));if(v.length){var m={type:n.cfg.type,data:v,region:null,columnValue:h,rowValue:"",columnField:f,rowField:"",columnIndex:c,rowValuesLength:n.getRows(),columnValuesLength:1,rowIndex:i,children:n.getChildFacets(v,i+1,a)};l.push(m),a.push(m)}}),l}},e.prototype.render=function(){r.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},e.prototype.renderTitle=function(){var t=this;M(this.facets,function(i){var a=i.columnValue,n=i.view,o=b(t.cfg.title,"formatter"),s=O({position:["50%","0%"],content:o?o(a):a},le(F.TOP),t.cfg.title);n.annotation().text(s)})},e.prototype.drawLines=function(t){var i=this;t.forEach(function(a){if(!i.isLeaf(a)){var n=a.children;i.addFacetLines(a,n)}})},e.prototype.addFacetLines=function(t,i){var a=this,n=t.view,o=n.coordinateBBox,s={x:o.x+o.width/2,y:o.y+o.height};i.forEach(function(l){var f=l.view.coordinateBBox,u={x:f.bl.x+(f.tr.x-f.bl.x)/2,y:f.tr.y},h={x:s.x,y:s.y+(u.y-s.y)/2},c={x:u.x,y:h.y};a.drawLine([s,h,c,u])})},e.prototype.getPath=function(t){var i=[],a=this.cfg.line.smooth;return a?(i.push(["M",t[0].x,t[0].y]),i.push(["C",t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y])):t.forEach(function(n,o){o===0?i.push(["M",n.x,n.y]):i.push(["L",n.x,n.y])}),i},e.prototype.drawLine=function(t){var i=this.getPath(t),a=this.cfg.line.style;this.container.addShape("path",{attrs:J({path:i},a)})},e.prototype.getXAxisOption=function(t,i,a,n){return n.rowIndex!==n.rowValuesLength-1?d(d({},a),{title:null,label:null}):a},e.prototype.getYAxisOption=function(t,i,a,n){return n.originColIndex!==0&&n.columnIndex!==0?d(d({},a),{title:null,label:null}):a},e}(ge),M0=rI;function dc(r){var e=U([],_(r),!1);e.sort(function(i,a){return i-a});var t=e.length;return t===0?0:t%2===1?e[(t-1)/2]:(e[t/2]+e[t/2-1])/2}function S0(r){var e=la(r,function(t,i){return t+=isNaN(i)||!z(i)?0:i},0);return r.length===0?0:e/r.length}function Fo(r,e){if(!e)return null;var t;switch(r){case"start":return 0;case"center":return .5;case"end":return 1;case"median":{t=e.isCategory?dc(e.values.map(function(i,a){return a})):dc(e.values);break}case"mean":{t=e.isCategory?(e.values.length-1)/2:S0(e.values);break}case"min":t=e.isCategory?0:e[r];break;case"max":t=e.isCategory?e.values.length-1:e[r];break;default:t=r;break}return e.scale(t)}var Hl=["regionFilter","shape"],iI=function(r){S(e,r);function e(t){var i=r.call(this,t)||this;return i.cache=new Map,i.foregroundContainer=i.view.getLayer(ht.FORE).addGroup(),i.backgroundContainer=i.view.getLayer(ht.BG).addGroup(),i.option=[],i}return Object.defineProperty(e.prototype,"name",{get:function(){return"annotation"},enumerable:!1,configurable:!0}),e.prototype.init=function(){},e.prototype.layout=function(){this.update()},e.prototype.render=function(){},e.prototype.update=function(){var t=this;this.onAfterRender(function(){var a=new Map;M(t.option,function(n){if(fe(Hl,n.type)){var o=t.updateOrCreate(n);o&&a.set(t.getCacheKey(n),o)}}),t.cache=t.syncCache(a)});var i=new Map;M(this.option,function(a){if(!fe(Hl,a.type)){var n=t.updateOrCreate(a);n&&i.set(t.getCacheKey(a),n)}}),this.cache=this.syncCache(i)},e.prototype.clear=function(t){t===void 0&&(t=!1),r.prototype.clear.call(this),this.clearComponents(),this.foregroundContainer.clear(),this.backgroundContainer.clear(),t&&(this.option=[])},e.prototype.destroy=function(){this.clear(!0),this.foregroundContainer.remove(!0),this.backgroundContainer.remove(!0)},e.prototype.getComponents=function(){var t=[];return this.cache.forEach(function(i){t.push(i)}),t},e.prototype.clearComponents=function(){this.getComponents().forEach(function(t){t.component.destroy()}),this.cache.clear()},e.prototype.onAfterRender=function(t){var i=!1;this.view.getOptions().animate&&this.view.geometries.forEach(function(a){a.animateOption&&(a.once(Ge.AFTER_DRAW_ANIMATE,function(){t()}),i=!0)}),i||this.view.getRootView().once(st.AFTER_RENDER,function(){t()})},e.prototype.createAnnotation=function(t){var i=t.type,a=Kn[ue(i)];if(a){var n=this.getAnnotationTheme(i),o=this.getAnnotationCfg(i,t,n);if(!o)return null;var s=new a(o);return{component:s,layer:this.isTop(o)?ht.FORE:ht.BG,direction:F.NONE,type:At.ANNOTATION,extra:t}}},e.prototype.annotation=function(t){this.option.push(t)},e.prototype.arc=function(t){return this.annotation(d({type:"arc"},t)),this},e.prototype.image=function(t){return this.annotation(d({type:"image"},t)),this},e.prototype.line=function(t){return this.annotation(d({type:"line"},t)),this},e.prototype.region=function(t){return this.annotation(d({type:"region"},t)),this},e.prototype.text=function(t){return this.annotation(d({type:"text"},t)),this},e.prototype.dataMarker=function(t){return this.annotation(d({type:"dataMarker"},t)),this},e.prototype.dataRegion=function(t){this.annotation(d({type:"dataRegion"},t))},e.prototype.regionFilter=function(t){this.annotation(d({type:"regionFilter"},t))},e.prototype.shape=function(t){this.annotation(d({type:"shape"},t))},e.prototype.html=function(t){this.annotation(d({type:"html"},t))},e.prototype.parsePosition=function(t){var i,a,n=this.view.getXScale(),o=this.view.getScalesByDim("y"),s=D(t)?t.call(null,n,o):t,l=0,f=0;if(B(s)){var u=_(s,2),h=u[0],c=u[1];if(G(h)&&h.indexOf("%")!==-1&&!isNaN(h.slice(0,-1)))return this.parsePercentPosition(s);l=Fo(h,n),f=Fo(c,Object.values(o)[0])}else if(!I(s))try{for(var p=j(Re(s)),v=p.next();!v.done;v=p.next()){var m=v.value,g=s[m];m===n.field&&(l=Fo(g,n)),o[m]&&(f=Fo(g,o[m]))}}catch(y){i={error:y}}finally{try{v&&!v.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}return isNaN(l)||isNaN(f)?null:this.view.getCoordinate().convert({x:l,y:f})},e.prototype.getRegionPoints=function(t,i){var a=this,n=this.view.getXScale(),o=this.view.getScalesByDim("y"),s=Object.values(o)[0],l=n.field,f=this.view.getData(),u=B(t)?t[0]:t[l],h=B(i)?i[0]:i[l],c=[],p;return M(f,function(v,m){if(v[l]===u&&(p=m),m>=p){var g=a.parsePosition([v[l],v[s.field]]);g&&c.push(g)}if(v[l]===h)return!1}),c},e.prototype.parsePercentPosition=function(t){var i=parseFloat(t[0])/100,a=parseFloat(t[1])/100,n=this.view.getCoordinate(),o=n.start,s=n.end,l={x:Math.min(o.x,s.x),y:Math.min(o.y,s.y)},f=n.getWidth()*i+l.x,u=n.getHeight()*a+l.y;return{x:f,y:u}},e.prototype.getCoordinateBBox=function(){var t=this.view.getCoordinate(),i=t.start,a=t.end,n=t.getWidth(),o=t.getHeight(),s={x:Math.min(i.x,a.x),y:Math.min(i.y,a.y)};return{x:s.x,y:s.y,minX:s.x,minY:s.y,maxX:s.x+n,maxY:s.y+o,width:n,height:o}},e.prototype.getAnnotationCfg=function(t,i,a){var n=this,o=this.view.getCoordinate(),s=this.view.getCanvas(),l={};if(I(i))return null;var f=i.start,u=i.end,h=i.position,c=this.parsePosition(f),p=this.parsePosition(u),v=this.parsePosition(h);if(["arc","image","line","region","regionFilter"].includes(t)&&(!c||!p))return null;if(["text","dataMarker","html"].includes(t)&&!v)return null;if(t==="arc"){var m=i,g=m.start,y=m.end,w=gt(m,["start","end"]),x=lr(o,c),C=lr(o,p);x>C&&(C=Math.PI*2+C),l=d(d({},w),{center:o.getCenter(),radius:gi(o,c),startAngle:x,endAngle:C})}else if(t==="image"){var A=i,T=A.start,E=A.end,w=gt(A,["start","end"]);l=d(d({},w),{start:c,end:p,src:i.src})}else if(t==="line"){var k=i,P=k.start,L=k.end,w=gt(k,["start","end"]);l=d(d({},w),{start:c,end:p,text:b(i,"text",null)})}else if(t==="region"){var R=i,N=R.start,H=R.end,w=gt(R,["start","end"]);l=d(d({},w),{start:c,end:p})}else if(t==="text"){var V=this.view.getData(),Q=i,mt=Q.position,ct=Q.content,w=gt(Q,["position","content"]),bt=ct;D(ct)&&(bt=ct(V)),l=d(d(d({},v),w),{content:bt})}else if(t==="dataMarker"){var it=i,Nt=it.position,te=it.point,je=it.line,Vr=it.text,Go=it.autoAdjust,Ze=it.direction,w=gt(it,["position","point","line","text","autoAdjust","direction"]);l=d(d(d({},w),v),{coordinateBBox:this.getCoordinateBBox(),point:te,line:je,text:Vr,autoAdjust:Go,direction:Ze})}else if(t==="dataRegion"){var zr=i,Yo=zr.start,Ho=zr.end,oa=zr.region,Vr=zr.text,af=zr.lineLength,w=gt(zr,["start","end","region","text","lineLength"]);l=d(d({},w),{points:this.getRegionPoints(Yo,Ho),region:oa,text:Vr,lineLength:af})}else if(t==="regionFilter"){var Ei=i,xP=Ei.start,CP=Ei.end,Pc=Ei.apply,wC=Ei.color,w=gt(Ei,["start","end","apply","color"]),MC=this.view.geometries,Bc=[],nf=function(Qe){Qe&&(Qe.isGroup()?Qe.getChildren().forEach(function(dn){return nf(dn)}):Bc.push(Qe))};M(MC,function(Qe){Pc?fe(Pc,Qe.type)&&M(Qe.elements,function(dn){nf(dn.shape)}):M(Qe.elements,function(dn){nf(dn.shape)})}),l=d(d({},w),{color:wC,shapes:Bc,start:c,end:p})}else if(t==="shape"){var kc=i,SC=kc.render,of=gt(kc,["render"]),AC=function(TC){if(D(i.render))return SC(TC,n.view,{parsePosition:n.parsePosition.bind(n)})};l=d(d({},of),{render:AC})}else if(t==="html"){var sf=i,lf=sf.html,wP=sf.position,of=gt(sf,["html","position"]),bC=function(Qe){return D(lf)?lf(Qe,n.view):lf};l=d(d(d({},of),v),{parent:s.get("el").parentNode,html:bC})}var Xr=O({},a,d(d({},l),{top:i.top,style:i.style,offsetX:i.offsetX,offsetY:i.offsetY}));return t!=="html"&&(Xr.container=this.getComponentContainer(Xr)),Xr.animate=this.view.getOptions().animate&&Xr.animate&&b(i,"animate",Xr.animate),Xr.animateOption=O({},Fr,Xr.animateOption,i.animateOption),Xr},e.prototype.isTop=function(t){return b(t,"top",!0)},e.prototype.getComponentContainer=function(t){return this.isTop(t)?this.foregroundContainer:this.backgroundContainer},e.prototype.getAnnotationTheme=function(t){return b(this.view.getTheme(),["components","annotation",t],{})},e.prototype.updateOrCreate=function(t){var i=this.cache.get(this.getCacheKey(t));if(i){var a=t.type,n=this.getAnnotationTheme(a),o=this.getAnnotationCfg(a,t,n);o&&Xt(o,["container"]),i.component.update(d(d({},o||{}),{visible:!!o})),fe(Hl,t.type)&&i.component.render()}else i=this.createAnnotation(t),i&&(i.component.init(),fe(Hl,t.type)&&i.component.render());return i},e.prototype.syncCache=function(t){var i=this,a=new Map(this.cache);return t.forEach(function(n,o){a.set(o,n)}),a.forEach(function(n,o){ee(i.option,function(s){return o===i.getCacheKey(s)})||(n.component.destroy(),a.delete(o))}),a},e.prototype.getCacheKey=function(t){return t},e}(be),A0=iI;function gc(r,e){var t=O({},b(r,["components","axis","common"]),b(r,["components","axis",e]));return b(t,["grid"],{})}function _o(r,e,t,i){var a=[],n=e.getTicks();return r.isPolar&&n.push({value:1,text:"",tickValue:""}),n.reduce(function(o,s,l){var f=s.value;if(i)a.push({points:[r.convert(t==="y"?{x:0,y:f}:{x:f,y:0}),r.convert(t==="y"?{x:1,y:f}:{x:f,y:1})]});else if(l){var u=o.value,h=(u+f)/2;a.push({points:[r.convert(t==="y"?{x:0,y:h}:{x:h,y:0}),r.convert(t==="y"?{x:1,y:h}:{x:h,y:1})]})}return s},n[0]),a}function Vl(r,e,t,i,a){var n=e.values.length,o=[],s=t.getTicks();return s.reduce(function(l,f){var u=l?l.value:f.value,h=f.value,c=(u+h)/2;return a==="x"?o.push({points:[r.convert({x:i?h:c,y:0}),r.convert({x:i?h:c,y:1})]}):o.push({points:Mt(Array(n+1),function(p,v){return r.convert({x:v/n,y:i?h:c})})}),f},s[0]),o}function yc(r,e){var t=b(e,"grid");if(t===null)return!1;var i=b(r,"grid");return!(t===void 0&&i===null)}var bi=["container"],b0=d(d({},Fr),{appear:null}),aI=function(r){S(e,r);function e(t){var i=r.call(this,t)||this;return i.cache=new Map,i.gridContainer=i.view.getLayer(ht.BG).addGroup(),i.gridForeContainer=i.view.getLayer(ht.FORE).addGroup(),i.axisContainer=i.view.getLayer(ht.BG).addGroup(),i.axisForeContainer=i.view.getLayer(ht.FORE).addGroup(),i}return Object.defineProperty(e.prototype,"name",{get:function(){return"axis"},enumerable:!1,configurable:!0}),e.prototype.init=function(){},e.prototype.render=function(){this.update()},e.prototype.layout=function(){var t=this,i=this.view.getCoordinate();M(this.getComponents(),function(a){var n=a.component,o=a.direction,s=a.type,l=a.extra,f=l.dim,u=l.scale,h=l.alignTick,c;if(s===At.AXIS)i.isPolar?f==="x"?c=i.isTransposed?vo(i,o):Ws(i):f==="y"&&(c=i.isTransposed?Ws(i):vo(i,o)):c=vo(i,o);else if(s===At.GRID)if(i.isPolar){var p=void 0;i.isTransposed?p=f==="x"?Vl(i,t.view.getYScales()[0],u,h,f):_o(i,u,f,h):p=f==="x"?_o(i,u,f,h):Vl(i,t.view.getXScale(),u,h,f),c={items:p,center:t.view.getCoordinate().getCenter()}}else c={items:_o(i,u,f,h)};n.update(c)})},e.prototype.update=function(){this.option=this.view.getOptions().axes;var t=new Map;this.updateXAxes(t),this.updateYAxes(t);var i=new Map;this.cache.forEach(function(a,n){t.has(n)?i.set(n,a):a.component.destroy()}),this.cache=i},e.prototype.clear=function(){r.prototype.clear.call(this),this.cache.clear(),this.gridContainer.clear(),this.gridForeContainer.clear(),this.axisContainer.clear(),this.axisForeContainer.clear()},e.prototype.destroy=function(){r.prototype.destroy.call(this),this.gridContainer.remove(!0),this.gridForeContainer.remove(!0),this.axisContainer.remove(!0),this.axisForeContainer.remove(!0)},e.prototype.getComponents=function(){var t=[];return this.cache.forEach(function(i){t.push(i)}),t},e.prototype.updateXAxes=function(t){var i=this.view.getXScale();if(!(!i||i.isIdentity)){var a=Ya(this.option,i.field);if(a!==!1){var n=Eh(a,F.BOTTOM),o=ht.BG,s="x",l=this.view.getCoordinate(),f=this.getId("axis",i.field),u=this.getId("grid",i.field);if(l.isRect){var h=this.cache.get(f);if(h){var c=this.getLineAxisCfg(i,a,n);Xt(c,bi),h.component.update(c),t.set(f,h)}else h=this.createLineAxis(i,a,o,n,s),this.cache.set(f,h),t.set(f,h);var p=this.cache.get(u);if(p){var c=this.getLineGridCfg(i,a,n,s);Xt(c,bi),p.component.update(c),t.set(u,p)}else p=this.createLineGrid(i,a,o,n,s),p&&(this.cache.set(u,p),t.set(u,p))}else if(l.isPolar){var h=this.cache.get(f);if(h){var c=l.isTransposed?this.getLineAxisCfg(i,a,F.RADIUS):this.getCircleAxisCfg(i,a,n);Xt(c,bi),h.component.update(c),t.set(f,h)}else{if(l.isTransposed){if(Je(a))return;h=this.createLineAxis(i,a,o,F.RADIUS,s)}else h=this.createCircleAxis(i,a,o,n,s);this.cache.set(f,h),t.set(f,h)}var p=this.cache.get(u);if(p){var c=l.isTransposed?this.getCircleGridCfg(i,a,F.RADIUS,s):this.getLineGridCfg(i,a,F.CIRCLE,s);Xt(c,bi),p.component.update(c),t.set(u,p)}else{if(l.isTransposed){if(Je(a))return;p=this.createCircleGrid(i,a,o,F.RADIUS,s)}else p=this.createLineGrid(i,a,o,F.CIRCLE,s);p&&(this.cache.set(u,p),t.set(u,p))}}}}},e.prototype.updateYAxes=function(t){var i=this,a=this.view.getYScales();M(a,function(n,o){if(!(!n||n.isIdentity)){var s=n.field,l=Ya(i.option,s);if(l!==!1){var f=ht.BG,u="y",h=i.getId("axis",s),c=i.getId("grid",s),p=i.view.getCoordinate();if(p.isRect){var v=Eh(l,o===0?F.LEFT:F.RIGHT),m=i.cache.get(h);if(m){var g=i.getLineAxisCfg(n,l,v);Xt(g,bi),m.component.update(g),t.set(h,m)}else m=i.createLineAxis(n,l,f,v,u),i.cache.set(h,m),t.set(h,m);var y=i.cache.get(c);if(y){var g=i.getLineGridCfg(n,l,v,u);Xt(g,bi),y.component.update(g),t.set(c,y)}else y=i.createLineGrid(n,l,f,v,u),y&&(i.cache.set(c,y),t.set(c,y))}else if(p.isPolar){var m=i.cache.get(h);if(m){var g=p.isTransposed?i.getCircleAxisCfg(n,l,F.CIRCLE):i.getLineAxisCfg(n,l,F.RADIUS);Xt(g,bi),m.component.update(g),t.set(h,m)}else{if(p.isTransposed){if(Je(l))return;m=i.createCircleAxis(n,l,f,F.CIRCLE,u)}else m=i.createLineAxis(n,l,f,F.RADIUS,u);i.cache.set(h,m),t.set(h,m)}var y=i.cache.get(c);if(y){var g=p.isTransposed?i.getLineGridCfg(n,l,F.CIRCLE,u):i.getCircleGridCfg(n,l,F.RADIUS,u);Xt(g,bi),y.component.update(g),t.set(c,y)}else{if(p.isTransposed){if(Je(l))return;y=i.createLineGrid(n,l,f,F.CIRCLE,u)}else y=i.createCircleGrid(n,l,f,F.RADIUS,u);y&&(i.cache.set(c,y),t.set(c,y))}}}}})},e.prototype.createLineAxis=function(t,i,a,n,o){var s={component:new Ud(this.getLineAxisCfg(t,i,n)),layer:a,direction:n===F.RADIUS?F.NONE:n,type:At.AXIS,extra:{dim:o,scale:t}};return s.component.set("field",t.field),s.component.init(),s},e.prototype.createLineGrid=function(t,i,a,n,o){var s=this.getLineGridCfg(t,i,n,o);if(s){var l={component:new Zd(s),layer:a,direction:F.NONE,type:At.GRID,extra:{dim:o,scale:t,alignTick:b(s,"alignTick",!0)}};return l.component.init(),l}},e.prototype.createCircleAxis=function(t,i,a,n,o){var s={component:new jd(this.getCircleAxisCfg(t,i,n)),layer:a,direction:n,type:At.AXIS,extra:{dim:o,scale:t}};return s.component.set("field",t.field),s.component.init(),s},e.prototype.createCircleGrid=function(t,i,a,n,o){var s=this.getCircleGridCfg(t,i,n,o);if(s){var l={component:new Qd(s),layer:a,direction:F.NONE,type:At.GRID,extra:{dim:o,scale:t,alignTick:b(s,"alignTick",!0)}};return l.component.init(),l}},e.prototype.getLineAxisCfg=function(t,i,a){var n=b(i,["top"])?this.axisForeContainer:this.axisContainer,o=this.view.getCoordinate(),s=vo(o,a),l=Lh(t,i),f=mo(this.view.getTheme(),a),u=b(i,["title"])?O({title:{style:{text:l}}},{title:Th(this.view.getTheme(),a,i.title)},i):i,h=O(d(d({container:n},s),{ticks:t.getTicks().map(function(x){return{id:"".concat(x.tickValue),name:x.text,value:x.value}}),verticalFactor:o.isPolar?bh(s,o.getCenter())*-1:bh(s,o.getCenter()),theme:f}),f,u),c=this.getAnimateCfg(h),p=c.animate,v=c.animateOption;h.animateOption=v,h.animate=p;var m=Ah(s),g=b(h,"verticalLimitLength",m?1/3:1/2);if(g<=1){var y=this.view.getCanvas().get("width"),w=this.view.getCanvas().get("height");h.verticalLimitLength=g*(m?y:w)}return h},e.prototype.getLineGridCfg=function(t,i,a,n){if(yc(mo(this.view.getTheme(),a),i)){var o=gc(this.view.getTheme(),a),s=O({container:b(i,["top"])?this.gridForeContainer:this.gridContainer},o,b(i,"grid"),this.getAnimateCfg(i));return s.items=_o(this.view.getCoordinate(),t,n,b(s,"alignTick",!0)),s}},e.prototype.getCircleAxisCfg=function(t,i,a){var n=b(i,["top"])?this.axisForeContainer:this.axisContainer,o=this.view.getCoordinate(),s=t.getTicks().map(function(m){return{id:"".concat(m.tickValue),name:m.text,value:m.value}});!t.isCategory&&Math.abs(o.endAngle-o.startAngle)===Math.PI*2&&s.length&&(s[s.length-1].name="");var l=Lh(t,i),f=mo(this.view.getTheme(),F.CIRCLE),u=b(i,["title"])?O({title:{style:{text:l}}},{title:Th(this.view.getTheme(),a,i.title)},i):i,h=O(d(d({container:n},Ws(this.view.getCoordinate())),{ticks:s,verticalFactor:1,theme:f}),f,u),c=this.getAnimateCfg(h),p=c.animate,v=c.animateOption;return h.animate=p,h.animateOption=v,h},e.prototype.getCircleGridCfg=function(t,i,a,n){if(yc(mo(this.view.getTheme(),a),i)){var o=gc(this.view.getTheme(),F.RADIUS),s=O({container:b(i,["top"])?this.gridForeContainer:this.gridContainer,center:this.view.getCoordinate().getCenter()},o,b(i,"grid"),this.getAnimateCfg(i)),l=b(s,"alignTick",!0),f=n==="x"?this.view.getYScales()[0]:this.view.getXScale();return s.items=Vl(this.view.getCoordinate(),f,t,l,n),s}},e.prototype.getId=function(t,i){var a=this.view.getCoordinate();return"".concat(t,"-").concat(i,"-").concat(a.type)},e.prototype.getAnimateCfg=function(t){return{animate:this.view.getOptions().animate&&b(t,"animate"),animateOption:t&&t.animateOption?O({},b0,t.animateOption):b0}},e}(be),T0=aI;function qe(r,e,t){return t===F.TOP?[r.minX+r.width/2-e.width/2,r.minY]:t===F.BOTTOM?[r.minX+r.width/2-e.width/2,r.maxY-e.height]:t===F.LEFT?[r.minX,r.minY+r.height/2-e.height/2]:t===F.RIGHT?[r.maxX-e.width,r.minY+r.height/2-e.height/2]:t===F.TOP_LEFT||t===F.LEFT_TOP?[r.tl.x,r.tl.y]:t===F.TOP_RIGHT||t===F.RIGHT_TOP?[r.tr.x-e.width,r.tr.y]:t===F.BOTTOM_LEFT||t===F.LEFT_BOTTOM?[r.bl.x,r.bl.y-e.height]:t===F.BOTTOM_RIGHT||t===F.RIGHT_BOTTOM?[r.br.x-e.width,r.br.y-e.height]:[0,0]}function E0(r,e){return Ke(r)?r===!1?!1:{}:b(r,[e],r)}function zl(r){return b(r,"position",F.BOTTOM)}var nI=function(r){S(e,r);function e(t){var i=r.call(this,t)||this;return i.container=i.view.getLayer(ht.FORE).addGroup(),i}return Object.defineProperty(e.prototype,"name",{get:function(){return"legend"},enumerable:!1,configurable:!0}),e.prototype.init=function(){},e.prototype.render=function(){this.update()},e.prototype.layout=function(){var t=this;this.layoutBBox=this.view.viewBBox,M(this.components,function(i){var a=i.component,n=i.direction,o=fl(n),s=a.get("maxWidthRatio"),l=a.get("maxHeightRatio"),f=t.getCategoryLegendSizeCfg(o,s,l),u=a.get("maxWidth"),h=a.get("maxHeight");a.update({maxWidth:Math.min(f.maxWidth,u||0),maxHeight:Math.min(f.maxHeight,h||0)});var c=a.get("padding"),p=a.getLayoutBBox(),v=new It(p.x,p.y,p.width,p.height).expand(c),m=_(qe(t.view.viewBBox,v,n),2),g=m[0],y=m[1],w=_(qe(t.layoutBBox,v,n),2),x=w[0],C=w[1],A=0,T=0;n.startsWith("top")||n.startsWith("bottom")?(A=g,T=C):(A=x,T=y),a.setLocation({x:A+c[3],y:T+c[0]}),t.layoutBBox=t.layoutBBox.cut(v,n)})},e.prototype.update=function(){var t=this;this.option=this.view.getOptions().legends;var i={},a=function(c,p,v){var m=t.getId(v.field),g=t.getComponentById(m);if(g){var y=void 0,w=E0(t.option,v.field);w!==!1&&(b(w,"custom")?y=t.getCategoryCfg(c,p,v,w,!0):v.isLinear?y=t.getContinuousCfg(c,p,v,w):v.isCategory&&(y=t.getCategoryCfg(c,p,v,w))),y&&(Xt(y,["container"]),g.direction=zl(w),g.component.update(y),i[m]=!0)}else{var x=t.createFieldLegend(c,p,v);x&&(x.component.init(),t.components.push(x),i[m]=!0)}};if(b(this.option,"custom")){var n="global-custom",o=this.getComponentById(n);if(o){var s=this.getCategoryCfg(void 0,void 0,void 0,this.option,!0);Xt(s,["container"]),o.component.update(s),i[n]=!0}else{var l=this.createCustomLegend(void 0,void 0,void 0,this.option);if(l){l.init();var f=ht.FORE,u=zl(this.option);this.components.push({id:n,component:l,layer:f,direction:u,type:At.LEGEND,extra:void 0}),i[n]=!0}}}else this.loopLegends(a);var h=[];M(this.getComponents(),function(c){i[c.id]?h.push(c):c.component.destroy()}),this.components=h},e.prototype.clear=function(){r.prototype.clear.call(this),this.container.clear()},e.prototype.destroy=function(){r.prototype.destroy.call(this),this.container.remove(!0)},e.prototype.getGeometries=function(t){var i=this,a=t.geometries;return M(t.views,function(n){a=a.concat(i.getGeometries(n))}),a},e.prototype.loopLegends=function(t){var i=this.view.getRootView()===this.view;if(i){var a=this.getGeometries(this.view),n={};M(a,function(o){var s=o.getGroupAttributes();M(s,function(l){var f=l.getScale(l.type);!f||f.type==="identity"||n[f.field]||(t(o,l,f),n[f.field]=!0)})})}},e.prototype.createFieldLegend=function(t,i,a){var n,o=E0(this.option,a.field),s=ht.FORE,l=zl(o);if(o!==!1&&(b(o,"custom")?n=this.createCustomLegend(t,i,a,o):a.isLinear?n=this.createContinuousLegend(t,i,a,o):a.isCategory&&(n=this.createCategoryLegend(t,i,a,o))),n)return n.set("field",a.field),{id:this.getId(a.field),component:n,layer:s,direction:l,type:At.LEGEND,extra:{scale:a}}},e.prototype.createCustomLegend=function(t,i,a,n){var o=this.getCategoryCfg(t,i,a,n,!0);return new Sh(o)},e.prototype.createContinuousLegend=function(t,i,a,n){var o=this.getContinuousCfg(t,i,a,Xt(n,["value"]));return new $d(o)},e.prototype.createCategoryLegend=function(t,i,a,n){var o=this.getCategoryCfg(t,i,a,n);return new Sh(o)},e.prototype.getContinuousCfg=function(t,i,a,n){var o=a.getTicks(),s=ee(o,function(m){return m.value===0}),l=ee(o,function(m){return m.value===1}),f=o.map(function(m){var g=m.value,y=m.tickValue,w=i.mapping(a.invert(g)).join("");return{value:y,attrValue:w,color:w,scaleValue:g}});s||f.push({value:a.min,attrValue:i.mapping(a.invert(0)).join(""),color:i.mapping(a.invert(0)).join(""),scaleValue:0}),l||f.push({value:a.max,attrValue:i.mapping(a.invert(1)).join(""),color:i.mapping(a.invert(1)).join(""),scaleValue:1}),f.sort(function(m,g){return m.value-g.value});var u={min:wt(f).value,max:nt(f).value,colors:[],rail:{type:i.type},track:{}};i.type==="size"&&(u.track={style:{fill:i.type==="size"?this.view.getTheme().defaultColor:void 0}}),i.type==="color"&&(u.colors=f.map(function(m){return m.attrValue}));var h=this.container,c=zl(n),p=fl(c),v=b(n,"title");return v&&(v=O({text:yi(a)},v)),u.container=h,u.layout=p,u.title=v,u.animateOption=Fr,this.mergeLegendCfg(u,n,"continuous")},e.prototype.getCategoryCfg=function(t,i,a,n,o){var s=this.container,l=b(n,"position",F.BOTTOM),f=jh(this.view.getTheme(),l),u=b(f,["marker"]),h=b(n,"marker"),c=fl(l),p=b(f,["pageNavigator"]),v=b(n,"pageNavigator"),m=o?ay(u,h,n.items):Uh(this.view,t,i,u,h),g=b(n,"title");g&&(g=O({text:a?yi(a):""},g));var y=b(n,"maxWidthRatio"),w=b(n,"maxHeightRatio"),x=this.getCategoryLegendSizeCfg(c,y,w);x.container=s,x.layout=c,x.items=m,x.title=g,x.animateOption=Fr,x.pageNavigator=O({},p,v);var C=this.mergeLegendCfg(x,n,l);C.reversed&&C.items.reverse();var A=b(C,"maxItemWidth");return A&&A<=1&&(C.maxItemWidth=this.view.viewBBox.width*A),C},e.prototype.mergeLegendCfg=function(t,i,a){var n=a.split("-")[0],o=jh(this.view.getTheme(),n);return O({},o,t,i)},e.prototype.getId=function(t){return"".concat(this.name,"-").concat(t)},e.prototype.getComponentById=function(t){return ee(this.components,function(i){return i.id===t})},e.prototype.getCategoryLegendSizeCfg=function(t,i,a){i===void 0&&(i=Bf),a===void 0&&(a=Bf);var n=this.view.viewBBox,o=n.width,s=n.height;return t==="vertical"?{maxWidth:o*i,maxHeight:s}:{maxWidth:o,maxHeight:s*a}},e}(be),L0=nI;var oI=function(r){S(e,r);function e(t){var i=r.call(this,t)||this;return i.onChangeFn=he,i.resetMeasure=function(){i.clear()},i.onValueChange=function(a){var n=_(a,2),o=n[0],s=n[1];i.start=o,i.end=s,i.changeViewData(o,s)},i.container=i.view.getLayer(ht.FORE).addGroup(),i.onChangeFn=Pi(i.onValueChange,20,{leading:!0}),i.width=0,i.view.on(st.BEFORE_CHANGE_DATA,i.resetMeasure),i.view.on(st.BEFORE_CHANGE_SIZE,i.resetMeasure),i}return Object.defineProperty(e.prototype,"name",{get:function(){return"slider"},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){r.prototype.destroy.call(this),this.view.off(st.BEFORE_CHANGE_DATA,this.resetMeasure),this.view.off(st.BEFORE_CHANGE_SIZE,this.resetMeasure)},e.prototype.init=function(){},e.prototype.render=function(){this.option=this.view.getOptions().slider;var t=this.getSliderCfg(),i=t.start,a=t.end;I(this.start)&&(this.start=i,this.end=a);var n=this.view.getOptions().data;this.option&&!Gt(n)?this.slider?this.slider=this.updateSlider():(this.slider=this.createSlider(),this.slider.component.on("sliderchange",this.onChangeFn)):this.slider&&(this.slider.component.destroy(),this.slider=void 0)},e.prototype.layout=function(){var t=this;if(this.option&&!this.width&&(this.measureSlider(),setTimeout(function(){t.view.destroyed||t.changeViewData(t.start,t.end)},0)),this.slider){var i=this.view.coordinateBBox.width,a=this.slider.component.get("padding"),n=_(a,4),o=n[0],s=n[1],l=n[2],f=n[3],u=this.slider.component.getLayoutBBox(),h=new It(u.x,u.y,Math.min(u.width,i),u.height).expand(a),c=this.getMinMaxText(this.start,this.end),p=c.minText,v=c.maxText,m=_(qe(this.view.viewBBox,h,F.BOTTOM),2),g=m[0],y=m[1],w=_(qe(this.view.coordinateBBox,h,F.BOTTOM),2),x=w[0],C=w[1];this.slider.component.update(d(d({},this.getSliderCfg()),{x:x+f,y:y+o,width:this.width,start:this.start,end:this.end,minText:p,maxText:v})),this.view.viewBBox=this.view.viewBBox.cut(h,F.BOTTOM)}},e.prototype.update=function(){this.render()},e.prototype.createSlider=function(){var t=this.getSliderCfg(),i=new po(d({container:this.container},t));return i.init(),{component:i,layer:ht.FORE,direction:F.BOTTOM,type:At.SLIDER}},e.prototype.updateSlider=function(){var t=this.getSliderCfg();if(this.width){var i=this.getMinMaxText(this.start,this.end),a=i.minText,n=i.maxText;t=d(d({},t),{width:this.width,start:this.start,end:this.end,minText:a,maxText:n})}return this.slider.component.update(t),this.slider},e.prototype.measureSlider=function(){var t=this.getSliderCfg().width;this.width=t},e.prototype.getSliderCfg=function(){var t={height:16,start:0,end:1,minText:"",maxText:"",x:0,y:0,width:this.view.coordinateBBox.width};if(K(this.option)){var i=d({data:this.getData()},b(this.option,"trendCfg",{}));t=O({},t,this.getThemeOptions(),this.option),t=d(d({},t),{trendCfg:i})}return t.start=ft(Math.min(I(t.start)?0:t.start,I(t.end)?1:t.end),0,1),t.end=ft(Math.max(I(t.start)?0:t.start,I(t.end)?1:t.end),0,1),t},e.prototype.getData=function(){var t=this.view.getOptions().data,i=_(this.view.getYScales(),1),a=i[0],n=this.view.getGroupScales();if(n.length){var o=n[0],s=o.field,l=o.ticks;return t.reduce(function(f,u){return u[s]===l[0]&&f.push(u[a.field]),f},[])}return t.map(function(f){return f[a.field]||0})},e.prototype.getThemeOptions=function(){var t=this.view.getTheme();return b(t,["components","slider","common"],{})},e.prototype.getMinMaxText=function(t,i){var a=this.view.getOptions().data,n=this.view.getXScale(),o=!0,s=Ut(a,n.field);n.isLinear&&(s=s.sort());var l=o?s:s.reverse(),f=Tt(a);if(!n||!f)return{};var u=Tt(l),h=Math.round(t*(u-1)),c=Math.round(i*(u-1)),p=b(l,[h]),v=b(l,[c]),m=this.getSliderCfg().formatter;return m&&(p=m(p,a[h],h),v=m(v,a[c],c)),{minText:p,maxText:v}},e.prototype.changeViewData=function(t,i){var a=this.view.getOptions().data,n=this.view.getXScale(),o=Tt(a);if(!(!n||!o)){var s=!0,l=Ut(a,n.field),f=this.view.getXScale().isLinear?l.sort(function(v,m){return Number(v)-Number(m)}):l,u=s?f:f.reverse(),h=Tt(u),c=Math.round(t*(h-1)),p=Math.round(i*(h-1));this.view.filter(n.field,function(v,m){var g=u.indexOf(v);return g>-1?Ir(g,c,p):!0}),this.view.render(!0)}},e.prototype.getComponents=function(){return this.slider?[this.slider]:[]},e.prototype.clear=function(){this.slider&&(this.slider.component.destroy(),this.slider=void 0),this.width=0,this.start=void 0,this.end=void 0},e}(be),I0=oI;var Xl=0,P0=8,sI=32,lI=20,fI=function(r){S(e,r);function e(t){var i=r.call(this,t)||this;return i.onChangeFn=he,i.resetMeasure=function(){i.clear()},i.onValueChange=function(a){var n=a.ratio,o=i.getValidScrollbarCfg().animate;i.ratio=ft(n,0,1);var s=i.view.getOptions().animate;o||i.view.animate(!1),i.changeViewData(i.getScrollRange(),!0),i.view.animate(s)},i.container=i.view.getLayer(ht.FORE).addGroup(),i.onChangeFn=Pi(i.onValueChange,20,{leading:!0}),i.trackLen=0,i.thumbLen=0,i.ratio=0,i.view.on(st.BEFORE_CHANGE_DATA,i.resetMeasure),i.view.on(st.BEFORE_CHANGE_SIZE,i.resetMeasure),i}return Object.defineProperty(e.prototype,"name",{get:function(){return"scrollbar"},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){r.prototype.destroy.call(this),this.view.off(st.BEFORE_CHANGE_DATA,this.resetMeasure),this.view.off(st.BEFORE_CHANGE_SIZE,this.resetMeasure)},e.prototype.init=function(){},e.prototype.render=function(){this.option=this.view.getOptions().scrollbar,this.option?this.scrollbar?this.scrollbar=this.updateScrollbar():(this.scrollbar=this.createScrollbar(),this.scrollbar.component.on("scrollchange",this.onChangeFn)):this.scrollbar&&(this.scrollbar.component.destroy(),this.scrollbar=void 0)},e.prototype.layout=function(){var t=this;if(this.option&&!this.trackLen&&(this.measureScrollbar(),setTimeout(function(){t.view.destroyed||t.changeViewData(t.getScrollRange(),!0)})),this.scrollbar){var i=this.view.coordinateBBox.width,a=this.scrollbar.component.get("padding"),n=this.scrollbar.component.getLayoutBBox(),o=new It(n.x,n.y,Math.min(n.width,i),n.height).expand(a),s=this.getScrollbarComponentCfg(),l=void 0,f=void 0;if(s.isHorizontal){var u=_(qe(this.view.viewBBox,o,F.BOTTOM),2),h=u[0],c=u[1],p=_(qe(this.view.coordinateBBox,o,F.BOTTOM),2),v=p[0],m=p[1];l=v,f=c}else{var g=_(qe(this.view.viewBBox,o,F.RIGHT),2),h=g[0],c=g[1],y=_(qe(this.view.viewBBox,o,F.RIGHT),2),v=y[0],m=y[1];l=v,f=c}l+=a[3],f+=a[0],this.trackLen?this.scrollbar.component.update(d(d({},s),{x:l,y:f,trackLen:this.trackLen,thumbLen:this.thumbLen,thumbOffset:(this.trackLen-this.thumbLen)*this.ratio})):this.scrollbar.component.update(d(d({},s),{x:l,y:f})),this.view.viewBBox=this.view.viewBBox.cut(o,s.isHorizontal?F.BOTTOM:F.RIGHT)}},e.prototype.update=function(){this.render()},e.prototype.getComponents=function(){return this.scrollbar?[this.scrollbar]:[]},e.prototype.clear=function(){this.scrollbar&&(this.scrollbar.component.destroy(),this.scrollbar=void 0),this.trackLen=0,this.thumbLen=0,this.ratio=0,this.cnt=0,this.step=0,this.data=void 0,this.xScaleCfg=void 0,this.yScalesCfg=[]},e.prototype.setValue=function(t){this.onValueChange({ratio:t})},e.prototype.getValue=function(){return this.ratio},e.prototype.getThemeOptions=function(){var t=this.view.getTheme();return b(t,["components","scrollbar","common"],{})},e.prototype.getScrollbarTheme=function(t){var i=b(this.view.getTheme(),["components","scrollbar"]),a=t||{},n=a.thumbHighlightColor,o=gt(a,["thumbHighlightColor"]);return{default:O({},b(i,["default","style"],{}),o),hover:O({},b(i,["hover","style"],{}),{thumbColor:n})}},e.prototype.measureScrollbar=function(){var t=this.view.getXScale(),i=this.view.getYScales().slice();this.data=this.getScrollbarData(),this.step=this.getStep(),this.cnt=this.getCnt();var a=this.getScrollbarComponentCfg(),n=a.trackLen,o=a.thumbLen;this.trackLen=n,this.thumbLen=o,this.xScaleCfg={field:t.field,values:t.values||[]},this.yScalesCfg=i},e.prototype.getScrollRange=function(){var t=Math.floor((this.cnt-this.step)*ft(this.ratio,0,1)),i=Math.min(t+this.step-1,this.cnt-1);return[t,i]},e.prototype.changeViewData=function(t,i){var a=this,n=_(t,2),o=n[0],s=n[1],l=this.getValidScrollbarCfg().type,f=l!=="vertical",u=Ut(this.data,this.xScaleCfg.field),h=this.view.getXScale().isLinear?u.sort(function(p,v){return Number(p)-Number(v)}):u,c=f?h:h.reverse();this.yScalesCfg.forEach(function(p){a.view.scale(p.field,{formatter:p.formatter,type:p.type,min:p.min,max:p.max,tickMethod:p.tickMethod})}),this.view.filter(this.xScaleCfg.field,function(p){var v=c.indexOf(p);return v>-1?Ir(v,o,s):!0}),this.view.render(!0)},e.prototype.createScrollbar=function(){var t=this.getValidScrollbarCfg().type,i=t!=="vertical",a=new Ys(d(d({container:this.container},this.getScrollbarComponentCfg()),{x:0,y:0}));return a.init(),{component:a,layer:ht.FORE,direction:i?F.BOTTOM:F.RIGHT,type:At.SCROLLBAR}},e.prototype.updateScrollbar=function(){var t=this.getScrollbarComponentCfg(),i=this.trackLen?d(d({},t),{trackLen:this.trackLen,thumbLen:this.thumbLen,thumbOffset:(this.trackLen-this.thumbLen)*this.ratio}):d({},t);return this.scrollbar.component.update(i),this.scrollbar},e.prototype.getStep=function(){if(this.step)return this.step;var t=this.view.coordinateBBox,i=this.getValidScrollbarCfg(),a=i.type,n=i.categorySize,o=a!=="vertical";return Math.floor((o?t.width:t.height)/n)},e.prototype.getCnt=function(){if(this.cnt)return this.cnt;var t=this.view.getXScale(),i=this.getScrollbarData(),a=Ut(i,t.field);return Tt(a)},e.prototype.getScrollbarComponentCfg=function(){var t=this.view,i=t.coordinateBBox,a=t.viewBBox,n=this.getValidScrollbarCfg(),o=n.type,s=n.padding,l=n.width,f=n.height,u=n.style,h=o!=="vertical",c=_(s,4),p=c[0],v=c[1],m=c[2],g=c[3],y=h?{x:i.minX+g,y:a.maxY-f-m}:{x:a.maxX-l-v,y:i.minY+p},w=this.getStep(),x=this.getCnt(),C=h?i.width-g-v:i.height-p-m,A=Math.max(C*ft(w/x,0,1),lI);return d(d({},this.getThemeOptions()),{x:y.x,y:y.y,size:h?f:l,isHorizontal:h,trackLen:C,thumbLen:A,thumbOffset:0,theme:this.getScrollbarTheme(u)})},e.prototype.getValidScrollbarCfg=function(){var t={type:"horizontal",categorySize:sI,width:P0,height:P0,padding:[0,0,0,0],animate:!0,style:{}};return K(this.option)&&(t=d(d({},t),this.option)),(!K(this.option)||!this.option.padding)&&(t.padding=t.type==="horizontal"?[Xl,0,Xl,0]:[0,Xl,0,Xl]),t},e.prototype.getScrollbarData=function(){var t=this.view.getCoordinate(),i=this.getValidScrollbarCfg(),a=this.view.getOptions().data||[];return t.isReflect("y")&&i.type==="vertical"&&(a=U([],_(a),!1).reverse()),a},e}(be),B0=fI;var uI={fill:"#CCD6EC",opacity:.3};function hI(r,e,t){var i,a,n,o,s,l,f=Gg(r,e,t);if(f.length){f=Ft(f);try{for(var u=j(f),h=u.next();!h.done;h=u.next()){var c=h.value;try{for(var p=(n=void 0,j(c)),v=p.next();!v.done;v=p.next()){var m=v.value,g=m.mappingData,y=g.x,w=g.y;m.x=B(y)?y[y.length-1]:y,m.y=B(w)?w[w.length-1]:w}}catch(L){n={error:L}}finally{try{v&&!v.done&&(o=p.return)&&o.call(p)}finally{if(n)throw n.error}}}}catch(L){i={error:L}}finally{try{h&&!h.done&&(a=u.return)&&a.call(u)}finally{if(i)throw i.error}}var x=t.shared;if(x===!1&&f.length>1){var C=f[0],A=Math.abs(e.y-C[0].y);try{for(var T=j(f),E=T.next();!E.done;E=T.next()){var k=E.value,P=Math.abs(e.y-k[0].y);P<=A&&(C=k,A=P)}}catch(L){s={error:L}}finally{try{E&&!E.done&&(l=T.return)&&l.call(T)}finally{if(s)throw s.error}}f=[C]}return Li(Ft(f))}return[]}var cI=function(r){S(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.show=function(t){var i=this.context.view,a=this.context.event,n=i.getController("tooltip").getTooltipCfg(),o=hI(i,{x:a.x,y:a.y},n);if(!ot(o,this.items)&&(this.items=o,o.length)){var s=i.getXScale().field,l=o[0].data[s],f=[],u=i.geometries;if(M(u,function(bt){if(bt.type==="interval"||bt.type==="schema"){var it=bt.getElementsBy(function(Nt){var te=Nt.getData();return te[s]===l});f=f.concat(it)}}),f.length){var h=i.getCoordinate(),c=f[0].shape.getCanvasBBox(),p=f[0].shape.getCanvasBBox(),v=c;M(f,function(bt){var it=bt.shape.getCanvasBBox();h.isTransposed?(it.minY<c.minY&&(c=it),it.maxY>p.maxY&&(p=it)):(it.minX<c.minX&&(c=it),it.maxX>p.maxX&&(p=it)),v.x=Math.min(it.minX,v.minX),v.y=Math.min(it.minY,v.minY),v.width=Math.max(it.maxX,v.maxX)-v.x,v.height=Math.max(it.maxY,v.maxY)-v.y});var m=i.backgroundGroup,g=i.coordinateBBox,y=void 0;if(h.isRect){var w=i.getXScale(),x=t||{},C=x.appendRatio,A=x.appendWidth;I(A)&&(C=I(C)?w.isLinear?0:.25:C,A=h.isTransposed?C*p.height:C*c.width);var T=void 0,E=void 0,k=void 0,P=void 0;h.isTransposed?(T=g.minX,E=Math.min(p.minY,c.minY)-A,k=g.width,P=v.height+A*2):(T=Math.min(c.minX,p.minX)-A,E=g.minY,k=v.width+A*2,P=g.height),y=[["M",T,E],["L",T+k,E],["L",T+k,E+P],["L",T,E+P],["Z"]]}else{var L=wt(f),R=nt(f),N=di(L.getModel(),h).startAngle,H=di(R.getModel(),h).endAngle,V=h.getCenter(),Q=h.getRadius(),mt=h.innerRadius*Q;y=Oe(V.x,V.y,Q,N,H,mt)}if(this.regionPath)this.regionPath.attr("path",y),this.regionPath.show();else{var ct=b(t,"style",uI);this.regionPath=m.addShape({type:"path",name:"active-region",capture:!1,attrs:d(d({},ct),{path:y})})}}}},e.prototype.hide=function(){this.regionPath&&this.regionPath.hide(),this.items=null},e.prototype.destroy=function(){this.hide(),this.regionPath&&this.regionPath.remove(!0),r.prototype.destroy.call(this)},e}(et),k0=cI;var pI=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.timeStamp=0,t}return e.prototype.show=function(){var t=this.context,i=t.event,a=t.view,n=a.isTooltipLocked();if(!n){var o=this.timeStamp,s=+new Date,l=b(t.view.getOptions(),"tooltip.showDelay",16);if(s-o>l){var f=this.location,u={x:i.x,y:i.y};(!f||!ot(f,u))&&this.showTooltip(a,u),this.timeStamp=s,this.location=u}}},e.prototype.hide=function(){var t=this.context.view,i=t.getController("tooltip"),a=this.context.event,n=a.clientX,o=a.clientY;i.isCursorEntered({x:n,y:o})||t.isTooltipLocked()||(this.hideTooltip(t),this.location=null)},e.prototype.showTooltip=function(t,i){t.showTooltip(i)},e.prototype.hideTooltip=function(t){t.hideTooltip()},e}(et),Wl=pI;var vI=function(r){S(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.showTooltip=function(t,i){var a=ye(t);M(a,function(n){var o=qs(t,n,i);n.showTooltip(o)})},e.prototype.hideTooltip=function(t){var i=ye(t);M(i,function(a){a.hideTooltip()})},e}(Wl),O0=vI;var mI=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.timeStamp=0,t}return e.prototype.destroy=function(){r.prototype.destroy.call(this),this.tooltip&&this.tooltip.destroy()},e.prototype.show=function(){var t=this.context,i=t.event,a=this.timeStamp,n=+new Date;if(n-a>16){var o=this.location,s={x:i.x,y:i.y};(!o||!ot(o,s))&&this.showTooltip(s),this.timeStamp=n,this.location=s}},e.prototype.hide=function(){this.hideTooltip(),this.location=null},e.prototype.showTooltip=function(t){var i=this.context,a=i.event,n=a.target;if(n&&n.get("tip")){if(!this.tooltip)this.renderTooltip();else{var o=i.view,s=o.canvas,l={start:{x:0,y:0},end:{x:s.get("width"),y:s.get("height")}};this.tooltip.set("region",l)}var f=n.get("tip");this.tooltip.update(d({title:f},t)),this.tooltip.show()}},e.prototype.hideTooltip=function(){this.tooltip&&this.tooltip.hide()},e.prototype.renderTooltip=function(){var t,i=this.context.view,a=i.canvas,n={start:{x:0,y:0},end:{x:a.get("width"),y:a.get("height")}},o=i.getTheme(),s=b(o,["components","tooltip","domStyles"],{}),l=new mi({parent:a.get("el").parentNode,region:n,visible:!1,crosshairs:null,domStyles:d({},O({},s,(t={},t[Ot.CONTAINER_CLASS]={"max-width":"50%"},t[Ot.TITLE_CLASS]={"word-break":"break-all"},t)))});l.init(),l.setCapture(!1),this.tooltip=l},e}(et),F0=mI;var dI=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.stateName="",t}return e.prototype.hasState=function(t){return t.hasState(this.stateName)},e.prototype.setElementState=function(t,i){t.setState(this.stateName,i)},e.prototype.setState=function(){this.setStateEnable(!0)},e.prototype.clear=function(){var t=this.context.view;this.clearViewState(t)},e.prototype.clearViewState=function(t){var i=this,a=yo(t,this.stateName);M(a,function(n){i.setElementState(n,!1)})},e}(et),nn=dI;function _0(r){return b(r.get("delegateObject"),"item")}var gI=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.ignoreListItemStates=["unchecked"],t}return e.prototype.isItemIgnore=function(t,i){var a=this.ignoreListItemStates,n=a.filter(function(o){return i.hasState(t,o)});return!!n.length},e.prototype.setStateByComponent=function(t,i,a){var n=this.context.view,o=t.get("field"),s=xt(n);this.setElementsStateByItem(s,o,i,a)},e.prototype.setStateByElement=function(t,i){this.setElementState(t,i)},e.prototype.isMathItem=function(t,i,a){var n=this.context.view,o=fr(n,i),s=$t(t,i);return!I(s)&&a.name===o.getText(s)},e.prototype.setElementsStateByItem=function(t,i,a,n){var o=this;M(t,function(s){o.isMathItem(s,i,a)&&s.setState(o.stateName,n)})},e.prototype.setStateEnable=function(t){var i=Me(this.context);if(i)Us(this.context)&&this.setStateByElement(i,t);else{var a=Fe(this.context);if(Br(a)){var n=a.item,o=a.component;if(n&&o&&!this.isItemIgnore(n,o)){var s=this.context.event.gEvent;if(s&&s.fromShape&&s.toShape&&_0(s.fromShape)===_0(s.toShape))return;this.setStateByComponent(o,n,t)}}}},e.prototype.toggle=function(){var t=Me(this.context);if(t){var i=t.hasState(this.stateName);this.setElementState(t,!i)}},e.prototype.reset=function(){this.setStateEnable(!1)},e}(nn),on=gI;var yI=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.stateName="active",t}return e.prototype.active=function(){this.setState()},e}(on),R0=yI;var xI=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.cache={},t}return e.prototype.getColorScale=function(t,i){var a=i.geometry.getAttribute("color");if(!a)return null;var n=t.getScaleByField(a.getFields()[0]);return n},e.prototype.getLinkPath=function(t,i){var a=this.context.view,n=a.getCoordinate().isTransposed,o=t.shape.getCanvasBBox(),s=i.shape.getCanvasBBox(),l=n?[["M",o.minX,o.minY],["L",s.minX,s.maxY],["L",s.maxX,s.maxY],["L",o.maxX,o.minY],["Z"]]:[["M",o.maxX,o.minY],["L",s.minX,s.minY],["L",s.minX,s.maxY],["L",o.maxX,o.maxY],["Z"]];return l},e.prototype.addLinkShape=function(t,i,a,n){var o={opacity:.4,fill:i.shape.attr("fill")};t.addShape({type:"path",attrs:d(d({},O({},o,D(n)?n(o,i):n)),{path:this.getLinkPath(i,a)})})},e.prototype.linkByElement=function(t,i){var a=this,n=this.context.view,o=this.getColorScale(n,t);if(o){var s=$t(t,o.field);if(!this.cache[s]){var l=Sg(n,o.field,s),f=this.linkGroup,u=f.addGroup();this.cache[s]=u;var h=l.length;M(l,function(c,p){if(p<h-1){var v=l[p+1];a.addLinkShape(u,c,v,i)}})}}},e.prototype.removeLink=function(t){var i=this.getColorScale(this.context.view,t);if(i){var a=$t(t,i.field);this.cache[a]&&(this.cache[a].remove(),this.cache[a]=null)}},e.prototype.link=function(t){var i=this.context;this.linkGroup||(this.linkGroup=i.view.foregroundGroup.addGroup({id:"link-by-color-group",capture:!1}));var a=Me(i);a&&this.linkByElement(a,t?.style)},e.prototype.unlink=function(){var t=Me(this.context);t&&this.removeLink(t)},e.prototype.clear=function(){this.linkGroup&&this.linkGroup.clear(),this.cache={}},e.prototype.destroy=function(){r.prototype.destroy.call(this),this.linkGroup&&this.linkGroup.remove()},e}(et),D0=xI;var CI=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.startPoint=null,t.endPoint=null,t.isStarted=!1,t.effectSiblings=!1,t.effectByRecord=!1,t}return e.prototype.getCurrentPoint=function(){var t=this.context.event;return{x:t.x,y:t.y}},e.prototype.start=function(){this.clear(),this.startPoint=this.getCurrentPoint(),this.isStarted=!0},e.prototype.getIntersectElements=function(){var t=null;if(kr(this.context))t=Ha(this.context,10);else{var i=this.startPoint,a=this.isStarted?this.getCurrentPoint():this.endPoint;if(!i||!a)return;var n={minX:Math.min(i.x,a.x),minY:Math.min(i.y,a.y),maxX:Math.max(i.x,a.x),maxY:Math.max(i.y,a.y)},o=this.context.view;t=xo(o,n)}return t},e.prototype.setStateEnable=function(t){if(this.effectSiblings&&!this.effectByRecord)this.setSiblingsState(t);else{var i=xt(this.context.view),a=this.getIntersectElements();a&&a.length?this.effectByRecord?this.setSiblingsStateByRecord(a,t):this.setElementsState(a,t,i):this.clear()}},e.prototype.setSiblingsStateByRecord=function(t,i){var a=this,n=this.context.view,o=ye(n),s=t.map(function(u){return u.getModel().data}),l=n.getXScale().field,f=n.getYScales()[0].field;M(o,function(u){var h=xt(u),c=h.filter(function(p){var v=p.getModel().data;return $s(s,v,l,f)});a.setElementsState(c,i,h)})},e.prototype.setSiblingsState=function(t){var i=this,a=this.context.view,n=ye(a);kr(this.context)&&M(n,function(o){var s=xt(o),l=Zs(i.context,o,10);l&&l.length?i.setElementsState(l,t,s):i.clearViewState(o)})},e.prototype.setElementsState=function(t,i,a){var n=this;M(a,function(o){t.includes(o)?n.setElementState(o,i):n.setElementState(o,!1)})},e.prototype.end=function(){this.isStarted=!1,this.endPoint=this.getCurrentPoint()},e.prototype.clear=function(){var t=this,i=this.context.view;if(this.effectSiblings){var a=ye(i);M(a,function(n){t.clearViewState(n)})}else this.clearViewState(i)},e}(nn),sn=CI;var wI=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.stateName="active",t}return e.prototype.active=function(){this.setState()},e}(sn),N0=wI;var MI=function(r){S(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.setStateEnable=function(t){var i=Me(this.context);if(i){if(!Us(this.context))return;t?(this.clear(),this.setElementState(i,!0)):this.hasState(i)&&this.setElementState(i,!1)}},e.prototype.toggle=function(){var t=Me(this.context);if(t){var i=this.hasState(t);i||this.clear(),this.setElementState(t,!i)}},e.prototype.reset=function(){this.setStateEnable(!1)},e}(nn),ln=MI;var SI=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.stateName="active",t}return e.prototype.active=function(){this.setState()},e}(ln),G0=SI;var Ro="inactive",Do="active";function fn(r){var e=xt(r);M(e,function(t){t.hasState(Do)&&t.setState(Do,!1),t.hasState(Ro)&&t.setState(Ro,!1)})}function ql(r,e,t){M(r,function(i){e(i)?(i.hasState(Ro)&&i.setState(Ro,!1),i.setState(Do,t)):(i.hasState(Do)&&i.setState(Do,!1),i.setState(Ro,t))})}var Ti=bn.INACTIVE,pr=bn.ACTIVE,AI=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.stateName=pr,t}return e.prototype.setElementsStateByItem=function(t,i,a,n){var o=this,s=function(l){return o.isMathItem(l,i,a)};this.setHighlightBy(t,s,n)},e.prototype.setElementHighlight=function(t,i){i(t)?(t.hasState(Ti)&&t.setState(Ti,!1),t.setState(pr,!0)):t.hasState(pr)||t.setState(Ti,!0)},e.prototype.setHighlightBy=function(t,i,a){var n=this;if(a)M(t,function(l){n.setElementHighlight(l,i)});else{var o=yo(this.context.view,pr),s=!0;M(o,function(l){if(!i(l))return s=!1,!1}),s?this.clear():M(t,function(l){i(l)&&(l.hasState(pr)&&l.setState(pr,!1),l.setState(Ti,!0))})}},e.prototype.setElementState=function(t,i){var a=this.context.view,n=xt(a);this.setHighlightBy(n,function(o){return t===o},i)},e.prototype.highlight=function(){this.setState()},e.prototype.clear=function(){var t=this.context.view;fn(t)},e}(on),un=AI;var bI=function(r){S(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.setStateByElement=function(t,i){var a=this.context.view,n=t.geometry.getAttribute("color");if(n){var o=a.getScaleByField(n.getFields()[0]),s=$t(t,o.field),l=xt(a),f=l.filter(function(u){return $t(u,o.field)===s});this.setHighlightBy(l,function(u){return f.includes(u)},i)}},e}(un),Y0=bI;var TI=function(r){S(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.setElementHighlight=function(t,i){i(t)?(t.hasState(Ti)&&t.setState(Ti,!1),t.setState(pr,!0)):(t.setState(Ti,!0),t.hasState(pr)&&t.setState(pr,!1))},e.prototype.setStateByElement=function(t,i){var a=this.context.view,n=a.getXScale(),o=$t(t,n.field),s=xt(a),l=s.filter(function(f){return $t(f,n.field)===o});this.setHighlightBy(s,function(f){return l.includes(f)},i)},e.prototype.toggle=function(){var t=Me(this.context);if(t){var i=t.hasState(this.stateName);this.setStateByElement(t,!i)}},e}(un),H0=TI;var Ue;(function(r){r.BEFORE_HIGHLIGHT="element-range-highlight:beforehighlight",r.AFTER_HIGHLIGHT="element-range-highlight:afterhighlight",r.BEFORE_CLEAR="element-range-highlight:beforeclear",r.AFTER_CLEAR="element-range-highlight:afterclear"})(Ue||(Ue={}));var EI=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.stateName="active",t}return e.prototype.clearViewState=function(t){fn(t)},e.prototype.highlight=function(){var t=this.context,i=t.view,a=t.event,n=this.getIntersectElements(),o={view:i,event:a,highlightElements:n};i.emit(Ue.BEFORE_HIGHLIGHT,_t.fromData(i,Ue.BEFORE_HIGHLIGHT,o)),this.setState(),i.emit(Ue.AFTER_HIGHLIGHT,_t.fromData(i,Ue.AFTER_HIGHLIGHT,o))},e.prototype.clear=function(){var t=this.context.view;t.emit(Ue.BEFORE_CLEAR,_t.fromData(t,Ue.BEFORE_CLEAR,{})),r.prototype.clear.call(this),t.emit(Ue.AFTER_CLEAR,_t.fromData(t,Ue.AFTER_CLEAR,{}))},e.prototype.setElementsState=function(t,i,a){ql(a,function(n){return t.indexOf(n)>=0},i)},e}(sn),xc=EI;var LI=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.stateName="active",t}return e.prototype.highlight=function(){this.setState()},e.prototype.setElementState=function(t,i){var a=this.context.view,n=xt(a);ql(n,function(o){return t===o},i)},e.prototype.clear=function(){var t=this.context.view;fn(t)},e}(ln),V0=LI;var II=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.stateName="selected",t}return e.prototype.selected=function(){this.setState()},e}(sn),z0=II;var PI=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.stateName="selected",t}return e.prototype.selected=function(){this.setState()},e}(on),X0=PI;var BI=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.stateName="selected",t}return e.prototype.selected=function(){this.setState()},e}(ln),W0=BI;var kI=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.stateName="",t.ignoreItemStates=[],t}return e.prototype.getTriggerListInfo=function(){var t=Fe(this.context),i=null;return Br(t)&&(i={item:t.item,list:t.component}),i},e.prototype.getAllowComponents=function(){var t=this,i=this.context.view,a=Qs(i),n=[];return M(a,function(o){o.isList()&&t.allowSetStateByElement(o)&&n.push(o)}),n},e.prototype.hasState=function(t,i){return t.hasState(i,this.stateName)},e.prototype.clearAllComponentsState=function(){var t=this,i=this.getAllowComponents();M(i,function(a){a.clearItemsState(t.stateName)})},e.prototype.allowSetStateByElement=function(t){var i=t.get("field");if(!i)return!1;if(this.cfg&&this.cfg.componentNames){var a=t.get("name");if(this.cfg.componentNames.indexOf(a)===-1)return!1}var n=this.context.view,o=fr(n,i);return o&&o.isCategory},e.prototype.allowSetStateByItem=function(t,i){var a=this.ignoreItemStates;if(a.length){var n=a.filter(function(o){return i.hasState(t,o)});return n.length===0}return!0},e.prototype.setStateByElement=function(t,i,a){var n=t.get("field"),o=this.context.view,s=fr(o,n),l=$t(i,n),f=s.getText(l);this.setItemsState(t,f,a)},e.prototype.setStateEnable=function(t){var i=this,a=Me(this.context);if(a){var n=this.getAllowComponents();M(n,function(f){i.setStateByElement(f,a,t)})}else{var o=Fe(this.context);if(Br(o)){var s=o.item,l=o.component;this.allowSetStateByElement(l)&&this.allowSetStateByItem(s,l)&&this.setItemState(l,s,t)}}},e.prototype.setItemsState=function(t,i,a){var n=this,o=t.getItems();M(o,function(s){s.name===i&&n.setItemState(t,s,a)})},e.prototype.setItemState=function(t,i,a){t.setItemState(i,this.stateName,a)},e.prototype.setState=function(){this.setStateEnable(!0)},e.prototype.reset=function(){this.setStateEnable(!1)},e.prototype.toggle=function(){var t=this.getTriggerListInfo();if(t&&t.item){var i=t.list,a=t.item,n=this.hasState(i,a);this.setItemState(i,a,!n)}},e.prototype.clear=function(){var t=this.getTriggerListInfo();t?t.list.clearItemsState(this.stateName):this.clearAllComponentsState()},e}(et),xe=kI;var OI=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.stateName="active",t}return e.prototype.active=function(){this.setState()},e}(xe),q0=OI;var U0="inactive",j0="active";function Z0(r){var e=r.getItems();M(e,function(t){r.hasState(t,j0)&&r.setItemState(t,j0,!1),r.hasState(t,U0)&&r.setItemState(t,U0,!1)})}var No="inactive",na="active",FI=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.stateName=na,t.ignoreItemStates=["unchecked"],t}return e.prototype.setItemsState=function(t,i,a){this.setHighlightBy(t,function(n){return n.name===i},a)},e.prototype.setItemState=function(t,i,a){var n=t.getItems();this.setHighlightBy(t,function(o){return o===i},a)},e.prototype.setHighlightBy=function(t,i,a){var n=t.getItems();if(a)M(n,function(l){i(l)?(t.hasState(l,No)&&t.setItemState(l,No,!1),t.setItemState(l,na,!0)):t.hasState(l,na)||t.setItemState(l,No,!0)});else{var o=t.getItemsByState(na),s=!0;M(o,function(l){if(!i(l))return s=!1,!1}),s?this.clear():M(n,function(l){i(l)&&(t.hasState(l,na)&&t.setItemState(l,na,!1),t.setItemState(l,No,!0))})}},e.prototype.highlight=function(){this.setState()},e.prototype.clear=function(){var t=this.getTriggerListInfo();if(t)Z0(t.list);else{var i=this.getAllowComponents();M(i,function(a){a.clearItemsState(na),a.clearItemsState(No)})}},e}(xe),Ul=FI;var _I=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.stateName="selected",t}return e.prototype.selected=function(){this.setState()},e}(xe),Q0=_I;var RI=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.stateName="unchecked",t}return e.prototype.unchecked=function(){this.setState()},e}(xe),$0=RI;var hn="unchecked",jl="checked",DI=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.stateName=jl,t}return e.prototype.setItemState=function(t,i,a){this.setCheckedBy(t,function(n){return n===i},a)},e.prototype.setCheckedBy=function(t,i,a){var n=t.getItems();a&&M(n,function(o){i(o)?(t.hasState(o,hn)&&t.setItemState(o,hn,!1),t.setItemState(o,jl,!0)):t.hasState(o,jl)||t.setItemState(o,hn,!0)})},e.prototype.toggle=function(){var t=this.getTriggerListInfo();if(t&&t.item){var i=t.list,a=t.item,n=!gr(i.getItems(),function(o){return i.hasState(o,hn)});n||i.hasState(a,hn)?this.setItemState(i,a,!0):this.reset()}},e.prototype.checked=function(){this.setState()},e.prototype.reset=function(){var t=this.getAllowComponents();M(t,function(i){i.clearItemsState(jl),i.clearItemsState(hn)})},e}(xe),K0=DI;var cn="unchecked",NI=function(r){S(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.toggle=function(){var t,i,a,n,o,s,l,f,u=this.getTriggerListInfo();if(u?.item){var h=u.list,c=u.item,p=h.getItems(),v=p.filter(function(L){return!h.hasState(L,cn)}),m=p.filter(function(L){return h.hasState(L,cn)}),g=v[0];if(p.length===v.length)try{for(var y=j(p),w=y.next();!w.done;w=y.next()){var x=w.value;h.setItemState(x,cn,x.id!==c.id)}}catch(L){t={error:L}}finally{try{w&&!w.done&&(i=y.return)&&i.call(y)}finally{if(t)throw t.error}}else if(p.length-m.length===1)if(g.id===c.id)try{for(var C=j(p),A=C.next();!A.done;A=C.next()){var x=A.value;h.setItemState(x,cn,!1)}}catch(L){a={error:L}}finally{try{A&&!A.done&&(n=C.return)&&n.call(C)}finally{if(a)throw a.error}}else try{for(var T=j(p),E=T.next();!E.done;E=T.next()){var x=E.value;h.setItemState(x,cn,x.id!==c.id)}}catch(L){o={error:L}}finally{try{E&&!E.done&&(s=T.return)&&s.call(T)}finally{if(o)throw o.error}}else try{for(var k=j(p),P=k.next();!P.done;P=k.next()){var x=P.value;h.setItemState(x,cn,x.id!==c.id)}}catch(L){l={error:L}}finally{try{P&&!P.done&&(f=k.return)&&f.call(k)}finally{if(l)throw l.error}}}},e}(xe),J0=NI;var tC="showRadio",Cc="legend-radio-tip",GI=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.timeStamp=0,t}return e.prototype.show=function(){var t=this.getTriggerListInfo();if(t?.item){var i=t.list,a=t.item;i.setItemState(a,tC,!0)}},e.prototype.hide=function(){var t=this.getTriggerListInfo();if(t?.item){var i=t.list,a=t.item;i.setItemState(a,tC,!1)}},e.prototype.destroy=function(){r.prototype.destroy.call(this),this.tooltip&&this.tooltip.destroy()},e.prototype.showTip=function(){var t=this.context,i=t.event,a=this.timeStamp,n=+new Date,o=this.context.event.target;if(n-a>16&&o.get("name")==="legend-item-radio"){var s=this.location,l={x:i.x,y:i.y};this.timeStamp=n,this.location=l,(!s||!ot(s,l))&&this.showTooltip(l)}},e.prototype.hideTip=function(){this.hideTooltip(),this.location=null},e.prototype.showTooltip=function(t){var i=this.context,a=i.event,n=a.target;if(n&&n.get("tip")){this.tooltip||this.renderTooltip();var o=i.view.getCanvas().get("el").getBoundingClientRect(),s=o.x,l=o.y;this.tooltip.update(d(d({title:n.get("tip")},t),{x:t.x+s,y:t.y+l})),this.tooltip.show()}},e.prototype.hideTooltip=function(){this.tooltip&&this.tooltip.hide()},e.prototype.renderTooltip=function(){var t,i=(t={},t[Ot.CONTAINER_CLASS]={padding:"6px 8px",transform:"translate(-50%, -80%)",background:"rgba(0,0,0,0.75)",color:"#fff","border-radius":"2px","z-index":100},t[Ot.TITLE_CLASS]={"font-size":"12px","line-height":"14px","margin-bottom":0,"word-break":"break-all"},t);document.getElementById(Cc)&&document.body.removeChild(document.getElementById(Cc));var a=new mi({parent:document.body,region:null,visible:!1,crosshairs:null,domStyles:i,containerId:Cc});a.init(),a.setCapture(!1),this.tooltip=a},e}(xe),eC=GI;var YI=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.maskShape=null,t.points=[],t.starting=!1,t.moving=!1,t.preMovePoint=null,t.shapeType="path",t}return e.prototype.getCurrentPoint=function(){var t=this.context.event;return{x:t.x,y:t.y}},e.prototype.emitEvent=function(t){var i="mask:".concat(t),a=this.context.view,n=this.context.event;a.emit(i,{target:this.maskShape,shape:this.maskShape,points:this.points,x:n.x,y:n.y})},e.prototype.createMask=function(){var t=this.context.view,i=this.getMaskAttrs(),a=t.foregroundGroup.addShape({type:this.shapeType,name:"mask",draggable:!0,attrs:d({fill:"#C5D4EB",opacity:.3},i)});return a},e.prototype.getMaskPath=function(){return[]},e.prototype.show=function(){this.maskShape&&(this.maskShape.show(),this.emitEvent("show"))},e.prototype.start=function(t){this.starting=!0,this.moving=!1,this.points=[this.getCurrentPoint()],this.maskShape||(this.maskShape=this.createMask(),this.maskShape.set("capture",!1)),this.updateMask(t?.maskStyle),this.emitEvent("start")},e.prototype.moveStart=function(){this.moving=!0,this.preMovePoint=this.getCurrentPoint()},e.prototype.move=function(){if(!(!this.moving||!this.maskShape)){var t=this.getCurrentPoint(),i=this.preMovePoint,a=t.x-i.x,n=t.y-i.y,o=this.points;M(o,function(s){s.x+=a,s.y+=n}),this.updateMask(),this.emitEvent("change"),this.preMovePoint=t}},e.prototype.updateMask=function(t){var i=O({},this.getMaskAttrs(),t);this.maskShape.attr(i)},e.prototype.moveEnd=function(){this.moving=!1,this.preMovePoint=null},e.prototype.end=function(){this.starting=!1,this.emitEvent("end"),this.maskShape&&this.maskShape.set("capture",!0)},e.prototype.hide=function(){this.maskShape&&(this.maskShape.hide(),this.emitEvent("hide"))},e.prototype.resize=function(){this.starting&&this.maskShape&&(this.points.push(this.getCurrentPoint()),this.updateMask(),this.emitEvent("change"))},e.prototype.destroy=function(){this.points=[],this.maskShape&&this.maskShape.remove(),this.maskShape=null,this.preMovePoint=null,r.prototype.destroy.call(this)},e}(et),pn=YI;function wc(r){var e=nt(r),t=0,i=0,a=0;if(r.length){var n=r[0];t=Va(n,e)/2,i=(e.x+n.x)/2,a=(e.y+n.y)/2}return{x:i,y:a,r:t}}var HI=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.shapeType="circle",t}return e.prototype.getMaskAttrs=function(){return wc(this.points)},e}(pn),rC=HI;function Mc(r){return{start:wt(r),end:nt(r)}}function Sc(r,e){var t=Math.min(r.x,e.x),i=Math.min(r.y,e.y),a=Math.abs(e.x-r.x),n=Math.abs(e.y-r.y);return{x:t,y:i,width:a,height:n}}var VI=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.shapeType="rect",t}return e.prototype.getRegion=function(){return Mc(this.points)},e.prototype.getMaskAttrs=function(){var t=this.getRegion(),i=t.start,a=t.end;return Sc(i,a)},e}(pn),Zl=VI;function iC(r){r.x=ft(r.x,0,1),r.y=ft(r.y,0,1)}function Ac(r,e,t,i){var a=null,n=null,o=i.invert(wt(r)),s=i.invert(nt(r));return t&&(iC(o),iC(s)),e==="x"?(a=i.convert({x:o.x,y:0}),n=i.convert({x:s.x,y:1})):(a=i.convert({x:0,y:o.y}),n=i.convert({x:1,y:s.y})),{start:a,end:n}}var zI=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.dim="x",t.inPlot=!0,t}return e.prototype.getRegion=function(){var t=this.context.view.getCoordinate();return Ac(this.points,this.dim,this.inPlot,t)},e}(Zl),bc=zI;function Ql(r){var e=[];return r.length&&(M(r,function(t,i){i===0?e.push(["M",t.x,t.y]):e.push(["L",t.x,t.y])}),e.push(["L",r[0].x,r[0].y])),e}function Tc(r){return{path:Ql(r)}}var XI=function(r){S(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getMaskPath=function(){return Ql(this.points)},e.prototype.getMaskAttrs=function(){return Tc(this.points)},e.prototype.addPoint=function(){this.resize()},e}(pn),$l=XI;function Kl(r){return bg(r,!0)}function Ec(r){return{path:Kl(r)}}var WI=function(r){S(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getMaskPath=function(){return Kl(this.points)},e.prototype.getMaskAttrs=function(){return Ec(this.points)},e}($l),aC=WI;var qI=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.maskShapes=[],t.starting=!1,t.moving=!1,t.recordPoints=null,t.preMovePoint=null,t.shapeType="path",t.maskType="multi-mask",t}return e.prototype.getCurrentPoint=function(){var t=this.context.event;return{x:t.x,y:t.y}},e.prototype.emitEvent=function(t){var i="".concat(this.maskType,":").concat(t),a=this.context.view,n=this.context.event,o={type:this.shapeType,name:this.maskType,get:function(s){return o.hasOwnProperty(s)?o[s]:void 0}};a.emit(i,{target:o,maskShapes:this.maskShapes,multiPoints:this.recordPoints,x:n.x,y:n.y})},e.prototype.createMask=function(t){var i=this.context.view,a=this.recordPoints[t],n=this.getMaskAttrs(a),o=i.foregroundGroup.addShape({type:this.shapeType,name:"mask",draggable:!0,attrs:d({fill:"#C5D4EB",opacity:.3},n)});this.maskShapes.push(o)},e.prototype.getMaskPath=function(t){return[]},e.prototype.show=function(){this.maskShapes.length>0&&(this.maskShapes.forEach(function(t){return t.show()}),this.emitEvent("show"))},e.prototype.start=function(t){this.recordPointStart(),this.starting=!0,this.moving=!1;var i=this.recordPoints.length-1;this.createMask(i),this.updateShapesCapture(!1),this.updateMask(t?.maskStyle),this.emitEvent("start")},e.prototype.moveStart=function(){this.moving=!0,this.preMovePoint=this.getCurrentPoint(),this.updateShapesCapture(!1)},e.prototype.move=function(){if(!(!this.moving||this.maskShapes.length===0)){var t=this.getCurrentPoint(),i=this.preMovePoint,a=t.x-i.x,n=t.y-i.y,o=this.getCurMaskShapeIndex();o>-1&&(this.recordPoints[o].forEach(function(s){s.x+=a,s.y+=n}),this.updateMask(),this.emitEvent("change"),this.preMovePoint=t)}},e.prototype.updateMask=function(t){var i=this;this.recordPoints.forEach(function(a,n){var o=O({},i.getMaskAttrs(a),t);i.maskShapes[n].attr(o)})},e.prototype.resize=function(){this.starting&&this.maskShapes.length>0&&(this.recordPointContinue(),this.updateMask(),this.emitEvent("change"))},e.prototype.moveEnd=function(){this.moving=!1,this.preMovePoint=null,this.updateShapesCapture(!0)},e.prototype.end=function(){this.starting=!1,this.emitEvent("end"),this.updateShapesCapture(!0)},e.prototype.hide=function(){this.maskShapes.length>0&&(this.maskShapes.forEach(function(t){return t.hide()}),this.emitEvent("hide"))},e.prototype.remove=function(){var t=this.getCurMaskShapeIndex();t>-1&&(this.recordPoints.splice(t,1),this.maskShapes[t].remove(),this.maskShapes.splice(t,1),this.preMovePoint=null,this.updateShapesCapture(!0),this.emitEvent("change"))},e.prototype.clearAll=function(){this.recordPointClear(),this.maskShapes.forEach(function(t){return t.remove()}),this.maskShapes=[],this.preMovePoint=null},e.prototype.clear=function(){var t=this.getCurMaskShapeIndex();t===-1?(this.recordPointClear(),this.maskShapes.forEach(function(i){return i.remove()}),this.maskShapes=[],this.emitEvent("clearAll")):(this.recordPoints.splice(t,1),this.maskShapes[t].remove(),this.maskShapes.splice(t,1),this.preMovePoint=null,this.emitEvent("clearSingle")),this.preMovePoint=null},e.prototype.destroy=function(){this.clear(),r.prototype.destroy.call(this)},e.prototype.getRecordPoints=function(){var t;return U([],_((t=this.recordPoints)!==null&&t!==void 0?t:[]),!1)},e.prototype.recordPointStart=function(){var t=this.getRecordPoints(),i=this.getCurrentPoint();this.recordPoints=U(U([],_(t),!1),[[i]],!1)},e.prototype.recordPointContinue=function(){var t=this.getRecordPoints(),i=this.getCurrentPoint(),a=t.splice(-1,1)[0]||[];a.push(i),this.recordPoints=U(U([],_(t),!1),[a],!1)},e.prototype.recordPointClear=function(){this.recordPoints=[]},e.prototype.updateShapesCapture=function(t){this.maskShapes.forEach(function(i){return i.set("capture",t)})},e.prototype.getCurMaskShapeIndex=function(){var t=this.getCurrentPoint();return this.maskShapes.findIndex(function(i){var a=i.attrs,n=a.width,o=a.height,s=a.r,l=n===0||o===0||s===0;return!l&&i.isHit(t.x,t.y)})},e}(et),vn=qI;var UI=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.shapeType="rect",t}return e.prototype.getRegion=function(t){return Mc(t)},e.prototype.getMaskAttrs=function(t){var i=this.getRegion(t),a=i.start,n=i.end;return Sc(a,n)},e}(vn),Jl=UI;var jI=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.dim="x",t.inPlot=!0,t}return e.prototype.getRegion=function(t){var i=this.context.view.getCoordinate();return Ac(t,this.dim,this.inPlot,i)},e}(Jl),Lc=jI;var ZI=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.shapeType="circle",t.getMaskAttrs=wc,t}return e}(vn),nC=ZI;var QI=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.getMaskPath=Ql,t.getMaskAttrs=Tc,t}return e.prototype.addPoint=function(){this.resize()},e}(vn),tf=QI;var $I=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.getMaskPath=Kl,t.getMaskAttrs=Ec,t}return e}(tf),oC=$I;var KI=function(r){S(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.setCursor=function(t){var i=this.context.view;i.getCanvas().setCursor(t)},e.prototype.default=function(){this.setCursor("default")},e.prototype.pointer=function(){this.setCursor("pointer")},e.prototype.move=function(){this.setCursor("move")},e.prototype.crosshair=function(){this.setCursor("crosshair")},e.prototype.wait=function(){this.setCursor("wait")},e.prototype.help=function(){this.setCursor("help")},e.prototype.text=function(){this.setCursor("text")},e.prototype.eResize=function(){this.setCursor("e-resize")},e.prototype.wResize=function(){this.setCursor("w-resize")},e.prototype.nResize=function(){this.setCursor("n-resize")},e.prototype.sResize=function(){this.setCursor("s-resize")},e.prototype.neResize=function(){this.setCursor("ne-resize")},e.prototype.nwResize=function(){this.setCursor("nw-resize")},e.prototype.seResize=function(){this.setCursor("se-resize")},e.prototype.swResize=function(){this.setCursor("sw-resize")},e.prototype.nsResize=function(){this.setCursor("ns-resize")},e.prototype.ewResize=function(){this.setCursor("ew-resize")},e.prototype.zoomIn=function(){this.setCursor("zoom-in")},e.prototype.zoomOut=function(){this.setCursor("zoom-out")},e}(et),sC=KI;var JI=function(r){S(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.filterView=function(t,i,a){var n=this;t.getScaleByField(i)&&t.filter(i,a),t.views&&t.views.length&&M(t.views,function(o){n.filterView(o,i,a)})},e.prototype.filter=function(){var t=Fe(this.context);if(t){var i=this.context.view,a=t.component,n=a.get("field");if(Br(t)){if(n){var o=a.getItemsByState("unchecked"),s=fr(i,n),l=o.map(function(p){return p.name});l.length?this.filterView(i,n,function(p){var v=s.getText(p);return!l.includes(v)}):this.filterView(i,n,null),i.render(!0)}}else if(js(t)){var f=a.getValue(),u=_(f,2),h=u[0],c=u[1];this.filterView(i,n,function(p){return p>=h&&p<=c}),i.render(!0)}}},e}(et),lC=JI;function fC(r,e,t,i){var a=Math.min(t[e],i[e]),n=Math.max(t[e],i[e]),o=_(r.range,2),s=o[0],l=o[1];if(a<s&&(a=s),n>l&&(n=l),a===l&&n===l)return null;var f=r.invert(a),u=r.invert(n);if(r.isCategory){var h=r.values.indexOf(f),c=r.values.indexOf(u),p=r.values.slice(h,c+1);return function(v){return p.includes(v)}}else return function(v){return v>=f&&v<=u}}var Ee;(function(r){r.FILTER="brush-filter-processing",r.RESET="brush-filter-reset",r.BEFORE_FILTER="brush-filter:beforefilter",r.AFTER_FILTER="brush-filter:afterfilter",r.BEFORE_RESET="brush-filter:beforereset",r.AFTER_RESET="brush-filter:afterreset"})(Ee||(Ee={}));var tP=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.dims=["x","y"],t.startPoint=null,t.isStarted=!1,t}return e.prototype.hasDim=function(t){return this.dims.includes(t)},e.prototype.start=function(){var t=this.context;this.isStarted=!0,this.startPoint=t.getCurrentPoint()},e.prototype.filter=function(){var t,i;if(kr(this.context)){var a=this.context.event.target,n=a.getCanvasBBox();t={x:n.x,y:n.y},i={x:n.maxX,y:n.maxY}}else{if(!this.isStarted)return;t=this.startPoint,i=this.context.getCurrentPoint()}if(!(Math.abs(t.x-i.x)<5||Math.abs(t.x-i.y)<5)){var o=this.context,s=o.view,l=o.event,f={view:s,event:l,dims:this.dims};s.emit(Ee.BEFORE_FILTER,_t.fromData(s,Ee.BEFORE_FILTER,f));var u=s.getCoordinate(),h=u.invert(i),c=u.invert(t);if(this.hasDim("x")){var p=s.getXScale(),v=fC(p,"x",h,c);this.filterView(s,p.field,v)}if(this.hasDim("y")){var m=s.getYScales()[0],v=fC(m,"y",h,c);this.filterView(s,m.field,v)}this.reRender(s,{source:Ee.FILTER}),s.emit(Ee.AFTER_FILTER,_t.fromData(s,Ee.AFTER_FILTER,f))}},e.prototype.end=function(){this.isStarted=!1},e.prototype.reset=function(){var t=this.context.view;if(t.emit(Ee.BEFORE_RESET,_t.fromData(t,Ee.BEFORE_RESET,{})),this.isStarted=!1,this.hasDim("x")){var i=t.getXScale();this.filterView(t,i.field,null)}if(this.hasDim("y")){var a=t.getYScales()[0];this.filterView(t,a.field,null)}this.reRender(t,{source:Ee.RESET}),t.emit(Ee.AFTER_RESET,_t.fromData(t,Ee.AFTER_RESET,{}))},e.prototype.filterView=function(t,i,a){t.filter(i,a)},e.prototype.reRender=function(t,i){t.render(!0,i)},e}(et),mn=tP;var eP=function(r){S(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.filterView=function(t,i,a){var n=ye(t);M(n,function(o){o.filter(i,a)})},e.prototype.reRender=function(t){var i=ye(t);M(i,function(a){a.render(!0)})},e}(mn),ef=eP;var rP=function(r){S(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.filter=function(){var t=Fe(this.context),i=this.context.view,a=xt(i);if(kr(this.context)){var n=Ha(this.context,10);n&&M(a,function(m){n.includes(m)?m.show():m.hide()})}else if(t){var o=t.component,s=o.get("field");if(Br(t)){if(s){var l=o.getItemsByState("unchecked"),f=fr(i,s),u=l.map(function(m){return m.name});M(a,function(m){var g=$t(m,s),y=f.getText(g);u.indexOf(y)>=0?m.hide():m.show()})}}else if(js(t)){var h=o.getValue(),c=_(h,2),p=c[0],v=c[1];M(a,function(m){var g=$t(m,s);g>=p&&g<=v?m.show():m.hide()})}}},e.prototype.clear=function(){var t=xt(this.context.view);M(t,function(i){i.show()})},e.prototype.reset=function(){this.clear()},e}(et),uC=rP;var iP=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.byRecord=!1,t}return e.prototype.filter=function(){kr(this.context)&&(this.byRecord?this.filterByRecord():this.filterByBBox())},e.prototype.filterByRecord=function(){var t=this.context.view,i=Ha(this.context,10);if(i){var a=t.getXScale().field,n=t.getYScales()[0].field,o=i.map(function(l){return l.getModel().data}),s=ye(t);M(s,function(l){var f=xt(l);M(f,function(u){var h=u.getModel().data;$s(o,h,a,n)?u.show():u.hide()})})}},e.prototype.filterByBBox=function(){var t=this,i=this.context.view,a=ye(i);M(a,function(n){var o=Zs(t.context,n,10),s=xt(n);o&&M(s,function(l){o.includes(l)?l.show():l.hide()})})},e.prototype.reset=function(){var t=ye(this.context.view);M(t,function(i){var a=xt(i);M(a,function(n){n.show()})})},e}(et),Ic=iP;var aP=10,nP=5,oP=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.buttonGroup=null,t.buttonCfg={name:"button",text:"button",textStyle:{x:0,y:0,fontSize:12,fill:"#333333",cursor:"pointer"},padding:[8,10],style:{fill:"#f7f7f7",stroke:"#cccccc",cursor:"pointer"},activeStyle:{fill:"#e6e6e6"}},t}return e.prototype.getButtonCfg=function(){return O(this.buttonCfg,this.cfg)},e.prototype.drawButton=function(){var t=this.getButtonCfg(),i=this.context.view.foregroundGroup.addGroup({name:t.name}),a=i.addShape({type:"text",name:"button-text",attrs:d({text:t.text},t.textStyle)}),n=a.getBBox(),o=Xa(t.padding),s=i.addShape({type:"rect",name:"button-rect",attrs:d({x:n.x-o[3],y:n.y-o[0],width:n.width+o[1]+o[3],height:n.height+o[0]+o[2]},t.style)});s.toBack(),i.on("mouseenter",function(){s.attr(t.activeStyle)}),i.on("mouseleave",function(){s.attr(t.style)}),this.buttonGroup=i},e.prototype.resetPosition=function(){var t=this.context.view,i=t.getCoordinate(),a=i.convert({x:1,y:1}),n=this.buttonGroup,o=n.getBBox(),s=$.transform(null,[["t",a.x-o.width-aP,a.y+o.height+nP]]);n.setMatrix(s)},e.prototype.show=function(){this.buttonGroup||this.drawButton(),this.resetPosition(),this.buttonGroup.show()},e.prototype.hide=function(){this.buttonGroup&&this.buttonGroup.hide()},e.prototype.destroy=function(){var t=this.buttonGroup;t&&t.remove(),r.prototype.destroy.call(this)},e}(et),hC=oP;var sP=4,lP=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.starting=!1,t.dragStart=!1,t}return e.prototype.start=function(){this.starting=!0,this.startPoint=this.context.getCurrentPoint()},e.prototype.drag=function(){if(this.startPoint){var t=this.context.getCurrentPoint(),i=this.context.view,a=this.context.event;this.dragStart?i.emit("drag",{target:a.target,x:a.x,y:a.y}):Va(t,this.startPoint)>sP&&(i.emit("dragstart",{target:a.target,x:a.x,y:a.y}),this.dragStart=!0)}},e.prototype.end=function(){if(this.dragStart){var t=this.context.view,i=this.context.event;t.emit("dragend",{target:i.target,x:i.x,y:i.y})}this.starting=!1,this.dragStart=!1},e}(et),cC=lP;var fP=5,uP=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.starting=!1,t.isMoving=!1,t.startPoint=null,t.startMatrix=null,t}return e.prototype.start=function(){this.starting=!0,this.startPoint=this.context.getCurrentPoint(),this.startMatrix=this.context.view.middleGroup.getMatrix()},e.prototype.move=function(){if(this.starting){var t=this.startPoint,i=this.context.getCurrentPoint(),a=Va(t,i);if(a>fP&&!this.isMoving&&(this.isMoving=!0),this.isMoving){var n=this.context.view,o=$.transform(this.startMatrix,[["t",i.x-t.x,i.y-t.y]]);n.backgroundGroup.setMatrix(o),n.foregroundGroup.setMatrix(o),n.middleGroup.setMatrix(o)}}},e.prototype.end=function(){this.isMoving&&(this.isMoving=!1),this.startMatrix=null,this.starting=!1,this.startPoint=null},e.prototype.reset=function(){this.starting=!1,this.startPoint=null,this.isMoving=!1;var t=this.context.view;t.backgroundGroup.resetMatrix(),t.foregroundGroup.resetMatrix(),t.middleGroup.resetMatrix(),this.isMoving=!1},e}(et),pC=uP;var vC="x",mC="y",hP=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.dims=[vC,mC],t.cfgFields=["dims"],t.cacheScaleDefs={},t}return e.prototype.hasDim=function(t){return this.dims.includes(t)},e.prototype.getScale=function(t){var i=this.context.view;return t==="x"?i.getXScale():i.getYScales()[0]},e.prototype.resetDim=function(t){var i=this.context.view;if(this.hasDim(t)&&this.cacheScaleDefs[t]){var a=this.getScale(t);i.scale(a.field,this.cacheScaleDefs[t]),this.cacheScaleDefs[t]=null}},e.prototype.reset=function(){this.resetDim(vC),this.resetDim(mC);var t=this.context.view;t.render(!0)},e}(et),rf=hP;var cP=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.startPoint=null,t.starting=!1,t.startCache={},t}return e.prototype.start=function(){var t=this;this.startPoint=this.context.getCurrentPoint(),this.starting=!0;var i=this.dims;M(i,function(a){var n=t.getScale(a),o=n.min,s=n.max,l=n.values;t.startCache[a]={min:o,max:s,values:l}})},e.prototype.end=function(){this.startPoint=null,this.starting=!1,this.startCache={}},e.prototype.translate=function(){var t=this;if(this.starting){var i=this.startPoint,a=this.context.view.getCoordinate(),n=this.context.getCurrentPoint(),o=a.invert(i),s=a.invert(n),l=s.x-o.x,f=s.y-o.y,u=this.context.view,h=this.dims;M(h,function(c){t.translateDim(c,{x:l*-1,y:f*-1})}),u.render(!0)}},e.prototype.translateDim=function(t,i){if(this.hasDim(t)){var a=this.getScale(t);a.isLinear&&this.translateLinear(t,a,i)}},e.prototype.translateLinear=function(t,i,a){var n=this.context.view,o=this.startCache[t],s=o.min,l=o.max,f=l-s,u=a[t]*f;this.cacheScaleDefs[t]||(this.cacheScaleDefs[t]={nice:i.nice,min:s,max:l}),n.scale(i.field,{nice:!1,min:s+u,max:l+u})},e.prototype.reset=function(){r.prototype.reset.call(this),this.startPoint=null,this.starting=!1},e}(rf),dC=cP;var pP=function(r){S(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.zoomRatio=.05,t}return e.prototype.zoomIn=function(){this.zoom(this.zoomRatio)},e.prototype.zoom=function(t){var i=this,a=this.dims;M(a,function(n){i.zoomDim(n,t)}),this.context.view.render(!0)},e.prototype.zoomOut=function(){this.zoom(-1*this.zoomRatio)},e.prototype.zoomDim=function(t,i){if(this.hasDim(t)){var a=this.getScale(t);a.isLinear&&this.zoomLinear(t,a,i)}},e.prototype.zoomLinear=function(t,i,a){var n=this.context.view;this.cacheScaleDefs[t]||(this.cacheScaleDefs[t]={nice:i.nice,min:i.min,max:i.max});var o=this.cacheScaleDefs[t],s=o.max-o.min,l=i.min,f=i.max,u=a*s,h=l-u,c=f+u,p=c-h,v=p/s;c>h&&v<100&&v>.01&&n.scale(i.field,{nice:!1,min:l-u,max:f+u})},e}(rf),gC=pP;function vP(r){var e=r.gEvent.originalEvent;return e.deltaY>0}var mP=1,dP=function(r){S(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.scroll=function(t){var i=this.context,a=i.view,n=i.event;if(a.getOptions().scrollbar){var o=t?.wheelDelta||mP,s=a.getController("scrollbar"),l=a.getXScale(),f=a.getOptions().data,u=Tt(Ut(f,l.field)),h=Tt(l.values),c=s.getValue(),p=Math.floor((u-h)*c),v=p+(vP(n)?o:-o),m=o/(u-h)/1e4,g=ft(v/(u-h)+m,0,1);s.setValue(g)}},e}(et),yC=dP;var gP="aixs-description-tooltip",yP=function(r){S(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.show=function(){var t=this.context,i=Fe(t).axis,a=i.cfg.title,n=a.description,o=a.text,s=a.descriptionTooltipStyle,l=t.event,f=l.x,u=l.y;this.tooltip||this.renderTooltip(),this.tooltip.update({title:o||"",customContent:function(){return`
          <div class="`.concat(Ot.CONTAINER_CLASS,'" style={').concat(s,`}>
            <div class="`).concat(Ot.TITLE_CLASS,`">
              \u5B57\u6BB5\u8BF4\u660E\uFF1A`).concat(n,`
            </div>
          </div>
        `)},x:f,y:u}),this.tooltip.show()},e.prototype.destroy=function(){r.prototype.destroy.call(this),this.tooltip&&this.tooltip.destroy()},e.prototype.hide=function(){this.tooltip&&this.tooltip.hide()},e.prototype.renderTooltip=function(){var t,i=this.context.view,a=i.canvas,n={start:{x:0,y:0},end:{x:a.get("width"),y:a.get("height")}},o=new mi({parent:a.get("el").parentNode,region:n,visible:!1,containerId:gP,domStyles:d({},O({},(t={},t[Ot.CONTAINER_CLASS]={"max-width":"50%",padding:"10px","line-height":"15px","font-size":"12px",color:"rgba(0, 0, 0, .65)"},t[Ot.TITLE_CLASS]={"word-break":"break-all","margin-bottom":"3px"},t)))});o.init(),o.setCapture(!1),this.tooltip=o},e}(et),xC=yP;Rh("dark",Js(sy));Wo("canvas",sc);Wo("svg",uc);Ae("Polygon",px);Ae("Interval",fx);Ae("Schema",vx);Ae("Path",tn);Ae("Point",cx);Ae("Line",ux);Ae("Area",ix);Ae("Edge",ax);Ae("Heatmap",nx);Ae("Violin",mx);Ua("base",ia);Ua("interval",xx);Ua("pie",Cx);Ua("polar",_l);ae("overlap",Bx);ae("distribute",Mx);ae("fixed-overlap",Px);ae("hide-overlap",Yx);ae("limit-in-shape",Lx);ae("limit-in-canvas",Ex);ae("limit-in-plot",t0);ae("pie-outer",Ax);ae("adjust-color",zx);ae("interval-adjust-position",Xx);ae("interval-hide-overlap",Wx);ae("point-adjust-position",jx);ae("pie-spider",Tx);ae("path-adjust-position",$x);se("fade-in",e0);se("fade-out",r0);se("grow-in-x",i0);se("grow-in-xy",n0);se("grow-in-y",a0);se("scale-in-x",l0);se("scale-in-y",f0);se("wave-in",v0);se("zoom-in",m0);se("zoom-out",d0);se("position-update",s0);se("sector-path-update",p0);se("path-in",o0);xi("rect",w0);xi("mirror",C0);xi("list",y0);xi("matrix",x0);xi("circle",g0);xi("tree",M0);Or("axis",T0);Or("legend",L0);Or("tooltip",Hh);Or("annotation",A0);Or("slider",I0);Or("scrollbar",B0);X("tooltip",Wl);X("sibling-tooltip",O0);X("ellipsis-text",F0);X("element-active",R0);X("element-single-active",G0);X("element-range-active",N0);X("element-highlight",un);X("element-highlight-by-x",H0);X("element-highlight-by-color",Y0);X("element-single-highlight",V0);X("element-range-highlight",xc);X("element-sibling-highlight",xc,{effectSiblings:!0,effectByRecord:!0});X("element-selected",X0);X("element-single-selected",W0);X("element-range-selected",z0);X("element-link-by-color",D0);X("active-region",k0);X("list-active",q0);X("list-selected",Q0);X("list-highlight",Ul);X("list-unchecked",$0);X("list-checked",K0);X("list-focus",J0);X("list-radio",eC);X("legend-item-highlight",Ul,{componentNames:["legend"]});X("axis-label-highlight",Ul,{componentNames:["axis"]});X("axis-description",xC);X("rect-mask",Zl);X("x-rect-mask",bc,{dim:"x"});X("y-rect-mask",bc,{dim:"y"});X("circle-mask",rC);X("path-mask",$l);X("smooth-path-mask",aC);X("rect-multi-mask",Jl);X("x-rect-multi-mask",Lc,{dim:"x"});X("y-rect-multi-mask",Lc,{dim:"y"});X("circle-multi-mask",nC);X("path-multi-mask",tf);X("smooth-path-multi-mask",oC);X("cursor",sC);X("data-filter",lC);X("brush",mn);X("brush-x",mn,{dims:["x"]});X("brush-y",mn,{dims:["y"]});X("sibling-filter",ef);X("sibling-x-filter",ef,{dims:"x"});X("sibling-y-filter",ef,{dims:"y"});X("element-filter",uC);X("element-sibling-filter",Ic);X("element-sibling-filter-record",Ic,{byRecord:!0});X("view-drag",cC);X("view-move",pC);X("scale-translate",dC);X("scale-zoom",gC);X("reset-button",hC,{name:"reset-button",text:"reset"});X("mousewheel-scroll",yC);function Hr(r){return r.isInPlot()}vt("tooltip",{start:[{trigger:"plot:mousemove",action:"tooltip:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"plot:touchmove",action:"tooltip:show",throttle:{wait:50,leading:!0,trailing:!1}}],end:[{trigger:"plot:mouseleave",action:"tooltip:hide"},{trigger:"plot:leave",action:"tooltip:hide"},{trigger:"plot:touchend",action:"tooltip:hide"}]});vt("ellipsis-text",{start:[{trigger:"legend-item-name:mousemove",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"legend-item-name:touchstart",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"axis-label:mousemove",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"axis-label:touchstart",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}}],end:[{trigger:"legend-item-name:mouseleave",action:"ellipsis-text:hide"},{trigger:"legend-item-name:touchend",action:"ellipsis-text:hide"},{trigger:"axis-label:mouseleave",action:"ellipsis-text:hide"},{trigger:"axis-label:mouseout",action:"ellipsis-text:hide"},{trigger:"axis-label:touchend",action:"ellipsis-text:hide"}]});vt("element-active",{start:[{trigger:"element:mouseenter",action:"element-active:active"}],end:[{trigger:"element:mouseleave",action:"element-active:reset"}]});vt("element-selected",{start:[{trigger:"element:click",action:"element-selected:toggle"}]});vt("element-highlight",{start:[{trigger:"element:mouseenter",action:"element-highlight:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight:reset"}]});vt("element-highlight-by-x",{start:[{trigger:"element:mouseenter",action:"element-highlight-by-x:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight-by-x:reset"}]});vt("element-highlight-by-color",{start:[{trigger:"element:mouseenter",action:"element-highlight-by-color:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight-by-color:reset"}]});vt("legend-active",{start:[{trigger:"legend-item:mouseenter",action:["list-active:active","element-active:active"]}],end:[{trigger:"legend-item:mouseleave",action:["list-active:reset","element-active:reset"]}]});vt("legend-highlight",{start:[{trigger:"legend-item:mouseenter",action:["legend-item-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"legend-item:mouseleave",action:["legend-item-highlight:reset","element-highlight:reset"]}]});vt("axis-label-highlight",{start:[{trigger:"axis-label:mouseenter",action:["axis-label-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"axis-label:mouseleave",action:["axis-label-highlight:reset","element-highlight:reset"]}]});vt("element-list-highlight",{start:[{trigger:"element:mouseenter",action:["list-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"element:mouseleave",action:["list-highlight:reset","element-highlight:reset"]}]});vt("element-range-highlight",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"mask:mouseenter",action:"cursor:move"},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:function(r){return!r.isInShape("mask")},action:["rect-mask:start","rect-mask:show"]},{trigger:"mask:dragstart",action:["rect-mask:moveStart"]}],processing:[{trigger:"plot:mousemove",action:["rect-mask:resize"]},{trigger:"mask:drag",action:["rect-mask:move"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["rect-mask:end"]},{trigger:"mask:dragend",action:["rect-mask:moveEnd"]},{trigger:"document:mouseup",isEnable:function(r){return!r.isInPlot()},action:["element-range-highlight:clear","rect-mask:end","rect-mask:hide"]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear","rect-mask:hide"]}]});vt("brush",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:Hr,action:["brush:start","rect-mask:start","rect-mask:show"]}],processing:[{trigger:"mousemove",isEnable:Hr,action:["rect-mask:resize"]}],end:[{trigger:"mouseup",isEnable:Hr,action:["brush:filter","brush:end","rect-mask:end","rect-mask:hide","reset-button:show"]}],rollback:[{trigger:"reset-button:click",action:["brush:reset","reset-button:hide","cursor:crosshair"]}]});vt("brush-visible",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"plot:mousedown",action:["rect-mask:start","rect-mask:show"]}],processing:[{trigger:"plot:mousemove",action:["rect-mask:resize"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["rect-mask:end","rect-mask:hide","element-filter:filter","element-range-highlight:clear"]}],rollback:[{trigger:"dblclick",action:["element-filter:clear"]}]});vt("brush-x",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:Hr,action:["brush-x:start","x-rect-mask:start","x-rect-mask:show"]}],processing:[{trigger:"mousemove",isEnable:Hr,action:["x-rect-mask:resize"]}],end:[{trigger:"mouseup",isEnable:Hr,action:["brush-x:filter","brush-x:end","x-rect-mask:end","x-rect-mask:hide"]}],rollback:[{trigger:"dblclick",action:["brush-x:reset"]}]});vt("element-path-highlight",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:Hr,action:"path-mask:start"},{trigger:"mousedown",isEnable:Hr,action:"path-mask:show"}],processing:[{trigger:"mousemove",action:"path-mask:addPoint"}],end:[{trigger:"mouseup",action:"path-mask:end"}],rollback:[{trigger:"dblclick",action:"path-mask:hide"}]});vt("brush-x-multi",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"mask:mouseenter",action:"cursor:move"},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"mousedown",isEnable:Hr,action:["x-rect-multi-mask:start","x-rect-multi-mask:show"]},{trigger:"mask:dragstart",action:["x-rect-multi-mask:moveStart"]}],processing:[{trigger:"mousemove",isEnable:function(r){return!go(r)},action:["x-rect-multi-mask:resize"]},{trigger:"multi-mask:change",action:"element-range-highlight:highlight"},{trigger:"mask:drag",action:["x-rect-multi-mask:move"]}],end:[{trigger:"mouseup",action:["x-rect-multi-mask:end"]},{trigger:"mask:dragend",action:["x-rect-multi-mask:moveEnd"]}],rollback:[{trigger:"dblclick",action:["x-rect-multi-mask:clear","cursor:crosshair"]},{trigger:"multi-mask:clearAll",action:["element-range-highlight:clear"]},{trigger:"multi-mask:clearSingle",action:["element-range-highlight:highlight"]}]});vt("element-single-selected",{start:[{trigger:"element:click",action:"element-single-selected:toggle"}]});vt("legend-filter",{showEnable:[{trigger:"legend-item:mouseenter",action:["cursor:pointer","list-radio:show"]},{trigger:"legend-item:mouseleave",action:["cursor:default","list-radio:hide"]}],start:[{trigger:"legend-item:click",isEnable:function(r){return!r.isInShape("legend-item-radio")},action:["legend-item-highlight:reset","element-highlight:reset","list-unchecked:toggle","data-filter:filter","list-radio:show"]},{trigger:"legend-item-radio:mouseenter",action:["list-radio:showTip"]},{trigger:"legend-item-radio:mouseleave",action:["list-radio:hideTip"]},{trigger:"legend-item-radio:click",action:["list-focus:toggle","data-filter:filter","list-radio:show"]}]});vt("continuous-filter",{start:[{trigger:"legend:valuechanged",action:"data-filter:filter"}]});vt("continuous-visible-filter",{start:[{trigger:"legend:valuechanged",action:"element-filter:filter"}]});vt("legend-visible-filter",{showEnable:[{trigger:"legend-item:mouseenter",action:"cursor:pointer"},{trigger:"legend-item:mouseleave",action:"cursor:default"}],start:[{trigger:"legend-item:click",action:["legend-item-highlight:reset","element-highlight:reset","list-unchecked:toggle","element-filter:filter"]}]});vt("active-region",{start:[{trigger:"plot:mousemove",action:"active-region:show"}],end:[{trigger:"plot:mouseleave",action:"active-region:hide"}]});vt("axis-description",{start:[{trigger:"axis-description:mousemove",action:"axis-description:show"}],end:[{trigger:"axis-description:mouseleave",action:"axis-description:hide"}]});function CC(r){return r.gEvent.preventDefault(),r.gEvent.originalEvent.deltaY>0}vt("view-zoom",{start:[{trigger:"plot:mousewheel",isEnable:function(r){return CC(r.event)},action:"scale-zoom:zoomOut",throttle:{wait:100,leading:!0,trailing:!1}},{trigger:"plot:mousewheel",isEnable:function(r){return!CC(r.event)},action:"scale-zoom:zoomIn",throttle:{wait:100,leading:!0,trailing:!1}}]});vt("sibling-tooltip",{start:[{trigger:"plot:mousemove",action:"sibling-tooltip:show"}],end:[{trigger:"plot:mouseleave",action:"sibling-tooltip:hide"}]});vt("plot-mousewheel-scroll",{start:[{trigger:"plot:mousewheel",action:"mousewheel-scroll:scroll"}]});(function(){let r=acquireVsCodeApi(),e="processes",t={},i=null,a=null,n=null,o={sessions:{data:[],chart:null,previous:null},queries:{data:[],chart:null,previous:null},traffic:{data:[],chart:null,previous:null}},s=document.querySelectorAll(".tab-btn"),l=document.querySelectorAll(".tab-panel"),f=document.getElementById("processesGrid"),u=document.getElementById("variablesGrid"),h=document.getElementById("statusGrid");s.forEach(P=>{P.addEventListener("click",L=>c(L.target.dataset.tab))}),window.addEventListener("message",P=>{let L=P.data;switch(L.type){case"statusInitialized":t=L.connection||{},e=t.dbType==="MySQL"?"dashboard":"processes",c(e),p();break;case"processList":g(L.data);break;case"variableList":y(L.data);break;case"statusList":w(L.data);break;case"dashboardData":x(L.data);break;case"error":E(L.message);break}});function c(P){e=P,s.forEach(L=>{L.classList.toggle("active",L.dataset.tab===P)}),l.forEach(L=>{L.id===`${P}Panel`?L.classList.remove("hidden"):L.classList.add("hidden")}),v(P)}function p(){r.postMessage({type:"processList"}),t.dbType!=="SqlServer"&&(r.postMessage({type:"variableList"}),r.postMessage({type:"statusList"})),t.dbType==="MySQL"&&(m(),setInterval(()=>{e==="dashboard"&&m()},1e3))}function v(P){switch(P){case"processes":r.postMessage({type:"processList"});break;case"variables":r.postMessage({type:"variableList"});break;case"status":r.postMessage({type:"statusList"});break;case"dashboard":m();break}}function m(){r.postMessage({type:"dashBoard"})}function g(P){if(!i&&f&&(i=new DataGrid(f,{sortable:!0,contextMenu:!1})),i&&P&&P.rows){let L=P.fields?P.fields.map(R=>({field:R.name,title:R.name})):[];i.setData(P.rows,L)}}function y(P){if(!a&&u&&(a=new DataGrid(u,{sortable:!0,contextMenu:!1})),a&&P&&P.rows){let L=P.fields?P.fields.map(R=>({field:R.name,title:R.name})):[];a.setData(P.rows,L)}}function w(P){if(!n&&h&&(n=new DataGrid(h,{sortable:!0,contextMenu:!1})),n&&P&&P.rows){let L=P.fields?P.fields.map(R=>({field:R.name,title:R.name})):[];n.setData(P.rows,L)}}function x(P){let L=new Date().toLocaleTimeString(),R=[{now:L,value:parseInt(P.connections||0),type:"connections"}],N=[{now:L,value:parseInt(P.queries||0),type:"queries"}],H=[{now:L,value:parseInt(P.bytesReceived||0),type:"received"},{now:L,value:parseInt(P.bytesSent||0),type:"sent"}];C("sessionsChart",o.sessions,R),C("queriesChart",o.queries,N,(V,Q)=>{Q&&Q.length>0&&(V[0].value=Math.max(0,V[0].value-Q[0].value))}),C("trafficChart",o.traffic,H,(V,Q)=>{Q&&Q.length>0&&V.forEach((mt,ct)=>{if(Q[ct]){let bt=Math.max(0,mt.value-Q[ct].value);mt.value=Math.round(bt/1e3)+"kb"}})})}function C(P,L,R,N){if(!document.getElementById(P))return;let H=JSON.parse(JSON.stringify(R));if(L.previous||(L.previous=H),L.data.push(...R),N&&N(R,L.previous),L.previous=H,!L.chart)L.chart=A(P,L.data);else{if(L.data.length>=R.length*100)for(let V=0;V<R.length;V++)L.data.shift();L.chart.changeData(L.data)}}function A(P,L){let R=document.getElementById(P);if(!R)return null;if(typeof wo<"u")try{let N=new wo({container:P,autoFit:!0,height:300});return N.data(L),N.line().position("now*value").color("type").size(2),N.render(),N}catch{return T(R,L),null}else return T(R,L),null}function T(P,L){P.innerHTML=`
            <div style="padding: 20px; text-align: center; color: var(--vscode-descriptionForeground);">
                <p>Chart data:</p>
                ${L.map(R=>`<div>${R.type}: ${R.value}</div>`).join("")}
            </div>
        `}function E(P){console.error("Status view error:",P);let L=document.createElement("div");L.className="error-notification",L.style.cssText=`
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--vscode-inputValidation-errorBackground);
            color: var(--vscode-inputValidation-errorForeground);
            border: 1px solid var(--vscode-inputValidation-errorBorder);
            padding: 12px 16px;
            border-radius: 4px;
            z-index: 1001;
            display: flex;
            align-items: center;
            gap: 8px;
            max-width: 400px;
        `,L.innerHTML=`<i class="codicon codicon-error"></i> ${P}`,document.body.appendChild(L),setTimeout(()=>{L.remove()},5e3)}function k(){return window.outerHeight-150}r.postMessage({type:"init"})})();
/*! Bundled license information:

tslib/tslib.es6.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)
*/
